/*

 Lodash <https://lodash.com/>
 Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 Released under MIT license <https://lodash.com/license>
 Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 AngularJS v1.6.6
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
 AngularJS v1.6.6
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
(function(a,b){"function"===typeof define&&define.amd?define(b):"object"===typeof exports?module.exports=b():a.returnExports=b()})(this,function(){var a=Function.call.bind(Function.apply),b=Function.call.bind(Function.call),c=Array.isArray,d=Object.keys,f=function(a){try{return a(),!1}catch(b){return!0}},e=function(a){try{return a()}catch(b){return!1}},h=function(b){return function(){return!a(b,this,arguments)}}(f),g=function(){return!f(function(){Object.defineProperty({},"x",{get:function(){}})})},
k=!!Object.defineProperty&&g(),m="foo"===function(){}.name,l=Function.call.bind(Array.prototype.forEach),n=Function.call.bind(Array.prototype.reduce),r=Function.call.bind(Array.prototype.filter),q=Function.call.bind(Array.prototype.some),t=function(a,b,c,d){!d&&b in a||(k?Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c}):a[b]=c)},u=function(a,b,c){l(d(b),function(d){t(a,d,b[d],!!c)})},w=Function.call.bind(Object.prototype.toString),A="function"===typeof/abc/?function(a){return"function"===
typeof a&&"[object Function]"===w(a)}:function(a){return"function"===typeof a},x={getter:function(a,b,c){if(!k)throw new TypeError("getters require true ES5 support");Object.defineProperty(a,b,{configurable:!0,enumerable:!1,get:c})},proxy:function(a,b,c){if(!k)throw new TypeError("getters require true ES5 support");var d=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(c,b,{configurable:d.configurable,enumerable:d.enumerable,get:function(){return a[b]},set:function(c){a[b]=c}})},redefine:function(a,
b,c){if(k){var d=Object.getOwnPropertyDescriptor(a,b);d.value=c;Object.defineProperty(a,b,d)}else a[b]=c},defineByDescriptor:function(a,b,c){k?Object.defineProperty(a,b,c):"value"in c&&(a[b]=c.value)},preserveToString:function(a,b){b&&A(b.toString)&&t(a,"toString",b.toString.bind(b),!0)}},E=Object.create||function(a,b){var c=function(){};c.prototype=a;var e=new c;"undefined"!==typeof b&&d(b).forEach(function(a){x.defineByDescriptor(e,a,b[a])});return e},F=function(a,b){return Object.setPrototypeOf?
e(function(){var c=function bf(b){b=new a(b);Object.setPrototypeOf(b,bf.prototype);return b};Object.setPrototypeOf(c,a);c.prototype=E(a.prototype,{constructor:{value:c}});return b(c)}):!1},y=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw Error("unable to locate global object");}(),z=y.isFinite,J=Function.call.bind(String.prototype.indexOf),H=Function.apply.bind(Array.prototype.indexOf),T=Function.call.bind(Array.prototype.concat),
I=Function.call.bind(String.prototype.slice),Q=Function.call.bind(Array.prototype.push),D=Function.apply.bind(Array.prototype.push),K=Function.call.bind(Array.prototype.shift),aa=Math.max,p=Math.min,Y=Math.floor,ba=Math.abs,N=Math.exp,qa=Math.log,Ja=Math.sqrt,fa=Function.call.bind(Object.prototype.hasOwnProperty),ia,B=function(){},ja=y.Map,zb=ja&&ja.prototype["delete"],V=ja&&ja.prototype.get,Ua=ja&&ja.prototype.has,za=ja&&ja.prototype.set,ga=y.Symbol||{},gb=ga.species||"@@species",Ca=Number.isNaN||
function(a){return a!==a},Sb=Number.isFinite||function(a){return"number"===typeof a&&z(a)},kb=A(Math.sign)?Math.sign:function(a){a=Number(a);return 0===a||Ca(a)?a:0>a?-1:1},Xa=function(a){return"[object Arguments]"===w(a)},Ga=function(a){return null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Array]"!==w(a)&&"[object Function]"===w(a.callee)},qb=Xa(arguments)?Xa:Ga,Da={primitive:function(a){return null===a||"function"!==typeof a&&"object"!==typeof a},string:function(a){return"[object String]"===
w(a)},regex:function(a){return"[object RegExp]"===w(a)},symbol:function(a){return"function"===typeof y.Symbol&&"symbol"===typeof a}},W=function(a,b,c){var d=a[b];t(a,b,c,!0);x.preserveToString(a[b],d)},Kb="function"===typeof ga&&"function"===typeof ga["for"]&&Da.symbol(ga()),db=Da.symbol(ga.iterator)?ga.iterator:"_es6-shim iterator_";y.Set&&"function"===typeof(new y.Set)["@@iterator"]&&(db="@@iterator");y.Reflect||t(y,"Reflect",{},!0);var Tb=y.Reflect,ra=String,Lb="undefined"!==typeof document&&document?
document.all:null,Na=null==Lb?function(a){return null==a}:function(a){return null==a&&a!==Lb},C={Call:function(b,c){var d=2<arguments.length?arguments[2]:[];if(!C.IsCallable(b))throw new TypeError(b+" is not a function");return a(b,c,d)},RequireObjectCoercible:function(a,b){if(Na(a))throw new TypeError(b||"Cannot call method on "+a);return a},TypeIsObject:function(a){return void 0===a||null===a||!0===a||!1===a?!1:"function"===typeof a||"object"===typeof a||a===Lb},ToObject:function(a,b){return Object(C.RequireObjectCoercible(a,
b))},IsCallable:A,IsConstructor:function(a){return C.IsCallable(a)},ToInt32:function(a){return C.ToNumber(a)>>0},ToUint32:function(a){return C.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===w(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){a=C.ToNumber(a);return Ca(a)?0:0!==a&&Sb(a)?(0<a?1:-1)*Y(ba(a)):a},ToLength:function(a){a=C.ToInteger(a);return 0>=a?0:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a},SameValue:function(a,b){return a===
b?0===a?1/a===1/b:!0:Ca(a)&&Ca(b)},SameValueZero:function(a,b){return a===b||Ca(a)&&Ca(b)},IsIterable:function(a){return C.TypeIsObject(a)&&("undefined"!==typeof a[db]||qb(a))},GetIterator:function(a){if(qb(a))return new ia(a,"value");var b=C.GetMethod(a,db);if(!C.IsCallable(b))throw new TypeError("value is not an iterable");a=C.Call(b,a);if(!C.TypeIsObject(a))throw new TypeError("bad iterator");return a},GetMethod:function(a,b){var c=C.ToObject(a)[b];if(!Na(c)){if(!C.IsCallable(c))throw new TypeError("Method not callable: "+
b);return c}},IteratorComplete:function(a){return!!a.done},IteratorClose:function(a,b){var c=C.GetMethod(a,"return");if(void 0!==c){var d,e;try{d=C.Call(c,a)}catch(f){e=f}if(!b){if(e)throw e;if(!C.TypeIsObject(d))throw new TypeError("Iterator's return method returned a non-object.");}}},IteratorNext:function(a){var b=1<arguments.length?a.next(arguments[1]):a.next();if(!C.TypeIsObject(b))throw new TypeError("bad iterator");return b},IteratorStep:function(a){a=C.IteratorNext(a);return C.IteratorComplete(a)?
!1:a},Construct:function(a,b,c,d){c="undefined"===typeof c?a:c;if(!d&&Tb.construct)return Tb.construct(a,b,c);d=c.prototype;C.TypeIsObject(d)||(d=Object.prototype);d=E(d);a=C.Call(a,d,b);return C.TypeIsObject(a)?a:d},SpeciesConstructor:function(a,b){var c=a.constructor;if(void 0===c)return b;if(!C.TypeIsObject(c))throw new TypeError("Bad constructor");c=c[gb];if(Na(c))return b;if(!C.IsConstructor(c))throw new TypeError("Bad @@species");return c},CreateHTML:function(a,b,c,d){a=C.ToString(a);var e=
"<"+b;""!==c&&(d=C.ToString(d).replace(/"/g,"&quot;"),e+=" "+c+'="'+d+'"');return e+">"+a+"</"+b+">"},IsRegExp:function(a){if(!C.TypeIsObject(a))return!1;var b=a[ga.match];return"undefined"!==typeof b?!!b:Da.regex(a)},ToString:function(a){return ra(a)}};if(k&&Kb){var Qa=function(a){if(Da.symbol(ga[a]))return ga[a];var b=ga["for"]("Symbol."+a);Object.defineProperty(ga,a,{configurable:!1,enumerable:!1,writable:!1,value:b});return b};if(!Da.symbol(ga.search)){var ac=Qa("search"),ua=String.prototype.search;
t(RegExp.prototype,ac,function(a){return C.Call(ua,a,[this])});W(String.prototype,"search",function(a){var b=C.RequireObjectCoercible(this);if(!Na(a)){var c=C.GetMethod(a,ac);if("undefined"!==typeof c)return C.Call(c,a,[b])}return C.Call(ua,b,[C.ToString(a)])})}if(!Da.symbol(ga.replace)){var hc=Qa("replace"),Mb=String.prototype.replace;t(RegExp.prototype,hc,function(a,b){return C.Call(Mb,a,[this,b])});W(String.prototype,"replace",function(a,b){var c=C.RequireObjectCoercible(this);if(!Na(a)){var d=
C.GetMethod(a,hc);if("undefined"!==typeof d)return C.Call(d,a,[c,b])}return C.Call(Mb,c,[C.ToString(a),b])})}if(!Da.symbol(ga.split)){var Ka=Qa("split"),Uc=String.prototype.split;t(RegExp.prototype,Ka,function(a,b){return C.Call(Uc,a,[this,b])});W(String.prototype,"split",function(a,b){var c=C.RequireObjectCoercible(this);if(!Na(a)){var d=C.GetMethod(a,Ka);if("undefined"!==typeof d)return C.Call(d,a,[c,b])}return C.Call(Uc,c,[C.ToString(a),b])})}var zc=Da.symbol(ga.match),sc=zc&&function(){var a=
{};a[ga.match]=function(){return 42};return 42!=="a".match(a)}();if(!zc||sc){var bc=Qa("match"),Ub=String.prototype.match;t(RegExp.prototype,bc,function(a){return C.Call(Ub,a,[this])});W(String.prototype,"match",function(a){var b=C.RequireObjectCoercible(this);if(!Na(a)){var c=C.GetMethod(a,bc);if("undefined"!==typeof c)return C.Call(c,a,[b])}return C.Call(Ub,b,[C.ToString(a)])})}}var Vb=function(a,b,c){x.preserveToString(b,a);Object.setPrototypeOf&&Object.setPrototypeOf(a,b);k?l(Object.getOwnPropertyNames(a),
function(d){d in B||c[d]||x.proxy(a,d,b)}):l(Object.keys(a),function(d){d in B||c[d]||(b[d]=a[d])});b.prototype=a.prototype;x.redefine(a.prototype,"constructor",b)},Ab=function(){return this},wa=function(a){k&&!fa(a,gb)&&x.getter(a,gb,Ab)},Ba=function(a,b){var c=b||function(){return this};t(a,db,c);!a[db]&&Da.symbol(db)&&(a[db]=c)},O=function(a,b,c){k?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,writable:!0,value:c}):a[b]=c;if(!C.SameValue(a[b],c))throw new TypeError("property is nonconfigurable");
},hb=function(a,b,c,d){if(!C.TypeIsObject(a))throw new TypeError("Constructor requires `new`: "+b.name);a=b.prototype;C.TypeIsObject(a)||(a=c);c=E(a);for(var e in d)fa(d,e)&&t(c,e,d[e],!0);return c};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Ea=String.fromCodePoint;W(String,"fromCodePoint",function(a){return C.Call(Ea,this,arguments)})}var Bb={fromCodePoint:function(a){for(var b=[],c,d=0,e=arguments.length;d<e;d++){c=Number(arguments[d]);if(!C.SameValue(c,C.ToInteger(c))||0>c||
1114111<c)throw new RangeError("Invalid code point "+c);65536>c?Q(b,String.fromCharCode(c)):(c-=65536,Q(b,String.fromCharCode((c>>10)+55296)),Q(b,String.fromCharCode(c%1024+56320)))}return b.join("")},raw:function(a){var b=C.ToObject(a,"bad callSite"),b=C.ToObject(b.raw,"bad raw value"),c=C.ToLength(b.length);if(0>=c)return"";for(var d=[],e=0,f;e<c;){f=C.ToString(e);f=C.ToString(b[f]);Q(d,f);if(e+1>=c)break;f=e+1<arguments.length?arguments[e+1]:"";f=C.ToString(f);Q(d,f);e+=1}return d.join("")}};String.raw&&
"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&W(String,"raw",Bb.raw);u(String,Bb);var Nb=function od(a,b){if(1>b)return"";if(b%2)return od(a,b-1)+a;var c=od(a,b/2);return c+c},eb={repeat:function(a){var b=C.ToString(C.RequireObjectCoercible(this));a=C.ToInteger(a);if(0>a||Infinity<=a)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Nb(b,a)},startsWith:function(a){var b=C.ToString(C.RequireObjectCoercible(this));if(C.IsRegExp(a))throw new TypeError('Cannot call method "startsWith" with a regex');
var c=C.ToString(a),d;1<arguments.length&&(d=arguments[1]);d=aa(C.ToInteger(d),0);return I(b,d,d+c.length)===c},endsWith:function(a){var b=C.ToString(C.RequireObjectCoercible(this));if(C.IsRegExp(a))throw new TypeError('Cannot call method "endsWith" with a regex');var c=C.ToString(a),d=b.length,e;1<arguments.length&&(e=arguments[1]);e="undefined"===typeof e?d:C.ToInteger(e);d=p(aa(e,0),d);return I(b,d-c.length,d)===c},includes:function(a){if(C.IsRegExp(a))throw new TypeError('"includes" does not accept a RegExp');
var b=C.ToString(a),c;1<arguments.length&&(c=arguments[1]);return-1!==J(this,b,c)},codePointAt:function(a){var b=C.ToString(C.RequireObjectCoercible(this)),c=C.ToInteger(a),d=b.length;if(0<=c&&c<d){a=b.charCodeAt(c);if(55296>a||56319<a||c+1===d)return a;b=b.charCodeAt(c+1);return 56320>b||57343<b?a:1024*(a-55296)+(b-56320)+65536}}};String.prototype.includes&&!1!=="a".includes("a",Infinity)&&W(String.prototype,"includes",eb.includes);if(String.prototype.startsWith&&String.prototype.endsWith){var Ac=
f(function(){"/a/".startsWith(/a/)}),ka=e(function(){return!1==="abc".startsWith("a",Infinity)});Ac&&ka||(W(String.prototype,"startsWith",eb.startsWith),W(String.prototype,"endsWith",eb.endsWith))}Kb&&(e(function(){var a=/a/;a[ga.match]=!1;return"/a/".startsWith(a)})||W(String.prototype,"startsWith",eb.startsWith),e(function(){var a=/a/;a[ga.match]=!1;return"/a/".endsWith(a)})||W(String.prototype,"endsWith",eb.endsWith),e(function(){var a=/a/;a[ga.match]=!1;return"/a/".includes(a)})||W(String.prototype,
"includes",eb.includes));u(String.prototype,eb);var na=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,Cb=function(){return C.ToString(C.RequireObjectCoercible(this)).replace(na,"")},lb=/[\u0085\u200b\ufffe]/g,Bc=/^[-+]0x[0-9a-f]+$/i,Ob=3!=="\u0085\u200b\ufffe".trim().length;
t(String.prototype,"trim",Cb,Ob);var rb=function(a){return{value:a,done:0===arguments.length}},xa=function(a){C.RequireObjectCoercible(a);this._s=C.ToString(a);this._i=0};xa.prototype.next=function(){var a=this._s,b=this._i;if("undefined"===typeof a||b>=a.length)return this._s=void 0,rb();var c=a.charCodeAt(b);55296>c||56319<c||b+1===a.length?c=1:(c=a.charCodeAt(b+1),c=56320>c||57343<c?1:2);this._i=b+c;return rb(a.substr(b,c))};Ba(xa.prototype);Ba(String.prototype,function(){return new xa(this)});
var ib={from:function(a){var c;1<arguments.length&&(c=arguments[1]);var d,e;if("undefined"===typeof c)d=!1;else{if(!C.IsCallable(c))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(e=arguments[2]);d=!0}var f,g,h;if("undefined"!==typeof(qb(a)||C.GetMethod(a,db))){g=C.IsConstructor(this)?Object(new this):[];f=C.GetIterator(a);var k;for(h=0;;){k=C.IteratorStep(f);if(!1===k)break;k=k.value;try{d&&(k="undefined"===typeof e?c(k,h):b(c,e,k,h)),
g[h]=k}catch(l){throw C.IteratorClose(f,!0),l;}h+=1}f=h}else{k=C.ToObject(a);f=C.ToLength(k.length);g=C.IsConstructor(this)?Object(new this(f)):Array(f);var m;for(h=0;h<f;++h)m=k[h],d&&(m="undefined"===typeof e?c(m,h):b(c,e,m,h)),O(g,h,m)}g.length=f;return g},of:function(){for(var a=arguments.length,b=c(this)||!C.IsCallable(this)?Array(a):C.Construct(this,[a]),d=0;d<a;++d)O(b,d,arguments[d]);b.length=a;return b}};u(Array,ib);wa(Array);ia=function(a,b){this.i=0;this.array=a;this.kind=b};u(ia.prototype,
{next:function(){var a=this.i,b=this.array;if(!(this instanceof ia))throw new TypeError("Not an ArrayIterator");if("undefined"!==typeof b)for(var c=C.ToLength(b.length);a<c;){var c=this.kind,d;"key"===c?d=a:"value"===c?d=b[a]:"entry"===c&&(d=[a,b[a]]);this.i=a+1;return rb(d)}this.array=void 0;return rb()}});Ba(ia.prototype);Array.of===ib.of||function(){var a=function(a){this.length=a};a.prototype=[];var b=Array.of.apply(a,[1,2]);return b instanceof a&&2===b.length}()||W(Array,"of",ib.of);var Ya={copyWithin:function(a,
b){var c=C.ToObject(this),d=C.ToLength(c.length),e=C.ToInteger(a),f=C.ToInteger(b),e=0>e?aa(d+e,0):p(e,d),f=0>f?aa(d+f,0):p(f,d),g;2<arguments.length&&(g=arguments[2]);g="undefined"===typeof g?d:C.ToInteger(g);g=0>g?aa(d+g,0):p(g,d);d=p(g-f,d-e);g=1;f<e&&e<f+d&&(g=-1,f+=d-1,e+=d-1);for(;0<d;)f in c?c[e]=c[f]:delete c[e],f+=g,e+=g,--d;return c},fill:function(a){var b;1<arguments.length&&(b=arguments[1]);var c;2<arguments.length&&(c=arguments[2]);var d=C.ToObject(this),e=C.ToLength(d.length);b=C.ToInteger("undefined"===
typeof b?0:b);c=C.ToInteger("undefined"===typeof c?e:c);b=0>b?aa(e+b,0):p(b,e);for(c=0>c?e+c:c;b<e&&b<c;++b)d[b]=a;return d},find:function(a){var c=C.ToObject(this),d=C.ToLength(c.length);if(!C.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var e=1<arguments.length?arguments[1]:null,f=0,g;f<d;f++)if(g=c[f],e){if(b(a,e,g,f,c))return g}else if(a(g,f,c))return g},findIndex:function(a){var c=C.ToObject(this),d=C.ToLength(c.length);if(!C.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");
for(var e=1<arguments.length?arguments[1]:null,f=0;f<d;f++)if(e){if(b(a,e,c[f],f,c))return f}else if(a(c[f],f,c))return f;return-1},keys:function(){return new ia(this,"key")},values:function(){return new ia(this,"value")},entries:function(){return new ia(this,"entry")}};Array.prototype.keys&&!C.IsCallable([1].keys().next)&&delete Array.prototype.keys;Array.prototype.entries&&!C.IsCallable([1].entries().next)&&delete Array.prototype.entries;Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&
Array.prototype[db]&&(u(Array.prototype,{values:Array.prototype[db]}),Da.symbol(ga.unscopables)&&(Array.prototype[ga.unscopables].values=!0));if(m&&Array.prototype.values&&"values"!==Array.prototype.values.name){var mb=Array.prototype.values;W(Array.prototype,"values",function(){return C.Call(mb,this,arguments)});t(Array.prototype,db,Array.prototype.values,!0)}u(Array.prototype,Ya);0>1/[!0].indexOf(!0,-0)&&t(Array.prototype,"indexOf",function(a){var b=H(this,arguments);return 0===b&&0>1/b?0:b},!0);
Ba(Array.prototype,function(){return this.values()});Object.getPrototypeOf&&Ba(Object.getPrototypeOf([].values()));var Za=function(){return e(function(){return 0===Array.from({length:-1}).length})}(),Ha=function(){var a=Array.from([0].entries());return 1===a.length&&c(a[0])&&0===a[0][0]&&0===a[0][1]}();Za&&Ha||W(Array,"from",ib.from);if(!function(){return e(function(){return Array.from([0],void 0)})}()){var nb=Array.from;W(Array,"from",function(a){return 1<arguments.length&&"undefined"!==typeof arguments[1]?
C.Call(nb,this,arguments):b(nb,this,a)})}var Wc=-(Math.pow(2,32)-1),Ra=function(a,c){var d={length:Wc};d[c?(d.length>>>0)-1:0]=!0;return e(function(){b(a,d,function(){throw new RangeError("should not reach here");},[]);return!0})};if(!Ra(Array.prototype.forEach)){var pd=Array.prototype.forEach;W(Array.prototype,"forEach",function(a){return C.Call(pd,0<=this.length?this:[],arguments)},!0)}if(!Ra(Array.prototype.map)){var ic=Array.prototype.map;W(Array.prototype,"map",function(a){return C.Call(ic,0<=
this.length?this:[],arguments)},!0)}if(!Ra(Array.prototype.filter)){var Xc=Array.prototype.filter;W(Array.prototype,"filter",function(a){return C.Call(Xc,0<=this.length?this:[],arguments)},!0)}if(!Ra(Array.prototype.some)){var ha=Array.prototype.some;W(Array.prototype,"some",function(a){return C.Call(ha,0<=this.length?this:[],arguments)},!0)}if(!Ra(Array.prototype.every)){var Yc=Array.prototype.every;W(Array.prototype,"every",function(a){return C.Call(Yc,0<=this.length?this:[],arguments)},!0)}if(!Ra(Array.prototype.reduce)){var Wb=
Array.prototype.reduce;W(Array.prototype,"reduce",function(a){return C.Call(Wb,0<=this.length?this:[],arguments)},!0)}if(!Ra(Array.prototype.reduceRight,!0)){var Zc=Array.prototype.reduceRight;W(Array.prototype,"reduceRight",function(a){return C.Call(Zc,0<=this.length?this:[],arguments)},!0)}var sb=8!==Number("0o10"),tc=2!==Number("0b10"),$c=q("\u0085\u200b\ufffe",function(a){return 0===Number(a+0+a)});if(sb||tc||$c){var Pb=Number,v=/^0b[01]+$/i,Db=/^0o[0-7]+$/i,Ma=v.test.bind(v),da=Db.test.bind(Db),
$a=function(a){var b;if("function"===typeof a.valueOf&&(b=a.valueOf(),Da.primitive(b))||"function"===typeof a.toString&&(b=a.toString(),Da.primitive(b)))return b;throw new TypeError("No default value");},sa=lb.test.bind(lb),Sa=Bc.test.bind(Bc),uc=function(){var a=function(b){var c;c=0<arguments.length?Da.primitive(b)?b:$a(b,"number"):0;if("string"===typeof c)if(c=C.Call(Cb,c),Ma(c))c=parseInt(I(c,2),2);else if(da(c))c=parseInt(I(c,2),8);else if(sa(c)||Sa(c))c=NaN;var d=this,f=e(function(){Pb.prototype.valueOf.call(d);
return!0});return d instanceof a&&!f?new Pb(c):Pb(c)};return a}();Vb(Pb,uc,{});u(uc,{NaN:Pb.NaN,MAX_VALUE:Pb.MAX_VALUE,MIN_VALUE:Pb.MIN_VALUE,NEGATIVE_INFINITY:Pb.NEGATIVE_INFINITY,POSITIVE_INFINITY:Pb.POSITIVE_INFINITY});Number=uc;x.redefine(y,"Number",uc)}var ab=Math.pow(2,53)-1;u(Number,{MAX_SAFE_INTEGER:ab,MIN_SAFE_INTEGER:-ab,EPSILON:2.220446049250313E-16,parseInt:y.parseInt,parseFloat:y.parseFloat,isFinite:Sb,isInteger:function(a){return Sb(a)&&C.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&
ba(a)<=Number.MAX_SAFE_INTEGER},isNaN:Ca});t(Number,"parseInt",y.parseInt,Number.parseInt!==y.parseInt);[,1].find(function(a,b){return 0===b})||W(Array.prototype,"find",Ya.find);0!==[,1].findIndex(function(a,b){return 0===b})&&W(Array.prototype,"findIndex",Ya.findIndex);var Ic=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ad=function(a,b){k&&Ic(a,b)&&Object.defineProperty(a,b,{enumerable:!1})},ed=function(){for(var a=Number(this),b=arguments.length,c=b-a,c=Array(0>c?0:c),
d=a;d<b;++d)c[d-a]=arguments[d];return c},bd=function(a){return function(b,c){b[c]=a[c];return b}},je=function(a,b){var c=d(Object(b)),e;C.IsCallable(Object.getOwnPropertySymbols)&&(e=r(Object.getOwnPropertySymbols(Object(b)),Ic(b)));return n(T(c,e||[]),bd(b),a)},qd={assign:function(a,b){var c=C.ToObject(a,"Cannot convert undefined or null to object");return n(C.Call(ed,1,arguments),je,c)},is:function(a,b){return C.SameValue(a,b)}};Object.assign&&Object.preventExtensions&&function(){var a=Object.preventExtensions({1:2});
try{Object.assign(a,"xy")}catch(b){return"y"===a[1]}}()&&W(Object,"assign",qd.assign);u(Object,qd);if(k){var Xb={setPrototypeOf:function(a,c){var d,e=function(a,c){if(!C.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==c&&!C.TypeIsObject(c))throw new TypeError("can only set prototype to an object or null"+c);b(d,a,c);return a};try{d=a.getOwnPropertyDescriptor(a.prototype,c).set,b(d,{},null)}catch(f){if(a.prototype!=={}[c])return;d=function(a){this[c]=a};e.polyfill=
e(e({},null),a.prototype)instanceof a}return e}(Object,"__proto__")};u(Object,Xb)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var a=Object.create(null),b=Object.getPrototypeOf,c=Object.setPrototypeOf;Object.getPrototypeOf=function(c){c=b(c);return c===a?null:c};Object.setPrototypeOf=function(b,d){return c(b,null===d?a:d)};Object.setPrototypeOf.polyfill=!1}();if(f(function(){Object.keys("foo")})){var Ef=
Object.keys;W(Object,"keys",function(a){return Ef(C.ToObject(a))});d=Object.keys}if(f(function(){Object.keys(/a/g)})){var ke=Object.keys;W(Object,"keys",function(a){if(Da.regex(a)){var b=[],c;for(c in a)fa(a,c)&&Q(b,c);return b}return ke(a)});d=Object.keys}if(Object.getOwnPropertyNames&&f(function(){Object.getOwnPropertyNames("foo")})){var He="object"===typeof window?Object.getOwnPropertyNames(window):[],vc=Object.getOwnPropertyNames;W(Object,"getOwnPropertyNames",function(a){a=C.ToObject(a);if("[object Window]"===
w(a))try{return vc(a)}catch(b){return T([],He)}return vc(a)})}if(Object.getOwnPropertyDescriptor&&f(function(){Object.getOwnPropertyDescriptor("foo","bar")})){var Qd=Object.getOwnPropertyDescriptor;W(Object,"getOwnPropertyDescriptor",function(a,b){return Qd(C.ToObject(a),b)})}if(Object.seal&&f(function(){Object.seal("foo")})){var cd=Object.seal;W(Object,"seal",function(a){return C.TypeIsObject(a)?cd(a):a})}if(Object.isSealed&&f(function(){Object.isSealed("foo")})){var Eb=Object.isSealed;W(Object,
"isSealed",function(a){return C.TypeIsObject(a)?Eb(a):!0})}if(Object.freeze&&f(function(){Object.freeze("foo")})){var Rd=Object.freeze;W(Object,"freeze",function(a){return C.TypeIsObject(a)?Rd(a):a})}if(Object.isFrozen&&f(function(){Object.isFrozen("foo")})){var Sd=Object.isFrozen;W(Object,"isFrozen",function(a){return C.TypeIsObject(a)?Sd(a):!0})}if(Object.preventExtensions&&f(function(){Object.preventExtensions("foo")})){var Id=Object.preventExtensions;W(Object,"preventExtensions",function(a){return C.TypeIsObject(a)?
Id(a):a})}if(Object.isExtensible&&f(function(){Object.isExtensible("foo")})){var Yb=Object.isExtensible;W(Object,"isExtensible",function(a){return C.TypeIsObject(a)?Yb(a):!1})}if(Object.getPrototypeOf&&f(function(){Object.getPrototypeOf("foo")})){var tb=Object.getPrototypeOf;W(Object,"getPrototypeOf",function(a){return tb(C.ToObject(a))})}var Jc=k&&function(){var a=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return a&&C.IsCallable(a.get)}();k&&!Jc&&x.getter(RegExp.prototype,"flags",
function(){if(!C.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";this.global&&(a+="g");this.ignoreCase&&(a+="i");this.multiline&&(a+="m");this.unicode&&(a+="u");this.sticky&&(a+="y");return a});var P=k&&e(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),ca=Kb&&k&&function(){var a=/./;a[ga.match]=!1;return RegExp(a)===a}(),bb=e(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),fd=bb&&e(function(){return"/a/b"===
RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!bb||!fd){var gd=RegExp.prototype.toString;t(RegExp.prototype,"toString",function(){var a=C.RequireObjectCoercible(this);if(Da.regex(a))return b(gd,a);var c=ra(a.source),a=ra(a.flags);return"/"+c+"/"+a},!0);x.preserveToString(RegExp.prototype.toString,gd)}if(k&&(!P||ca)){var Kc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Td=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Fb=function(){return this.source},
Ud=C.IsCallable(Td.get)?Td.get:Fb,Vd=RegExp,Wd=function(){return function Qb(a,b){var c=C.IsRegExp(a);if(!(this instanceof Qb)&&c&&"undefined"===typeof b&&a.constructor===Qb)return a;var c=a,d=b;return Da.regex(a)?(c=C.Call(Ud,a),d="undefined"===typeof b?C.Call(Kc,a):b,new Qb(c,d)):new Vd(a,b)}}();Vb(Vd,Wd,{$input:!0});RegExp=Wd;x.redefine(y,"RegExp",Wd)}if(k){var Oa={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(d(Oa),function(a){a in RegExp&&!(Oa[a]in RegExp)&&x.getter(RegExp,
Oa[a],function(){return RegExp[a]})})}wa(RegExp);var rd=1/Number.EPSILON,Cc=Math.pow(2,-23),Xd=Math.pow(2,127)*(2-Cc),Jd=Math.pow(2,-126),Kd=Math.E,jc=Math.LOG2E,Lc=Math.LOG10E,kc=Number.prototype.clz;delete Number.prototype.clz;var cc={acosh:function(a){var b=Number(a);return Ca(b)||1>a?NaN:1===b?0:Infinity===b?b:qa(b/Kd+Ja(b+1)*Ja(b-1)/Kd)+1},asinh:function Qb(a){a=Number(a);return 0!==a&&z(a)?0>a?-Qb(-a):qa(a+Ja(a*a+1)):a},atanh:function(a){a=Number(a);return Ca(a)||-1>a||1<a?NaN:-1===a?-Infinity:
1===a?Infinity:0===a?a:.5*qa((1+a)/(1-a))},cbrt:function(a){a=Number(a);if(0===a)return a;var b=0>a,c;b&&(a=-a);Infinity===a?c=Infinity:(c=N(qa(a)/3),c=(a/(c*c)+2*c)/3);return b?-c:c},clz32:function(a){a=C.ToUint32(Number(a));return 0===a?32:kc?C.Call(kc,a):31-Y(qa(a+.5)*jc)},cosh:function(a){a=Number(a);if(0===a)return 1;if(Ca(a))return NaN;if(!z(a))return Infinity;0>a&&(a=-a);return 21<a?N(a)/2:(N(a)+N(-a))/2},expm1:function(a){a=Number(a);if(-Infinity===a)return-1;if(!z(a)||0===a)return a;if(.5<
ba(a))return N(a)-1;for(var b=a,c=0,d=1;c+b!==c;)c+=b,d+=1,b*=a/d;return c},hypot:function(a,b){for(var c=0,d=0,e=0;e<arguments.length;++e){var f=ba(Number(arguments[e]));d<f?(c*=d/f*(d/f),c+=1,d=f):c+=0<f?f/d*(f/d):f}return Infinity===d?Infinity:d*Ja(c)},log2:function(a){return qa(a)*jc},log10:function(a){return qa(a)*Lc},log1p:function(a){a=Number(a);return-1>a||Ca(a)?NaN:0===a||Infinity===a?a:-1===a?-Infinity:0===1+a-1?a:a*(qa(1+a)/(1+a-1))},sign:kb,sinh:function(a){a=Number(a);return z(a)&&0!==
a?1>ba(a)?(Math.expm1(a)-Math.expm1(-a))/2:(N(a-1)-N(-a-1))*Kd/2:a},tanh:function(a){a=Number(a);return Ca(a)||0===a?a:20<=a?1:-20>=a?-1:(Math.expm1(a)-Math.expm1(-a))/(N(a)+N(-a))},trunc:function(a){a=Number(a);return 0>a?-Y(-a):Y(a)},imul:function(a,b){var c=C.ToUint32(a),d=C.ToUint32(b),e=c&65535,f=d&65535;return e*f+((c>>>16&65535)*f+e*(d>>>16&65535)<<16>>>0)|0},fround:function(a){var b=Number(a);if(0===b||Infinity===b||-Infinity===b||Ca(b))return b;a=kb(b);b=ba(b);if(b<Jd)return a*(b/Jd/Cc+rd-
rd)*Jd*Cc;var c=(1+Cc/Number.EPSILON)*b,b=c-(c-b);return b>Xd||Ca(b)?Infinity*a:a*b}};u(Math,cc);t(Math,"log1p",cc.log1p,-1E-17!==Math.log1p(-1E-17));t(Math,"asinh",cc.asinh,Math.asinh(-1E7)!==-Math.asinh(1E7));t(Math,"tanh",cc.tanh,-2E-17!==Math.tanh(-2E-17));t(Math,"acosh",cc.acosh,Infinity===Math.acosh(Number.MAX_VALUE));t(Math,"cbrt",cc.cbrt,8<Math.abs(1-Math.cbrt(1E-300)/1E-100)/Number.EPSILON);t(Math,"sinh",cc.sinh,-2E-17!==Math.sinh(-2E-17));var va=Math.expm1(10);t(Math,"expm1",cc.expm1,22025.465794806718<
va||22025.465794806718>va);var L=Math.round,R=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+Number.EPSILON/3.99),Ta=[rd+1,2*rd-1].every(function(a){return Math.round(a)===a});t(Math,"round",function(a){var b=Y(a);return.5>a-b?b:-1===b?-0:b+1},!R||!Ta);x.preserveToString(Math.round,L);var hd=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=cc.imul,x.preserveToString(Math.imul,hd));2!==Math.imul.length&&W(Math,"imul",function(a,b){return C.Call(hd,Math,arguments)});var Nc=function(){var a=
y.setTimeout;if("function"===typeof a||"object"===typeof a){C.IsPromise=function(a){return C.TypeIsObject(a)&&"undefined"!==typeof a._promise?!0:!1};var c=function(a){if(!C.IsConstructor(a))throw new TypeError("Bad promise constructor");var b=this;b.resolve=void 0;b.reject=void 0;b.promise=new a(function(a,c){if(void 0!==b.resolve||void 0!==b.reject)throw new TypeError("Bad Promise implementation!");b.resolve=a;b.reject=c});if(!C.IsCallable(b.resolve)||!C.IsCallable(b.reject))throw new TypeError("Bad promise constructor");
},d;"undefined"!==typeof window&&C.IsCallable(window.postMessage)&&(d=function(){var a=[];window.addEventListener("message",function(b){b.source===window&&"zero-timeout-message"===b.data&&(b.stopPropagation(),0!==a.length&&K(a)())},!0);return function(b){Q(a,b);window.postMessage("zero-timeout-message","*")}});var e=function(){var a=y.Promise,b=a&&a.resolve&&a.resolve();return b&&function(a){return b.then(a)}},f=C.IsCallable(y.setImmediate)?y.setImmediate:"object"===typeof process&&process.nextTick?
process.nextTick:e()||(C.IsCallable(d)?d():function(b){a(b,0)}),g=function(a){return a},h=function(a){throw a;},k={},l=function(a,b,c){f(function(){var d,e;if(b===k)a(c);else{try{d=a(c),e=b.resolve}catch(f){d=f,e=b.reject}e(d)}})},m=function(a,b){var c=a._promise,d=c.reactionLength;if(0<d&&(l(c.fulfillReactionHandler0,c.reactionCapability0,b),c.fulfillReactionHandler0=void 0,c.rejectReactions0=void 0,c.reactionCapability0=void 0,1<d))for(var e=1,f=0;e<d;e++,f+=3)l(c[f+0],c[f+2],b),a[f+0]=void 0,a[f+
1]=void 0,a[f+2]=void 0;c.result=b;c.state=1;c.reactionLength=0},n=function(a,b){var c=a._promise,d=c.reactionLength;if(0<d&&(l(c.rejectReactionHandler0,c.reactionCapability0,b),c.fulfillReactionHandler0=void 0,c.rejectReactions0=void 0,c.reactionCapability0=void 0,1<d))for(var e=1,f=0;e<d;e++,f+=3)l(c[f+1],c[f+2],b),a[f+0]=void 0,a[f+1]=void 0,a[f+2]=void 0;c.result=b;c.state=2;c.reactionLength=0},q=function(a){var b=!1;return{resolve:function(c){var d;if(!b){b=!0;if(c===a)return n(a,new TypeError("Self resolution"));
if(!C.TypeIsObject(c))return m(a,c);try{d=c.then}catch(e){return n(a,e)}if(!C.IsCallable(d))return m(a,c);f(function(){var b=d,e=q(a),f=e.resolve,e=e.reject;try{t(b,c,f,e)}catch(g){e(g)}})}},reject:function(c){if(!b)return b=!0,n(a,c)}}},t=function(a,c,d,e){a===p?b(a,c,d,e,k):b(a,c,d,e)},r,p,Xb=function(){var a=function(b){if(!(this instanceof a))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!C.IsCallable(b))throw new TypeError("not a valid resolver");
var c=hb(this,a,r,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),d=q(c),e=d.reject;try{b(d.resolve,e)}catch(f){e(f)}return c};return a}();r=Xb.prototype;var w=function(a,b,c,d){var e=!1;return function(f){e||(e=!0,b[a]=f,0===--d.count&&(f=c.resolve,f(b)))}};u(Xb,{all:function(a){if(!C.TypeIsObject(this))throw new TypeError("Promise is not object");var b=new c(this),d,e;try{d=C.GetIterator(a);a=e={iterator:d,
done:!1};for(var f=a.iterator,g=[],h={count:1},k,l,m=0;;){try{k=C.IteratorStep(f);if(!1===k){a.done=!0;break}l=k.value}catch(n){throw a.done=!0,n;}g[m]=void 0;var q=this.resolve(l),r=w(m,g,b,h);h.count+=1;t(q.then,q,r,b.reject);m+=1}if(0===--h.count){var p=b.resolve;p(g)}return b.promise}catch(n){f=n;if(e&&!e.done)try{C.IteratorClose(d,!0)}catch(u){f=u}d=b.reject;d(f);return b.promise}},race:function(a){if(!C.TypeIsObject(this))throw new TypeError("Promise is not object");var b=new c(this),d,e;try{d=
C.GetIterator(a);a=e={iterator:d,done:!1};for(var f=a.iterator,g,h,k;;){try{g=C.IteratorStep(f);if(!1===g){a.done=!0;break}h=g.value}catch(l){throw a.done=!0,l;}k=this.resolve(h);t(k.then,k,b.resolve,b.reject)}return b.promise}catch(l){f=l;if(e&&!e.done)try{C.IteratorClose(d,!0)}catch(m){f=m}d=b.reject;d(f);return b.promise}},reject:function(a){if(!C.TypeIsObject(this))throw new TypeError("Bad promise constructor");var b=new c(this),d=b.reject;d(a);return b.promise},resolve:function(a){if(!C.TypeIsObject(this))throw new TypeError("Bad promise constructor");
if(C.IsPromise(a)&&a.constructor===this)return a;var b=new c(this),d=b.resolve;d(a);return b.promise}});u(r,{"catch":function(a){return this.then(null,a)},then:function(a,b){if(!C.IsPromise(this))throw new TypeError("not a promise");var d=C.SpeciesConstructor(this,Xb),d=2<arguments.length&&arguments[2]===k&&d===Xb?k:new c(d),e=C.IsCallable(a)?a:g,f=C.IsCallable(b)?b:h,m=this._promise;if(0===m.state){if(0===m.reactionLength)m.fulfillReactionHandler0=e,m.rejectReactionHandler0=f,m.reactionCapability0=
d;else{var n=3*(m.reactionLength-1);m[n+0]=e;m[n+1]=f;m[n+2]=d}m.reactionLength+=1}else if(1===m.state)m=m.result,l(e,d,m);else if(2===m.state)m=m.result,l(f,d,m);else throw new TypeError("unexpected Promise state");return d.promise}});k=new c(Xb);p=r.then;return Xb}}();y.Promise&&(delete y.Promise.accept,delete y.Promise.defer,delete y.Promise.prototype.chain);if("function"===typeof Nc){u(y,{Promise:Nc});var jd=F(y.Promise,function(a){return a.resolve(42).then(function(){})instanceof a}),le=!f(function(){y.Promise.reject(42).then(null,
5).then(null,B)}),gf=f(function(){y.Promise.call(3,B)}),me=function(a){var b=a.resolve(5);b.constructor={};a=a.resolve(b);try{a.then(null,B).then(null,B)}catch(c){return!0}return b===a}(y.Promise),hf=k&&function(){var a=0,b=Object.defineProperty({},"then",{get:function(){a+=1}});Promise.resolve(b);return 1===a}(),ne=function Rb(a){var b=new Promise(a);a(3,function(){});this.then=b.then;this.constructor=Rb};ne.prototype=Promise.prototype;ne.all=Promise.all;var If=e(function(){return!!ne.all([1,2])});
jd&&le&&gf&&!me&&hf&&!If||(Promise=Nc,W(y,"Promise",Nc));if(1!==Promise.all.length){var dd=Promise.all;W(Promise,"all",function(a){return C.Call(dd,this,arguments)})}if(1!==Promise.race.length){var jf=Promise.race;W(Promise,"race",function(a){return C.Call(jf,this,arguments)})}if(1!==Promise.resolve.length){var Ie=Promise.resolve;W(Promise,"resolve",function(a){return C.Call(Ie,this,arguments)})}if(1!==Promise.reject.length){var Je=Promise.reject;W(Promise,"reject",function(a){return C.Call(Je,this,
arguments)})}ad(Promise,"all");ad(Promise,"race");ad(Promise,"resolve");ad(Promise,"reject");wa(Promise)}var oe=function(a){var b=d(n(a,function(a,b){a[b]=!0;return a},{}));return a.join(":")===b.join(":")},pe=oe(["z","a","bb"]),pa=oe(["z",1,"a","3",2]);if(k){var vd=function(a,b){return b||pe?Na(a)?"^"+C.ToString(a):"string"===typeof a?"$"+a:"number"===typeof a?pa?a:"n"+a:"boolean"===typeof a?"b"+a:null:null},Oc=function(){return Object.create?Object.create(null):{}},Pc=function(a,d,e){if(c(e)||Da.string(e))l(e,
function(a){if(!C.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");d.set(a[0],a[1])});else if(e instanceof a)b(a.prototype.forEach,e,function(a,b){d.set(b,a)});else{var f,g;if(!Na(e)){g=d.set;if(!C.IsCallable(g))throw new TypeError("bad map");f=C.GetIterator(e)}if("undefined"!==typeof f)for(;;){a=C.IteratorStep(f);if(!1===a)break;a=a.value;try{if(!C.TypeIsObject(a))throw new TypeError("Iterator value "+a+" is not an entry object");b(g,d,a[0],a[1])}catch(h){throw C.IteratorClose(f,
!0),h;}}}},Ke=function(a,d,e){if(c(e)||Da.string(e))l(e,function(a){d.add(a)});else if(e instanceof a)b(a.prototype.forEach,e,function(a){d.add(a)});else{var f,g;if(!Na(e)){g=d.add;if(!C.IsCallable(g))throw new TypeError("bad set");f=C.GetIterator(e)}if("undefined"!==typeof f)for(;;){a=C.IteratorStep(f);if(!1===a)break;a=a.value;try{b(g,d,a)}catch(h){throw C.IteratorClose(f,!0),h;}}}},Gb={Map:function(){var a={},c=function(a,b){this.key=a;this.value=b;this.prev=this.next=null};c.prototype.isRemoved=
function(){return this.key===a};var d=function(a,b){if(!C.TypeIsObject(a)||!a._es6map)throw new TypeError("Method Map.prototype."+b+" called on incompatible receiver "+C.ToString(a));},e=function(a,b){d(a,"[[MapIterator]]");this.i=this.head=a._head;this.kind=b};e.prototype={next:function(){var a=this.i,b=this.kind,c=this.head;if("undefined"===typeof this.i)return rb();for(;a.isRemoved()&&a!==c;)a=a.prev;for(;a.next!==c;)if(a=a.next,!a.isRemoved())return b="key"===b?a.key:"value"===b?a.value:[a.key,
a.value],this.i=a,rb(b);this.i=void 0;return rb()}};Ba(e.prototype);var f,g=function Z(){if(!(this instanceof Z))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var a=hb(this,Z,f,{_es6map:!0,_head:null,_map:ja?new ja:null,_size:0,_storage:Oc()}),b=new c(null,null);b.next=b.prev=b;a._head=b;0<arguments.length&&Pc(Z,a,arguments[0]);return a};f=g.prototype;x.getter(f,"size",function(){if("undefined"===typeof this._size)throw new TypeError("size method called on incompatible Map");
return this._size});u(f,{get:function(a){d(this,"get");var b=vd(a,!0);if(null!==b){if(a=this._storage[b])return a.value}else if(this._map){if(a=V.call(this._map,a))return a.value}else for(var c=b=this._head;(c=c.next)!==b;)if(C.SameValueZero(c.key,a))return c.value},has:function(a){d(this,"has");var b=vd(a,!0);if(null!==b)return"undefined"!==typeof this._storage[b];if(this._map)return Ua.call(this._map,a);for(var c=b=this._head;(c=c.next)!==b;)if(C.SameValueZero(c.key,a))return!0;return!1},set:function(a,
b){d(this,"set");var e=this._head,f=e,g,h=vd(a,!0);if(null!==h){if("undefined"!==typeof this._storage[h])return this._storage[h].value=b,this;g=this._storage[h]=new c(a,b);f=e.prev}else this._map&&(Ua.call(this._map,a)?V.call(this._map,a).value=b:(g=new c(a,b),za.call(this._map,a,g),f=e.prev));for(;(f=f.next)!==e;)if(C.SameValueZero(f.key,a))return f.value=b,this;g=g||new c(a,b);C.SameValue(-0,a)&&(g.key=0);g.next=this._head;g.prev=this._head.prev;g.prev.next=g;g.next.prev=g;this._size+=1;return this},
"delete":function(b){d(this,"delete");var c=this._head,e=c,f=vd(b,!0);if(null!==f){if("undefined"===typeof this._storage[f])return!1;e=this._storage[f].prev;delete this._storage[f]}else if(this._map){if(!Ua.call(this._map,b))return!1;e=V.call(this._map,b).prev;zb.call(this._map,b)}for(;(e=e.next)!==c;)if(C.SameValueZero(e.key,b))return e.key=e.value=a,e.prev.next=e.next,e.next.prev=e.prev,--this._size,!0;return!1},clear:function(){d(this,"clear");this._map=ja?new ja:null;this._size=0;this._storage=
Oc();for(var b=this._head,c,e=b.next;(c=e)!==b;)c.key=c.value=a,e=c.next,c.next=c.prev=b;b.next=b.prev=b},keys:function(){d(this,"keys");return new e(this,"key")},values:function(){d(this,"values");return new e(this,"value")},entries:function(){d(this,"entries");return new e(this,"key+value")},forEach:function(a){d(this,"forEach");for(var c=1<arguments.length?arguments[1]:null,e=this.entries(),f=e.next();!f.done;f=e.next())c?b(a,c,f.value[1],f.value[0],this):a(f.value[1],f.value[0],this)}});Ba(f,
f.entries);return g}(),Set:function(){var a=function(a,b){if(!C.TypeIsObject(a)||!a._es6set||"undefined"===typeof a._storage)throw new TypeError("Set.prototype."+b+" called on incompatible receiver "+C.ToString(a));},c,e=function Vc(){if(!(this instanceof Vc))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var a=hb(this,Vc,c,{_es6set:!0,"[[SetData]]":null,_storage:Oc()});if(!a._es6set)throw new TypeError("bad set");0<arguments.length&&
Ke(Vc,a,arguments[0]);return a};c=e.prototype;var f=function(a){if(!a["[[SetData]]"]){var b=a["[[SetData]]"]=new Gb.Map;l(d(a._storage),function(a){if("^null"===a)a=null;else if("^undefined"===a)a=void 0;else{var c=a.charAt(0);a="$"===c?I(a,1):"n"===c?+I(a,1):"b"===c?"btrue"===a:+a}b.set(a,a)});a["[[SetData]]"]=b}a._storage=null};x.getter(e.prototype,"size",function(){a(this,"size");if(this._storage)return d(this._storage).length;f(this);return this["[[SetData]]"].size});u(e.prototype,{has:function(b){a(this,
"has");var c;if(this._storage&&null!==(c=vd(b)))return!!this._storage[c];f(this);return this["[[SetData]]"].has(b)},add:function(b){a(this,"add");var c;if(this._storage&&null!==(c=vd(b)))return this._storage[c]=!0,this;f(this);this["[[SetData]]"].set(b,b);return this},"delete":function(b){a(this,"delete");var c;if(this._storage&&null!==(c=vd(b)))return b=fa(this._storage,c),delete this._storage[c]&&b;f(this);return this["[[SetData]]"]["delete"](b)},clear:function(){a(this,"clear");this._storage&&
(this._storage=Oc());this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){a(this,"values");f(this);return this["[[SetData]]"].values()},entries:function(){a(this,"entries");f(this);return this["[[SetData]]"].entries()},forEach:function(c){a(this,"forEach");var d=1<arguments.length?arguments[1]:null,e=this;f(e);this["[[SetData]]"].forEach(function(a,f){d?b(c,d,f,f,e):c(f,f,e)})}});t(e.prototype,"keys",e.prototype.values,!0);Ba(e.prototype,e.prototype.values);return e}()};if(y.Map||y.Set){e(function(){return 2===
(new Map([[1,2]])).get(1)})||(y.Map=function Rb(){if(!(this instanceof Rb))throw new TypeError('Constructor Map requires "new"');var a=new ja;0<arguments.length&&Pc(Rb,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,y.Map.prototype);return a},y.Map.prototype=E(ja.prototype),t(y.Map.prototype,"constructor",y.Map,!0),x.preserveToString(y.Map,ja));var kf=new Map,Zd=function(){var a=new Map([[1,0],[2,0],[3,0],[4,0]]);a.set(-0,a);return a.get(0)===a&&a.get(-0)===a&&a.has(0)&&a.has(-0)}(),
qe=kf.set(1,2)===kf;Zd&&qe||W(Map.prototype,"set",function(a,c){b(za,this,0===a?0:a,c);return this});Zd||(u(Map.prototype,{get:function(a){return b(V,this,0===a?0:a)},has:function(a){return b(Ua,this,0===a?0:a)}},!0),x.preserveToString(Map.prototype.get,V),x.preserveToString(Map.prototype.has,Ua));var wd=new Set,ub=function(a){a["delete"](0);a.add(-0);return!a.has(0)}(wd),Hb=wd.add(1)===wd;if(!ub||!Hb){var Qc=Set.prototype.add;Set.prototype.add=function(a){b(Qc,this,0===a?0:a);return this};x.preserveToString(Set.prototype.add,
Qc)}if(!ub){var $d=Set.prototype.has;Set.prototype.has=function(a){return b($d,this,0===a?0:a)};x.preserveToString(Set.prototype.has,$d);var xd=Set.prototype["delete"];Set.prototype["delete"]=function(a){return b(xd,this,0===a?0:a)};x.preserveToString(Set.prototype["delete"],xd)}var re=F(y.Map,function(a){var b=new a([]);b.set(42,42);return b instanceof a}),Le=Object.setPrototypeOf&&!re,se;try{se=!(y.Map()instanceof y.Map)}catch(Qb){se=Qb instanceof TypeError}if(0!==y.Map.length||Le||!se)y.Map=function Rb(){if(!(this instanceof
Rb))throw new TypeError('Constructor Map requires "new"');var a=new ja;0<arguments.length&&Pc(Rb,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,Rb.prototype);return a},y.Map.prototype=ja.prototype,t(y.Map.prototype,"constructor",y.Map,!0),x.preserveToString(y.Map,ja);var ae=F(y.Set,function(a){var b=new a([]);b.add(42,42);return b instanceof a}),te=Object.setPrototypeOf&&!ae,Zb;try{Zb=!(y.Set()instanceof y.Set)}catch(Qb){Zb=Qb instanceof TypeError}if(0!==y.Set.length||te||!Zb){var oc=
y.Set;y.Set=function Rb(){if(!(this instanceof Rb))throw new TypeError('Constructor Set requires "new"');var a=new oc;0<arguments.length&&Ke(Rb,a,arguments[0]);delete a.constructor;Object.setPrototypeOf(a,Rb.prototype);return a};y.Set.prototype=oc.prototype;t(y.Set.prototype,"constructor",y.Set,!0);x.preserveToString(y.Set,oc)}var be=new y.Map,ue=!e(function(){return be.keys().next().done});("function"!==typeof y.Map.prototype.clear||0!==(new y.Set).size||0!==be.size||"function"!==typeof y.Map.prototype.keys||
"function"!==typeof y.Set.prototype.keys||"function"!==typeof y.Map.prototype.forEach||"function"!==typeof y.Set.prototype.forEach||h(y.Map)||h(y.Set)||"function"!==typeof be.keys().next||ue||!re)&&u(y,{Map:Gb.Map,Set:Gb.Set},!0);y.Set.prototype.keys!==y.Set.prototype.values&&t(y.Set.prototype,"keys",y.Set.prototype.values,!0);Ba(Object.getPrototypeOf((new y.Map).keys()));Ba(Object.getPrototypeOf((new y.Set).keys()));if(m&&"has"!==y.Set.prototype.has.name){var Me=y.Set.prototype.has;W(y.Set.prototype,
"has",function(a){return b(Me,this,a)})}}u(y,Gb);wa(y.Map);wa(y.Set)}var ec=function(a){if(!C.TypeIsObject(a))throw new TypeError("target must be an object");},vb={apply:function(){return C.Call(C.Call,null,arguments)},construct:function(a,b){if(!C.IsConstructor(a))throw new TypeError("First argument must be a constructor.");var c=2<arguments.length?arguments[2]:a;if(!C.IsConstructor(c))throw new TypeError("new.target must be a constructor.");return C.Construct(a,b,c,"internal")},deleteProperty:function(a,
b){ec(a);if(k){var c=Object.getOwnPropertyDescriptor(a,b);if(c&&!c.configurable)return!1}return delete a[b]},has:function(a,b){ec(a);return b in a}};Object.getOwnPropertyNames&&Object.assign(vb,{ownKeys:function(a){ec(a);var b=Object.getOwnPropertyNames(a);C.IsCallable(Object.getOwnPropertySymbols)&&D(b,Object.getOwnPropertySymbols(a));return b}});var Md=function(a){return!f(a)};Object.preventExtensions&&Object.assign(vb,{isExtensible:function(a){ec(a);return Object.isExtensible(a)},preventExtensions:function(a){ec(a);
return Md(function(){Object.preventExtensions(a)})}});if(k){var ob=function(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);if(!d)return a=Object.getPrototypeOf(a),null===a?void 0:ob(a,b,c);if("value"in d)return d.value;if(d.get)return C.Call(d.get,c)},pc=function(a,c,d,e){var f=Object.getOwnPropertyDescriptor(a,c);if(!f){a=Object.getPrototypeOf(a);if(null!==a)return pc(a,c,d,e);f={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in f?f.writable&&C.TypeIsObject(e)?Object.getOwnPropertyDescriptor(e,
c)?Tb.defineProperty(e,c,{value:d}):Tb.defineProperty(e,c,{value:d,writable:!0,enumerable:!0,configurable:!0}):!1:f.set?(b(f.set,e,d),!0):!1};Object.assign(vb,{defineProperty:function(a,b,c){ec(a);return Md(function(){Object.defineProperty(a,b,c)})},getOwnPropertyDescriptor:function(a,b){ec(a);return Object.getOwnPropertyDescriptor(a,b)},get:function(a,b){ec(a);return ob(a,b,2<arguments.length?arguments[2]:a)},set:function(a,b,c){ec(a);return pc(a,b,c,3<arguments.length?arguments[3]:a)}})}if(Object.getPrototypeOf){var lf=
Object.getPrototypeOf;vb.getPrototypeOf=function(a){ec(a);return lf(a)}}Object.setPrototypeOf&&vb.getPrototypeOf&&Object.assign(vb,{setPrototypeOf:function(a,b){ec(a);if(null!==b&&!C.TypeIsObject(b))throw new TypeError("proto must be an object or null");if(b===Tb.getPrototypeOf(a))return!0;if(Tb.isExtensible&&!Tb.isExtensible(a))return!1;var c;a:{for(c=b;c;){if(a===c){c=!0;break a}c=vb.getPrototypeOf(c)}c=!1}if(c)return!1;Object.setPrototypeOf(a,b);return!0}});var Nd=function(a,b){C.IsCallable(y.Reflect[a])?
e(function(){y.Reflect[a](1);y.Reflect[a](NaN);y.Reflect[a](!0);return!0})&&W(y.Reflect,a,b):t(y.Reflect,a,b)};Object.keys(vb).forEach(function(a){Nd(a,vb[a])});var kd=y.Reflect.getPrototypeOf;m&&kd&&"getPrototypeOf"!==kd.name&&W(y.Reflect,"getPrototypeOf",function(a){return b(kd,y.Reflect,a)});y.Reflect.setPrototypeOf&&e(function(){y.Reflect.setPrototypeOf(1,{});return!0})&&W(y.Reflect,"setPrototypeOf",vb.setPrototypeOf);y.Reflect.defineProperty&&(e(function(){var a=!y.Reflect.defineProperty(1,"test",
{value:1}),b="function"!==typeof Object.preventExtensions||!y.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return a&&b})||W(y.Reflect,"defineProperty",vb.defineProperty));y.Reflect.construct&&(e(function(){var a=function(){};return y.Reflect.construct(function(){},[],a)instanceof a})||W(y.Reflect,"construct",vb.construct));if("Invalid Date"!==String(new Date(NaN))){var yd=Date.prototype.toString;W(Date.prototype,"toString",function(){var a=+this;return a!==a?"Invalid Date":C.Call(yd,
this)})}var ve={anchor:function(a){return C.CreateHTML(this,"a","name",a)},big:function(){return C.CreateHTML(this,"big","","")},blink:function(){return C.CreateHTML(this,"blink","","")},bold:function(){return C.CreateHTML(this,"b","","")},fixed:function(){return C.CreateHTML(this,"tt","","")},fontcolor:function(a){return C.CreateHTML(this,"font","color",a)},fontsize:function(a){return C.CreateHTML(this,"font","size",a)},italics:function(){return C.CreateHTML(this,"i","","")},link:function(a){return C.CreateHTML(this,
"a","href",a)},small:function(){return C.CreateHTML(this,"small","","")},strike:function(){return C.CreateHTML(this,"strike","","")},sub:function(){return C.CreateHTML(this,"sub","","")},sup:function(){return C.CreateHTML(this,"sup","","")}};l(Object.keys(ve),function(a){var c=String.prototype[a],d=!1;C.IsCallable(c)?(c=b(c,"",' " '),d=T([],c.match(/"/g)).length,d=c!==c.toLowerCase()||2<d):d=!0;d&&W(String.prototype,a,ve[a])});var we=function(){if(!Kb)return!1;var a="object"===typeof JSON&&"function"===
typeof JSON.stringify?JSON.stringify:null;if(!a)return!1;if("undefined"!==typeof a(ga())||"[null]"!==a([ga()]))return!0;var b={a:ga()};b[ga()]=!0;return"{}"!==a(b)?!0:!1}(),xe=e(function(){return Kb?"{}"===JSON.stringify(Object(ga()))&&"[{}]"===JSON.stringify([Object(ga())]):!0});if(we||!xe){var mf=JSON.stringify;W(JSON,"stringify",function(a){if("symbol"!==typeof a){var d;1<arguments.length&&(d=arguments[1]);var e=[a];if(c(d))e.push(d);else{var f=C.IsCallable(d)?d:null;e.push(function(a,c){var d=
f?b(f,this,a,c):c;if("symbol"!==typeof d)return Da.symbol(d)?bd({})(d):d})}2<arguments.length&&e.push(arguments[2]);return mf.apply(this,e)}})}return y});
(function e$$0(b,c,d){function f(g,h){if(!c[g]){if(!b[g]){var m="function"==typeof require&&require;if(!h&&m)return m(g,!0);if(e)return e(g,!0);m=Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",m;}m=c[g]={exports:{}};b[g][0].call(m.exports,function(c){var d=b[g][1][c];return f(d?d:c)},m,m.exports,e$$0,b,c,d)}return c[g].exports}for(var e="function"==typeof require&&require,h=0;h<d.length;h++)f(d[h]);return f})({1:[function(a,b,c){var d=a("./Array.prototype");b.exports={prototype:d,
shim:function(){d.shim()}}},{"./Array.prototype":3}],2:[function(a,b,c){b.exports=a("array-includes")},{"array-includes":14}],3:[function(a,b,c){var d=a("./Array.prototype.includes");b.exports={includes:d,shim:function(){d.shim()}}},{"./Array.prototype.includes":2}],4:[function(a,b,c){var d=a("object.getownpropertydescriptors"),f=a("object.entries"),e=a("object.values");b.exports={entries:f,getOwnPropertyDescriptors:d,shim:function(){d.shim();f.shim();e.shim()},values:e}},{"object.entries":38,"object.getownpropertydescriptors":64,
"object.values":89}],5:[function(a,b,c){var d=a("./String.prototype");b.exports={prototype:d,shim:function(){d.shim()}}},{"./String.prototype":7}],6:[function(a,b,c){b.exports=a("string-at")},{"string-at":114}],7:[function(a,b,c){var d=a("./String.prototype.at"),f=a("./String.prototype.padStart"),e=a("./String.prototype.padEnd"),h=a("./String.prototype.trimLeft"),g=a("./String.prototype.trimRight");b.exports={at:d,padStart:f,padEnd:e,trimLeft:h,trimRight:g,shim:function(){d.shim();f.shim();e.shim();
h.shim();g.shim()}}},{"./String.prototype.at":6,"./String.prototype.padEnd":8,"./String.prototype.padStart":9,"./String.prototype.trimLeft":10,"./String.prototype.trimRight":11}],8:[function(a,b,c){b.exports=a("string.prototype.padend")},{"string.prototype.padend":137}],9:[function(a,b,c){b.exports=a("string.prototype.padstart")},{"string.prototype.padstart":162}],10:[function(a,b,c){b.exports=a("string.prototype.trimleft")},{"string.prototype.trimleft":187}],11:[function(a,b,c){b.exports=a("string.prototype.trimright")},
{"string.prototype.trimright":197}],12:[function(a,b,c){var d=a("./Array"),f=a("./Object"),e=a("./String");b.exports={Array:d,Object:f,String:e,shim:function(){d.shim();f.shim();e.shim()}}},{"./Array":1,"./Object":4,"./String":5}],13:[function(a,b,c){(function(c){var f=a("es-abstract/es6"),e=Number.isNaN||function(a){return a!==a},h=Number.isFinite||function(a){return"number"===typeof a&&c.isFinite(a)},g=Array.prototype.indexOf;b.exports=function(a){var b=1<arguments.length?f.ToInteger(arguments[1]):
0;if(g&&!e(a)&&h(b)&&"undefined"!==typeof a)return-1<g.apply(this,arguments);var c=f.ToObject(this),d=f.ToLength(c.length);if(0===d)return!1;for(b=0<=b?b:Math.max(0,d+b);b<d;){if(f.SameValueZero(a,c[b]))return!0;b+=1}return!1}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"es-abstract/es6":17}],14:[function(a,b,c){c=a("define-properties");var d=a("es-abstract/es6"),f=a("./implementation"),e=a("./polyfill"),h=e();a=a("./shim");
var g=Array.prototype.slice,k=function(a,b){d.RequireObjectCoercible(a);return h.apply(a,g.call(arguments,1))};c(k,{implementation:f,getPolyfill:e,shim:a});b.exports=k},{"./implementation":13,"./polyfill":35,"./shim":36,"define-properties":15,"es-abstract/es6":17}],15:[function(a,b,c){var d=a("object-keys"),f=a("foreach"),e="function"===typeof Symbol&&"symbol"===typeof Symbol(),h=Object.prototype.toString,g=Object.defineProperty&&function(){var a={};try{Object.defineProperty(a,"x",{enumerable:!1,
value:a});for(var b in a)return!1;return a.x===a}catch(c){return!1}}();a=function(a,b){var c=2<arguments.length?arguments[2]:{},n=d(b);e&&(n=n.concat(Object.getOwnPropertySymbols(b)));f(n,function(d){var e=b[d],f=c[d];if(!(d in a)||"function"===typeof f&&"[object Function]"===h.call(f)&&f())g?Object.defineProperty(a,d,{configurable:!0,enumerable:!1,value:e,writable:!0}):a[d]=e})};a.supportsDescriptors=!!g;b.exports=a},{foreach:26,"object-keys":33}],16:[function(a,b,c){var d=Number.isNaN||function(a){return a!==
a},f=a("./helpers/isFinite"),e=a("./helpers/sign"),h=a("./helpers/mod");c=a("is-callable");a={ToPrimitive:a("es-to-primitive/es5"),ToBoolean:function(a){return Boolean(a)},ToNumber:function(a){return Number(a)},ToInteger:function(a){a=this.ToNumber(a);return d(a)?0:0!==a&&f(a)?e(a)*Math.floor(Math.abs(a)):a},ToInt32:function(a){return this.ToNumber(a)>>0},ToUint32:function(a){return this.ToNumber(a)>>>0},ToUint16:function(a){a=this.ToNumber(a);if(d(a)||0===a||!f(a))return 0;a=e(a)*Math.floor(Math.abs(a));
return h(a,65536)},ToString:function(a){return String(a)},ToObject:function(a){this.CheckObjectCoercible(a);return Object(a)},CheckObjectCoercible:function(a,b){if(null==a)throw new TypeError(b||"Cannot call method on "+a);return a},IsCallable:c,SameValue:function(a,b){return a===b?0===a?1/a===1/b:!0:d(a)&&d(b)}};b.exports=a},{"./helpers/isFinite":19,"./helpers/mod":21,"./helpers/sign":22,"es-to-primitive/es5":23,"is-callable":29}],17:[function(a,b,c){var d=Object.prototype.toString,f="function"===
typeof Symbol&&"symbol"===typeof Symbol.iterator,e=f?Symbol.prototype.toString:d,h=Number.isNaN||function(a){return a!==a},g=a("./helpers/isFinite"),k=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;c=a("./helpers/assign");var m=a("./helpers/sign"),l=a("./helpers/mod"),n=a("./helpers/isPrimitive"),r=a("es-to-primitive/es6"),q=parseInt,t=a("function-bind"),u=t.call(Function.call,String.prototype.slice),w=t.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),A=t.call(Function.call,RegExp.prototype.test,
/^0o[0-7]+$/i),x=t.call(Function.call,RegExp.prototype.test,/[\u0085\u200b\ufffe]/g),E=t.call(Function.call,RegExp.prototype.test,/^[\-\+]0x[0-9a-f]+$/i),F=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,y=t.call(Function.call,String.prototype.replace),z=a("./es5"),
J=a("is-regex");a=c(c({},z),{Call:function(a,b){var c=2<arguments.length?arguments[2]:[];if(!this.IsCallable(a))throw new TypeError(a+" is not a function");return a.apply(b,c)},ToPrimitive:r,ToNumber:function(a){a=n(a)?a:r(a,"number");if("symbol"===typeof a)throw new TypeError("Cannot convert a Symbol value to a number");if("string"===typeof a){if(w(a))return this.ToNumber(q(u(a,2),2));if(A(a))return this.ToNumber(q(u(a,2),8));if(x(a)||E(a))return NaN;var b=y(a,F,"");if(b!==a)return this.ToNumber(b)}return Number(a)},
ToInt16:function(a){a=this.ToUint16(a);return 32768<=a?a-65536:a},ToInt8:function(a){a=this.ToUint8(a);return 128<=a?a-256:a},ToUint8:function(a){a=this.ToNumber(a);if(h(a)||0===a||!g(a))return 0;a=m(a)*Math.floor(Math.abs(a));return l(a,256)},ToUint8Clamp:function(a){var b=this.ToNumber(a);if(h(b)||0>=b)return 0;if(255<=b)return 255;a=Math.floor(a);return a+.5<b?a+1:b<a+.5?a:0!==a%2?a+1:a},ToString:function(a){if("symbol"===typeof a)throw new TypeError("Cannot convert a Symbol value to a string");
return String(a)},ToObject:function(a){this.RequireObjectCoercible(a);return Object(a)},ToPropertyKey:function(a){a=this.ToPrimitive(a,String);return"symbol"===typeof a?e.call(a):this.ToString(a)},ToLength:function(a){a=this.ToInteger(a);return 0>=a?0:a>k?k:a},CanonicalNumericIndexString:function(a){if("[object String]"!==d.call(a))throw new TypeError("must be a string");if("-0"===a)return-0;var b=this.ToNumber(a);if(this.SameValue(this.ToString(b),a))return b},RequireObjectCoercible:z.CheckObjectCoercible,
IsArray:Array.isArray||function(a){return"[object Array]"===d.call(a)},IsConstructor:function(a){return this.IsCallable(a)},IsExtensible:function(a){return Object.preventExtensions?n(a)?!1:Object.isExtensible(a):!0},IsInteger:function(a){if("number"!==typeof a||h(a)||!g(a))return!1;a=Math.abs(a);return Math.floor(a)===a},IsPropertyKey:function(a){return"string"===typeof a||"symbol"===typeof a},IsRegExp:function(a){if(!a||"object"!==typeof a)return!1;if(f){var b=RegExp[Symbol.match];if("undefined"!==
typeof b)return z.ToBoolean(b)}return J(a)},SameValueZero:function(a,b){return a===b||h(a)&&h(b)}});delete a.CheckObjectCoercible;b.exports=a},{"./es5":16,"./helpers/assign":18,"./helpers/isFinite":19,"./helpers/isPrimitive":20,"./helpers/mod":21,"./helpers/sign":22,"es-to-primitive/es6":24,"function-bind":28,"is-regex":31}],18:[function(a,b,c){var d=Object.prototype.hasOwnProperty;b.exports=Object.assign||function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a}},{}],19:[function(a,b,c){var d=
Number.isNaN||function(a){return a!==a};b.exports=Number.isFinite||function(a){return"number"===typeof a&&!d(a)&&Infinity!==a&&-Infinity!==a}},{}],20:[function(a,b,c){b.exports=function(a){return null===a||"function"!==typeof a&&"object"!==typeof a}},{}],21:[function(a,b,c){b.exports=function(a,b){var c=a%b;return Math.floor(0<=c?c:c+b)}},{}],22:[function(a,b,c){b.exports=function(a){return 0<=a?1:-1}},{}],23:[function(a,b,c){var d=Object.prototype.toString,f=a("./helpers/isPrimitive"),e=a("is-callable"),
h={"[[DefaultValue]]":function(a,b){var c=b||("[object Date]"===d.call(a)?String:Number);if(c===String||c===Number){var c=c===String?["toString","valueOf"]:["valueOf","toString"],h,n;for(n=0;n<c.length;++n)if(e(a[c[n]])&&(h=a[c[n]](),f(h)))return h;throw new TypeError("No default value");}throw new TypeError("invalid [[DefaultValue]] hint supplied");}};b.exports=function(a,b){return f(a)?a:h["[[DefaultValue]]"](a,b)}},{"./helpers/isPrimitive":25,"is-callable":29}],24:[function(a,b,c){var d="function"===
typeof Symbol&&"symbol"===typeof Symbol.iterator,f=a("./helpers/isPrimitive"),e=a("is-callable"),h=a("is-date-object"),g=a("is-symbol");b.exports=function(a,b){if(f(a))return a;var c="default";1<arguments.length&&(b===String?c="string":b===Number&&(c="number"));var n;if(d)if(Symbol.toPrimitive){n=Symbol.toPrimitive;var r=a[n];if(null!==r&&"undefined"!==typeof r){if(!e(r))throw new TypeError(r+" returned for property "+n+" of object "+a+" is not a function");n=r}else n=void 0}else g(a)&&(n=Symbol.prototype.valueOf);
if("undefined"!==typeof n){c=n.call(a,c);if(f(c))return c;throw new TypeError("unable to convert exotic object to primitive");}"default"===c&&(h(a)||g(a))&&(c="string");a:{c="default"===c?"number":c;if("undefined"===typeof a||null===a)throw new TypeError("Cannot call method on "+a);if("string"!==typeof c||"number"!==c&&"string"!==c)throw new TypeError('hint must be "string" or "number"');c="string"===c?["toString","valueOf"]:["valueOf","toString"];for(n=0;n<c.length;++n)if(r=a[c[n]],e(r)&&(r=r.call(a),
f(r)))break a;throw new TypeError("No default value");}return r}},{"./helpers/isPrimitive":25,"is-callable":29,"is-date-object":30,"is-symbol":32}],25:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],26:[function(a,b,c){var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString;b.exports=function(a,b,c){if("[object Function]"!==f.call(b))throw new TypeError("iterator must be a function");var k=a.length;if(k===+k)for(var m=0;m<k;m++)b.call(c,a[m],m,a);else for(m in a)d.call(a,
m)&&b.call(c,a[m],m,a)}},{}],27:[function(a,b,c){var d=Array.prototype.slice,f=Object.prototype.toString;b.exports=function(a){var b=this;if("function"!==typeof b||"[object Function]"!==f.call(b))throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var c=d.call(arguments,1),k,m=Math.max(0,b.length-c.length),l=[],n=0;n<m;n++)l.push("$"+n);k=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof k){var f=b.apply(this,
c.concat(d.call(arguments)));return Object(f)===f?f:this}return b.apply(a,c.concat(d.call(arguments)))});b.prototype&&(m=function(){},m.prototype=b.prototype,k.prototype=new m,m.prototype=null);return k}},{}],28:[function(a,b,c){a=a("./implementation");b.exports=Function.prototype.bind||a},{"./implementation":27}],29:[function(a,b,c){var d=Function.prototype.toString,f=/^\s*class /,e=function(a){try{var b=d.call(a).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/mg," ").replace(/ {2}/g,
" ");return f.test(b)}catch(c){return!1}},h=Object.prototype.toString,g="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;b.exports=function(a){if(!a||"function"!==typeof a&&"object"!==typeof a)return!1;if(g){var b;try{e(a)?b=!1:(d.call(a),b=!0)}catch(c){b=!1}return b}if(e(a))return!1;a=h.call(a);return"[object Function]"===a||"[object GeneratorFunction]"===a}},{}],30:[function(a,b,c){var d=Date.prototype.getDay,f=Object.prototype.toString,e="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;
b.exports=function(a){if("object"!==typeof a||null===a)return!1;var b;if(e)try{d.call(a),b=!0}catch(c){b=!1}else b="[object Date]"===f.call(a);return b}},{}],31:[function(a,b,c){var d=RegExp.prototype.exec,f=Object.prototype.toString,e="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;b.exports=function(a){if("object"!==typeof a)return!1;var b;if(e)try{d.call(a),b=!0}catch(c){b=!1}else b="[object RegExp]"===f.call(a);return b}},{}],32:[function(a,b,c){var d=Object.prototype.toString;
if("function"===typeof Symbol&&"symbol"===typeof Symbol()){var f=Symbol.prototype.toString,e=/^Symbol\(.*\)$/;b.exports=function(a){if("symbol"===typeof a)return!0;if("[object Symbol]"!==d.call(a))return!1;try{var b;b="symbol"!==typeof a.valueOf()?!1:e.test(f.call(a));return b}catch(c){return!1}}}else b.exports=function(a){return!1}},{}],33:[function(a,b,c){var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString,e=Array.prototype.slice,h=a("./isArguments"),g=!{toString:null}.propertyIsEnumerable("toString"),
k=function(){}.propertyIsEnumerable("prototype"),m="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),l=function(a){var b=a.constructor;return b&&b.prototype===a},n={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if("undefined"===typeof window)return!1;for(var a in window)try{if(!n["$"+a]&&d.call(window,a)&&null!==window[a]&&"object"===typeof window[a])try{l(window[a])}catch(b){return!0}}catch(b){return!0}return!1}(),
q=function(a){var b=null!==a&&"object"===typeof a,c="[object Function]"===f.call(a),e=h(a),n=b&&"[object String]"===f.call(a),q=[];if(!b&&!c&&!e)throw new TypeError("Object.keys called on a non-object");b=k&&c;if(n&&0<a.length&&!d.call(a,0))for(n=0;n<a.length;++n)q.push(String(n));if(e&&0<a.length)for(e=0;e<a.length;++e)q.push(String(e));else for(var F in a)b&&"prototype"===F||!d.call(a,F)||q.push(String(F));if(g){var y;if("undefined"!==typeof window&&r)try{y=l(a)}catch(z){y=!1}else y=l(a);for(e=
0;e<m.length;++e)y&&"constructor"===m[e]||!d.call(a,m[e])||q.push(m[e])}return q};q.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var a=Object.keys;Object.keys=function(b){return h(b)?a(e.call(b)):a(b)}}}else Object.keys=q;return Object.keys||q};b.exports=q},{"./isArguments":34}],34:[function(a,b,c){var d=Object.prototype.toString;b.exports=function(a){var b=d.call(a),c="[object Arguments]"===b;c||(c="[object Array]"!==b&&null!==a&&"object"===
typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Function]"===d.call(a.callee));return c}},{}],35:[function(a,b,c){var d=a("./implementation");b.exports=function(){return Array.prototype.includes||d}},{"./implementation":13}],36:[function(a,b,c){var d=a("define-properties"),f=a("./polyfill");b.exports=function(){var a=f();Array.prototype.includes!==a&&d(Array.prototype,{includes:a});return a}},{"./polyfill":35,"define-properties":15}],37:[function(a,b,c){var d=a("es-abstract/es7"),f=a("has"),
e=a("function-bind").call(Function.call,Object.prototype.propertyIsEnumerable);b.exports=function(a){a=d.RequireObjectCoercible(a);var b=[],c;for(c in a)f(a,c)&&e(a,c)&&b.push([c,a[c]]);return b}},{"es-abstract/es7":42,"function-bind":53,has:54}],38:[function(a,b,c){c=a("define-properties");var d=a("./implementation"),f=a("./polyfill");a=a("./shim");c(d,{getPolyfill:f,implementation:d,shim:a});b.exports=d},{"./implementation":37,"./polyfill":61,"./shim":62,"define-properties":39}],39:[function(a,
b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:51,"object-keys":59}],40:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./helpers/isFinite":44,"./helpers/mod":46,"./helpers/sign":47,dup:16,"es-to-primitive/es5":48,"is-callable":55}],41:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./es5":40,"./helpers/assign":43,"./helpers/isFinite":44,"./helpers/isPrimitive":45,"./helpers/mod":46,"./helpers/sign":47,dup:17,"es-to-primitive/es6":49,"function-bind":53,"is-regex":57}],
42:[function(a,b,c){c=a("./es6");a=a("./helpers/assign")(c,{SameValueNonNumber:function(a,b){if("number"===typeof a||typeof a!==typeof b)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(a,b)}});b.exports=a},{"./es6":41,"./helpers/assign":43}],43:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18}],44:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],45:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},
{dup:20}],46:[function(a,b,c){arguments[4][21][0].apply(c,arguments)},{dup:21}],47:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],48:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{"./helpers/isPrimitive":50,dup:23,"is-callable":55}],49:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{"./helpers/isPrimitive":50,dup:24,"is-callable":55,"is-date-object":56,"is-symbol":58}],50:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],51:[function(a,b,c){arguments[4][26][0].apply(c,
arguments)},{dup:26}],52:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],53:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":52,dup:28}],54:[function(a,b,c){a=a("function-bind");b.exports=a.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":53}],55:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],56:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{dup:30}],57:[function(a,b,c){arguments[4][31][0].apply(c,arguments)},
{dup:31}],58:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],59:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":60,dup:33}],60:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],61:[function(a,b,c){var d=a("./implementation");b.exports=function(){return"function"===typeof Object.entries?Object.entries:d}},{"./implementation":37}],62:[function(a,b,c){var d=a("./polyfill"),f=a("define-properties");b.exports=function(){var a=d();f(Object,{entries:a},
{entries:function(){return Object.entries!==a}});return a}},{"./polyfill":61,"define-properties":39}],63:[function(a,b,c){var d=a("es-abstract/es7"),f=Object.defineProperty,e=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,k=Function.call.bind(Array.prototype.concat),m=Function.call.bind(Array.prototype.reduce),l=g?function(a){return k(h(a),g(a))}:h,n=d.IsCallable(e)&&d.IsCallable(h);b.exports=function(a){d.RequireObjectCoercible(a);if(!n)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");
var b=d.ToObject(a);return m(l(b),function(a,c){var d=e(b,c);f&&c in a?f(a,c,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[c]=d;return a},{})}},{"es-abstract/es7":68}],64:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{"./implementation":63,"./polyfill":86,"./shim":87,"define-properties":65,dup:38}],65:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:77,"object-keys":84}],66:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./helpers/isFinite":70,
"./helpers/mod":72,"./helpers/sign":73,dup:16,"es-to-primitive/es5":74,"is-callable":80}],67:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./es5":66,"./helpers/assign":69,"./helpers/isFinite":70,"./helpers/isPrimitive":71,"./helpers/mod":72,"./helpers/sign":73,dup:17,"es-to-primitive/es6":75,"function-bind":79,"is-regex":82}],68:[function(a,b,c){arguments[4][42][0].apply(c,arguments)},{"./es6":67,"./helpers/assign":69,dup:42}],69:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},
{dup:18}],70:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],71:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],72:[function(a,b,c){arguments[4][21][0].apply(c,arguments)},{dup:21}],73:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],74:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{"./helpers/isPrimitive":76,dup:23,"is-callable":80}],75:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{"./helpers/isPrimitive":76,dup:24,"is-callable":80,
"is-date-object":81,"is-symbol":83}],76:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],77:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{dup:26}],78:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],79:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":78,dup:28}],80:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],81:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{dup:30}],82:[function(a,b,c){arguments[4][31][0].apply(c,
arguments)},{dup:31}],83:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],84:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":85,dup:33}],85:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],86:[function(a,b,c){var d=a("./implementation");b.exports=function(){return"function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:d}},{"./implementation":63}],87:[function(a,b,c){var d=a("./polyfill"),f=a("define-properties");
b.exports=function(){var a=d();f(Object,{getOwnPropertyDescriptors:a},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==a}});return a}},{"./polyfill":86,"define-properties":65}],88:[function(a,b,c){var d=a("es-abstract/es7"),f=a("has"),e=a("function-bind").call(Function.call,Object.prototype.propertyIsEnumerable);b.exports=function(a){a=d.RequireObjectCoercible(a);var b=[],c;for(c in a)f(a,c)&&e(a,c)&&b.push(a[c]);return b}},{"es-abstract/es7":93,"function-bind":104,
has:105}],89:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{"./implementation":88,"./polyfill":112,"./shim":113,"define-properties":90,dup:38}],90:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:102,"object-keys":110}],91:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./helpers/isFinite":95,"./helpers/mod":97,"./helpers/sign":98,dup:16,"es-to-primitive/es5":99,"is-callable":106}],92:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./es5":91,
"./helpers/assign":94,"./helpers/isFinite":95,"./helpers/isPrimitive":96,"./helpers/mod":97,"./helpers/sign":98,dup:17,"es-to-primitive/es6":100,"function-bind":104,"is-regex":108}],93:[function(a,b,c){arguments[4][42][0].apply(c,arguments)},{"./es6":92,"./helpers/assign":94,dup:42}],94:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18}],95:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],96:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],97:[function(a,
b,c){arguments[4][21][0].apply(c,arguments)},{dup:21}],98:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],99:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{"./helpers/isPrimitive":101,dup:23,"is-callable":106}],100:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{"./helpers/isPrimitive":101,dup:24,"is-callable":106,"is-date-object":107,"is-symbol":109}],101:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],102:[function(a,b,c){arguments[4][26][0].apply(c,
arguments)},{dup:26}],103:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],104:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":103,dup:28}],105:[function(a,b,c){arguments[4][54][0].apply(c,arguments)},{dup:54,"function-bind":104}],106:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],107:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{dup:30}],108:[function(a,b,c){arguments[4][31][0].apply(c,arguments)},{dup:31}],109:[function(a,
b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],110:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":111,dup:33}],111:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],112:[function(a,b,c){var d=a("./implementation");b.exports=function(){return"function"===typeof Object.values?Object.values:d}},{"./implementation":88}],113:[function(a,b,c){var d=a("./polyfill"),f=a("define-properties");b.exports=function(){var a=d();f(Object,{values:a},{values:function(){return Object.values!==
a}});return a}},{"./polyfill":112,"define-properties":90}],114:[function(a,b,c){var d=a("define-properties"),f=a("es-abstract/es7"),e=function(a){f.RequireObjectCoercible(this);var b=f.ToObject(this),b=f.ToString(b);a=f.ToInteger(a);var c=b.length;if(0>a||a>=c)return"";var d=b.charCodeAt(a),e=a+1,n=1;55296<=d&&56319>=d&&c>e&&(c=b.charCodeAt(e),56320<=c&&57343>=c&&(n=2));return b.slice(a,a+n)};a=a("function-bind").call(Function.call,e);d(a,{method:e,shim:function(){d(String.prototype,{at:e});return String.prototype.at}});
b.exports=a},{"define-properties":115,"es-abstract/es7":118,"function-bind":129}],115:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:127,"object-keys":134}],116:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./helpers/isFinite":120,"./helpers/mod":122,"./helpers/sign":123,dup:16,"es-to-primitive/es5":124,"is-callable":130}],117:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./es5":116,"./helpers/assign":119,"./helpers/isFinite":120,"./helpers/isPrimitive":121,
"./helpers/mod":122,"./helpers/sign":123,dup:17,"es-to-primitive/es6":125,"function-bind":129,"is-regex":132}],118:[function(a,b,c){arguments[4][42][0].apply(c,arguments)},{"./es6":117,"./helpers/assign":119,dup:42}],119:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18}],120:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],121:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],122:[function(a,b,c){arguments[4][21][0].apply(c,arguments)},{dup:21}],
123:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],124:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{"./helpers/isPrimitive":126,dup:23,"is-callable":130}],125:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{"./helpers/isPrimitive":126,dup:24,"is-callable":130,"is-date-object":131,"is-symbol":133}],126:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],127:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{dup:26}],128:[function(a,b,
c){arguments[4][27][0].apply(c,arguments)},{dup:27}],129:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":128,dup:28}],130:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],131:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{dup:30}],132:[function(a,b,c){arguments[4][31][0].apply(c,arguments)},{dup:31}],133:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],134:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":135,
dup:33}],135:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],136:[function(a,b,c){c=a("function-bind");var d=a("es-abstract/es7"),f=c.call(Function.call,String.prototype.slice);b.exports=function(a){var b=d.RequireObjectCoercible(this),b=d.ToString(b),c=d.ToLength(b.length),k;1<arguments.length&&(k=arguments[1]);k="undefined"===typeof k?"":d.ToString(k);""===k&&(k=" ");var m=d.ToLength(a);if(m<=c)return b;for(c=m-c;k.length<c;){var m=k.length,l=c-m;k+=m>l?f(k,0,l):k}k=k.length>
c?f(k,0,c):k;return b+k}},{"es-abstract/es7":141,"function-bind":152}],137:[function(a,b,c){var d=a("function-bind");c=a("define-properties");var f=a("es-abstract/es7"),e=a("./implementation"),h=a("./polyfill");a=a("./shim");var g=d.call(Function.apply,e),d=function(a,b){f.RequireObjectCoercible(a);var c=[b];2<arguments.length&&c.push(arguments[2]);return g(a,c)};c(d,{getPolyfill:h,implementation:e,shim:a});b.exports=d},{"./implementation":136,"./polyfill":159,"./shim":160,"define-properties":138,
"es-abstract/es7":141,"function-bind":152}],138:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:150,"object-keys":157}],139:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./helpers/isFinite":143,"./helpers/mod":145,"./helpers/sign":146,dup:16,"es-to-primitive/es5":147,"is-callable":153}],140:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./es5":139,"./helpers/assign":142,"./helpers/isFinite":143,"./helpers/isPrimitive":144,"./helpers/mod":145,"./helpers/sign":146,
dup:17,"es-to-primitive/es6":148,"function-bind":152,"is-regex":155}],141:[function(a,b,c){arguments[4][42][0].apply(c,arguments)},{"./es6":140,"./helpers/assign":142,dup:42}],142:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18}],143:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],144:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],145:[function(a,b,c){arguments[4][21][0].apply(c,arguments)},{dup:21}],146:[function(a,b,c){arguments[4][22][0].apply(c,
arguments)},{dup:22}],147:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{"./helpers/isPrimitive":149,dup:23,"is-callable":153}],148:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{"./helpers/isPrimitive":149,dup:24,"is-callable":153,"is-date-object":154,"is-symbol":156}],149:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],150:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{dup:26}],151:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],
152:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":151,dup:28}],153:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],154:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{dup:30}],155:[function(a,b,c){arguments[4][31][0].apply(c,arguments)},{dup:31}],156:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],157:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":158,dup:33}],158:[function(a,b,c){arguments[4][34][0].apply(c,
arguments)},{dup:34}],159:[function(a,b,c){var d=a("./implementation");b.exports=function(){return"function"===typeof String.prototype.padEnd?String.prototype.padEnd:d}},{"./implementation":136}],160:[function(a,b,c){var d=a("./polyfill"),f=a("define-properties");b.exports=function(){var a=d();f(String.prototype,{padEnd:a},{padEnd:function(){return String.prototype.padEnd!==a}});return a}},{"./polyfill":159,"define-properties":138}],161:[function(a,b,c){c=a("function-bind");var d=a("es-abstract/es7"),
f=c.call(Function.call,String.prototype.slice);b.exports=function(a){var b=d.RequireObjectCoercible(this),b=d.ToString(b),c=d.ToLength(b.length),k;1<arguments.length&&(k=arguments[1]);k="undefined"===typeof k?"":d.ToString(k);""===k&&(k=" ");var m=d.ToLength(a);if(m<=c)return b;for(c=m-c;k.length<c;){var m=k.length,l=c-m;k+=m>l?f(k,0,l):k}return(k.length>c?f(k,0,c):k)+b}},{"es-abstract/es7":166,"function-bind":177}],162:[function(a,b,c){var d=a("function-bind");c=a("define-properties");var f=a("es-abstract/es7"),
e=a("./implementation"),h=a("./polyfill");a=a("./shim");var g=d.call(Function.apply,e),d=function(a,b){f.RequireObjectCoercible(a);var c=[b];2<arguments.length&&c.push(arguments[2]);return g(a,c)};c(d,{getPolyfill:h,implementation:e,shim:a});b.exports=d},{"./implementation":161,"./polyfill":184,"./shim":185,"define-properties":163,"es-abstract/es7":166,"function-bind":177}],163:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:175,"object-keys":182}],164:[function(a,b,c){arguments[4][16][0].apply(c,
arguments)},{"./helpers/isFinite":168,"./helpers/mod":170,"./helpers/sign":171,dup:16,"es-to-primitive/es5":172,"is-callable":178}],165:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./es5":164,"./helpers/assign":167,"./helpers/isFinite":168,"./helpers/isPrimitive":169,"./helpers/mod":170,"./helpers/sign":171,dup:17,"es-to-primitive/es6":173,"function-bind":177,"is-regex":180}],166:[function(a,b,c){arguments[4][42][0].apply(c,arguments)},{"./es6":165,"./helpers/assign":167,dup:42}],167:[function(a,
b,c){arguments[4][18][0].apply(c,arguments)},{dup:18}],168:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],169:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],170:[function(a,b,c){arguments[4][21][0].apply(c,arguments)},{dup:21}],171:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],172:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{"./helpers/isPrimitive":174,dup:23,"is-callable":178}],173:[function(a,b,c){arguments[4][24][0].apply(c,
arguments)},{"./helpers/isPrimitive":174,dup:24,"is-callable":178,"is-date-object":179,"is-symbol":181}],174:[function(a,b,c){arguments[4][20][0].apply(c,arguments)},{dup:20}],175:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{dup:26}],176:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],177:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":176,dup:28}],178:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],179:[function(a,b,
c){arguments[4][30][0].apply(c,arguments)},{dup:30}],180:[function(a,b,c){arguments[4][31][0].apply(c,arguments)},{dup:31}],181:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],182:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":183,dup:33}],183:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],184:[function(a,b,c){var d=a("./implementation");b.exports=function(){return"function"===typeof String.prototype.padStart?String.prototype.padStart:
d}},{"./implementation":161}],185:[function(a,b,c){var d=a("./polyfill"),f=a("define-properties");b.exports=function(){var a=d();f(String.prototype,{padStart:a},{padStart:function(){return String.prototype.padStart!==a}});return a}},{"./polyfill":184,"define-properties":163}],186:[function(a,b,c){var d=a("function-bind").call(Function.call,String.prototype.replace),f=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;
b.exports=function(){return d(this,f,"")}},{"function-bind":191}],187:[function(a,b,c){var d=a("function-bind");c=a("define-properties");var f=a("./implementation"),e=a("./polyfill");a=a("./shim");d=d.call(Function.call,e());c(d,{getPolyfill:e,implementation:f,shim:a});b.exports=d},{"./implementation":186,"./polyfill":194,"./shim":195,"define-properties":188,"function-bind":191}],188:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:189,"object-keys":192}],189:[function(a,b,
c){arguments[4][26][0].apply(c,arguments)},{dup:26}],190:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],191:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{"./implementation":190,dup:28}],192:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":193,dup:33}],193:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],194:[function(a,b,c){var d=a("./implementation");b.exports=function(){return String.prototype.trimLeft&&"\u200b"==="\u200b".trimLeft()?
String.prototype.trimLeft:d}},{"./implementation":186}],195:[function(a,b,c){var d=a("define-properties"),f=a("./polyfill");b.exports=function(){var a=f();d(String.prototype,{trimLeft:a},{trimLeft:function(){return String.prototype.trimLeft!==a}});return a}},{"./polyfill":194,"define-properties":188}],196:[function(a,b,c){var d=a("function-bind").call(Function.call,String.prototype.replace),f=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;
b.exports=function(){return d(this,f,"")}},{"function-bind":201}],197:[function(a,b,c){arguments[4][187][0].apply(c,arguments)},{"./implementation":196,"./polyfill":204,"./shim":205,"define-properties":198,dup:187,"function-bind":201}],198:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15,foreach:199,"object-keys":202}],199:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{dup:26}],200:[function(a,b,c){arguments[4][27][0].apply(c,arguments)},{dup:27}],201:[function(a,b,c){arguments[4][28][0].apply(c,
arguments)},{"./implementation":200,dup:28}],202:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{"./isArguments":203,dup:33}],203:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34}],204:[function(a,b,c){var d=a("./implementation");b.exports=function(){return String.prototype.trimRight&&"\u200b"==="\u200b".trimRight()?String.prototype.trimRight:d}},{"./implementation":196}],205:[function(a,b,c){var d=a("define-properties"),f=a("./polyfill");b.exports=function(){var a=f();d(String.prototype,
{trimRight:a},{trimRight:function(){return String.prototype.trimRight!==a}});return a}},{"./polyfill":204,"define-properties":198}],206:[function(a,b,c){b.exports=a("./es7-shim").shim()},{"./es7-shim":12}]},{},[206]);
(function(a){"undefined"===typeof a&&(a={});"undefined"===typeof a.performance&&(a.performance={});a._perfRefForUserTimingPolyfill=a.performance;a.performance.userTimingJsNow=!1;a.performance.userTimingJsNowPrefixed=!1;a.performance.userTimingJsUserTiming=!1;a.performance.userTimingJsUserTimingPrefixed=!1;a.performance.userTimingJsPerformanceTimeline=!1;a.performance.userTimingJsPerformanceTimelinePrefixed=!1;var b=[],c=[],d=null,f,e;if("function"!==typeof a.performance.now){a.performance.userTimingJsNow=
!0;c=["webkitNow","msNow","mozNow"];for(f=0;f<c.length;f++)if("function"===typeof a.performance[c[f]]){a.performance.now=a.performance[c[f]];a.performance.userTimingJsNowPrefixed=!0;break}var h=+new Date;a.performance.timing&&a.performance.timing.navigationStart&&(h=a.performance.timing.navigationStart);"function"!==typeof a.performance.now&&(a.performance.now=Date.now?function(){return Date.now()-h}:function(){return+new Date-h})}var g=function(){},k=function(){},m=[],l=!1,n=!1;if("function"!==typeof a.performance.getEntries||
"function"!==typeof a.performance.mark){"function"===typeof a.performance.getEntries&&"function"!==typeof a.performance.mark&&(n=!0);a.performance.userTimingJsPerformanceTimeline=!0;b=["webkit","moz"];c=["getEntries","getEntriesByName","getEntriesByType"];for(f=0;f<c.length;f++)for(e=0;e<b.length;e++)d=b[e]+c[f].substr(0,1).toUpperCase()+c[f].substr(1),"function"===typeof a.performance[d]&&(a.performance[c[f]]=a.performance[d],a.performance.userTimingJsPerformanceTimelinePrefixed=!0);var g=function(a){m.push(a);
"measure"===a.entryType&&(l=!0)},r=function(){l&&(m.sort(function(a,b){return a.startTime-b.startTime}),l=!1)},k=function(a,b){for(f=0;f<m.length;)m[f].entryType!==a?f++:"undefined"!==typeof b&&m[f].name!==b?f++:m.splice(f,1)};if("function"!==typeof a.performance.getEntries||n){var q=a.performance.getEntries;a.performance.getEntries=function(){r();var b=m.slice(0);n&&q&&(Array.prototype.push.apply(b,q.call(a.performance)),b.sort(function(a,b){return a.startTime-b.startTime}));return b}}if("function"!==
typeof a.performance.getEntriesByType||n){var t=a.performance.getEntriesByType;a.performance.getEntriesByType=function(b){if("undefined"===typeof b||"mark"!==b&&"measure"!==b)return n&&t?t.call(a.performance,b):[];"measure"===b&&r();var c=[];for(f=0;f<m.length;f++)m[f].entryType===b&&c.push(m[f]);return c}}if("function"!==typeof a.performance.getEntriesByName||n){var u=a.performance.getEntriesByName;a.performance.getEntriesByName=function(b,c){if(c&&"mark"!==c&&"measure"!==c)return n&&u?u.call(a.performance,
b,c):[];"undefined"!==typeof c&&"measure"===c&&r();var d=[];for(f=0;f<m.length;f++)"undefined"!==typeof c&&m[f].entryType!==c||m[f].name!==b||d.push(m[f]);n&&u&&(Array.prototype.push.apply(d,u.call(a.performance,b,c)),d.sort(function(a,b){return a.startTime-b.startTime}));return d}}}if("function"!==typeof a.performance.mark){a.performance.userTimingJsUserTiming=!0;b=["webkit","moz","ms"];c=["mark","measure","clearMarks","clearMeasures"];for(f=0;f<c.length;f++)for(e=0;e<b.length;e++)d=b[e]+c[f].substr(0,
1).toUpperCase()+c[f].substr(1),"function"===typeof a.performance[d]&&(a.performance[c[f]]=a.performance[d],a.performance.userTimingJsUserTimingPrefixed=!0);var w={};"function"!==typeof a.performance.mark&&(a.performance.mark=function(b){var c=a.performance.now();if("undefined"===typeof b)throw new SyntaxError("Mark name must be specified");if(a.performance.timing&&b in a.performance.timing)throw new SyntaxError("Mark name is not allowed");w[b]||(w[b]=[]);w[b].push(c);g({entryType:"mark",name:b,startTime:c,
duration:0})});"function"!==typeof a.performance.clearMarks&&(a.performance.clearMarks=function(a){a?w[a]=[]:w={};k("mark",a)});"function"!==typeof a.performance.measure&&(a.performance.measure=function(b,c,d){var e=a.performance.now();if("undefined"===typeof b)throw new SyntaxError("Measure must be specified");if(c){var f=0;if(a.performance.timing&&c in a.performance.timing){if("navigationStart"!==c&&0===a.performance.timing[c])throw Error(c+" has a timing of 0");f=a.performance.timing[c]-a.performance.timing.navigationStart}else if(c in
w)f=w[c][w[c].length-1];else throw Error(c+" mark not found");c=e;if(d)if(a.performance.timing&&d in a.performance.timing){if("navigationStart"!==d&&0===a.performance.timing[d])throw Error(d+" has a timing of 0");c=a.performance.timing[d]-a.performance.timing.navigationStart}else if(d in w)c=w[d][w[d].length-1];else throw Error(d+" mark not found");g({entryType:"measure",name:b,startTime:f,duration:c-f})}else g({entryType:"measure",name:b,startTime:0,duration:e})});"function"!==typeof a.performance.clearMeasures&&
(a.performance.clearMeasures=function(a){k("measure",a)})}"function"===typeof define&&define.amd?define([],function(){return a.performance}):"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=a.performance)})("undefined"!==typeof window?window:void 0);window.performance.mark("genius.startScriptEvaluation");window["com.genius.Genius"]||(window["com.genius.Genius"]={},window.require=function(){return window["com.genius.Genius"].require.apply(this,arguments)});
(function(a,b){function c(a){var b=Y[a]={},c,d;a=a.split(/\s+/);c=0;for(d=a.length;c<d;c++)b[a[c]]=!0;return b}function d(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(qa,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:p.isNumeric(d)?+d:N.test(d)?p.parseJSON(d):d}catch(e){}p.data(a,c,d)}else d=b;return d}function f(a){for(var b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function e(a,b,c){var d=
b+"defer",e=b+"queue",f=b+"mark",g=p._data(a,d);!g||"queue"!==c&&p._data(a,e)||"mark"!==c&&p._data(a,f)||setTimeout(function(){p._data(a,e)||p._data(a,f)||(p.removeData(a,d,!0),g.fire())},0)}function h(){return!1}function g(){return!0}function k(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function m(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if("string"===typeof b){var d=p.grep(a,
function(a){return 1===a.nodeType});if(Lb.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return 0<=p.inArray(a,b)===c})}function l(a){var b=ac.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function n(a,b){return p.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function r(a,b){if(1===b.nodeType&&p.hasData(a)){var c,d,e;d=p._data(a);var f=p._data(b,
d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)p.event.add(b,c,g[c][d]);f.data&&(f.data=p.extend({},f.data))}}function q(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==
a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(p.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function t(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function u(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function w(a){var b=(a.nodeName||"").toLowerCase();
"input"===b?u(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&p.grep(a.getElementsByTagName("input"),u)}function A(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?1:0;if(0<d){if("border"!==c)for(;4>e;e+=2)c||(d-=parseFloat(p.css(a,"padding"+Cb[e]))||0),d="margin"===c?d+(parseFloat(p.css(a,c+Cb[e]))||0):d-(parseFloat(p.css(a,"border"+Cb[e]+"Width"))||0);return d+"px"}d=lb(a,b);if(0>d||null==d)d=a.style[b];if(eb.test(d))return d;d=parseFloat(d)||0;if(c)for(;4>e;e+=
2)d+=parseFloat(p.css(a,"padding"+Cb[e]))||0,"padding"!==c&&(d+=parseFloat(p.css(a,"border"+Cb[e]+"Width"))||0),"margin"===c&&(d+=parseFloat(p.css(a,c+Cb[e]))||0);return d+"px"}function x(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");if(p.isFunction(c))for(var d=b.toLowerCase().split(ic),e=0,f=d.length,g,h;e<f;e++)g=d[e],(h=/^\+/.test(g))&&(g=g.substr(1)||"*"),g=a[g]=a[g]||[],g[h?"unshift":"push"](c)}}function E(a,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=!0;f=a[f];for(var h=0,k=f?f.length:
0,l=a===Wb,m;h<k&&(l||!m);h++)m=f[h](c,d,e),"string"===typeof m&&(!l||g[m]?m=b:(c.dataTypes.unshift(m),m=E(a,c,d,e,m,g)));!l&&m||g["*"]||(m=E(a,c,d,e,"*",g));return m}function F(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function y(a,b,c,d){if(p.isArray(b))p.each(b,function(b,e){c||xa.test(a)?d(a,e):y(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==p.type(b))d(a,b);else for(var e in b)y(a+"["+e+"]",b[e],c,
d)}function z(){try{return new a.XMLHttpRequest}catch(b){}}function J(){setTimeout(H,0);return ed=p.now()}function H(){ed=b}function T(a,b){var c={};p.each(ad.concat.apply([],ad.slice(0,b)),function(){c[this]=a});return c}function I(a){if(!$a[a]){var b=D.body,c=p("<"+a+">").appendTo(b),d=c.css("display");c.remove();if("none"===d||""===d)sa||(sa=D.createElement("iframe"),sa.frameBorder=sa.width=sa.height=0),b.appendChild(sa),Sa&&sa.createElement||(Sa=(sa.contentWindow||sa.contentDocument).document,
Sa.write((p.support.boxModel?"<!doctype html>":"")+"<html><body>"),Sa.close()),c=Sa.createElement(a),Sa.body.appendChild(c),d=p.css(c,"display"),b.removeChild(sa);$a[a]=d}return $a[a]}function Q(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var D=a.document,K=a.navigator,aa=a.location,p=function(){function c(){if(!d.isReady){try{D.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,
g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,l=/^\s+/,m=/\s+$/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,q=/^[\],:{}\s]*$/,t=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,p=/(?:^|:|,)(?:\s*\[)+/g,u=/(webkit)[ \/]([\w.]+)/,w=/(opera)(?:.*version)?[ \/]([\w.]+)/,H=/(msie) ([\w.]+)/,A=/(mozilla)(?:.*? rv:([\w.]+))?/,z=/-([a-z]|[0-9])/ig,x=/^-ms-/,T=function(a,b){return(b+"").toUpperCase()},I=K.userAgent,F,y,Q=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,
E=Array.prototype.push,mb=Array.prototype.slice,aa=String.prototype.trim,J=Array.prototype.indexOf,ba={};d.fn=d.prototype={constructor:d,init:function(a,c,e){var f;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&D.body)return this.context=D,this[0]=D.body,this.selector=a,this.length=1,this;if("string"===typeof a){f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:h.exec(a);if(!f||!f[1]&&c)return!c||c.jquery?(c||e).find(a):
this.constructor(c).find(a);if(f[1])return e=(c=c instanceof d?c[0]:c)?c.ownerDocument||c:D,(a=n.exec(a))?d.isPlainObject(c)?(a=[D.createElement(a[1])],d.fn.attr.call(a,c,!0)):a=[e.createElement(a[1])]:(a=d.buildFragment([f[1]],[e]),a=(a.cacheable?d.clone(a.fragment):a.fragment).childNodes),d.merge(this,a);if((c=D.getElementById(f[2]))&&c.parentNode){if(c.id!==f[2])return e.find(a);this.length=1;this[0]=c}this.context=D;this.selector=a;return this}if(d.isFunction(a))return e.ready(a);a.selector!==
b&&(this.selector=a.selector,this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return mb.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?E.apply(e,a):d.merge(e,a);e.prevObject=this;e.context=this.context;"find"===b?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+
"("+c+")");return e},each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady();F.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(mb.apply(this,arguments),"slice",mb.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},
push:E,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var a,c,e,f,g,h=arguments[0]||{},k=1,l=arguments.length,m=!1;"boolean"===typeof h&&(m=h,h=arguments[1]||{},k=2);"object"===typeof h||d.isFunction(h)||(h={});l===k&&(h=this,--k);for(;k<l;k++)if(null!=(a=arguments[k]))for(c in a)e=h[c],f=a[c],h!==f&&(m&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,e=e&&d.isArray(e)?e:[]):e=e&&d.isPlainObject(e)?e:{},h[c]=d.extend(m,e,f)):f!==b&&(h[c]=f));return h};d.extend({noConflict:function(b){a.$===
d&&(a.$=f);b&&a.jQuery===d&&(a.jQuery=e);return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(!0===a&&!--d.readyWait||!0!==a&&!d.isReady){if(!D.body)return setTimeout(d.ready,1);d.isReady=!0;!0!==a&&0<--d.readyWait||(F.fireWith(D,[d]),d.fn.trigger&&d(D).trigger("ready").off("ready"))}},bindReady:function(){if(!F){F=d.Callbacks("once memory");if("complete"===D.readyState)return setTimeout(d.ready,1);if(D.addEventListener)D.addEventListener("DOMContentLoaded",
y,!1),a.addEventListener("load",d.ready,!1);else if(D.attachEvent){D.attachEvent("onreadystatechange",y);a.attachEvent("onload",d.ready);var b=!1;try{b=null==a.frameElement}catch(e){}D.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return"function"===d.type(a)},isArray:Array.isArray||function(a){return"array"===d.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):ba[Q.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==d.type(a)||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var e in a);return e===b||Y.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(b){if("string"!==typeof b||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(q.test(b.replace(t,
"@").replace(r,"]").replace(p,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){if("string"!==typeof c||!c)return null;var e,f;try{a.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=b}e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||d.error("Invalid XML: "+c);return e},noop:function(){},globalEval:function(b){b&&k.test(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(z,T)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,k=h===b||d.isFunction(a);if(e)if(k)for(f in a){if(!1===c.apply(a[f],e))break}else for(;g<h&&!1!==c.apply(a[g++],e););else if(k)for(f in a){if(!1===c.call(a[f],f,a[f]))break}else for(;g<h&&!1!==c.call(a[g],g,a[g++]););return a},trim:aa?function(a){return null==a?"":aa.call(a)}:function(a){return null==
a?"":a.toString().replace(l,"").replace(m,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var e=d.type(a);null==a.length||"string"===e||"function"===e||"regexp"===e||d.isWindow(a)?E.call(c,a):d.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(J)return J.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"===typeof c.length)for(var f=c.length;e<f;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=
c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],k=0,l=a.length;if(a instanceof d||l!==b&&"number"===typeof l&&(0<l&&a[0]&&a[l-1]||0===l||d.isArray(a)))for(;k<l;k++)f=c(a[k],k,e),null!=f&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),null!=f&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if("string"===typeof c){var e=a[c];c=a;a=e}if(!d.isFunction(a))return b;
var f=mb.call(arguments,2),e=function(){return a.apply(c,f.concat(mb.call(arguments)))};e.guid=a.guid=a.guid||e.guid||d.guid++;return e},access:function(a,c,e,f,g,h,k){var l,m=null==e,n=0,q=a.length;if(e&&"object"===typeof e){for(n in e)d.access(a,c,n,e[n],1,h,f);g=1}else if(f!==b){l=k===b&&d.isFunction(f);m&&(l?(l=c,c=function(a,b,c){return l.call(d(a),c)}):(c.call(a,f),c=null));if(c)for(;n<q;n++)c(a[n],e,l?f.call(a[n],n,c(a[n],e)):f,k);g=1}return g?a:m?c.call(a):q?c(a[0],e):h},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=u.exec(a)||w.exec(a)||H.exec(a)||0>a.indexOf("compatible")&&A.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,e){e&&e instanceof d&&!(e instanceof a)&&(e=a(e));return d.fn.init.call(this,c,e,b)};a.fn.init.prototype=a.fn;var b=a(D);return a},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){ba["[object "+b+"]"]=b.toLowerCase()});I=d.uaMatch(I);I.browser&&(d.browser[I.browser]=!0,d.browser.version=I.version);d.browser.webkit&&(d.browser.safari=!0);k.test("\u00a0")&&(l=/^[\s\xA0]+/,m=/[\s\xA0]+$/);g=d(D);D.addEventListener?y=function(){D.removeEventListener("DOMContentLoaded",y,!1);d.ready()}:D.attachEvent&&(y=function(){"complete"===D.readyState&&(D.detachEvent("onreadystatechange",y),d.ready())});return d}(),Y={};p.Callbacks=function(a){a=a?Y[a]||c(a):{};var d=[],e=[],
f,g,h,k,l,m,n=function(b){var c,e,f,g;c=0;for(e=b.length;c<e;c++)f=b[c],g=p.type(f),"array"===g?n(f):"function"===g&&(a.unique&&t.has(f)||d.push(f))},q=function(b,c){c=c||[];f=!a.memory||[b,c];h=g=!0;m=k||0;k=0;for(l=d.length;d&&m<l;m++)if(!1===d[m].apply(b,c)&&a.stopOnFalse){f=!0;break}h=!1;d&&(a.once?!0===f?t.disable():d=[]:e&&e.length&&(f=e.shift(),t.fireWith(f[0],f[1])))},t={add:function(){if(d){var a=d.length;n(arguments);h?l=d.length:f&&!0!==f&&(k=a,q(f[0],f[1]))}return this},remove:function(){if(d)for(var b=
arguments,c=0,e=b.length;c<e;c++)for(var f=0;f<d.length&&(b[c]!==d[f]||(h&&f<=l&&(l--,f<=m&&m--),d.splice(f--,1),!a.unique));f++);return this},has:function(a){if(d)for(var b=0,c=d.length;b<c;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=e=f=b;return this},disabled:function(){return!d},lock:function(){e=b;f&&!0!==f||t.disable();return this},locked:function(){return!e},fireWith:function(b,c){e&&(h?a.once||e.push([b,c]):a.once&&f||q(b,c));return this},fire:function(){t.fireWith(this,
arguments);return this},fired:function(){return!!g}};return t};var ba=[].slice;p.extend({Deferred:function(a){var b=p.Callbacks("once memory"),c=p.Callbacks("once memory"),d=p.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){h.done(a).fail(b).progress(c);return this},always:function(){h.done.apply(h,arguments).fail.apply(h,arguments);return this},pipe:function(a,
b,c){return p.Deferred(function(d){p.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;if(p.isFunction(c))h[a](function(){if((f=c.apply(this,arguments))&&p.isFunction(f.promise))f.promise().then(d.resolve,d.reject,d.notify);else d[e+"With"](this===h?d:this,[f])});else h[a](d[e])})}).promise()},promise:function(a){if(null==a)a=g;else for(var b in g)a[b]=g[b];return a}},h=g.promise({}),k;for(k in f)h[k]=f[k].fire,h[k+"With"]=f[k].fireWith;h.done(function(){e=
"resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock);a&&a.call(h,h);return h},when:function(a){function b(a){return function(b){d[a]=1<arguments.length?ba.call(arguments,0):b;--h||k.resolveWith(k,d)}}function c(a){return function(b){g[a]=1<arguments.length?ba.call(arguments,0):b;k.notifyWith(l,g)}}var d=ba.call(arguments,0),e=0,f=d.length,g=Array(f),h=f,k=1>=f&&a&&p.isFunction(a.promise)?a:p.Deferred(),l=k.promise();if(1<f){for(;e<f;e++)d[e]&&d[e].promise&&p.isFunction(d[e].promise)?
d[e].promise().then(b(e),k.reject,c(e)):--h;h||k.resolveWith(k,d)}else k!==a&&k.resolveWith(k,f?[a]:[]);return l}});p.support=function(){var b,c,d,e,f,g,h,k,l=D.createElement("div");l.setAttribute("className","t");l.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*");d=l.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=D.createElement("select");f=e.appendChild(D.createElement("option"));c=
l.getElementsByTagName("input")[0];b={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:f.selected,getSetAttribute:"t"!==l.className,enctype:!!D.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==D.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};p.boxModel=b.boxModel="CSS1Compat"===D.compatMode;c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"));
c=D.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name","t");l.appendChild(c);d=D.createDocumentFragment();d.appendChild(l.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(l);if(l.attachEvent)for(h in{submit:1,change:1,focusin:1})c="on"+h,k=c in l,k||(l.setAttribute(c,"return;"),k="function"===typeof l[c]),b[h+"Bubbles"]=
k;d.removeChild(l);d=e=f=l=c=null;p(function(){var c,d,e,f,h=D.getElementsByTagName("body")[0];h&&(c=D.createElement("div"),c.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),l=D.createElement("div"),c.appendChild(l),l.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",g=l.getElementsByTagName("td"),k=0===g[0].offsetHeight,g[0].style.display="",g[1].style.display=
"none",b.reliableHiddenOffsets=k&&0===g[0].offsetHeight,a.getComputedStyle&&(l.innerHTML="",d=D.createElement("div"),d.style.width="0",d.style.marginRight="0",l.style.width="2px",l.appendChild(d),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(d,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof l.style.zoom&&(l.innerHTML="",l.style.width=l.style.padding="1px",l.style.border=0,l.style.overflow="hidden",l.style.display="inline",l.style.zoom=1,b.inlineBlockNeedsLayout=3===l.offsetWidth,
l.style.display="block",l.style.overflow="visible",l.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=3!==l.offsetWidth),l.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",l.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
d=l.firstChild,e=d.firstChild,f=d.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==e.offsetTop,doesAddBorderForTableAndCells:5===f.offsetTop},e.style.position="fixed",e.style.top="20px",f.fixedPosition=20===e.offsetTop||15===e.offsetTop,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===e.offsetTop,f.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(l.style.marginTop="1%",b.pixelMargin="1%"!==
(a.getComputedStyle(l,null)||{marginTop:0}).marginTop),"undefined"!==typeof c.style.zoom&&(c.style.zoom=1),h.removeChild(c),l=null,p.extend(b,f))});return b}();var N=/^(?:\{.*\}|\[.*\])$/,qa=/([A-Z])/g;p.extend({cache:{},uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!f(a)},data:function(a,c,d,e){if(p.acceptData(a)){var f;
f=p.expando;var g="string"===typeof c,h=a.nodeType,k=h?p.cache:a,l=h?a[f]:a[f]&&f,m="events"===c;if(l&&k[l]&&(m||e||k[l].data)||!g||d!==b){l||(h?a[f]=l=++p.uuid:l=f);k[l]||(k[l]={},h||(k[l].toJSON=p.noop));if("object"===typeof c||"function"===typeof c)e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);f=a=k[l];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[p.camelCase(c)]=d);if(m&&!a[c])return f.events;g?(d=a[c],null==d&&(d=a[p.camelCase(c)])):d=a;return d}}},removeData:function(a,b,c){if(p.acceptData(a)){var d,
e,g,h=p.expando,k=a.nodeType,l=k?p.cache:a,m=k?a[h]:h;if(l[m]){if(b&&(d=c?l[m]:l[m].data)){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b=b in d?[b]:b.split(" ")));e=0;for(g=b.length;e<g;e++)delete d[b[e]];if(!(c?f:p.isEmptyObject)(d))return}if(!c&&(delete l[m].data,!f(l[m])))return;p.support.deleteExpando||!l.setInterval?delete l[m]:l[m]=null;k&&(p.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}}},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=
p.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});p.fn.extend({data:function(a,c){var e,f,g,h,k,l=this[0],m=0,n=null;if(a===b){if(this.length&&(n=p.data(l),1===l.nodeType&&!p._data(l,"parsedAttrs"))){g=l.attributes;for(k=g.length;m<k;m++)h=g[m].name,0===h.indexOf("data-")&&(h=p.camelCase(h.substring(5)),d(l,h,n[h]));p._data(l,"parsedAttrs",!0)}return n}if("object"===typeof a)return this.each(function(){p.data(this,a)});e=a.split(".",2);e[1]=e[1]?"."+
e[1]:"";f=e[1]+"!";return p.access(this,function(c){if(c===b)return n=this.triggerHandler("getData"+f,[e[0]]),n===b&&l&&(n=p.data(l,a),n=d(l,a,n)),n===b&&e[1]?this.data(e[0]):n;e[1]=c;this.each(function(){var b=p(this);b.triggerHandler("setData"+f,e);p.data(this,a,c);b.triggerHandler("changeData"+f,e)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",p._data(a,b,(p._data(a,b)||0)+
1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark";(a=a?0:(p._data(b,d)||1)-1)?p._data(b,d,a):(p.removeData(b,d,!0),e(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.shift(),f={};"inprogress"===d&&(d=c.shift());d&&("fx"===b&&c.unshift("inprogress"),p._data(a,b+".run",f),d.call(a,function(){p.dequeue(a,
b)},f));c.length||(p.removeData(a,b+"queue "+b+".run",!0),e(a,b,"queue"))}});p.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}"string"!==typeof a&&(c=a,a=b);a=a||"fx";for(var e=p.Deferred(),f=this,g=f.length,h=1,k=a+"defer",l=a+"queue",m=a+"mark",n;g--;)if(n=p.data(f[g],k,b,!0)||(p.data(f[g],l,b,!0)||p.data(f[g],m,b,!0))&&p.data(f[g],k,p.Callbacks("once memory"),!0))h++,n.add(d);d();return e.promise(c)}});var Ja=/[\n\t\r]/g,fa=/\s+/,ia=/\r/g,B=/^(?:button|input)$/i,ja=/^(?:button|input|object|select|textarea)$/i,
zb=/^a(?:rea)?$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ua=p.support.getSetAttribute,za,ga,gb;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){a=p.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},
addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(fa),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){f=" "+e.className+" ";g=0;for(h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=p.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,k;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===b)for(c=(a||"").split(fa),d=0,e=this.length;d<e;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){g=(" "+f.className+" ").replace(Ja," ");h=0;for(k=c.length;h<k;h++)g=g.replace(" "+c[h]+" "," ");f.className=p.trim(g)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var e,f=0,g=p(this),h=b,k=a.split(fa);e=k[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(Ja," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=
p.isFunction(a),this.each(function(d){var f=p(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":p.isArray(d)&&(d=p.map(d,function(a){return null==a?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==b||(this.value=d))});if(f){if((c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==b)return d;d=f.value;return"string"===typeof d?d.replace(ia,""):null==
d?"":d}}});p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],f=a.options,g="select-one"===a.type;if(0>d)return null;a=g?d:0;for(c=g?d+1:f.length;a<c;a++)if(b=f[a],!(!b.selected||(p.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(g)return b;e.push(b)}return g&&!e.length&&f.length?p(f[d]).val():
e},set:function(a,b){var c=p.makeArray(b);p(a).find("option").each(function(){this.selected=0<=p.inArray(p(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&c in p.attrFn)return p(a)[c](d);if("undefined"===typeof a.getAttribute)return p.prop(a,c,d);if(e=1!==h||!p.isXMLDoc(a))c=c.toLowerCase(),g=p.attrHooks[c]||(V.test(c)?ga:za);if(d!==b)if(null===
d)p.removeAttr(a,c);else{if(g&&"set"in g&&e&&(f=g.set(a,d,c))!==b)return f;a.setAttribute(c,""+d);return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,c)))return f;f=a.getAttribute(c);return null===f?b:f}}},removeAttr:function(a,b){var c,d,e,f,g,h=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(fa),f=d.length;h<f;h++)if(e=d[h])c=p.propFix[e]||e,(g=V.test(e))||p.attr(a,e,""),a.removeAttribute(Ua?e:c),g&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(B.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");
else if(!p.support.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return za&&p.nodeName(a,"button")?za.get(a,b):b in a?a.value:null},set:function(a,b,c){if(za&&p.nodeName(a,"button"))return za.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!p.isXMLDoc(a))c=p.propFix[c]||c,f=p.propHooks[c];return d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):ja.test(a.nodeName)||zb.test(a.nodeName)&&a.href?0:b}}}});p.attrHooks.tabindex=
p.propHooks.tabIndex;ga={get:function(a,c){var d,e=p.prop(a,c);return!0===e||"boolean"!==typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?p.removeAttr(a,c):(b=p.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};Ua||(gb={name:!0,id:!0,coords:!0},za=p.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(gb[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);
d||(d=D.createAttribute(c),a.setAttributeNode(d));return d.nodeValue=b+""}},p.attrHooks.tabindex.set=za.set,p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:za.get,set:function(a,b,c){""===b&&(b="false");za.set(a,b,c)}});p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){a=a.getAttribute(c,
2);return null===a?b:a}})});p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}});p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));p.support.enctype||(p.propFix.enctype="encoding");p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}})});var Ca=/^(?:textarea|input|select)$/i,Sb=/^([^\.]*)?(?:\.(.+))?$/,kb=/(?:^|\s)hover(\.\S+)?\b/,Xa=/^key/,Ga=/^(?:mouse|contextmenu)|click/,qb=/^(?:focusinfocus|focusoutblur)$/,Da=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,W=function(a){if(a=Da.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&new RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},Kb=function(a){return p.event.special.hover?a:a.replace(kb,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,k,l,m,n,q,t,r;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=p._data(a))){d.handler&&(q=d,d=q.handler,f=q.selector);d.guid||(d.guid=p.guid++);k=g.events;k||(g.events=k={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof p||a&&p.event.triggered===a.type?b:p.event.dispatch.apply(h.elem,arguments)},h.elem=a);c=p.trim(Kb(c)).split(" ");
for(g=0;g<c.length;g++)l=Sb.exec(c[g])||[],m=l[1],n=(l[2]||"").split(".").sort(),r=p.event.special[m]||{},m=(f?r.delegateType:r.bindType)||m,r=p.event.special[m]||{},l=p.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&W(f),namespace:n.join(".")},q),t=k[m],t||(t=k[m]=[],t.delegateCount=0,r.setup&&!1!==r.setup.call(a,e,n,h)||(a.addEventListener?a.addEventListener(m,h,!1):a.attachEvent&&a.attachEvent("on"+m,h))),r.add&&(r.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),
f?t.splice(t.delegateCount++,0,l):t.push(l),p.event.global[m]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f=p.hasData(a)&&p._data(a),g,h,k,l,m,n,q,t,r,u;if(f&&(q=f.events)){b=p.trim(Kb(b||"")).split(" ");for(g=0;g<b.length;g++)if(h=Sb.exec(b[g])||[],k=l=h[1],h=h[2],k){t=p.event.special[k]||{};k=(d?t.delegateType:t.bindType)||k;r=q[k]||[];m=r.length;h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)u=r[n],!e&&l!==u.origType||c&&c.guid!==
u.guid||h&&!h.test(u.namespace)||d&&d!==u.selector&&("**"!==d||!u.selector)||(r.splice(n--,1),u.selector&&r.delegateCount--,t.remove&&t.remove.call(a,u));0===r.length&&m!==r.length&&(t.teardown&&!1!==t.teardown.call(a,h)||p.removeEvent(a,k,f.handle),delete q[k])}else for(k in q)p.event.remove(a,k+b[g],c,d,!0);if(p.isEmptyObject(q)){if(b=f.handle)b.elem=null;p.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&
8!==e.nodeType){var g=c.type||c,h=[],k,l,m,n,q;if(!qb.test(g+p.event.triggered)&&(0<=g.indexOf("!")&&(g=g.slice(0,-1),k=!0),0<=g.indexOf(".")&&(h=g.split("."),g=h.shift(),h.sort()),e&&!p.event.customEvent[g]||p.event.global[g]))if(c="object"===typeof c?c[p.expando]?c:new p.Event(g,c):new p.Event(g),c.type=g,c.isTrigger=!0,c.exclusive=k,c.namespace=h.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,k=0>g.indexOf(":")?"on"+g:"",e){if(c.result=b,c.target||
(c.target=e),d=null!=d?p.makeArray(d):[],d.unshift(c),m=p.event.special[g]||{},!m.trigger||!1!==m.trigger.apply(e,d)){q=[[e,m.bindType||g]];if(!f&&!m.noBubble&&!p.isWindow(e)){n=m.delegateType||g;h=qb.test(n+g)?e:e.parentNode;for(l=null;h;h=h.parentNode)q.push([h,n]),l=h;l&&l===e.ownerDocument&&q.push([l.defaultView||l.parentWindow||a,n])}for(l=0;l<q.length&&!c.isPropagationStopped();l++)h=q[l][0],c.type=q[l][1],(n=(p._data(h,"events")||{})[c.type]&&p._data(h,"handle"))&&n.apply(h,d),(n=k&&h[k])&&
p.acceptData(h)&&!1===n.apply(h,d)&&c.preventDefault();c.type=g;f||c.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===g&&p.nodeName(e,"a")||!p.acceptData(e)||!k||!e[g]||("focus"===g||"blur"===g)&&0===c.target.offsetWidth||p.isWindow(e)||((l=e[k])&&(e[k]=null),p.event.triggered=g,e[g](),p.event.triggered=b,l&&(e[k]=l));return c.result}}else for(l in e=p.cache,e)e[l].events&&e[l].events[g]&&p.event.trigger(c,d,e[l].handle.elem,!0)}},dispatch:function(c){c=p.event.fix(c||
a.event);var d=(p._data(this,"events")||{})[c.type]||[],e=d.delegateCount,f=[].slice.call(arguments,0),g=!c.exclusive&&!c.namespace,h=p.event.special[c.type]||{},k=[],l,m,n,q,t,r,u;f[0]=c;c.delegateTarget=this;if(!h.preDispatch||!1!==h.preDispatch.call(this,c)){if(e&&(!c.button||"click"!==c.type))for(n=p(this),n.context=this.ownerDocument||this,m=c.target;m!=this;m=m.parentNode||this)if(!0!==m.disabled){t={};r=[];n[0]=m;for(l=0;l<e;l++){q=d[l];u=q.selector;if(t[u]===b){var w=t,H=u,D;if(q.quick){D=
q.quick;var A=m.attributes||{};D=(!D[1]||m.nodeName.toLowerCase()===D[1])&&(!D[2]||(A.id||{}).value===D[2])&&(!D[3]||D[3].test((A["class"]||{}).value))}else D=n.is(u);w[H]=D}t[u]&&r.push(q)}r.length&&k.push({elem:m,matches:r})}d.length>e&&k.push({elem:this,matches:d.slice(e)});for(l=0;l<k.length&&!c.isPropagationStopped();l++)for(e=k[l],c.currentTarget=e.elem,d=0;d<e.matches.length&&!c.isImmediatePropagationStopped();d++)if(q=e.matches[d],g||!c.namespace&&!q.namespace||c.namespace_re&&c.namespace_re.test(q.namespace))c.data=
q.data,c.handleObj=q,q=((p.event.special[q.origType]||{}).handle||q.handler).apply(e.elem,f),q!==b&&(c.result=q,!1===q&&(c.preventDefault(),c.stopPropagation()));h.postDispatch&&h.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&
(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f=c.button,g=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||D,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&
d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?c.toElement:g);a.which||f===b||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var c,d,e=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(e);for(c=g.length;c;)d=g[--c],a[d]=e[d];a.target||(a.target=e.srcElement||D);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===b&&(a.metaKey=a.ctrlKey);return f.filter?f.filter(a,e):a},special:{ready:{setup:p.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.event.handle=p.event.dispatch;p.removeEvent=D.removeEventListener?function(a,
b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?g:h):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h};p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,
bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj,e;if(!c||c!==this&&!p.contains(this,c))a.type=d.origType,e=d.handler.apply(this,arguments),a.type=b;return e}}});p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=p.nodeName(a,"input")||p.nodeName(a,"button")?a.form:b)&&!a._submit_attached&&(p.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}});p.support.changeBubbles||(p.event.special.change={setup:function(){if(Ca.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,p.event.simulate("change",this,a,!0))});return!1}p.event.add(this,"beforeactivate._change",function(a){a=a.target;Ca.test(a.nodeName)&&!a._change_attached&&(p.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||p.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){p.event.remove(this,"._change");return Ca.test(this.nodeName)}});p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){0===c++&&D.addEventListener(a,d,!0)},teardown:function(){0===--c&&D.removeEventListener(a,d,!0)}}});p.fn.extend({on:function(a,
c,d,e,f){var g,k;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(k in a)this.on(k,c,d,a[k],f);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=h;else if(!e)return this;1===f&&(g=e,e=function(a){p().off(a);return g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++));return this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=
a.handleObj;p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=h);return this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){p(this.context).on(a,this.selector,b,c);return this},die:function(a,b){p(this.context).off(a,
this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;p._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();
return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};
p.attrFn&&(p.attrFn[b]=!0);Xa.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks);Ga.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)});(function(){function a(b,c,d,f,g,h){g=0;for(var k=f.length;g<k;g++){var l=f[g];if(l){for(var m=!1,l=l[b];l;){if(l[e]===d){m=f[l.sizset];break}1!==l.nodeType||h||(l[e]=d,l.sizset=g);if(l.nodeName.toLowerCase()===c){m=l;break}l=l[b]}f[g]=m}}}function c(a,b,d,f,g,h){g=0;for(var l=f.length;g<l;g++){var k=f[g];if(k){for(var m=!1,k=k[a];k;){if(k[e]===d){m=f[k.sizset];break}if(1===
k.nodeType)if(h||(k[e]=d,k.sizset=g),"string"!==typeof b){if(k===b){m=!0;break}}else if(0<q.filter(b,[k]).length){m=k;break}k=k[a]}f[g]=m}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,k=!0,l=/\\/g,m=/\r\n/g,n=/\W/;[0,0].sort(function(){k=!1;return 0});var q=function(a,b,c,e){c=c||[];var f=b=b||D;if(1!==b.nodeType&&9!==
b.nodeType)return[];if(!a||"string"!==typeof a)return c;var h,k,l,m,n,t=!0,p=q.isXML(b),w=[],H=a;do if(d.exec(""),h=d.exec(H))if(H=h[3],w.push(h[1]),h[2]){m=h[3];break}while(h);if(1<w.length&&u.exec(a))if(2===w.length&&r.relative[w[0]])k=I(w[0]+w[1],b,e);else for(k=r.relative[w[0]]?[b]:q(w.shift(),b);w.length;)a=w.shift(),r.relative[a]&&(a+=w.shift()),k=I(a,k,e);else if(!e&&1<w.length&&9===b.nodeType&&!p&&r.match.ID.test(w[0])&&!r.match.ID.test(w[w.length-1])&&(h=q.find(w.shift(),b,p),b=h.expr?q.filter(h.expr,
h.set)[0]:h.set[0]),b)for(h=e?{expr:w.pop(),set:A(e)}:q.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!b.parentNode?b:b.parentNode,p),k=h.expr?q.filter(h.expr,h.set):h.set,0<w.length?l=A(k):t=!1;w.length;)h=n=w.pop(),r.relative[n]?h=w.pop():n="",null==h&&(h=b),r.relative[n](l,h,p);else l=[];l||(l=k);l||q.error(n||a);if("[object Array]"===g.call(l))if(t)if(b&&1===b.nodeType)for(a=0;null!=l[a];a++)l[a]&&(!0===l[a]||1===l[a].nodeType&&q.contains(b,l[a]))&&c.push(k[a]);else for(a=0;null!=l[a];a++)l[a]&&
1===l[a].nodeType&&c.push(k[a]);else c.push.apply(c,l);else A(l,c);m&&(q(m,f,c,e),q.uniqueSort(c));return c};q.uniqueSort=function(a){if(x&&(h=k,a.sort(x),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};q.matches=function(a,b){return q(a,null,null,b)};q.matchesSelector=function(a,b){return 0<q(b,null,null,[a]).length};q.find=function(a,b,c){var d,e,f,g,h,k;if(!a)return[];e=0;for(f=r.order.length;e<f;e++)if(h=r.order[e],g=r.leftMatch[h].exec(a))if(k=g[1],g.splice(1,1),"\\"!==
k.substr(k.length-1)&&(g[1]=(g[1]||"").replace(l,""),d=r.find[h](g,b,c),null!=d)){a=a.replace(r.match[h],"");break}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};q.filter=function(a,c,d,e){for(var f,g,h,k,l,m,n,t,p=a,u=[],w=c,H=c&&c[0]&&q.isXML(c[0]);a&&c.length;){for(h in r.filter)if(null!=(f=r.leftMatch[h].exec(a))&&f[2]&&(m=r.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"!==l.substr(l.length-1))){w===u&&(u=[]);if(r.preFilter[h])if(f=r.preFilter[h](f,
w,d,u,e,H),!f)g=k=!0;else if(!0===f)continue;if(f)for(n=0;null!=(l=w[n]);n++)l&&(k=m(l,f,n,w),t=e^k,d&&null!=k?t?g=!0:w[n]=!1:t&&(u.push(l),g=!0));if(k!==b){d||(w=u);a=a.replace(r.match[h],"");if(!g)return[];break}}if(a===p)if(null==g)q.error(a);else break;p=a}return w};q.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var t=q.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(m,"");for(a=a.firstChild;a;a=a.nextSibling)d+=t(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=t(c));return d},r=q.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!n.test(b),
c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&q.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,e=0,f=a.length;if(d&&!n.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&q.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,k=c;"string"!==
typeof d||n.test(d)||(g=d=d.toLowerCase(),k=a);k("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,k=c;"string"!==typeof d||n.test(d)||(g=d=d.toLowerCase(),k=a);k("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);
return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(l,"")+" ";if(f)return a;f=0;for(var g;null!=(g=b[f]);f++)g&&(e^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(l,"")},TAG:function(a,b){return a[1].replace(l,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
q.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&q.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(l,"");!f&&r.attrMap[b]&&(a[1]=r.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(l,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,f){if("not"===a[1])if(1<(d.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
q(a[3],null,null,b);else return a=q.filter(a[3],b,c,1^f),c||e.push.apply(e,a),!1;else if(r.match.POS.test(a[0])||r.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,b,c){return!!q(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=r.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||t([a])||"").indexOf(b[3]);
if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}q.error(e)},CHILD:function(a,b){var c,d,f,g,h,k;c=b[1];k=a;switch(c){case "only":case "first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===c)return!0;k=a;case "last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case "nth":c=b[2];d=b[3];if(1===c&&0===d)return!0;f=b[0];if((g=a.parentNode)&&(g[e]!==f||!a.nodeIndex)){h=0;for(k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);
g[e]=f}k=a.nodeIndex-d;return 0===c?0===k:0===k%c&&0<=k/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=q.attr?q.attr(a,c):r.attrHandle[c]?r.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:!e&&q.attr?null!=c:"="===e?
d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1:d&&!1!==c},POS:function(a,b,c,d){var e=r.setFilters[b[2]];if(e)return e(a,c,b,d)}}},u=r.match.POS,w=function(a,b){return"\\"+(b-0+1)},H;for(H in r.match)r.match[H]=new RegExp(r.match[H].source+/(?![^\[]*\])(?![^\(]*\))/.source),r.leftMatch[H]=new RegExp(/(^(?:.|\r|\n)*?)/.source+r.match[H].source.replace(/\\(\d+)/g,
w));r.match.globalPOS=u;var A=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(D.documentElement.childNodes,0)[0].nodeType}catch(z){A=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var x,T;D.documentElement.compareDocumentPosition?x=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&
b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(x=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return T(a,b);if(!c)return-1;if(!d)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return T(e[g],f[g]);return g===c?T(a,f[g],-1):T(e[g],b,1)},
T=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=D.createElement("div"),c="script"+(new Date).getTime(),d=D.documentElement;a.innerHTML="<a name='"+c+"'/>";d.insertBefore(a,d.firstChild);D.getElementById(c)&&(r.find.ID=function(a,c,d){if("undefined"!==typeof c.getElementById&&!d)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:b:[]},r.filter.ID=
function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});d.removeChild(a);d=a=null})();(function(){var a=D.createElement("div");a.appendChild(D.createComment(""));0<a.getElementsByTagName("*").length&&(r.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(r.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();D.querySelectorAll&&function(){var a=q,b=D.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){q=function(b,c,d,e){c=c||D;if(!e&&!q.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return A(c.getElementsByTagName(b),d);if(f[2]&&r.find.CLASS&&c.getElementsByClassName)return A(c.getElementsByClassName(f[2]),
d)}if(9===c.nodeType){if("body"===b&&c.body)return A([c.body],d);if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return A([g],d)}else return A([],d)}try{return A(c.querySelectorAll(b),d)}catch(h){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,k=(g=c.getAttribute("id"))||"__sizzle__",l=c.parentNode,m=/^\s*[+~]/.test(b);g?k=k.replace(/'/g,"\\$&"):c.setAttribute("id",k);m&&l&&(c=c.parentNode);try{if(!m||l)return A(c.querySelectorAll("[id='"+k+"'] "+
b),d)}catch(h){}finally{g||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)q[c]=a[c];b=null}}();(function(){var a=D.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(D.createElement("div"),"div"),d=!1;try{b.call(D.documentElement,"[test!='']:sizzle")}catch(e){d=!0}q.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!q.isXML(a))try{if(d||!r.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,
e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return 0<q(e,null,null,[a]).length}}})();(function(){var a=D.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(r.order.splice(1,0,"CLASS"),r.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},
a=null))})();q.contains=D.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:D.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};q.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var I=function(a,b,c){var d,e=[],f="";for(b=b.nodeType?[b]:b;d=r.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(r.match.PSEUDO,"");a=r.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)q(a,
b[d],e,c);return q.filter(f,e)};q.attr=p.attr;q.selectors.attrMap={};p.find=q;p.expr=q.selectors;p.expr[":"]=p.expr.filters;p.unique=q.uniqueSort;p.text=q.getText;p.isXMLDoc=q.isXML;p.contains=q.contains})();var db=/Until$/,Tb=/^(?:parents|prevUntil|prevAll)/,ra=/,/,Lb=/^.[^:#\[\.,]*$/,Na=Array.prototype.slice,C=p.expr.match.globalPOS,Qa={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b=this,c,d;if("string"!==typeof a)return p(a).filter(function(){c=0;for(d=b.length;c<
d;c++)if(p.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;c=0;for(d=this.length;c<d;c++)if(f=e.length,p.find(a,this[c],e),0<c)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}return e},has:function(a){var b=p(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(p.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?C.test(a)?0<=p(a,this.context).index(this[0]):0<p.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],d,e,f=this[0];if(p.isArray(a)){for(e=1;f&&f.ownerDocument&&f!==b;){for(d=0;d<a.length;d++)p(f).is(a[d])&&c.push({selector:a[d],elem:f,level:e});f=f.parentNode;e++}return c}var g=C.test(a)||"string"!==typeof a?p(a,b||this.context):0;d=0;for(e=this.length;d<e;d++)for(f=this[d];f;)if(g?-1<g.index(f):p.find.matchesSelector(f,a)){c.push(f);break}else if(f=
f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break;c=1<c.length?p.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return a?"string"===typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(k(c[0])||k(d[0])?d:p.unique(d))},andSelf:function(){return this.add(this.prevObject)}});
p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return p.nth(a,2,"nextSibling")},prev:function(a){return p.nth(a,2,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",
c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.makeArray(a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);db.test(a)||(d=c);d&&"string"===typeof d&&(e=p.filter(d,e));e=1<this.length&&!Qa[a]?p.unique(e):e;(1<this.length||ra.test(d))&&Tb.test(a)&&(e=e.reverse());return this.pushStack(e,a,Na.call(arguments).join(","))}});
p.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!p(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},nth:function(a,b,c,d){b=b||1;for(d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var ac="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
ua=/ jQuery\d+="(?:\d+|null)"/g,hc=/^\s+/,Mb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ka=/<([\w:]+)/,Uc=/<tbody/i,zc=/<|&#?\w+;/,sc=/<(?:script|style)/i,bc=/<(?:script|object|embed|option|style)/i,Ub=new RegExp("<(?:"+ac+")[\\s/>]","i"),Vb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ab=/\/(java|ecma)script/i,wa=/^\s*<!(?:\[CDATA\[|\-\-)/,Ba={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},O=l(D);Ba.optgroup=Ba.option;Ba.tbody=Ba.tfoot=Ba.colgroup=Ba.caption=Ba.thead;Ba.th=Ba.td;p.support.htmlSerialize||(Ba._default=[1,"div<div>","</div>"]);p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,p.clean(arguments));return a}},remove:function(a,
b){for(var c=0,d;null!=(d=this[c]);c++)if(!a||p.filter(a,[d]).length)b||1!==d.nodeType||(p.cleanData(d.getElementsByTagName("*")),p.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&p.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,
function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(ua,""):null;if(!("string"!==typeof a||sc.test(a)||!p.support.leadingWhitespace&&hc.test(a)||Ba[(Ka.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Mb,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(p.isFunction(a))return this.each(function(b){var c=
p(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=p(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove();b?p(b).before(a):p(c).append(a)})}return this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h=a[0],k=[];if(!p.support.checkClone&&3===arguments.length&&"string"===typeof h&&Vb.test(h))return this.each(function(){p(this).domManip(a,
c,d,!0)});if(p.isFunction(h))return this.each(function(e){var f=p(this);a[0]=h.call(this,e,c?f.html():b);f.domManip(a,c,d)});if(this[0]){e=h&&h.parentNode;e=p.support.parentNode&&e&&11===e.nodeType&&e.childNodes.length===this.length?{fragment:e}:p.buildFragment(a,this,k);g=e.fragment;if(f=1===g.childNodes.length?g=g.firstChild:g.firstChild){c=c&&p.nodeName(f,"tr");for(var l=0,m=this.length,q=m-1;l<m;l++)d.call(c?n(this[l],f):this[l],e.cacheable||1<m&&l<q?p.clone(g,!0,!0):g)}k.length&&p.each(k,function(a,
b){b.src?p.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(wa,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});p.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];b&&b[0]&&(g=b[0].ownerDocument||b[0]);g.createDocumentFragment||(g=D);!(1===a.length&&"string"===typeof h&&512>h.length&&g===D&&"<"===h.charAt(0))||bc.test(h)||!p.support.checkClone&&Vb.test(h)||!p.support.html5Clone&&Ub.test(h)||(e=!0,(f=
p.fragments[h])&&1!==f&&(d=f));d||(d=g.createDocumentFragment(),p.clean(a,g,d,c));e&&(p.fragments[h]=f?d:1);return{fragment:d,cacheable:e}};p.fragments={};p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d=[];c=p(c);var e=1===this.length&&this[0].parentNode;if(e&&11===e.nodeType&&1===e.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var e=0,f=c.length;e<f;e++){var g=(0<e?this.clone(!0):
this).get();p(c[e])[b](g);d=d.concat(g)}return this.pushStack(d,a,c.selector)}});p.extend({clone:function(a,b,c){var d,e,f;p.support.html5Clone||p.isXMLDoc(a)||!Ub.test("<"+a.nodeName+">")?d=a.cloneNode(!0):(d=D.createElement("div"),O.appendChild(d),d.innerHTML=a.outerHTML,d=d.firstChild);var g=d;if(!(p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(q(a,g),d=t(a),e=t(g),f=0;d[f];++f)e[f]&&q(d[f],e[f]);if(b&&(r(a,g),c))for(d=t(a),e=t(g),f=0;d[f];++f)r(d[f],
e[f]);return g},clean:function(a,b,c,d){var e,f=[];b=b||D;"undefined"===typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||D);for(var g=0,h;null!=(h=a[g]);g++)if("number"===typeof h&&(h+=""),h){if("string"===typeof h)if(zc.test(h)){h=h.replace(Mb,"<$1></$2>");e=(Ka.exec(h)||["",""])[1].toLowerCase();var k=Ba[e]||Ba._default,m=k[0],n=b.createElement("div"),q=O.childNodes;b===D?O.appendChild(n):l(b).appendChild(n);for(n.innerHTML=k[1]+h+k[2];m--;)n=n.lastChild;if(!p.support.tbody)for(m=
Uc.test(h),k="table"!==e||m?"<table>"!==k[1]||m?[]:n.childNodes:n.firstChild&&n.firstChild.childNodes,e=k.length-1;0<=e;--e)p.nodeName(k[e],"tbody")&&!k[e].childNodes.length&&k[e].parentNode.removeChild(k[e]);!p.support.leadingWhitespace&&hc.test(h)&&n.insertBefore(b.createTextNode(hc.exec(h)[0]),n.firstChild);h=n.childNodes;n&&(n.parentNode.removeChild(n),0<q.length&&(n=q[q.length-1])&&n.parentNode&&n.parentNode.removeChild(n))}else h=b.createTextNode(h);var r;if(!p.support.appendChecked)if(h[0]&&
"number"===typeof(r=h.length))for(e=0;e<r;e++)w(h[e]);else w(h);h.nodeType?f.push(h):f=p.merge(f,h)}if(c)for(a=function(a){return!a.type||Ab.test(a.type)},g=0;f[g];g++)b=f[g],d&&p.nodeName(b,"script")&&(!b.type||Ab.test(b.type))?d.push(b.parentNode?b.parentNode.removeChild(b):b):(1===b.nodeType&&(h=p.grep(b.getElementsByTagName("script"),a),f.splice.apply(f,[g+1,0].concat(h))),c.appendChild(b));return f},cleanData:function(a){for(var b,c,d=p.cache,e=p.event.special,f=p.support.deleteExpando,g=0,h;null!=
(h=a[g]);g++)if(!h.nodeName||!p.noData[h.nodeName.toLowerCase()])if(c=h[p.expando]){if((b=d[c])&&b.events){for(var k in b.events)e[k]?p.event.remove(h,k):p.removeEvent(h,k,b.handle);b.handle&&(b.handle.elem=null)}f?delete h[p.expando]:h.removeAttribute&&h.removeAttribute(p.expando);delete d[c]}}});var hb=/alpha\([^)]*\)/i,Ea=/opacity=([^)]*)/,Bb=/([A-Z]|^ms)/g,Nb=/^[\-+]?(?:\d*\.)?\d+$/i,eb=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Ac=/^([\-+])=([\-+.\de]+)/,ka=/^margin/,na={position:"absolute",visibility:"hidden",
display:"block"},Cb=["Top","Right","Bottom","Left"],lb,Bc,Ob;p.fn.css=function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,1<arguments.length)};p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g=p.camelCase(c),h=a.style,k=p.cssHooks[g];c=p.cssProps[g]||g;if(d!==b){if(e=typeof d,"string"===e&&(f=Ac.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(p.css(a,c)),e="number"),!(null==d||"number"===e&&isNaN(d)||("number"!==e||p.cssNumber[g]||(d+="px"),k&&"set"in k&&(d=k.set(a,d))===b)))try{h[c]=d}catch(l){}}else return k&&"get"in k&&(f=k.get(a,!1,e))!==b?f:h[c]}},css:function(a,c,d){var e,f;c=p.camelCase(c);f=p.cssHooks[c];c=p.cssProps[c]||c;"cssFloat"===c&&
(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(lb)return lb(a,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c=c.call(a);for(e in b)a.style[e]=d[e];return c}});p.curCSS=p.css;D.defaultView&&D.defaultView.getComputedStyle&&(Bc=function(a,b){var c,d,e,f=a.style;b=b.replace(Bb,"-$1").toLowerCase();(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||p.contains(a.ownerDocument.documentElement,a)||(c=p.style(a,
b)));!p.support.pixelMargin&&e&&ka.test(b)&&eb.test(c)&&(d=f.width,f.width=c,c=e.width,f.width=d);return c});D.documentElement.currentStyle&&(Ob=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;null==e&&f&&(c=f[b])&&(e=c);if(eb.test(e)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});lb=Bc||Ob;p.each(["height","width"],function(a,
b){p.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth?A(a,b,d):p.swap(a,na,function(){return A(a,b,d)})},set:function(a,b){return Nb.test(b)?b+"px":b}}});p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return Ea.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===p.trim(f.replace(hb,
""))&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=hb.test(f)?f.replace(hb,e):f+" "+e}});p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){return b?lb(a,"margin-right"):a.style.marginRight})}})});p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||p.css(a,"display"))},
p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+Cb[c]+b]=d[c]||d[c-2]||d[0];return e}}});var rb=/%20/g,xa=/\[\]$/,ib=/\r?\n/g,Ya=/#.*$/,mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Za=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ha=/^(?:GET|HEAD)$/,nb=/^\/\//,
Wc=/\?/,Ra=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,pd=/^(?:select|textarea)/i,ic=/\s+/,Xc=/([?&])_=[^&]*/,ha=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Yc=p.fn.load,Wb={},Zc={},sb,tc,$c=["*/"]+["*"];try{sb=aa.href}catch(Xb){sb=D.createElement("a"),sb.href="",sb=sb.href}tc=ha.exec(sb.toLowerCase())||[];p.fn.extend({load:function(a,c,d){if("string"!==typeof a&&Yc)return Yc.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(0<=e){var f=a.slice(e,a.length);a=
a.slice(0,e)}e="GET";c&&(p.isFunction(c)?(d=c,c=b):"object"===typeof c&&(c=p.param(c,p.ajaxSettings.traditional),e="POST"));var g=this;p.ajax({url:a,type:e,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),g.html(f?p("<div>").append(c.replace(Ra,"")).find(f):c));d&&g.each(d,[c,b,a])}});return this},serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||pd.test(this.nodeName)||Za.test(this.type))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(ib,"\r\n")}}):{name:b.name,value:c.replace(ib,"\r\n")}}).get()}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.each(["get","post"],function(a,c){p[c]=function(a,
d,e,f){p.isFunction(d)&&(f=f||e,e=d,d=b);return p.ajax({type:c,url:a,data:d,success:e,dataType:f})}});p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){b?F(a,p.ajaxSettings):(b=a,a=p.ajaxSettings);F(a,b);return a},ajaxSettings:{url:sb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(tc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":$c},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:x(Wb),ajaxTransport:x(Zc),ajax:function(a,c){function d(a,c,n,q){if(2!==D){D=2;w&&clearTimeout(w);u=b;r=q||"";x.readyState=0<a?4:
0;var t,H,z;q=c;if(n){var T=e,I=x,F=T.contents,y=T.dataTypes,Q=T.responseFields,Y,K,L,R;for(K in Q)K in n&&(I[Q[K]]=n[K]);for(;"*"===y[0];)y.shift(),Y===b&&(Y=T.mimeType||I.getResponseHeader("content-type"));if(Y)for(K in F)if(F[K]&&F[K].test(Y)){y.unshift(K);break}if(y[0]in n)L=y[0];else{for(K in n){if(!y[0]||T.converters[K+" "+y[0]]){L=K;break}R||(R=K)}L=L||R}L?(L!==y[0]&&y.unshift(L),n=n[L]):n=void 0}else n=b;if(200<=a&&300>a||304===a){if(e.ifModified){if(Y=x.getResponseHeader("Last-Modified"))p.lastModified[m]=
Y;if(Y=x.getResponseHeader("Etag"))p.etag[m]=Y}if(304===a)q="notmodified",t=!0;else try{Y=e;Y.dataFilter&&(n=Y.dataFilter(n,Y.dataType));var E=Y.dataTypes;K={};var mb,aa,J=E.length,ba,v=E[0],N,ga,Za,qa,B;for(mb=1;mb<J;mb++){if(1===mb)for(aa in Y.converters)"string"===typeof aa&&(K[aa.toLowerCase()]=Y.converters[aa]);N=v;v=E[mb];if("*"===v)v=N;else if("*"!==N&&N!==v){ga=N+" "+v;Za=K[ga]||K["* "+v];if(!Za)for(qa in B=b,K)if(ba=qa.split(" "),ba[0]===N||"*"===ba[0])if(B=K[ba[1]+" "+v]){qa=K[qa];!0===
qa?Za=B:!0===B&&(Za=qa);break}Za||B||p.error("No conversion from "+ga.replace(" "," to "));!0!==Za&&(n=Za?Za(n):B(qa(n)))}}H=n;q="success";t=!0}catch(Ha){q="parsererror",z=Ha}}else if(z=q,!q||a)q="error",0>a&&(a=0);x.status=a;x.statusText=""+(c||q);t?h.resolveWith(f,[H,q,x]):h.rejectWith(f,[x,q,z]);x.statusCode(l);l=b;A&&g.trigger("ajax"+(t?"Success":"Error"),[x,e,t?H:z]);k.fireWith(f,[x,q]);A&&(g.trigger("ajaxComplete",[x,e]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=
b);c=c||{};var e=p.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof p)?p(f):p.event,h=p.Deferred(),k=p.Callbacks("once memory"),l=e.statusCode||{},m,n={},q={},r,t,u,w,H,D=0,A,z,x={readyState:0,setRequestHeader:function(a,b){if(!D){var c=a.toLowerCase();a=q[c]=q[c]||a;n[a]=b}return this},getAllResponseHeaders:function(){return 2===D?r:null},getResponseHeader:function(a){var c;if(2===D){if(!t)for(t={};c=mb.exec(r);)t[c[1].toLowerCase()]=c[2];c=t[a.toLowerCase()]}return c===b?null:c},
overrideMimeType:function(a){D||(e.mimeType=a);return this},abort:function(a){a=a||"abort";u&&u.abort(a);d(0,a);return this}};h.promise(x);x.success=x.done;x.error=x.fail;x.complete=k.add;x.statusCode=function(a){if(a){var b;if(2>D)for(b in a)l[b]=[l[b],a[b]];else b=a[x.status],x.then(b,b)}return this};e.url=((a||e.url)+"").replace(Ya,"").replace(nb,tc[1]+"//");e.dataTypes=p.trim(e.dataType||"*").toLowerCase().split(ic);null==e.crossDomain&&(H=ha.exec(e.url.toLowerCase()),e.crossDomain=!(!H||H[1]==
tc[1]&&H[2]==tc[2]&&(H[3]||("http:"===H[1]?80:443))==(tc[3]||("http:"===tc[1]?80:443))));e.data&&e.processData&&"string"!==typeof e.data&&(e.data=p.param(e.data,e.traditional));E(Wb,e,c,x);if(2===D)return!1;A=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ha.test(e.type);A&&0===p.active++&&p.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(Wc.test(e.url)?"&":"?")+e.data,delete e.data),m=e.url,!1===e.cache)){H=p.now();var T=e.url.replace(Xc,"$1_="+H);e.url=T+(T===e.url?(Wc.test(e.url)?
"&":"?")+"_="+H:"")}(e.data&&e.hasContent&&!1!==e.contentType||c.contentType)&&x.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(m=m||e.url,p.lastModified[m]&&x.setRequestHeader("If-Modified-Since",p.lastModified[m]),p.etag[m]&&x.setRequestHeader("If-None-Match",p.etag[m]));x.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", "+$c+"; q=0.01":""):e.accepts["*"]);for(z in e.headers)x.setRequestHeader(z,e.headers[z]);if(e.beforeSend&&
(!1===e.beforeSend.call(f,x,e)||2===D))return x.abort(),!1;for(z in{success:1,error:1,complete:1})x[z](e[z]);if(u=E(Zc,e,c,x)){x.readyState=1;A&&g.trigger("ajaxSend",[x,e]);e.async&&0<e.timeout&&(w=setTimeout(function(){x.abort("timeout")},e.timeout));try{D=1,u.send(n,d)}catch(I){if(2>D)d(-1,I);else throw I;}}else d(-1,"No Transport");return x},param:function(a,c){var d=[],e=function(a,b){b=p.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings.traditional);
if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){e(this.name,this.value)});else for(var f in a)y(f,a[f],c,e);return d.join("&").replace(rb,"+")}});p.extend({active:0,lastModified:{},etag:{}});var Pb=p.now(),v=/(\=)\?(&|$)|\?\?/i;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return p.expando+"_"+Pb++}});p.ajaxPrefilter("json jsonp",function(b,c,d){c="string"===typeof b.data&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&
(v.test(b.url)||c&&v.test(b.data))){var e,f=b.jsonpCallback=p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[f],h=b.url,k=b.data,l="$1"+f+"$2";!1!==b.jsonp&&(h=h.replace(v,l),b.url===h&&(c&&(k=k.replace(v,l)),b.data===k&&(h+=(/\?/.test(h)?"&":"?")+b.jsonp+"="+f)));b.url=h;b.data=k;a[f]=function(a){e=[a]};d.always(function(){a[f]=g;if(e&&p.isFunction(g))a[f](e[0])});b.converters["script json"]=function(){e||p.error(f+" was not called");return e[0]};b.dataTypes[0]="json";return"script"}});
p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=D.head||D.getElementsByTagName("head")[0]||D.documentElement;return{send:function(e,f){c=D.createElement("script");
c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var Db=a.ActiveXObject?function(){for(var a in da)da[a](0,1)}:!1,Ma=0,da;p.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&z()))a:{try{b=
new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:z;(function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(p.ajaxSettings.xhr());p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,k;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(k in c.xhrFields)g[k]=c.xhrFields[k];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType);
c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(k in e)g.setRequestHeader(k,e[k])}catch(l){}g.send(c.hasContent&&c.data||null);d=function(a,e){var k,l,m,n,q;try{if(d&&(e||4===g.readyState))if(d=b,h&&(g.onreadystatechange=p.noop,Db&&delete da[h]),e)4!==g.readyState&&g.abort();else{k=g.status;m=g.getAllResponseHeaders();n={};(q=g.responseXML)&&q.documentElement&&(n.xml=q);try{n.text=g.responseText}catch(t){}try{l=g.statusText}catch(t){l=""}k||!c.isLocal||c.crossDomain?
1223===k&&(k=204):k=n.text?200:404}}catch(t){e||f(-1,t)}n&&f(k,l,n,m)};c.async&&4!==g.readyState?(h=++Ma,Db&&(da||(da={},p(a).unload(Db)),da[h]=d),g.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var $a={},sa,Sa,uc=/^(?:toggle|show|hide)$/,ab=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Ic,ad=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ed;p.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(T("show",
3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=a.style.display,p._data(a,"olddisplay")||"none"!==b||(b=a.style.display=""),(""===b&&"none"===p.css(a,"display")||!p.contains(a.ownerDocument.documentElement,a))&&p._data(a,"olddisplay",I(a.nodeName)));for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=p._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(T("hide",3),a,b,c);c=0;for(var d=this.length;c<
d;c++)a=this[c],a.style&&(b=p.css(a,"display"),"none"===b||p._data(a,"olddisplay")||p._data(a,"olddisplay",b));for(c=0;c<d;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:p.fn.toggle,toggle:function(a,b,c){var d="boolean"===typeof a;p.isFunction(a)&&p.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:p(this).is(":hidden");p(this)[b?"show":"hide"]()}):this.animate(T("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",
0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){!1===f.queue&&p._mark(this);var b=p.extend({},f),c=1===this.nodeType,d=c&&p(this).is(":hidden"),g,h,k,l,m;b.animatedProperties={};for(k in a)if(g=p.camelCase(k),k!==g&&(a[g]=a[k],delete a[k]),(h=p.cssHooks[g])&&"expand"in h)for(k in l=h.expand(a[g]),delete a[g],l)k in a||(a[k]=l[k]);for(g in a){h=a[g];p.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||
b.easing||"swing";if("hide"===h&&d||"show"===h&&!d)return b.complete.call(this);!c||"height"!==g&&"width"!==g||(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===p.css(this,"display")&&"none"===p.css(this,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==I(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(k in a)if(c=new p.fx(this,b,k),h=a[k],uc.test(h))if(g=p._data(this,"toggle"+k)||
("toggle"===h?d?"show":"hide":0))p._data(this,"toggle"+k,"show"===g?"hide":"show"),c[g]();else c[h]();else g=ab.exec(h),l=c.cur(),g?(h=parseFloat(g[2]),m=g[3]||(p.cssNumber[k]?"":"px"),"px"!==m&&(p.style(this,k,(h||1)+m),l*=(h||1)/c.cur(),p.style(this,k,l+m)),g[1]&&(h=("-="===g[1]?-1:1)*h+l),c.custom(l,h,m)):c.custom(l,h,"");return!0}var f=p.speed(b,c,d);if(p.isEmptyObject(a))return this.each(f.complete,[!1]);a=p.extend({},a);return!1===f.queue?this.each(e):this.queue(f.queue,e)},stop:function(a,
c,d){"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,c=!1,e=p.timers,f=p._data(this);d||p._unmark(!0,this);if(null==a)for(b in f){if(f[b]&&f[b].stop&&b.indexOf(".run")===b.length-4){var g=f[b];p.removeData(this,b,!0);g.stop(d)}}else f[b=a+".run"]&&f[b].stop&&(f=f[b],p.removeData(this,b,!0),f.stop(d));for(b=e.length;b--;)if(e[b].elem===this&&(null==a||e[b].queue===a)){if(d)e[b](!0);else e[b].saveState();c=!0;e.splice(b,1)}d&&c||p.dequeue(this,
a)})}});p.each({slideDown:T("show",1),slideUp:T("hide",1),slideToggle:T("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});p.extend({speed:function(a,b,c){var d=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:
p.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){p.isFunction(d.old)&&d.old.call(this);d.queue?p.dequeue(this,d.queue):!1!==a&&p._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});p.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(p.fx.step[this.prop]||
p.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=p.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=p.fx;this.startTime=ed||J();this.end=c;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(p.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=
function(){p._data(f.elem,"fxshow"+f.prop)===b&&(f.options.hide?p._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&p._data(f.elem,"fxshow"+f.prop,f.end))};e()&&p.timers.push(e)&&!Ic&&(Ic=setInterval(g.tick,g.interval))},show:function(){var a=p._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||p.style(this.elem,this.prop);this.options.show=!0;a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());p(this.elem).show()},hide:function(){this.options.orig[this.prop]=
p._data(this.elem,"fxshow"+this.prop)||p.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,c=ed||J(),d=!0,e=this.elem,f=this.options;if(a||c>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(b in f.animatedProperties)!0!==f.animatedProperties[b]&&(d=!1);if(d){null==f.overflow||p.support.shrinkWrapBlocks||p.each(["","X","Y"],function(a,b){e.style["overflow"+b]=f.overflow[a]});f.hide&&
p(e).hide();if(f.hide||f.show)for(b in f.animatedProperties)p.style(e,b,f.orig[b]),p.removeData(e,"fxshow"+b,!0),p.removeData(e,"toggle"+b,!0);if(a=f.complete)f.complete=!1,a.call(e)}return!1}Infinity==f.duration?this.now=c:(a=c-this.startTime,this.state=a/f.duration,this.pos=p.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};p.extend(p.fx,{tick:function(){for(var a,b=p.timers,c=0;c<b.length;c++)a=b[c],
a()||b[c]!==a||b.splice(c--,1);b.length||p.fx.stop()},interval:13,stop:function(){clearInterval(Ic);Ic=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){p.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});p.each(ad.concat.apply([],ad),function(a,b){b.indexOf("margin")&&(p.fx.step[b]=function(a){p.style(a.elem,b,Math.max(0,a.now)+a.unit)})});p.expr&&p.expr.filters&&(p.expr.filters.animated=
function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var bd,je=/^t(?:able|d|h)$/i,qd=/^(?:body|html)$/i;bd="getBoundingClientRect"in D.documentElement?function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!p.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};a=b.body;b=Q(b);return{top:d.top+(b.pageYOffset||p.support.boxModel&&c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0),left:d.left+(b.pageXOffset||p.support.boxModel&&c.scrollLeft||a.scrollLeft)-
(c.clientLeft||a.clientLeft||0)}}:function(a,b,c){var d,e=a.offsetParent,f=b.body;d=(b=b.defaultView)?b.getComputedStyle(a,null):a.currentStyle;for(var g=a.offsetTop,h=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==c&&(!p.support.fixedPosition||"fixed"!==d.position);)d=b?b.getComputedStyle(a,null):a.currentStyle,g-=a.scrollTop,h-=a.scrollLeft,a===e&&(g+=a.offsetTop,h+=a.offsetLeft,!p.support.doesNotAddBorder||p.support.doesAddBorderForTableAndCells&&je.test(a.nodeName)||(g+=parseFloat(d.borderTopWidth)||
0,h+=parseFloat(d.borderLeftWidth)||0),e=a.offsetParent),p.support.subtractsBorderForOverflowNotVisible&&"visible"!==d.overflow&&(g+=parseFloat(d.borderTopWidth)||0,h+=parseFloat(d.borderLeftWidth)||0);if("relative"===d.position||"static"===d.position)g+=f.offsetTop,h+=f.offsetLeft;p.support.fixedPosition&&"fixed"===d.position&&(g+=Math.max(c.scrollTop,f.scrollTop),h+=Math.max(c.scrollLeft,f.scrollLeft));return{top:g,left:h}};p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,
a,b)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?p.offset.bodyOffset(c):bd(c,d,d.documentElement):null};p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");"static"===d&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),k={},l={};("absolute"===
d||"fixed"===d)&&-1<p.inArray("auto",[g,h])?(l=e.position(),d=l.top,h=l.left):(d=parseFloat(g)||0,h=parseFloat(h)||0);p.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(k.top=b.top-f.top+d);null!=b.left&&(k.left=b.left-f.left+h);"using"in b?b.using.call(a,k):e.css(k)}};p.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=qd.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(p.css(a,"marginTop"))||0;c.left-=parseFloat(p.css(a,"marginLeft"))||
0;d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||D.body;a&&!qd.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=Q(a);if(f===b)return g?
c in g?g[c]:p.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});p.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,f="offset"+a;p.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(p.css(a,c,"padding")):this[c]():null};p.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(p.css(b,c,a?"margin":"border")):this[c]():null};
p.fn[c]=function(a){return p.access(this,function(a,c,g){if(p.isWindow(a))return c=a.document,a=c.documentElement[d],p.support.boxModel&&a||c.body&&c.body[d]||a;if(9===a.nodeType)return c=a.documentElement,c[d]>=c[e]?c[d]:Math.max(a.body[e],c[e],a.body[f],c[f]);if(g===b)return a=p.css(a,c),c=parseFloat(a),p.isNumeric(c)?c:a;p(a).css(c,g)},c,a,arguments.length,null)}});a.jQuery=a.$=p;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
(function(a,b){function c(a){q[r]=d.apply(b,a);return r++}function d(a){var c=[].slice.call(arguments,1);return function(){"function"===typeof a?a.apply(b,c):(new Function(""+a))()}}function f(a){if(t)setTimeout(d(f,a),0);else{var b=q[a];if(b){t=!0;try{b()}finally{e(a),t=!1}}}}function e(a){delete q[a]}function h(){w=function(){var a=c(arguments);process.nextTick(d(f,a));return a}}function g(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("",
"*");a.onmessage=c;return b}}function k(){var b="setImmediate$"+Math.random()+"$",d=function(c){c.source===a&&"string"===typeof c.data&&0===c.data.indexOf(b)&&f(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",d,!1):a.attachEvent("onmessage",d);w=function(){var d=c(arguments);a.postMessage(b+d,"*");return d}}function m(){var a=new MessageChannel;a.port1.onmessage=function(a){f(a.data)};w=function(){var b=c(arguments);a.port2.postMessage(b);return b}}function l(){var a=u.documentElement;
w=function(){var b=c(arguments),d=u.createElement("script");d.onreadystatechange=function(){f(b);d.onreadystatechange=null;a.removeChild(d);d=null};a.appendChild(d);return b}}function n(){w=function(){var a=c(arguments);setTimeout(d(f,a),0);return a}}if(!a.setImmediate){var r=1,q={},t=!1,u=a.document,w,A=Object.getPrototypeOf&&Object.getPrototypeOf(a),A=A&&A.setTimeout?A:a;"[object process]"==={}.toString.call(a.process)?h():g()?k():a.MessageChannel?m():u&&"onreadystatechange"in u.createElement("script")?
l():n();A.setImmediate=w;A.clearImmediate=e}})("undefined"===typeof self?"undefined"===typeof global?this:global:self);
(function(){var a=this,b=a._,c=Array.prototype,d=Object.prototype,f=c.push,e=c.slice,h=c.concat,g=d.toString,k=d.hasOwnProperty,d=Array.isArray,m=Object.keys,l=Function.prototype.bind,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=n),exports._=n):a._=n;n.VERSION="1.7.0";var r=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,
c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?r(a,b,c):n.isObject(a)?n.matches(a):n.property(a)};n.each=n.forEach=function(a,b,c){if(null==a)return a;b=r(b,c);var d=a.length;if(d===+d)for(c=0;c<d;c++)b(a[c],c,a);else{var e=n.keys(a);c=0;for(d=e.length;c<d;c++)b(a[e[c]],
e[c],a)}return a};n.map=n.collect=function(a,b,c){if(null==a)return[];b=n.iteratee(b,c);c=a.length!==+a.length&&n.keys(a);for(var d=(c||a).length,e=Array(d),f,g=0;g<d;g++)f=c?c[g]:g,e[g]=b(a[f],f,a);return e};n.reduce=n.foldl=n.inject=function(a,b,c,d){null==a&&(a=[]);b=r(b,d,4);var e=a.length!==+a.length&&n.keys(a),f=(e||a).length,g=0,h;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[e?e[g++]:g++]}for(;g<f;g++)h=e?e[g]:g,c=b(c,a[h],h,a);return c};
n.reduceRight=n.foldr=function(a,b,c,d){null==a&&(a=[]);b=r(b,d,4);var e=a.length!==+a.length&&n.keys(a),f=(e||a).length,g;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[e?e[--f]:--f]}for(;f--;)g=e?e[f]:f,c=b(c,a[g],g,a);return c};n.find=n.detect=function(a,b,c){var d;b=n.iteratee(b,c);n.some(a,function(a,c,e){if(b(a,c,e))return d=a,!0});return d};n.filter=n.select=function(a,b,c){var d=[];if(null==a)return d;b=n.iteratee(b,c);n.each(a,function(a,
c,e){b(a,c,e)&&d.push(a)});return d};n.reject=function(a,b,c){return n.filter(a,n.negate(n.iteratee(b)),c)};n.every=n.all=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);c=a.length!==+a.length&&n.keys(a);var d=(c||a).length,e,f;for(e=0;e<d;e++)if(f=c?c[e]:e,!b(a[f],f,a))return!1;return!0};n.some=n.any=function(a,b,c){if(null==a)return!1;b=n.iteratee(b,c);c=a.length!==+a.length&&n.keys(a);var d=(c||a).length,e,f;for(e=0;e<d;e++)if(f=c?c[e]:e,b(a[f],f,a))return!0;return!1};n.contains=n.include=
function(a,b){if(null==a)return!1;a.length!==+a.length&&(a=n.values(a));return 0<=n.indexOf(a,b)};n.invoke=function(a,b){var c=e.call(arguments,2),d=n.isFunction(b);return n.map(a,function(a){return(d?b:a[b]).apply(a,c)})};n.pluck=function(a,b){return n.map(a,n.property(b))};n.where=function(a,b){return n.filter(a,n.matches(b))};n.findWhere=function(a,b){return n.find(a,n.matches(b))};n.max=function(a,b,c){var d=-Infinity,e=-Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var g=
0,h=a.length;g<h;g++)c=a[g],c>d&&(d=c)}else b=n.iteratee(b,c),n.each(a,function(a,c,g){f=b(a,c,g);if(f>e||-Infinity===f&&-Infinity===d)d=a,e=f});return d};n.min=function(a,b,c){var d=Infinity,e=Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var g=0,h=a.length;g<h;g++)c=a[g],c<d&&(d=c)}else b=n.iteratee(b,c),n.each(a,function(a,c,g){f=b(a,c,g);if(f<e||Infinity===f&&Infinity===d)d=a,e=f});return d};n.shuffle=function(a){a=a&&a.length===+a.length?a:n.values(a);for(var b=a.length,
c=Array(b),d=0,e;d<b;d++)e=n.random(0,d),e!==d&&(c[d]=c[e]),c[e]=a[d];return c};n.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=n.values(a)),a[n.random(a.length-1)]):n.shuffle(a).slice(0,Math.max(0,b))};n.sortBy=function(a,b,c){b=n.iteratee(b,c);return n.pluck(n.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var q=
function(a){return function(b,c,d){var e={};c=n.iteratee(c,d);n.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)});return e}};n.groupBy=q(function(a,b,c){n.has(a,c)?a[c].push(b):a[c]=[b]});n.indexBy=q(function(a,b,c){a[c]=b});n.countBy=q(function(a,b,c){n.has(a,c)?a[c]++:a[c]=1});n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);b=c(b);d=0;for(var e=a.length;d<e;){var f=d+e>>>1;c(a[f])<b?d=f+1:e=f}return d};n.toArray=function(a){return a?n.isArray(a)?e.call(a):a.length===+a.length?n.map(a,n.identity):
n.values(a):[]};n.size=function(a){return null==a?0:a.length===+a.length?a.length:n.keys(a).length};n.partition=function(a,b,c){b=n.iteratee(b,c);var d=[],e=[];n.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)});return[d,e]};n.first=n.head=n.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:e.call(a,0,b)};n.initial=function(a,b,c){return e.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};n.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:e.call(a,Math.max(a.length-
b,0))};n.rest=n.tail=n.drop=function(a,b,c){return e.call(a,null==b||c?1:b)};n.compact=function(a){return n.filter(a,n.identity)};var t=function(a,b,c,d){if(b&&n.every(a,n.isArray))return h.apply(d,a);for(var e=0,g=a.length;e<g;e++){var k=a[e];n.isArray(k)||n.isArguments(k)?b?f.apply(d,k):t(k,b,c,d):c||d.push(k)}return d};n.flatten=function(a,b){return t(a,b,!1,[])};n.without=function(a){return n.difference(a,e.call(arguments,1))};n.uniq=n.unique=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||
(d=c,c=b,b=!1);null!=c&&(c=n.iteratee(c,d));d=[];for(var e=[],f=0,g=a.length;f<g;f++){var h=a[f];if(b)f&&e===h||d.push(h),e=h;else if(c){var k=c(h,f,a);0>n.indexOf(e,k)&&(e.push(k),d.push(h))}else 0>n.indexOf(d,h)&&d.push(h)}return d};n.union=function(){return n.uniq(t(arguments,!0,!0,[]))};n.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;d<e;d++){var f=a[d];if(!n.contains(b,f)){for(var g=1;g<c&&n.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b};
n.difference=function(a){var b=t(e.call(arguments,1),!0,!0,[]);return n.filter(a,function(a){return!n.contains(b,a)})};n.zip=function(a){if(null==a)return[];for(var b=n.max(arguments,"length").length,c=Array(b),d=0;d<b;d++)c[d]=n.pluck(arguments,d);return c};n.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else return d=
n.sortedIndex(a,b),a[d]===b?d:-1;for(;d<e;d++)if(a[d]===b)return d;return-1};n.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));0<=--d;)if(a[d]===b)return d;return-1};n.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var u=function(){};n.bind=function(a,b){var c,d;if(l&&a.bind===l)return l.apply(a,e.call(arguments,1));if(!n.isFunction(a))throw new TypeError("Bind must be called on a function");
c=e.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(e.call(arguments)));u.prototype=a.prototype;var f=new u;u.prototype=null;var g=a.apply(f,c.concat(e.call(arguments)));return n.isObject(g)?g:f}};n.partial=function(a){var b=e.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;e<f;e++)d[e]===n&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}};n.bindAll=function(a){var b,c=arguments.length,
d;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)d=arguments[b],a[d]=n.bind(a[d],a);return a};n.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;n.has(e,f)||(e[f]=a.apply(this,arguments));return e[f]};c.cache={};return c};n.delay=function(a,b){var c=e.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};n.defer=function(a){return n.delay.apply(n,[a,1].concat(e.call(arguments,1)))};n.throttle=function(a,b,c){var d,
e,f,g=null,h=0;c||(c={});var k=function(){h=!1===c.leading?0:n.now();g=null;f=a.apply(d,e);g||(d=e=null)};return function(){var l=n.now();h||!1!==c.leading||(h=l);var m=b-(l-h);d=this;e=arguments;0>=m||m>b?(clearTimeout(g),g=null,h=l,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(k,m));return f}};n.debounce=function(a,b,c){var d,e,f,g,h,k=function(){var l=n.now()-g;l<b&&0<l?d=setTimeout(k,b-l):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;g=n.now();
var l=c&&!d;d||(d=setTimeout(k,b));l&&(h=a.apply(f,e),f=e=null);return h}};n.wrap=function(a,b){return n.partial(b,a)};n.negate=function(a){return function(){return!a.apply(this,arguments)}};n.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}};n.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};n.before=function(a,b){var c;return function(){0<--a?c=b.apply(this,arguments):b=null;
return c}};n.once=n.partial(n.before,2);n.keys=function(a){if(!n.isObject(a))return[];if(m)return m(a);var b=[],c;for(c in a)n.has(a,c)&&b.push(c);return b};n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};n.invert=function(a){for(var b={},c=n.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b};n.functions=n.methods=function(a){var b=[],c;for(c in a)n.isFunction(a[c])&&
b.push(c);return b.sort()};n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;d<e;d++)for(c in b=arguments[d],b)k.call(b,c)&&(a[c]=b[c]);return a};n.pick=function(a,b,c){var d={},f;if(null==a)return d;if(n.isFunction(b))for(f in b=r(b,c),a){var g=a[f];b(g,f,a)&&(d[f]=g)}else{g=h.apply([],e.call(arguments,1));a=Object(a);for(var k=0,l=g.length;k<l;k++)f=g[k],f in a&&(d[f]=a[f])}return d};n.omit=function(a,b,c){if(n.isFunction(b))b=n.negate(b);else{var d=n.map(h.apply([],
e.call(arguments,1)),String);b=function(a,b){return!n.contains(d,b)}}return n.pick(a,b,c)};n.defaults=function(a){if(!n.isObject(a))return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b],e;for(e in d)void 0===a[e]&&(a[e]=d[e])}return a};n.clone=function(a){return n.isObject(a)?n.isArray(a)?a.slice():n.extend({},a):a};n.tap=function(a,b){b(a);return a};var w=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof n&&(a=a._wrapped);b instanceof n&&
(b=b._wrapped);var e=g.call(a);if(e!==g.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var f=a.constructor,h=b.constructor;if(f!==h&&"constructor"in a&&"constructor"in b&&!(n.isFunction(f)&&f instanceof f&&n.isFunction(h)&&h instanceof
h))return!1;c.push(a);d.push(b);if("[object Array]"===e){if(e=a.length,h=e===b.length)for(;e--&&(h=w(a[e],b[e],c,d)););}else if(f=n.keys(a),e=f.length,h=n.keys(b).length===e)for(;e--&&(h=f[e],h=n.has(b,h)&&w(a[h],b[h],c,d)););c.pop();d.pop();return h};n.isEqual=function(a,b){return w(a,b,[],[])};n.isEmpty=function(a){if(null==a)return!0;if(n.isArray(a)||n.isString(a)||n.isArguments(a))return 0===a.length;for(var b in a)if(n.has(a,b))return!1;return!0};n.isElement=function(a){return!(!a||1!==a.nodeType)};
n.isArray=d||function(a){return"[object Array]"===g.call(a)};n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};n.each("Arguments Function String Number Date RegExp".split(" "),function(a){n["is"+a]=function(b){return g.call(b)==="[object "+a+"]"}});n.isArguments(arguments)||(n.isArguments=function(a){return n.has(a,"callee")});"function"!==typeof/./&&(n.isFunction=function(a){return"function"==typeof a||!1});n.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};
n.isNaN=function(a){return n.isNumber(a)&&a!==+a};n.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===g.call(a)};n.isNull=function(a){return null===a};n.isUndefined=function(a){return void 0===a};n.has=function(a,b){return null!=a&&k.call(a,b)};n.noConflict=function(){a._=b;return this};n.identity=function(a){return a};n.constant=function(a){return function(){return a}};n.noop=function(){};n.property=function(a){return function(b){return b[a]}};n.matches=function(a){var b=n.pairs(a),
c=b.length;return function(a){if(null==a)return!c;a=Object(a);for(var d=0;d<c;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}};n.times=function(a,b,c){var d=Array(Math.max(0,a));b=r(b,c,1);for(c=0;c<a;c++)d[c]=b(c);return d};n.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};n.now=Date.now||function(){return(new Date).getTime()};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=n.invert(d),A=function(a){var b=
function(b){return a[b]},c="(?:"+n.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){a=null==a?"":""+a;return d.test(a)?a.replace(e,b):a}};n.escape=A(d);n.unescape=A(q);n.result=function(a,b){if(null!=a){var c=a[b];return n.isFunction(c)?a[b]():c}};var x=0;n.uniqueId=function(a){var b=++x+"";return a?a+b:b};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028",
"\u2029":"u2029"},y=/\\|'|\r|\n|\u2028|\u2029/g,z=function(a){return"\\"+F[a]};n.template=function(a,b,c){!b&&c&&(b=c);b=n.defaults({},b,n.templateSettings);c=RegExp([(b.escape||E).source,(b.interpolate||E).source,(b.evaluate||E).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,c,f,g,h){e+=a.slice(d,h).replace(y,z);d=h+b.length;c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?e+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(e+="';\n"+g+"\n__p+='");return b});e+="';\n";b.variable||
(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(g){throw g.source=e,g;}c=function(a){return f.call(this,a,n)};c.source="function("+(b.variable||"obj")+"){\n"+e+"}";return c};n.chain=function(a){a=n(a);a._chain=!0;return a};var J=function(a){return this._chain?n(a).chain():a};n.mixin=function(a){n.each(n.functions(a),function(b){var c=n[b]=a[b];n.prototype[b]=
function(){var a=[this._wrapped];f.apply(a,arguments);return J.call(this,c.apply(n,a))}})};n.mixin(n);n.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=c[a];n.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||delete c[0];return J.call(this,c)}});n.each(["concat","join","slice"],function(a){var b=c[a];n.prototype[a]=function(){return J.call(this,b.apply(this._wrapped,arguments))}});n.prototype.value=function(){return this._wrapped};
"function"===typeof define&&define.amd&&define("underscore",[],function(){return n})}).call(this);
(function(a,b){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,f,e){a.Backbone=b(a,e,c,f)});else if("undefined"!==typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)})(this,function(a,b,c,d){var f=a.Backbone,e=[].slice;b.VERSION="1.1.2";b.$=d;b.noConflict=function(){a.Backbone=f;return this};b.emulateHTTP=!1;b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||
!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,d){if(!k(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,l,m,n,q;if(!this._events||!k(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;h=a?[a]:c.keys(this._events);l=0;for(m=h.length;l<m;l++)if(a=
h[l],g=this._events[a]){this._events[a]=e=[];if(b||d)for(n=0,q=g.length;n<q;n++)f=g[n],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&m(c,b);d&&m(d,arguments);return this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!==
typeof b||(d=this);a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},g=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(g.test(c)){c=c.split(g);e=0;for(var f=c.length;e<f;e++)a[b].apply(a,[c[e]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);
break;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);break;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);break;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);break;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};c.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));f[g]=b;e||"object"!==typeof d||(e=this);b[a](d,e,this);return this}});h.bind=h.on;h.unbind=h.off;
c.extend(b,h);var l=b.Model=function(a,b){var d=a||{};b||(b={});this.cid=c.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(d=this.parse(d,b)||{});d=c.defaults({},d,c.result(this,"defaults"));this.set(d,b);this.changed={};this.initialize.apply(this,arguments)};c.extend(l.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,k,l,m;if(null==a)return this;"object"===typeof a?(f=a,d=b):(f={})[a]=b;d||(d={});if(!this._validate(f,d))return!1;g=d.unset;h=d.silent;a=[];k=this._changing;this._changing=!0;k||(this._previousAttributes=c.clone(this.attributes),this.changed={});m=this.attributes;l=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);
for(e in f)b=f[e],c.isEqual(m[e],b)||a.push(e),c.isEqual(l[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete m[e]:m[e]=b;if(!h)for(a.length&&(this._pending=d),b=0,e=a.length;b<e;b++)this.trigger("change:"+a[b],this,m[a[b]],d);if(k)return this;if(!h)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={},d;for(d in this.attributes)b[d]=
void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes,f;for(f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},
fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;d&&d(b,c,a);b.trigger("sync",b,c,a)};aa(this,a);return this.sync("read",this,a)},save:function(a,b,d){var e,f=this.attributes;null==a||"object"===typeof a?(e=a,d=b):(e={})[a]=b;d=c.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},f,e));void 0===d.parse&&(d.parse=
!0);var g=this,h=d.success;d.success=function(a){g.attributes=f;var b=g.parse(a,d);d.wait&&(b=c.extend(e||{},b));if(c.isObject(b)&&!g.set(b,d))return!1;h&&h(g,a,d);g.trigger("sync",g,a,d)};aa(this,d);a=this.isNew()?"create":d.patch?"patch":"update";"patch"===a&&(d.attrs=e);a=this.sync(a,this,d);e&&d.wait&&(this.attributes=f);return a},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&e();d&&d(b,
c,a);b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;aa(this,a);var f=this.sync("delete",this,a);a.wait||e();return f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;if(!d)return!0;this.trigger("invalid",this,d,c.extend(b,{validationError:d}));return!1}});c.each("keys values pairs invert pick omit".split(" "),function(a){l.prototype[a]=function(){var b=e.call(arguments);b.unshift(this.attributes);return c[a].apply(c,b)}});var n=b.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);
void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,c.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(n.prototype,h,{model:l,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a);b||
(b={});var e,f,g,h;e=0;for(f=a.length;e<f;e++)if(h=a[e]=this.get(a[e]))delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b);return d?a[0]:a},set:function(a,b){b=c.defaults({},b,r);b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,k,m,n=b.at,q=this.model,t=this.comparator&&null==n&&!1!==b.sort,u=c.isString(this.comparator)?this.comparator:
null,w=[],A=[],z={},x=b.add,D=b.merge,y=b.remove,F=!t&&x&&y?[]:!1;e=0;for(f=a.length;e<f;e++){k=a[e]||{};g=k instanceof l?h=k:k[q.prototype.idAttribute||"id"];if(g=this.get(g))y&&(z[g.cid]=!0),D&&(k=k===h?h.attributes:k,b.parse&&(k=g.parse(k,b)),g.set(k,b),t&&!m&&g.hasChanged(u)&&(m=!0)),a[e]=g;else if(x){h=a[e]=this._prepareModel(k,b);if(!h)continue;w.push(h);this._addReference(h,b)}h=g||h;!F||!h.isNew()&&z[h.id]||F.push(h);z[h.id]=!0}if(y){e=0;for(f=this.length;e<f;++e)z[(h=this.models[e]).cid]||
A.push(h);A.length&&this.remove(A,b)}if(w.length||F&&F.length)if(t&&(m=!0),this.length+=w.length,null!=n)for(e=0,f=w.length;e<f;e++)this.models.splice(n+e,0,w[e]);else for(F&&(this.models.length=0),k=F||w,e=0,f=k.length;e<f;e++)this.models.push(k[e]);m&&this.sort({silent:!0});if(!b.silent){e=0;for(f=w.length;e<f;e++)(h=w[e]).trigger("add",h,this,b);(m||F&&F.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],
b);b.previousModels=this.models;this._reset();a=this.add(a,c.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return e.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;a.success=function(c){d[a.reset?"reset":"set"](c,a);b&&b(d,c,a);d.trigger("sync",d,c,a)};aa(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;b.success=function(a,c){b.wait&&d.add(a,
b);e&&e(a,c,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof l)return a;b=b?c.clone(b):{};b.collection=this;var d=new this.model(a,b);if(!d.validationError)return d;this.trigger("invalid",this,d.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this)"destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});c.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){n.prototype[a]=function(){var b=e.call(arguments);b.unshift(this.models);return c[a].apply(c,b)}});c.each(["groupBy","countBy","sortBy","indexBy"],function(a){n.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});d=b.View=function(a){this.cid=c.uniqueId("view");a||(a={});c.extend(this,c.pick(a,u));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var t=/^(\S+)\s*(.*)$/,u="model collection el id attributes className tagName events".split(" ");
c.extend(d.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,c){this.$el&&this.undelegateEvents();this.$el=a instanceof b.$?a:b.$(a);this.el=this.$el[0];!1!==c&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||
(d=this[a[b]]);if(d){var e=b.match(t),f=e[1],e=e[2],d=c.bind(d,this),f=f+(".delegateEvents"+this.cid);if(""===e)this.$el.on(f,d);else this.$el.on(f,e,d)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id"));this.className&&(a["class"]=c.result(this,"className"));a=b.$("<"+c.result(this,"tagName")+
">").attr(a);this.setElement(a,!1)}}});b.sync=function(a,d,e){var f=A[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};e.url||(g.url=c.result(d,"url")||K());null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e)));e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===
f)){g.type="POST";e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=e.xhr=b.ajax(c.extend(g,e));d.trigger("request",d,a,e);return a};var w="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var x=b.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,F=/(\(\?)?:\w+/g,y=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(x.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a));c.isFunction(d)&&(e=d,d="");e||(e=this[d]);var f=this;b.history.route(a,
function(c){c=f._extractParameters(a,c);f.execute(e,c);f.trigger.apply(f,["route:"+d].concat(c));f.trigger("route",d,c);b.history.trigger("route",f,d,c)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){b.history.navigate(a,c);return this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(z,"\\$&").replace(E,"(?:$1)?").replace(F,
function(a,b){return b?a:"([^/?]+)"}).replace(y,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[];c.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},H=/^[#\/]|\s+$/g,T=/^\/+|\/+$/g,I=/msie [\w.]+/,Q=/\/$/,D=/#.*$/;J.started=!1;c.extend(J.prototype,
h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(Q,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(H,"")},start:function(a){if(J.started)throw Error("Backbone.history has already been started");
J.started=!0;this.options=c.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);a=this.getFragment();var d=document.documentMode,d=I.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(T,"/");d&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)b.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!d)b.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(H,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!J.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));a=a.replace(D,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});b.history=new J;l.extend=n.extend=x.extend=d.extend=J.extend=function(a,
b){var d=this,e;e=a&&c.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};c.extend(e,d,b);var f=function(){this.constructor=e};f.prototype=d.prototype;e.prototype=new f;a&&c.extend(e.prototype,a);e.__super__=d.prototype;return e};var K=function(){throw Error('A "url" property or function must be specified');},aa=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return b});
(function(a,b,c){var d,f,e,h,g=[],k=[];a.extend(c.View,{attach:function(a,d){"function"!==typeof d&&(d=c.View.extend(d));g.push(function(){this.find(a).add(this.filter(a)).each(function(){var a=b(this);void 0===a.data("backbone.attached-view")&&a.data("backbone.attached-view",new d({el:this}))})});return d}});f=function(a){var b,c=g.length;for(b=0;b<c;b+=1)g[b].call(a)};d=function(){var a;a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(void 0===a)return!1;(new a(function(a){var c,
d=a.length,e=[];for(c=0;c<d;c+=1)e.push.apply(e,a[c].addedNodes);0<e.length&&f(b(e))})).observe(document.body,{childList:!0,subtree:!0});return!0};e=function(){b(document.body).on("DOMNodeInserted",function(a){var b=0<k.length;k.push(a);b||setTimeout(h,0)})};h=function(){var a,c=k.length,d=[];for(a=0;a<c;a+=1)d.push(k[a].target);k=[];f(b(d))};b(function(){f(b(document));d()||e()})})(window._,window.jQuery,window.Backbone);
(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");if(c)return c;c=new a.validator(b,this[0]);a.data(this[0],"validator",c);c.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function f(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&b.remove();return!1}return!0}c.settings.debug&&b.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,f();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):f();c.focusInvalid();return!1}));return c}b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();
var b=!0,c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b},removeAttrs:function(b){var c={},d=this;a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(b,c){var d=this[0];if(b){var f=a.data(d.form,"validator").settings,e=f.rules,h=a.validator.staticRules(d);switch(b){case "add":a.extend(h,a.validator.normalizeRule(c));e[d.name]=h;c.messages&&(f.messages[d.name]=a.extend(f.messages[d.name],c.messages));break;case "remove":if(!c)return delete e[d.name],
h;var g={};a.each(c.split(/\s/),function(a,b){g[b]=h[b];delete h[b]});return g}}d=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);d.required&&(f=d.required,delete d.required,d=a.extend({required:f},d));return d}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,c){this.settings=
a.extend({},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(1==arguments.length)return function(){var c=a.makeArray(arguments);c.unshift(b);return a.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),c)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.errorsFor(a).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||
a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),
range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator");c.settings["on"+b.type]&&c.settings["on"+b.type].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||
a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)});a(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",
b).delegate("click",":radio, :checkbox, select, option",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,c=this.currentElements=this.elements();c[a];a++)this.check(c[a]);
return this.valid()},element:function(b){this.lastElement=b=this.clean(b);this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);c?delete this.invalid[b.name]:this.invalid[b.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in
b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var c=0,d;for(d in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus()}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
b.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!b.objectLength(a(this).rules())?!1:c[this.name]=!0})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.clean(b);this.checkable(b)&&(b=this.findByName(b.name)[0]);var c=a(b).rules(),d=!1;for(method in c){var f={method:method,parameters:c[method]};try{var e=a.validator.methods[method].call(this,b.value.replace(/\r/g,""),b,f.parameters);if("dependency-mismatch"==e)d=!0;else{d=!1;if("pending"==e){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!e)return this.formatAndAdd(b,f),!1}}catch(h){throw this.settings.debug&&
window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h),h;}}if(!d)return this.objectLength(c)&&this.successList.push(b),!0},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,c){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[c])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==
arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,c){var d=this.defaultMessage(a,c.method),f=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,a):f.test(d)&&(d=jQuery.format(d.replace(f,"{$1}"),c.parameters));this.errorList.push({message:d,
element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=
0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,
c){var d=this.errorsFor(b);d.length?(d.removeClass().addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b)));!c&&this.settings.success&&(d.text(""),
"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,f){return f.form==
c&&f.name==b&&f||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case "select":return a("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,c){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,c):!0},dependTypes:{"boolean":function(a,c){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,c){return a(c)}},optional:function(b){return!a.validator.methods.required.call(this,
a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[b.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c=
{};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(b){var c={};b=a(b);for(method in a.validator.methods){var d=b.attr(method);d&&(c[method]=d)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c=
{},d=a.data(b.form,"validator");d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{});return c},normalizeRules:function(b,c){a.each(b,function(d,f){if(!1===f)delete b[d];else if(f.param||f.depends){var e=!0;switch(typeof f.depends){case "string":e=!!a(f.depends,c.form).length;break;case "function":e=f.depends.call(c,c)}e?b[d]=void 0!==f.param?f.param:!0:delete b[d]}});a.each(b,function(d,f){b[d]=a.isFunction(f)?f(c):f});a.each(["minlength","maxlength","min","max"],function(){b[this]&&
(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])});a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength));b.messages&&delete b.messages;return b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0});b=c}return b},addMethod:function(b,
c,d){a.validator.methods[b]=c;a.validator.messages[b]=void 0!=d?d:a.validator.messages[b];3>c.length&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(b=a(c).val())&&0<b.length;case "input":if(this.checkable(c))return 0<this.getLength(b,c);default:return 0<a.trim(b).length}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var f=this.previousValue(c);
this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=f.message;d="string"==typeof d&&{url:d}||d;if(f.old!==b){f.old=b;var e=this;this.startRequest(c);var h={};h[c.name]=b;a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:h,success:function(d){e.settings.messages[c.name].remote=f.originalMessage;var h=!0===d;if(h){var m=e.formSubmitted;e.prepareElement(c);e.formSubmitted=
m;e.successList.push(c);e.showErrors()}else m={},d=f.message=d||e.defaultMessage(c,"remote"),m[c.name]=a.isFunction(d)?d(b):d,e.showErrors(m);f.valid=h;e.stopRequest(c,h)}},d));return"pending"}return this.pending[c.name]?"pending":f.valid},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){b=this.getLength(a.trim(b),c);return this.optional(c)||b>=d[0]&&b<=
d[1]},min:function(a,c,d){return this.optional(c)||a>=d},max:function(a,c,d){return this.optional(c)||a<=d},range:function(a,c,d){return this.optional(c)||a>=d[0]&&a<=d[1]},email:function(a,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,c){return this.optional(c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,c){return this.optional(c)||/^\d+$/.test(a)},creditcard:function(a,c){if(this.optional(c))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var d=0,f=0,e=!1;a=a.replace(/\D/g,"");for(var h=a.length-1;0<=h;h--)f=
a.charAt(h),f=parseInt(f,10),e&&9<(f*=2)&&(f-=9),d+=f,e=!e;return 0==d%10},accept:function(a,c,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(c)||a.match(new RegExp(".("+d+")$","i"))},equalTo:function(b,c,d){d=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==d.val()}}});a.format=a.validator.format})(jQuery);
(function(a){var b=a.ajax,c={};a.ajax=function(d){d=a.extend(d,a.extend({},a.ajaxSettings,d));var f=d.port;return"abort"==d.mode?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments)):b.apply(this,arguments)}})(jQuery);
(function(a){a.each({focus:"focusin",blur:"focusout"},function(b,c){a.event.special[c]={setup:function(){if(a.browser.msie)return!1;this.addEventListener(b,a.event.special[c].handler,!0)},teardown:function(){if(a.browser.msie)return!1;this.removeEventListener(b,a.event.special[c].handler,!0)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=c;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{delegate:function(b,c,d){return this.bind(b,function(b){var e=a(b.target);if(e.is(c))return d.apply(e,
arguments)})},triggerEvent:function(b,c){return this.triggerHandler(b,[a.event.fix({type:b,target:c})])}})})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(a){a=f.json?JSON.stringify(a):String(a);return f.raw?a:encodeURIComponent(a)}function c(b,c){var g;if(f.raw)g=b;else a:{var k=b;0===k.indexOf('"')&&(k=k.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{k=decodeURIComponent(k.replace(d," "));g=f.json?JSON.parse(k):k;break a}catch(m){}g=void 0}return a.isFunction(c)?c(g):g}var d=/\+/g,f=a.cookie=function(d,h,g){if(void 0!==h&&!a.isFunction(h)){g=
a.extend({},f.defaults,g);if("number"===typeof g.expires){var k=g.expires,m=g.expires=new Date;m.setTime(+m+864E5*k)}return document.cookie=[f.raw?d:encodeURIComponent(d),"=",b(h),g.expires?"; expires="+g.expires.toUTCString():"",g.path?"; path="+g.path:"",g.domain?"; domain="+g.domain:"",g.secure?"; secure":""].join("")}g=d?void 0:{};for(var k=document.cookie?document.cookie.split("; "):[],m=0,l=k.length;m<l;m++){var n=k[m].split("="),r;r=n.shift();r=f.raw?r:decodeURIComponent(r);n=n.join("=");if(d&&
d===r){g=c(n,h);break}d||void 0===(n=c(n))||(g[r]=n)}return g};f.defaults={};a.removeCookie=function(b,c){if(void 0===a.cookie(b))return!1;a.cookie(b,"",a.extend({},c,{expires:-1}));return!a.cookie(b)}});
(function(a){var b={},c={};a.manageAjax=function(){return{create:function(c,f){b[c]=new a.manageAjax._manager(c,f);return b[c]},destroy:function(a){b[a]&&(b[a].clear(!0),delete b[a])}}}();a.manageAjax._manager=function(b,c){this.requests={};this.inProgress=0;this.qName=this.name=b;this.opts=a.extend({},a.ajaxSettings,a.manageAjax.defaults,c);c&&c.queue&&!0!==c.queue&&"string"===typeof c.queue&&"clear"!==c.queue&&(this.qName=c.queue)};a.manageAjax._manager.prototype={add:function(b){b=a.extend({},
this.opts,b);var c=b.complete||a.noop,e=b.success||a.noop,h=b.beforeSend||a.noop,g=b.error||a.noop,k="string"==typeof b.data?b.data:a.param(b.data||{}),m=b.type+b.url+k,l=this,n=this._createAjax(m,b,e,c);if(!this.requests[m]||!b.preventDoubbleRequests)return n.xhrID=m,b.xhrID=m,b.beforeSend=function(a,b){var c=h.call(this,a,b);!1===c&&l._removeXHR(m);return c},b.complete=function(a,e){l._complete.call(l,this,c,a,e,m,b)},b.success=function(a,c,f){l._success.call(l,this,e,a,c,f,b)},b.error=function(a,
c,e){var f="",h="";"timeout"!==c&&a&&(f=a.status,h=a.responseXML||a.responseText);g?g.call(this,a,c,e,b):setTimeout(function(){throw c+"| status: "+f+" | URL: "+b.url+" | data: "+k+" | thrown: "+e+" | response: "+h;},0);a=null},"clear"===b.queue&&a(document).clearQueue(this.qName),b.queue?(a.queue(document,this.qName,n),this.inProgress<b.maxRequests&&a.dequeue(document,this.qName),m):n()},_createAjax:function(b,f,e,h){var g=this;return function(){if(!1!==f.beforeCreate.call(f.context||g,b,f))return g.inProgress++,
1===g.inProgress&&a.event.trigger(g.name+"AjaxStart"),f.cacheResponse&&c[b]?(g.requests[b]={},setTimeout(function(){g._complete.call(g,f.context||f,h,c[b],"success",b,f);g._success.call(g,f.context||f,e,c[b]._successData,"success",c[b],f)},0)):f.async?g.requests[b]=a.ajax(f):a.ajax(f),b}},_removeXHR:function(b){this.opts.queue&&a.dequeue(document,this.qName);this.inProgress--;this.requests[b]=null;delete this.requests[b]},_isAbort:function(a,b){return!(!b.abortIsNoSuccess||a&&0!==a.readyState&&this.lastAbort!==
b.xhrID)},_complete:function(b,c,e,h,g,k){this._isAbort(e,k)&&(h="abort",k.abort.call(b,e,h,k));c.call(b,e,h,k);a.event.trigger(this.name+"AjaxComplete",[e,h,k]);k.domCompleteTrigger&&a(k.domCompleteTrigger).trigger(this.name+"DOMComplete",[e,h,k]).trigger("DOMComplete",[e,h,k]);this._removeXHR(g);this.inProgress||a.event.trigger(this.name+"AjaxStop")},_success:function(b,f,e,h,g,k){var m=this;if(!this._isAbort(g,k)){k.abortOld&&a.each(this.requests,function(a){if(a===k.xhrID)return!1;m.abort(a)});
if(k.cacheResponse&&!c[k.xhrID]&&(c[k.xhrID]={status:g.status,statusText:g.statusText,responseText:g.responseText,responseXML:g.responseXML,_successData:e},g.getAllResponseHeaders)){var l=g.getAllResponseHeaders();a.extend(c[k.xhrID],{getAllResponseHeaders:function(){return l},getResponseHeader:function(){var b={};a.each(l.split("\n"),function(a,c){var d=c.indexOf(":");b[c.substr(0,d)]=c.substr(d+2)});return function(a){return b[a]}}()})}f.call(b,e,h,g,k);a.event.trigger(this.name+"AjaxSuccess",[g,
k,e]);k.domSuccessTrigger&&a(k.domSuccessTrigger).trigger(this.name+"DOMSuccess",[e,k]).trigger("DOMSuccess",[e,k])}g=null},getData:function(b){if(b){var c=this.requests[b];!c&&this.opts.queue&&(c=a.grep(a(document).queue(this.qName),function(a,c){return a.xhrID===b})[0]);return c}return{requests:this.requests,queue:this.opts.queue?a(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(b){var c;if(b)(c=this.getData(b))&&c.abort?(this.lastAbort=b,c.abort(),this.lastAbort=!1):
a(document).queue(this.qName,a.grep(a(document).queue(this.qName),function(a,b){return a!==c})),c=null;else{var e=this,h=[];a.each(this.requests,function(a){h.push(a)});a.each(h,function(a,b){e.abort(b)})}},clear:function(b){a(document).clearQueue(this.qName);b&&this.abort()}};a.manageAjax._manager.prototype.getXHR=a.manageAjax._manager.prototype.getData;a.manageAjax.defaults={beforeCreate:a.noop,abort:a.noop,abortIsNoSuccess:!0,maxRequests:1,cacheResponse:!1,domCompleteTrigger:!1,domSuccessTrigger:!1,
preventDoubbleRequests:!0,queue:!1};a.each(a.manageAjax._manager.prototype,function(c,f){0!==c.indexOf("_")&&a.isFunction(f)&&(a.manageAjax[c]=function(e,f){if(!b[e])if("add"===c)a.manageAjax.create(e,f);else return;var g=Array.prototype.slice.call(arguments,1);b[e][c].apply(b[e],g)})})})(jQuery);var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};
Attacklab.showdown.converter=function(){var a,b,c,d=0;this.makeHtml=function(d){if(null!==d)return a=[],b=[],c=[],d=d.replace(/~/g,"~T"),d=d.replace(/\$/g,"~D"),d=d.replace(/\r\n/g,"\n"),d=d.replace(/\r/g,"\n"),d="\n\n"+d+"\n\n",d=T(d),d=d.replace(/^[ \t]+$/mg,""),d=e(d),d=f(d),d=g(d),d=J(d),d=d.replace(/~D/g,"$$"),d=d.replace(/~T/g,"~"),d=d.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(a,b){var c=d.slice(0,b),e=d.slice(b);return c.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?a:"<a href='"+
a+"'>"+a+"</a>"}),d=d.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(a){return"<a href='mailto:"+a+"'>"+a+"</a>"})};var f=function(c){return c=c.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(c,d,e,f,g){d=d.toLowerCase();a[d]=F(e);if(f)return f+g;g&&(b[d]=g.replace(/"/g,"&quot;"));return""})},e=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,
h);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h);return a=a.replace(/\n\n/g,"\n")},h=function(a,b){var d;d=b.replace(/\n\n/g,"\n");d=d.replace(/^\n/,"");d=d.replace(/\n+$/g,"");return d="\n\n~K"+
(c.push(d)-1)+"K\n\n"},g=function(a){a=r(a);var b=w("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,b);a=t(a);a=u(a);a=E(a);a=e(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");var d=a.split(/\n{2,}/g);a=[];for(var b=d.length,f=0;f<b;f++){var g=d[f];0<=g.search(/~K(\d+)K/g)?a.push(g):0<=g.search(/\S/)&&(g=k(g),g=g.replace(/\n/g,"<br />"),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",a.push(g))}b=
a.length;for(f=0;f<b;f++)for(;0<=a[f].search(/~K(\d+)K/);)d=c[RegExp.$1],d=d.replace(/\$/g,"$$$$"),a[f]=a[f].replace(/~K\d+K/,d);return a=a.join("\n\n")},k=function(a){a=A(a);a=m(a);a=a.replace(/\\(\\)/g,Q);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,Q);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,n);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,l);a=a.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
l);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,l);a=y(a);a=F(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\w)_(\w)/g,"$1~E95E$2");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},m=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=I(a,"\\`*_")})},l=function(c,d,e,f,g,h,k,l){void 0==l&&(l="");c=f.toLowerCase();
if(""==g)if(""==c&&(c=e.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[c])g=a[c],void 0!=b[c]&&(l=b[c]);else if(-1<d.search(/\(\s*\)$/m))g="";else return d;g=I(g,"*_");d='<a href="'+g+'"';""!=l&&(l=l.replace(/"/g,"&quot;"),l=I(l,"*_"),d+=' title="'+l+'"');return d+(">"+e+"</a>")},n=function(c,d,e,f,g,h,k,l){c=e;f=f.toLowerCase();l||(l="");if(""==g)if(""==f&&(f=c.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[f])g=a[f],void 0!=b[f]&&(l=b[f]);else return d;c=c.replace(/"/g,"&quot;");g=I(g,"*_");d='<img src="'+
g+'" alt="'+c+'"';l=l.replace(/"/g,"&quot;");l=I(l,"*_");return d=d+(' title="'+l+'"')+" />"},r=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return w("<h1>"+k(b)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return w("<h2>"+k(b)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){a=b.length;return w("<h"+a+">"+k(c)+"</h"+a+">")})},q,t=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;
d?a=a.replace(b,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=q(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=q(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};q=function(a){d++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,
function(a,b,c,d,e){a=e;b||-1<a.search(/\n{2,}/)?a=g(H(a)):(a=t(H(a)),a=a.replace(/\n$/,""),a=k(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");d--;return a};var u=function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){a=x(H(b));a=T(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return w(a)+c});return a=a.replace(/~0/,"")},w=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(c.push(a)-1)+
"K\n\n"},A=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=x(a);return b+"<code>"+a+"</code>"})},x=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=I(a,"*_{}[]\\",!1)},E=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=g(c);
c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return w("<blockquote>\n"+c+"\n</blockquote>")})},F=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},y=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return z(J(b))})},
z=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=.9<c?b[2](a):.45<c?b[1](a):b[0](a)}return a});a='<a href="'+a+'">'+a+"</a>";return a=a.replace(/">.+:/g,'">')},J=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=
parseInt(b);return String.fromCharCode(c)})},H=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},T=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b,c){a=b;b=4-a.length%4;for(c=0;c<b;c++)a+=" ";return a});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},I=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(new RegExp(b,"g"),Q)},Q=function(a,b){return"~E"+b.charCodeAt(0)+
"E"}};var Showdown=Attacklab.showdown;Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js");
(function(a,b){var c=a.document,d=a.navigator,f=a.setTimeout,e=a.clearTimeout,h=a.setInterval,g=a.clearInterval,k=a.getComputedStyle,m=a.encodeURIComponent,l=a.ActiveXObject,n=a.Error,r=a.Number.parseInt||a.parseInt,q=a.Number.parseFloat||a.parseFloat,t=a.Number.isNaN||a.isNaN,u=a.Date.now,w=a.Object.keys,A=a.Object.defineProperty,x=a.Object.prototype.hasOwnProperty,E=a.Array.prototype.slice,F=function(){var b=function(a){return a};if("function"===typeof a.wrap&&"function"===typeof a.unwrap)try{var d=
c.createElement("div"),e=a.unwrap(d);1===d.nodeType&&e&&1===e.nodeType&&(b=a.unwrap)}catch(f){}return b}(),y=function(a){return E.call(a,0)},z=function(){var a,c,d,e,f,g=y(arguments),h=g[0]||{};a=1;for(c=g.length;a<c;a++)if(null!=(d=g[a]))for(e in d)x.call(d,e)&&(f=d[e],h!==f&&f!==b&&(h[e]=f));return h},J=function(a){var b,c,d;if("object"!==typeof a||null==a||"number"===typeof a.nodeType)b=a;else if("number"===typeof a.length)for(b=[],c=0,d=a.length;c<d;c++)x.call(a,c)&&(b[c]=J(a[c]));else for(c in b=
{},a)x.call(a,c)&&(b[c]=J(a[c]));return b},H=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument)){do{if(a===b)return!0;a=a.parentNode}while(a)}return!1},T=function(a){var b;"string"===typeof a&&a&&(a.split("#")[0].split("?"),b=a.slice(0,a.lastIndexOf("/")+1));return b},I=function(){var a,d,e;if(c.currentScript&&(a=c.currentScript.src))return a;d=c.getElementsByTagName("script");
if(1===d.length)return d[0].src||b;if("readyState"in d[0])for(e=d.length;e--;)if("interactive"===d[e].readyState&&(a=d[e].src))return a;if("loading"===c.readyState&&(a=d[d.length-1].src))return a;var f;try{throw new n;}catch(g){d=g}if(d&&!(f=d.sourceURL||d.fileName)){f=d.stack;var h;"string"===typeof f&&f&&((d=f.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&d[1]?h=d[1]:(d=f.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&
d[1]&&(h=d[1]));f=h}return(a=f)?a:b},Q=null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent),D={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},K,aa={},p,Y,ba={},N=null,qa=0,Ja=0,fa={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard",
"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.",
"flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},
ia="flash-unavailable flash-degraded flash-overdue version-mismatch config-mismatch clipboard-error".split(" "),B="flash-disabled flash-outdated flash-sandboxed flash-unavailable flash-degraded flash-deactivated flash-overdue".split(" "),ja=new RegExp("^flash-("+B.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),zb=new RegExp("^flash-("+B.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),V={swfPath:function(){var a;if(!(a=T(I()))){var d,e,f=c.getElementsByTagName("script");
for(a=f.length;a--;){if(!(e=f[a].src)){d=null;break}e=T(e);if(null==d)d=e;else if(d!==e){d=null;break}}a=d||b}return(a||"")+"ZeroClipboard.swf"}(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3E4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",
forceHandCursor:!1,title:null,zIndex:999999999},Ua=function(a){if("object"===typeof a&&null!==a)for(var b in a)if(x.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))V[b]=a[b];else if(null==D.bridge)if("containerId"===b||"swfObjectId"===b){var c=a[b];if("string"===typeof c&&c&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(c))V[b]=a[b];else throw Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");}else V[b]=a[b];if("string"===typeof a&&a){if(x.call(V,a))return V[a]}else return J(V)},
za=function(){wa();for(var a=["userAgent","platform","appName"],b={},c=0,e=a.length;c<e;c++)a[c]in d&&(b[a[c]]=d[a[c]]);var a=["bridge"],c={},f;for(f in D)-1===a.indexOf(f)&&(c[f]=D[f]);return{browser:b,flash:c,zeroclipboard:{version:O.version,config:O.config()}}},ga=function(){return!!(D.disabled||D.outdated||D.sandboxed||D.unavailable||D.degraded||D.deactivated)},gb=function(a,c){var d,e,f,g={};if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===
typeof c)for(d in a)if(x.call(a,d)&&"string"===typeof d&&d&&"function"===typeof a[d])O.on(d,a[d]);if(f&&f.length){d=0;for(e=f.length;d<e;d++)a=f[d].replace(/^on/,""),g[a]=!0,aa[a]||(aa[a]=[]),aa[a].push(c);g.ready&&D.ready&&O.emit({type:"ready"});if(g.error){d=0;for(e=B.length;d<e;d++)if(!0===D[B[d].replace(/^flash-/,"")]){O.emit({type:"error",name:B[d]});break}K!==b&&O.version!==K&&O.emit({type:"error",name:"version-mismatch",jsVersion:O.version,swfVersion:K})}}return O},Ca=function(a,b){var c,d,
e,f,g;if(0===arguments.length)f=w(aa);else if("string"===typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)x.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&O.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;c<d;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=aa[a])&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return O},Sb=function(a){return"string"===typeof a&&a?J(aa[a])||null:J(aa)},kb=function(b){var d,
e,f;if(b=ra(b)){d=b;var g=d.target||p||null,h="swf"===d._source;delete d._source;switch(d.type){case "error":!(g="flash-sandboxed"===d.name)&&(g=null,!1===Q||d&&"error"===d.type&&d.name&&-1!==ia.indexOf(d.name))&&(g=!1);"boolean"===typeof g&&(D.sandboxed=g);-1!==B.indexOf(d.name)?z(D,{disabled:"flash-disabled"===d.name,outdated:"flash-outdated"===d.name,unavailable:"flash-unavailable"===d.name,degraded:"flash-degraded"===d.name,deactivated:"flash-deactivated"===d.name,overdue:"flash-overdue"===d.name,
ready:!1}):"version-mismatch"===d.name&&(K=d.swfVersion,z(D,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}));Vb();break;case "ready":K=d.swfVersion;g=!0===D.deactivated;z(D,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:g,ready:!g});Vb();break;case "beforecopy":Y=g;break;case "copy":var k,l,g=d.relatedTarget;!ba["text/html"]&&!ba["text/plain"]&&g&&(l=g.value||g.outerHTML||g.innerHTML)&&(k=g.value||g.textContent||g.innerText)?
(d.clipboardData.clearData(),d.clipboardData.setData("text/plain",k),l!==k&&d.clipboardData.setData("text/html",l)):!ba["text/plain"]&&d.target&&(k=d.target.getAttribute("data-clipboard-text"))&&(d.clipboardData.clearData(),d.clipboardData.setData("text/plain",k));break;case "aftercopy":C(d);O.clearData();if(k=g){var m;try{m=c.activeElement}catch(n){m=null}k=g!==m}k&&g.focus&&g.focus();break;case "_mouseover":O.focus(g);!0===V.bubbleEvents&&h&&(g&&g!==d.relatedTarget&&!H(d.relatedTarget,g)&&Qa(z({},
d,{type:"mouseenter",bubbles:!1,cancelable:!1})),Qa(z({},d,{type:"mouseover"})));break;case "_mouseout":O.blur();!0===V.bubbleEvents&&h&&(g&&g!==d.relatedTarget&&!H(d.relatedTarget,g)&&Qa(z({},d,{type:"mouseleave",bubbles:!1,cancelable:!1})),Qa(z({},d,{type:"mouseout"})));break;case "_mousedown":zc(g,V.activeClass);!0===V.bubbleEvents&&h&&Qa(z({},d,{type:d.type.slice(1)}));break;case "_mouseup":sc(g,V.activeClass);!0===V.bubbleEvents&&h&&Qa(z({},d,{type:d.type.slice(1)}));break;case "_click":Y=null;
!0===V.bubbleEvents&&h&&Qa(z({},d,{type:d.type.slice(1)}));break;case "_mousemove":!0===V.bubbleEvents&&h&&Qa(z({},d,{type:d.type.slice(1)}))}d=/^_(?:click|mouse(?:over|out|down|up|move))$/.test(d.type)?!0:void 0;if(!d){if("ready"===b.type&&!0===D.overdue)return O.emit({type:"error",name:"flash-overdue"});d=z({},b);if("object"===typeof d&&d&&d.type&&(g=Lb(d),(k=(aa["*"]||[]).concat(aa[d.type]||[]))&&k.length)){var q,t;l=0;for(m=k.length;l<m;l++)h=k[l],q=this,"string"===typeof h&&"function"===typeof a[h]&&
(h=a[h]),"object"===typeof h&&h&&"function"===typeof h.handleEvent&&(q=h,h=h.handleEvent),"function"===typeof h&&(t=z({},d),Na(h,q,[t],g))}if("copy"===b.type){e={};b={};if("object"===typeof ba&&ba){for(f in ba)if(f&&x.call(ba,f)&&"string"===typeof ba[f]&&ba[f])switch(f.toLowerCase()){case "text/plain":case "text":case "air:text":case "flash:text":e.text=ba[f];b.text=f;break;case "text/html":case "html":case "air:html":case "flash:html":e.html=ba[f];b.html=f;break;case "application/rtf":case "text/rtf":case "rtf":case "richtext":case "air:rtf":case "flash:rtf":e.rtf=
ba[f],b.rtf=f}f={data:e,formatMap:b}}else f=void 0;e=f.data;N=f.formatMap}return e}}},Xa=function(){var a=D.sandboxed;wa();"boolean"!==typeof D.ready&&(D.ready=!1);D.sandboxed!==a&&!0===D.sandboxed?(D.ready=!1,O.emit({type:"error",name:"flash-sandboxed"})):O.isFlashUnusable()||null!==D.bridge||(a=V.flashLoadTimeout,"number"===typeof a&&0<=a&&(qa=f(function(){"boolean"!==typeof D.deactivated&&(D.deactivated=!0);!0===D.deactivated&&O.emit({type:"error",name:"flash-deactivated"})},a)),D.overdue=!1,hc())},
Ga=function(){O.clearData();O.blur();O.emit("destroy");Mb();O.off()},qb=function(a,b){var c;if("object"===typeof a&&a&&"undefined"===typeof b)c=a,O.clearData();else if("string"===typeof a&&a)c={},c[a]=b;else return;for(var d in c)"string"===typeof d&&d&&x.call(c,d)&&"string"===typeof c[d]&&c[d]&&(ba[d]=c[d])},Da=function(a){if("undefined"===typeof a){if(ba)for(var b in ba)x.call(ba,b)&&delete ba[b];N=null}else"string"===typeof a&&x.call(ba,a)&&delete ba[a]},W=function(a){if("undefined"===typeof a)return J(ba);
if("string"===typeof a&&x.call(ba,a))return ba[a]},Kb=function(a){if(a&&1===a.nodeType){p&&(sc(p,V.activeClass),p!==a&&sc(p,V.hoverClass));p=a;zc(a,V.hoverClass);var b=a.getAttribute("title")||V.title;if("string"===typeof b&&b){var c=ua(D.bridge);c&&c.setAttribute("title",b)}a=!0===V.forceHandCursor||"pointer"===bc(a,"cursor");!0===D.ready&&(D.bridge&&"function"===typeof D.bridge.setHandCursor?D.bridge.setHandCursor(a):D.ready=!1);var d;p&&(d=ua(D.bridge))&&(a=Ub(p),z(d.style,{width:a.width+"px",
height:a.height+"px",top:a.top+"px",left:a.left+"px",zIndex:""+Ab(V.zIndex)}))}},db=function(){var a=ua(D.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px");p&&(sc(p,V.hoverClass),sc(p,V.activeClass),p=null)},Tb=function(){return p||null},ra=function(d){var e;"string"===typeof d&&d?(e=d,d={}):"object"===typeof d&&d&&"string"===typeof d.type&&d.type&&(e=d.type);if(e){e=e.toLowerCase();!d.target&&(/^(copy|aftercopy|_click)$/.test(e)||
"error"===e&&"clipboard-error"===d.name)&&(d.target=Y);z(d,{type:e,target:d.target||p||null,relatedTarget:d.relatedTarget||null,currentTarget:D&&D.bridge||null,timeStamp:d.timeStamp||u()||null});e=fa[d.type];"error"===d.type&&d.name&&e&&(e=e[d.name]);e&&(d.message=e);"ready"===d.type&&z(d,{target:null,version:D.version});"error"===d.type&&(ja.test(d.name)&&z(d,{target:null,minimumVersion:"11.0.0"}),zb.test(d.name)&&z(d,{version:D.version}));"copy"===d.type&&(d.clipboardData={setData:O.setData,clearData:O.clearData});
if("aftercopy"===d.type&&(e=N,"object"===typeof d&&d&&"object"===typeof e&&e)){var f={},g;for(g in d)if(x.call(d,g))if("errors"===g){f[g]=d[g]?d[g].slice():[];for(var h=0,k=f[g].length;h<k;h++)f[g][h].format=e[f[g][h].format]}else if("success"!==g&&"data"!==g)f[g]=d[g];else{f[g]={};var h=d[g],l;for(l in h)l&&x.call(h,l)&&x.call(e,l)&&(f[g][e[l]]=h[l])}d=f}d.target&&!d.relatedTarget&&(g=d,l=(l=(l=d.target)&&l.getAttribute&&l.getAttribute("data-clipboard-target"))?c.getElementById(l):null,g.relatedTarget=
l);if((g=d)&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(g.type)){l=g.target;d="_mouseover"===g.type&&g.relatedTarget?g.relatedTarget:b;e="_mouseout"===g.type&&g.relatedTarget?g.relatedTarget:b;var h=Ub(l),f=h.left+("number"===typeof g._stageX?g._stageX:0),h=h.top+("number"===typeof g._stageY?g._stageY:0),k=f-(c.body.scrollLeft+c.documentElement.scrollLeft),m=h-(c.body.scrollTop+c.documentElement.scrollTop),n=(a.screenLeft||a.screenX||0)+k,q=(a.screenTop||a.screenY||0)+m,t="number"===typeof g.movementX?
g.movementX:0,r="number"===typeof g.movementY?g.movementY:0;delete g._stageX;delete g._stageY;z(g,{srcElement:l,fromElement:d,toElement:e,screenX:n,screenY:q,pageX:f,pageY:h,clientX:k,clientY:m,x:k,y:m,movementX:t,movementY:r,offsetX:0,offsetY:0,layerX:0,layerY:0})}return g}},Lb=function(a){return!/^(?:(?:before)?copy|destroy)$/.test(a&&"string"===typeof a.type&&a.type||"")},Na=function(a,b,c,d){d?f(function(){a.apply(b,c)},0):a.apply(b,c)},C=function(a){if(a.errors&&0<a.errors.length){var b=J(a);
z(b,{type:"error",name:"clipboard-error"});delete b.success;f(function(){O.emit(b)},0)}},Qa=function(b){if(b&&"string"===typeof b.type&&b){var d,e=b.target||null;d=e&&e.ownerDocument||c;b=z({view:d.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===b.type?1:0,button:"number"===typeof b.which?b.which-1:"number"===typeof b.button?b.button:d.createEvent?0:1},b);e&&d.createEvent&&e.dispatchEvent&&(b=[b.type,b.canBubble,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,
b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget],d=d.createEvent("MouseEvents"),d.initMouseEvent&&(d.initMouseEvent.apply(d,b),d._source="js",e.dispatchEvent(d)))}},ac=function(){var a=V.flashLoadTimeout;if("number"===typeof a&&0<=a){var b=V.swfObjectId+"_fallbackContent";Ja=h(function(){var a;var d=c.getElementById(b);if(d){a=k(d,null);var e=0<q(a.height),f=0<q(a.width),g=0<=q(a.top),h=0<=q(a.left),l=e&&f&&g&&h,d=l?null:Ub(d);a="none"!==a.display&&"collapse"!==a.visibility&&(l||!!d&&(e||0<
d.height)&&(f||0<d.width)&&(g||0<=d.top)&&(h||0<=d.left))}else a=!1;a&&(Vb(),D.deactivated=null,O.emit({type:"error",name:"swf-not-found"}))},Math.min(1E3,a/10))}},ua=function(a){for(a=a&&a.parentNode;a&&"OBJECT"===a.nodeName&&a.parentNode;)a=a.parentNode;return a||null},hc=function(){var b,d=D.bridge,e=ua(d);if(!d){var d=Uc(a.location.host,V),f="never"===d?"none":"all",g,e=z({jsVersion:O.version},V),h,k,l,n="",q=[];e.trustedDomains&&("string"===typeof e.trustedDomains?g=[e.trustedDomains]:"object"===
typeof e.trustedDomains&&"length"in e.trustedDomains&&(g=e.trustedDomains));if(g&&g.length)for(h=0,k=g.length;h<k;h++)if(x.call(g,h)&&g[h]&&"string"===typeof g[h]&&(l=Ka(g[h]))){if("*"===l){q.length=0;q.push(l);break}q.push.apply(q,[l,"//"+l,a.location.protocol+"//"+l])}q.length&&(n+="trustedOrigins="+m(q.join(",")));!0===e.forceEnhancedClipboard&&(n+=(n?"&":"")+"forceEnhancedClipboard=true");"string"===typeof e.swfObjectId&&e.swfObjectId&&(n+=(n?"&":"")+"swfObjectId="+m(e.swfObjectId));"string"===
typeof e.jsVersion&&e.jsVersion&&(n+=(n?"&":"")+"jsVersion="+m(e.jsVersion));g=n;e=V.swfPath;h=null==V||V&&!0===V.cacheBust?(-1===V.swfPath.indexOf("?")?"?":"&")+"noCache="+u():"";h=e+h;e=c.createElement("div");e.id=V.containerId;e.className=V.containerClass;e.style.position="absolute";e.style.left="0px";e.style.top="-9999px";e.style.width="1px";e.style.height="1px";e.style.zIndex=""+Ab(V.zIndex);k=c.createElement("div");e.appendChild(k);c.body.appendChild(e);l=c.createElement("div");n="activex"===
D.pluginType;l.innerHTML='<object id="'+V.swfObjectId+'" name="'+V.swfObjectId+'" width="100%" height="100%" '+(n?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+h+'"')+">"+(n?'<param name="movie" value="'+h+'"/>':"")+'<param name="allowScriptAccess" value="'+d+'"/><param name="allowNetworking" value="'+f+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+g+'"/><div id="'+V.swfObjectId+
'_fallbackContent">&nbsp;</div></object>';d=l.firstChild;F(d).ZeroClipboard=O;e.replaceChild(d,k);ac()}d||((d=c[V.swfObjectId])&&(b=d.length)&&(d=d[b-1]),!d&&e&&(d=e.firstChild));D.bridge=d||null;return d},Mb=function(){var a=D.bridge;if(a){var c=ua(a);c&&("activex"===D.pluginType&&"readyState"in a?(a.style.display="none",function nb(){if(4===a.readyState){for(var b in a)"function"===typeof a[b]&&(a[b]=null);a.parentNode&&a.parentNode.removeChild(a);c.parentNode&&c.parentNode.removeChild(c)}else f(nb,
10)}()):(a.parentNode&&a.parentNode.removeChild(a),c.parentNode&&c.parentNode.removeChild(c)));Vb();D.ready=null;D.bridge=null;D.deactivated=null;K=b}},Ka=function(a){if(null==a||""===a)return null;a=a.replace(/^\s+|\s+$/g,"");if(""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return(a=-1===c?a:-1===b||0===c?null:a.slice(0,c))&&".swf"===a.slice(-4).toLowerCase()?null:a||null},Uc=function(){return function(a,b){var c=Ka(b.swfPath);null===c&&(c=a);var d=b.trustedDomains,
e,f,g,h=[];"string"===typeof d&&(d=[d]);if("object"===typeof d&&d&&"number"===typeof d.length)for(e=0,f=d.length;e<f;e++)if(x.call(d,e)&&(g=Ka(d[e]))){if("*"===g){h.length=0;h.push("*");break}-1===h.indexOf(g)&&h.push(g)}d=h.length;if(0<d){if(1===d&&"*"===h[0])return"always";if(-1!==h.indexOf(a))return 1===d&&a===c?"sameDomain":"always"}return"never"}}(),zc=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList)for(c=0,d=f.length;c<
d;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){e=" "+a.className+" ";c=0;for(d=f.length;c<d;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},sc=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList&&0<a.classList.length)for(c=0,d=f.length;c<d;c++)a.classList.remove(f[c]);else if(a.className){e=(" "+a.className+" ").replace(/[\r\n\t]/g," ");c=0;for(d=f.length;c<d;c++)e=
e.replace(" "+f[c]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},bc=function(a,b){var c=k(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Ub=function(b){var d={left:0,top:0,width:0,height:0};if(b.getBoundingClientRect){b=b.getBoundingClientRect();var e=a.pageXOffset,f=a.pageYOffset,g=c.documentElement.clientLeft||0,h=c.documentElement.clientTop||0,k=0,l=0;if("relative"===bc(c.body,"position"))var l=c.body.getBoundingClientRect(),m=c.documentElement.getBoundingClientRect(),
k=l.left-m.left||0,l=l.top-m.top||0;d.left=b.left+e-g-k;d.top=b.top+f-h-l;d.width="width"in b?b.width:b.right-b.left;d.height="height"in b?b.height:b.bottom-b.top}return d},Vb=function(){e(qa);qa=0;g(Ja);Ja=0},Ab=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;"number"!==typeof a||t(a)?"string"===typeof a&&(b=Ab(r(a,10))):b=a;return"number"===typeof b?b:"auto"},wa=function(b){var c,d,e,f=D.sandboxed,g=null;b=!0===b;if(!1===Q)g=!1;else{try{d=a.frameElement||null}catch(h){e={name:h.name,
message:h.message}}if(d&&1===d.nodeType&&"IFRAME"===d.nodeName)try{g=d.hasAttribute("sandbox")}catch(h){g=null}else{try{c=document.domain||null}catch(h){c=null}if(null===c||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))g=!0}}D.sandboxed=g;f===g||b||Ba(l);return g},Ba=function(a){function b(a){a=a.match(/[\d]+/g);a.length=3;return a.join(".")}function c(a){a&&(f=!0,a.version&&(k=b(a.version)),!k&&a.description&&(k=b(a.description)),a.filename&&
(a=a.filename,h=!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))))}var e,f=!1,g=!1,h=!1,k="";if(d.plugins&&d.plugins.length)a=d.plugins["Shockwave Flash"],c(a),d.plugins["Shockwave Flash 2.0"]&&(f=!0,k="2.0.0.11");else if(d.mimeTypes&&d.mimeTypes.length)a=(a=d.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin,c(a);else if("undefined"!==typeof a){g=!0;try{e=new a("ShockwaveFlash.ShockwaveFlash.7"),
f=!0,k=b(e.GetVariable("$version"))}catch(l){try{e=new a("ShockwaveFlash.ShockwaveFlash.6"),f=!0,k="6.0.21"}catch(m){try{e=new a("ShockwaveFlash.ShockwaveFlash"),f=!0,k=b(e.GetVariable("$version"))}catch(n){g=!1}}}}D.disabled=!0!==f;D.outdated=k&&q(k)<q("11.0.0");D.version=k||"0.0.0";D.pluginType=h?"pepper":g?"activex":f?"netscape":"unknown"};Ba(l);wa(!0);var O=function(){if(!(this instanceof O))return new O;"function"===typeof O._createClient&&O._createClient.apply(this,y(arguments))};A(O,"version",
{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0});O.config=function(){return Ua.apply(this,y(arguments))};O.state=function(){return za.apply(this,y(arguments))};O.isFlashUnusable=function(){return ga.apply(this,y(arguments))};O.on=function(){return gb.apply(this,y(arguments))};O.off=function(){return Ca.apply(this,y(arguments))};O.handlers=function(){return Sb.apply(this,y(arguments))};O.emit=function(){return kb.apply(this,y(arguments))};O.create=function(){return Xa.apply(this,y(arguments))};
O.destroy=function(){return Ga.apply(this,y(arguments))};O.setData=function(){return qb.apply(this,y(arguments))};O.clearData=function(){return Da.apply(this,y(arguments))};O.getData=function(){return W.apply(this,y(arguments))};O.focus=O.activate=function(){return Kb.apply(this,y(arguments))};O.blur=O.deactivate=function(){return db.apply(this,y(arguments))};O.activeElement=function(){return Tb.apply(this,y(arguments))};var hb=0,Ea={},Bb=0,Nb={},eb={};z(V,{autoActivate:!0});var Ac=function(a){var b=
this;b.id=""+hb++;Ea[b.id]={instance:b,elements:[],handlers:{}};a&&b.clip(a);O.on("*",function(a){return b.emit(a)});O.on("destroy",function(){b.destroy()});O.create()},ka=function(a,c){var d,e,f,g={},h=(e=Ea[this.id])&&e.handlers;if(!e)throw Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof c)for(d in a)if(x.call(a,d)&&"string"===typeof d&&d&&"function"===
typeof a[d])this.on(d,a[d]);if(f&&f.length){d=0;for(e=f.length;d<e;d++)a=f[d].replace(/^on/,""),g[a]=!0,h[a]||(h[a]=[]),h[a].push(c);g.ready&&D.ready&&this.emit({type:"ready",client:this});if(g.error){d=0;for(e=B.length;d<e;d++)if(D[B[d].replace(/^flash-/,"")]){this.emit({type:"error",name:B[d],client:this});break}K!==b&&O.version!==K&&this.emit({type:"error",name:"version-mismatch",jsVersion:O.version,swfVersion:K})}}return this},na=function(a,b){var c,d,e,f,g,h=(d=Ea[this.id])&&d.handlers;if(!h)return this;
if(0===arguments.length)f=w(h);else if("string"===typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)x.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;c<d;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=h[a])&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return this},Cb=function(a){var b=null,c=Ea[this.id]&&Ea[this.id].handlers;c&&(b="string"===typeof a&&
a?c[a]?c[a].slice(0):[]:J(c));return b},lb=function(b){var c;var d=b;if(!d||!d.type||d.client&&d.client!==this)c=!1;else{var e=(c=Ea[this.id])&&c.elements,f=!!e&&0<e.length,g=!d.target||f&&-1!==e.indexOf(d.target),e=d.relatedTarget&&f&&-1!==e.indexOf(d.relatedTarget),d=d.client&&d.client===this;c=c&&(g||e||d)?!0:!1}if(c&&("object"===typeof b&&b&&"string"===typeof b.type&&b.type&&(b=z({},b)),b=z({},ra(b),{client:this}),g=Ea[this.id],"object"===typeof b&&b&&b.type&&g&&(c=Lb(b),(g=(g&&g.handlers["*"]||
[]).concat(g&&g.handlers[b.type]||[]))&&g.length)))for(var h,k,d=0,e=g.length;d<e;d++)f=g[d],h=this,"string"===typeof f&&"function"===typeof a[f]&&(f=a[f]),"object"===typeof f&&f&&"function"===typeof f.handleEvent&&(h=f,f=f.handleEvent),"function"===typeof f&&(k=z({},b),Na(f,h,[k],c));return this},Bc=function(a){if(!Ea[this.id])throw Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=ib(a);for(var b=0;b<a.length;b++)if(x.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?
-1===Nb[a[b].zcClippingId].indexOf(this.id)&&Nb[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Bb++,Nb[a[b].zcClippingId]=[this.id],!0===V.autoActivate&&Ya(a[b]));var c=Ea[this.id]&&Ea[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},Ob=function(a){var b=Ea[this.id];if(!b)return this;var b=b.elements,c;a="undefined"===typeof a?b.slice(0):ib(a);for(var d=a.length;d--;)if(x.call(a,d)&&a[d]&&1===a[d].nodeType){for(c=0;-1!==(c=b.indexOf(a[d],c));)b.splice(c,1);var e=
Nb[a[d].zcClippingId];if(e){for(c=0;-1!==(c=e.indexOf(this.id,c));)e.splice(c,1);if(0===e.length){if(!0===V.autoActivate&&(c=a[d])&&1===c.nodeType&&(e=eb[c.zcClippingId],"object"===typeof e&&e)){for(var f=void 0,g=void 0,h=["move","leave","enter","out","over"],k=0,l=h.length;k<l;k++)f="mouse"+h[k],g=e[f],"function"===typeof g&&c.removeEventListener(f,g,!1);delete eb[c.zcClippingId]}delete a[d].zcClippingId}}}return this},rb=function(){var a=Ea[this.id];return a&&a.elements?a.elements.slice(0):[]},
xa=function(){Ea[this.id]&&(this.unclip(),this.off(),delete Ea[this.id])},ib=function(a){"string"===typeof a&&(a=[]);return"number"!==typeof a.length?[a]:a},Ya=function(b){if(b&&1===b.nodeType){var c=function(b){if(b||(b=a.event))"js"!==b._source&&(b.stopImmediatePropagation(),b.preventDefault()),delete b._source},d=function(d){if(d||(d=a.event))c(d),O.focus(b)};b.addEventListener("mouseover",d,!1);b.addEventListener("mouseout",c,!1);b.addEventListener("mouseenter",c,!1);b.addEventListener("mouseleave",
c,!1);b.addEventListener("mousemove",c,!1);eb[b.zcClippingId]={mouseover:d,mouseout:c,mouseenter:c,mouseleave:c,mousemove:c}}};O._createClient=function(){Ac.apply(this,y(arguments))};O.prototype.on=function(){return ka.apply(this,y(arguments))};O.prototype.off=function(){return na.apply(this,y(arguments))};O.prototype.handlers=function(){return Cb.apply(this,y(arguments))};O.prototype.emit=function(){return lb.apply(this,y(arguments))};O.prototype.clip=function(){return Bc.apply(this,y(arguments))};
O.prototype.unclip=function(){return Ob.apply(this,y(arguments))};O.prototype.elements=function(){return rb.apply(this,y(arguments))};O.prototype.destroy=function(){return xa.apply(this,y(arguments))};O.prototype.setText=function(a){if(!Ea[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData("text/plain",a);return this};O.prototype.setHtml=function(a){if(!Ea[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");
O.setData("text/html",a);return this};O.prototype.setRichText=function(a){if(!Ea[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData("application/rtf",a);return this};O.prototype.setData=function(){if(!Ea[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData.apply(this,y(arguments));return this};O.prototype.clearData=function(){if(!Ea[this.id])throw Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");
O.clearData.apply(this,y(arguments));return this};O.prototype.getData=function(){if(!Ea[this.id])throw Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return O.getData.apply(this,y(arguments))};"function"===typeof define&&define.amd?define(function(){return O}):"object"===typeof module&&module&&"object"===typeof module.exports&&module.exports?module.exports=O:a.ZeroClipboard=O})(function(){return this||window}());var Hogan={};
(function(a,b){function c(a){return""+(null===a||void 0===a?"":a)}a.Template=function(a,c,d,e){this.r=a||this.r;this.c=d;this.options=e;this.text=c||"";this.buf=b?[]:""};a.Template.prototype={r:function(){return""},v:function(a){a=c(a);return k.test(a)?a.replace(d,"&amp;").replace(f,"&lt;").replace(e,"&gt;").replace(h,"&#39;").replace(g,"&quot;"):a},t:c,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){a=c[a];if(!a)return"";this.c&&"string"==
typeof a&&(a=this.c.compile(a,this.options));return a.ri(b,c,d)},rs:function(a,b,c){var d=a[a.length-1];if(m(d))for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop();else c(a,b,this)},s:function(a,b,c,d,e,f,g){if(m(a)&&0===a.length)return!1;"function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g));c=""===a||!!a;!d&&c&&b&&b.push("object"==typeof a?a:b[b.length-1]);return c},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&m(b[b.length-2]))return b[b.length-1];for(a=1;a<e.length;a++)f&&
"object"==typeof f&&e[a]in f?(g=f,f=f[e[a]]):f="";if(d&&!f)return!1;!d&&"function"==typeof f&&(b.push(g),f=this.lv(f,b,c),b.pop());return f},f:function(a,b,c,d){for(var e=!1,f=null,g=!1,h=b.length-1;0<=h;h--)if((f=b[h])&&"object"==typeof f&&a in f){e=f[a];g=!0;break}if(!g)return d?!1:"";!d&&"function"==typeof e&&(e=this.lv(e,b,c));return e},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;d=a.call(b,d);d=null==d?""+d:d.toString();this.b(f.compile(d,g).render(b,c));return!1},b:b?function(a){this.buf.push(a)}:
function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");this.buf=[];return a}:function(){var a=this.buf;this.buf="";return a},ls:function(a,b,c,d,e,f,g){b=b[b.length-1];var h=null;if(!d&&this.c&&0<a.length)return this.ho(a,b,c,this.text.substring(e,f),g);h=a.call(b);if("function"==typeof h){if(d)return!0;if(this.c)return this.ho(h,b,c,this.text.substring(e,f),g)}return h},lv:function(a,b,d){b=b[b.length-1];a=a.call(b);return"function"==typeof a&&(a=c(a.call(b)),this.c&&~a.indexOf("{{"))?
this.c.compile(a,this.options).render(b,d):c(a)}};var d=/&/g,f=/</g,e=/>/g,h=/\'/g,g=/\"/g,k=/[&<>\"\']/,m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}})("undefined"!==typeof exports?exports:Hogan);
(function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function f(a,b,c,d){b=[];for(var e=null,g=null;0<a.length;){g=a.shift();if(!(e="#"==g.tag)&&!(e="^"==g.tag))a:{for(var e=g,h=d,k=0,l=h.length;k<l;k++)if(h[k].o==e.n){e.tag="#";e=!0;break a}e=void 0}if(e)c.push(g),
g.nodes=f(a,g.tag,c,d);else if("/"==g.tag){if(0===c.length)throw Error("Closing tag without opener: /"+g.n);e=c.pop();if(a=g.n!=e.n){a:{a=0;for(c=d.length;a<c;a++)if(d[a].c==g.n&&d[a].o==e.n){d=!0;break a}d=void 0}a=!d}if(a)throw Error("Nesting error: "+e.n+" vs. "+g.n);e.end=g.i;return b}b.push(g)}if(0<c.length)throw Error("missing closing tag: "+c.pop().n);return b}function e(a){return a.replace(r,"\\\\").replace(m,'\\"').replace(l,"\\n").replace(n,"\\r")}function h(a){return~a.indexOf(".")?"d":
"f"}function g(a){for(var b="",c=0,d=a.length;c<d;c++){var f=a[c].tag;if("#"==f)var f=a[c].nodes,k=h(a[c].n),l=a[c].i,m=a[c].end,n=a[c].otag+" "+a[c].ctag,f="if(_.s(_."+k+'("'+e(a[c].n)+'",c,p,1),c,p,0,'+l+","+m+',"'+n+'")){_.rs(c,p,function(c,p,_){'+g(f)+"});c.pop();}",b=b+f;else"^"==f?(f=a[c].nodes,f="if(!_.s(_."+h(a[c].n)+'("'+e(a[c].n)+'",c,p,1),c,p,1,0,0,"")){'+g(f)+"};",b+=f):"<"==f||">"==f?b+='_.b(_.rp("'+e(a[c].n)+'",c,p,"'+(a[c].indent||"")+'"));':"{"==f||"&"==f?(f="_.b(_.t(_."+h(a[c].n)+
'("'+e(a[c].n)+'",c,p,0)));',b+=f):"\n"==f?b+='_.b("\\n"'+(a.length-1==c?"":" + i")+");":"_v"==f?(f="_.b(_.v(_."+h(a[c].n)+'("'+e(a[c].n)+'",c,p,0)));',b+=f):void 0===f&&(f='"'+e(a[c])+'"',b+="_.b("+f+");")}return b}var k=/\S/,m=/\"/g,l=/\n/g,n=/\r/g,r=/\\/g,q={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(a,e){function f(){0<J.length&&(H.push(new String(J)),J="")}function g(a,b){f();var c;if(c=a)a:{c=!0;for(var d=Q;d<H.length;d++)if(c=H[d].tag&&q[H[d].tag]<q._v||!H[d].tag&&
null===H[d].match(k),!c){c=!1;break a}}if(c){c=Q;for(var e;c<H.length;c++)H[c].tag||((e=H[c+1])&&">"==e.tag&&(e.indent=H[c].toString()),H.splice(c,1))}else b||H.push({tag:"\n"});T=!1;Q=H.length}function h(a,b){var d="="+K,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");D=f[0];K=f[1];return e+d.length-1}var l=a.length,m=0,n=null,r=null,J="",H=[],T=!1,I=0,Q=0,D="{{",K="}}";e&&(e=e.split(" "),D=e[0],K=e[1]);for(I=0;I<l;I++)0==m?d(D,a,I)?(--I,f(),m=1):"\n"==a.charAt(I)?g(T):J+=a.charAt(I):
1==m?(I+=D.length-1,n=(r=q[a.charAt(I+1)])?a.charAt(I+1):"_v","="==n?(I=h(a,I),m=0):(r&&I++,m=2),T=I):d(K,a,I)?(H.push({tag:n,n:c(J),otag:D,ctag:K,i:"/"==n?T-K.length:I+D.length}),J="",I+=K.length-1,m=0,"{"==n&&("}}"==K?I++:b(H[H.length-1]))):J+=a.charAt(I);g(T,!0);return H};a.generate=function(b,c,d){b='var _=this;_.b(i=i||"");'+g(b)+"return _.fl();";return d.asString?"function(c,p,i){"+b+";}":new a.Template(new Function("c","p","i",b),c,a,d)};a.parse=function(a,b,c){c=c||{};return f(a,"",[],c.sectionTags||
[])};a.cache={};a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];if(d)return d;d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b);return this.cache[c]=d}})("undefined"!==typeof exports?exports:Hogan);
(function(a){var b={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},c=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,d=function(a){return null===a||void 0===a},f=function(b,c){var d=[],e=[];a.each(b,function(a,b){e.push(b);e.length===c&&(d.push(e),e=[])});0!==e.length&&d.push(e);return d},e=function(b){return d(b)?[]:a.isArray(b)?b:[b]},h=function(b){return a.map(b[0],function(c,
d){return[a.map(b,function(a){return a[d]})]})},g=function(a,b,c){this.init(a,b,c)};g.prototype={init:function(b){this.urls=b;this.count=0;this.results={};this._deferred=a.Deferred()},notify:function(b){this.results[b.original_url]=b;this.count++;this._deferred.notify.apply(this._deferred,[b]);if(this.count===this.urls.length){var c=this;b=a.map(this.urls,function(a){return c.results[a]});this._deferred.resolve(b)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}};
window.Keeper=g;var k=function(){};k.prototype={defaults:{},log:function(a,b){d(window.console)||d(window.console[a])||window.console[a].apply(window.console,[b])},build:function(b,c,e){e=d(e)?{}:e;var f=e.secure;d(f)&&(f="https:"===window.location.protocol?!0:!1);b=(f?"https":"http")+"://api.embed.ly/"+("objectify"===b?"2/":"1/")+b;f=d(e.query)?{}:e.query;f.key=e.key;b+="?"+a.param(f);return b+="&urls="+a.map(c,encodeURIComponent).join(",")},ajax:function(k,l,m){m=a.extend({},b,a.embedly.defaults,
"object"===typeof m&&m);if(d(m.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;l=e(l);var t=new g(l),u=[],w=[],A;a.each(l,function(a,b){A=!1;c.test(b)&&(A=!0,null!==m.urlRe&&m.urlRe.test&&!m.urlRe.test(b)&&(A=!1));!0===A?u.push(b):w.push({url:b,original_url:b,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+b+'"'})});l=f(u,m.batch);var x=this;a.each(l,function(b,c){a.ajax({url:x.build(k,c,m),dataType:"jsonp",success:function(b){a.each(h([c,
b]),function(a,b){var c=b[1];c.original_url=b[0];c.invalid=!1;t.notify(c)})}})});w.length&&setTimeout(function(){a.each(w,function(a,b){t.notify(b)})},1);return t._deferred},oembed:function(a,b){return this.ajax("oembed",a,b)},preview:function(a,b){return this.ajax("preview",a,b)},objectify:function(a,b){return this.ajax("objectify",a,b)},extract:function(a,b){return this.ajax("extract",a,b)}};var m=function(){};m.prototype={build:function(b,c,e){e=a.extend({},a.embedly.defaults,"object"===typeof e&&
e);var f=e.secure;d(f)&&(f="https:"===window.location.protocol?!0:!1);b=(f?"https":"http")+"://i.embed.ly/"+("display"===b?"1/":"1/display/")+b;f=d(e.query)?{}:e.query;f.key=e.key;b+="?"+a.param(f);return b+="&url="+encodeURIComponent(c)},display:function(a,b){return this.build("display",a,b)},resize:function(a,b){return this.build("resize",a,b)},fill:function(a,b){return this.build("fill",a,b)},crop:function(a,b){return this.build("crop",a,b)}};var l=function(a,b,c){this.init(a,b,c)};l.prototype=
{init:function(b,c,d){this.elem=b;this.$elem=a(b);this.original_url=c;this.options=d;this.loaded=a.Deferred();var e=this;this.loaded.done(function(){e.$elem.trigger("loaded",[e])});this.$elem.trigger("initialized",[this])},progress:function(b){a.extend(this,b);this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display();this.loaded.resolve(this)},imageStyle:function(){var a=[],b;this.options.addImageStyles&&(this.options.query.maxwidth&&
(b=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",a.push("max-width: "+this.options.query.maxwidth+b)),this.options.query.maxheight&&(b=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",a.push("max-height: "+this.options.query.maxheight+b)));return a.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var a;"photo"===this.type?(a="<a href='"+this.original_url+"' target='_blank'>",a+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+
"' /></a>"):"video"===this.type||"rich"===this.type?a=this.html:(this.title=this.title||this.url,a=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",a+="<a href='"+this.original_url+"'>"+this.title+"</a>",a+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",a+=this.description?'<div class="description">'+this.description+"</div>":"");this.options.wrapElement&&(a="<"+this.options.wrapElement+' class="'+
this.options.className+'">'+a+"</"+this.options.wrapElement+">");this.code=a;"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code);this.$elem.trigger("displayed",[this])}};a.embedly=new k;a.embedly.display=new m;a.fn.embedly=function(c){if(void 0===c||"object"===typeof c){c=a.extend({},
b,a.embedly.defaults,"object"===typeof c&&c);if(d(c.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(a.noop);var e={},f=function(b){if(!a.data(a(b),"embedly")){var d=a(b).attr("href"),f=new l(b,d,c);a.data(b,"embedly",f);e.hasOwnProperty(d)?e[d].push(f):e[d]=[f]}},g=this.each(function(){d(a(this).attr("href"))?a(this).find("a").each(function(){d(a(this).attr("href"))||f(this)}):f(this)}),h=a.embedly.ajax(c.endpoint,a.map(e,
function(a,b){return b}),c).progress(function(b){a.each(e[b.original_url],function(a,c){c.progress(b)})});c.progress&&h.progress(c.progress);c.done&&h.done(c.done);return g}};a.expr[":"].embedly=function(b){return!d(a(b).data("embedly"))};a.fn.display=function(c,e){d(c)&&(c="display");if(void 0===e||"object"===typeof e){e=a.extend({},b,a.embedly.defaults,"object"===typeof e&&e);if(d(e.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),
this.each(a.noop);var f=function(b){var d=a(b);if(!d.data("display")){var f=d.data("src")||d.attr("href"),f={original_url:f,url:a.embedly.display.build(c,f,e)};d.data("display",f);d.trigger("initialized",[b]);b="<img src='"+f.url+"' />";d.is("a")?d.append(b):d.replaceWith(b)}},g=function(b){return d(a(b).data("src"))&&d(a(b).attr("href"))?!1:!0};return this.each(function(){g(this)?f(this):a(this).find("img,a").each(function(){g(this)&&f(this)})})}};a.expr[":"].display=function(b){return!d(a(b).data("display"))}})(jQuery,
window);
(function(a){function b(b){function e(){b?k.removeData(b):q&&delete c[q]}function h(){m.id=setTimeout(function(){m.fn()},t)}var g=this,k,m={},l=b?a.fn:a,n=arguments,r=4,q=n[1],t=n[2],u=n[3];"string"!==typeof q&&(r--,q=b=0,t=n[1],u=n[2]);b?(k=g.eq(0),k.data(b,m=k.data(b)||{})):q&&(m=c[q]||(c[q]={}));m.id&&clearTimeout(m.id);delete m.id;if(u)m.fn=function(a){"string"===typeof u&&(u=l[u]);!0!==u.apply(g,d.call(n,r))||a?e():h()},h();else{if(m.fn)return void 0===t?e():m.fn(!1===t),!0;e()}}var c={},d=Array.prototype.slice;
a.doTimeout=function(){return b.apply(window,[0].concat(d.call(arguments)))};a.fn.doTimeout=function(){var a=d.call(arguments),c=b.apply(this,["doTimeout"+a[0]].concat(a));return"number"===typeof a[0]||"number"===typeof a[1]?this:c}})(jQuery);
(function(a){function b(){var b;b=a(this);if(!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var d=a.trim(b.text());0<d.length&&b.attr("title",d)}b=b.data("timeago");isNaN(b.datetime)||a(this).text(c(b.datetime));return this}function c(a){return f.inWords(d(a))}function d(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return b instanceof Date?c(b):"string"==typeof b?c(a.timeago.parse(b)):c(a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,
allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(b){function c(b,e){return(a.isFunction(b)?b(e):b).replace(/%d/i,d.numbers&&d.numbers[e]||e)}var d=this.settings.strings,f=d.prefixAgo,m=d.suffixAgo;this.settings.allowFuture&&
(0>b&&(f=d.prefixFromNow,m=d.suffixFromNow),b=Math.abs(b));b/=1E3;var l=b/60,n=l/60,r=n/24,q=r/365;b=45>b&&c(d.seconds,Math.round(b))||90>b&&c(d.minute,1)||45>l&&c(d.minutes,Math.round(l))||90>l&&c(d.hour,1)||24>n&&c(d.hours,Math.round(n))||48>n&&c(d.day,1)||30>r&&c(d.days,Math.floor(r))||60>r&&c(d.month,1)||365>r&&c(d.months,Math.floor(r/30))||2>q&&c(d.year,1)||c(d.years,Math.floor(q));return a.trim([f,b,m].join(" "))},parse:function(b){b=a.trim(b);b=b.replace(/\.\d\d\d/,"");b=b.replace(/-/,"/").replace(/-/,
"/");b=b.replace(/T/," ").replace(/Z/," UTC");b=b.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(b)},datetime:function(b){b="time"==a(b).get(0).tagName.toLowerCase()?a(b).attr("datetime"):a(b).attr("title");return f.parse(b)}});a.fn.timeago=function(){var a=this;a.each(b);var c=f.settings;0<c.refreshMillis&&setInterval(function(){a.each(b)},c.refreshMillis);return a};document.createElement("abbr");document.createElement("time")})(jQuery);
(function(a){var b={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},c="fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent whiteSpace".split(" "),d,f=a('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",
!0)[0];f.style.lineHeight="99px";"99px"===a(f).css("lineHeight")&&c.push("lineHeight");f.style.lineHeight="";a.fn.autosize=function(e){if(!this.length)return this;e=a.extend({},b,e||{});f.parentNode!==document.body&&a(document.body).append(f);return this.each(function(){function b(){var c,d=window.getComputedStyle?window.getComputedStyle(l,null):null;d?(c=parseFloat(d.width),"border-box"!==d.boxSizing&&"border-box"!==d.webkitBoxSizing&&"border-box"!==d.mozBoxSizing||a.each(["paddingLeft","paddingRight",
"borderLeftWidth","borderRightWidth"],function(a,b){c-=parseFloat(d[b])})):c=n.width();f.style.width=Math.max(c,0)+"px"}function g(){var g={};d=l;f.className=e.className;f.id=e.id;r=parseFloat(n.css("maxHeight"));a.each(c,function(a,b){g[b]=n.css(b)});a(f).css(g).attr("wrap",n.attr("wrap"));b();if(window.chrome){var k=l.style.width;l.style.width="0px";l.style.width=k}}function k(){var a,c;d!==l?g():b();f.value=!l.value&&e.placeholder?n.attr("placeholder")||"":l.value;f.value+=e.append||"";f.style.overflowY=
l.style.overflowY;c=parseFloat(l.style.height)||0;f.scrollTop=0;f.scrollTop=9E4;a=f.scrollTop;r&&a>r?(l.style.overflowY="scroll",a=r):(l.style.overflowY="hidden",a<q&&(a=q));a+=t;.01<Math.abs(c-a)&&(l.style.height=a+"px",f.className=f.className,u&&e.callback.call(l,l),n.trigger("autosize.resized"))}function m(){clearTimeout(A);A=setTimeout(function(){var a=n.width();a!==x&&(x=a,k())},parseInt(e.resizeDelay,10))}var l=this,n=a(l),r,q,t=0,u=a.isFunction(e.callback),w={height:l.style.height,overflow:l.style.overflow,
overflowY:l.style.overflowY,wordWrap:l.style.wordWrap,resize:l.style.resize},A,x=n.width(),E=n.css("resize");if(!n.data("autosize")){n.data("autosize",!0);if("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))t=n.outerHeight()-n.height();q=Math.max(parseFloat(n.css("minHeight"))-t||0,n.height());n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});"vertical"===E?n.css("resize","none"):"both"===E&&n.css("resize","horizontal");
if("onpropertychange"in l)if("oninput"in l)n.on("input.autosize keyup.autosize",k);else n.on("propertychange.autosize",function(){"value"===event.propertyName&&k()});else n.on("input.autosize",k);if(!1!==e.resizeDelay)a(window).on("resize.autosize",m);n.on("autosize.resize",k);n.on("autosize.resizeIncludeStyle",function(){d=null;k()});n.on("autosize.destroy",function(){d=null;clearTimeout(A);a(window).off("resize",m);n.off("autosize").off(".autosize").css(w).removeData("autosize")});k()}})}})(jQuery||
$);
(function(a){function b(b){"string"===typeof b.data&&(b.data={keys:b.data});if(b.data&&b.data.keys&&"string"===typeof b.data.keys){var d=b.handler,f=b.data.keys.toLowerCase().split(" "),e="text password number email url range date month week time datetime datetime-local search color tel".split(" ");b.handler=function(h){if(b.data.allowInTextInputField||this===h.target||!(/textarea|select/i.test(h.target.nodeName)||-1<a.inArray(h.target.type,e)||a(h.target).prop("isContentEditable"))){var g=a.hotkeys.specialKeys[h.keyCode],k=
0<h.which&&String.fromCharCode(h.which).toLowerCase(),m="",l={};h.altKey&&"alt"!==g&&(m+="alt+");h.ctrlKey&&"ctrl"!==g&&(m+="ctrl+");h.metaKey&&!h.ctrlKey&&"meta"!==g&&(m+="meta+");h.shiftKey&&"shift"!==g&&(m+="shift+");g&&(l[m+g]=!0);k&&(l[m+k]=!0,l[m+a.hotkeys.shiftNums[k]]=!0,"shift+"===m&&(l[a.hotkeys.shiftNums[k]]=!0));g=0;for(k=f.length;g<k;g++)if(l[f[g]])return d.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",
18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",
5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(this.jQuery);
(function(){function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;d=d||{};this.trackingClick=!1;this.trackingClickStart=0;this.targetElement=null;this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0;this.touchBoundary=d.touchBoundary||10;this.layer=b;this.tapDelay=d.tapDelay||200;this.tapTimeout=d.tapTimeout||700;if(!a.notNeeded(b)){for(var h="onMouse onClick onTouchStart onTouchMove onTouchEnd onTouchCancel".split(" "),r=0,q=h.length;r<q;r++)this[h[r]]=e(this[h[r]],
this);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0));b.addEventListener("click",this.onClick,!0);b.addEventListener("touchstart",this.onTouchStart,!1);b.addEventListener("touchmove",this.onTouchMove,!1);b.addEventListener("touchend",this.onTouchEnd,!1);b.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;
"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)});"function"===typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var b=0<=navigator.userAgent.indexOf("Windows Phone"),c=0<navigator.userAgent.indexOf("Android")&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,f=
d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),e=d&&/OS [6-7]_\d/.test(navigator.userAgent),h=0<navigator.userAgent.indexOf("BB10");a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(a.disabled)return!0;break;case "input":if(d&&"file"===a.type||a.disabled)return!0;break;case "label":case "iframe":case "video":return!0}return/\bneedsclick\b/.test(a.className)};a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case "textarea":return!0;
case "select":return!c;case "input":switch(a.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}};a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur();d=b.changedTouches[0];c=document.createEvent("MouseEvents");c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,
!1,!1,!1,!1,0,null);c.forwardedTouchEvent=!0;a.dispatchEvent(c)};a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"};a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()};a.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c;a.fastClickScrollParent=
c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)};a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a};a.prototype.onTouchStart=function(a){var b,c,e;if(1<a.targetTouches.length)return!0;b=this.getTargetElementFromEventTarget(a.target);c=a.targetTouches[0];if(d){e=window.getSelection();if(e.rangeCount&&!e.isCollapsed)return!0;if(!f){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;
this.lastTouchIdentifier=c.identifier;this.updateScrollParent(b)}}this.trackingClick=!0;this.trackingClickStart=a.timeStamp;this.targetElement=b;this.touchStartX=c.pageX;this.touchStartY=c.pageY;a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault();return!0};a.prototype.touchHasMoved=function(a){a=a.changedTouches[0];var b=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>b||Math.abs(a.pageY-this.touchStartY)>b?!0:!1};a.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;
if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0};a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};a.prototype.onTouchEnd=function(a){var b,h,l=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<
this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1;this.lastClickTime=a.timeStamp;b=this.trackingClickStart;this.trackingClick=!1;this.trackingClickStart=0;e&&(h=a.changedTouches[0],l=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent);h=l.tagName.toLowerCase();if("label"===h){if(b=this.findControl(l)){this.focus(l);if(c)return!1;
l=b}}else if(this.needsFocus(l)){if(100<a.timeStamp-b||d&&window.top!==window&&"input"===h)return this.targetElement=null,!1;this.focus(l);this.sendClick(l,a);d&&"select"===h||(this.targetElement=null,a.preventDefault());return!1}if(d&&!f&&(b=l.fastClickScrollParent)&&b.fastClickLastScrollTop!==b.scrollTop)return!0;this.needsClick(l)||(a.preventDefault(),this.sendClick(l,a));return!1};a.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};a.prototype.onMouse=function(a){return this.targetElement&&
!a.forwardedTouchEvent&&a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0};a.prototype.onClick=function(a){if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===a.target.type&&0===a.detail)return!0;a=this.onMouse(a);a||(this.targetElement=null);return a};a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",
this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0));a.removeEventListener("click",this.onClick,!0);a.removeEventListener("touchstart",this.onTouchStart,!1);a.removeEventListener("touchmove",this.onTouchMove,!1);a.removeEventListener("touchend",this.onTouchEnd,!1);a.removeEventListener("touchcancel",this.onTouchCancel,!1)};a.notNeeded=function(a){var b,d;if("undefined"===typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||
[,0])[1])if(c){if((b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||31<d&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return h&&(b=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),10<=b[1]&&3<=b[2]&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||
27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1};a.attach=function(b,c){return new a(b,c)};"function"===typeof define&&"object"===typeof define.amd&&define.amd?define(function(){return a}):"undefined"!==typeof module&&module.exports?(module.exports=a.attach,
module.exports.FastClick=a):window.FastClick=a})();$(function(){FastClick.attach(document.body)});
!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("bowser",function(){function a(a){function b(d){return(d=a.match(d))&&1<d.length&&d[1]||""}function f(b){return(b=a.match(b))&&1<b.length&&b[2]||""}var e=b(/(ipod|iphone|ipad)/i).toLowerCase(),h=!/like android/i.test(a)&&/android/i.test(a),g=/CrOS/.test(a),k=/silk/i.test(a),m=/sailfish/i.test(a),l=/tizen/i.test(a),n=/(web|hpw)os/i.test(a),r=/windows phone/i.test(a),
q=!r&&/windows/i.test(a),t=!e&&!k&&/macintosh/i.test(a),u=!h&&!m&&!l&&!n&&/linux/i.test(a),w=b(/edge\/(\d+(\.\d+)?)/i),A=b(/version\/(\d+(\.\d+)?)/i),x=/tablet/i.test(a),E=!x&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?g={name:"Opera",opera:!0,version:A||b(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?g={name:"Yandex Browser",yandexbrowser:!0,version:A||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:r?(g={name:"Windows Phone",windowsphone:!0},w?(g.msedge=!0,g.version=w):(g.msie=!0,g.version=b(/iemobile\/(\d+(\.\d+)?)/i))):
/msie|trident/i.test(a)?g={name:"Internet Explorer",msie:!0,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:g?g={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?g={name:"Microsoft Edge",msedge:!0,version:w}:/chrome|crios|crmo/i.test(a)?g={name:"Chrome",chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:e?(g={name:"iphone"==e?"iPhone":"ipad"==e?"iPad":"iPod"},A&&(g.version=A)):m?g={name:"Sailfish",sailfish:!0,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:
/seamonkey\//i.test(a)?g={name:"SeaMonkey",seamonkey:!0,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(g={name:"Firefox",firefox:!0,version:b(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(g.firefoxos=!0)):k?g={name:"Amazon Silk",silk:!0,version:b(/silk\/(\d+(\.\d+)?)/i)}:h?g={name:"Android",version:A}:/phantom/i.test(a)?g={name:"PhantomJS",phantom:!0,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?
g={name:"BlackBerry",blackberry:!0,version:A||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:n?(g={name:"WebOS",webos:!0,version:A||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(g.touchpad=!0)):g=/bada/i.test(a)?{name:"Bada",bada:!0,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:l?{name:"Tizen",tizen:!0,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||A}:/safari/i.test(a)?{name:"Safari",safari:!0,version:A}:{name:b(/^(.*)\/(.*) /),version:f(/^(.*)\/(.*) /)};!g.msedge&&/(apple)?webkit/i.test(a)?(g.name=
g.name||"Webkit",g.webkit=!0,!g.version&&A&&(g.version=A)):!g.opera&&/gecko\//i.test(a)&&(g.name=g.name||"Gecko",g.gecko=!0,g.version=g.version||b(/gecko\/(\d+(\.\d+)?)/i));g.msedge||!h&&!g.silk?e?(g[e]=!0,g.ios=!0):q?g.windows=!0:t?g.mac=!0:u&&(g.linux=!0):g.android=!0;q="";g.windowsphone?q=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):e?(q=b(/os (\d+([_\s]\d+)*) like mac os x/i),q=q.replace(/[_\s]/g,".")):h?q=b(/android[ \/-](\d+(\.\d+)*)/i):g.webos?q=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):g.blackberry?
q=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):g.bada?q=b(/bada\/(\d+(\.\d+)*)/i):g.tizen&&(q=b(/tizen[\/\s](\d+(\.\d+)*)/i));q&&(g.osversion=q);q=q.split(".")[0];if(x||"ipad"==e||h&&(3==q||4==q&&!E)||g.silk)g.tablet=!0;else if(E||"iphone"==e||"ipod"==e||h||g.blackberry||g.webos||g.bada)g.mobile=!0;g.msedge||g.msie&&10<=g.version||g.yandexbrowser&&15<=g.version||g.chrome&&20<=g.version||g.firefox&&20<=g.version||g.safari&&6<=g.version||g.opera&&10<=g.version||g.ios&&g.osversion&&6<=g.osversion.split(".")[0]||
g.blackberry&&10.1<=g.version?g.a=!0:g.msie&&10>g.version||g.chrome&&20>g.version||g.firefox&&20>g.version||g.safari&&6>g.version||g.opera&&10>g.version||g.ios&&g.osversion&&6>g.osversion.split(".")[0]?g.c=!0:g.x=!0;return g}var b=a("undefined"!==typeof navigator?navigator.userAgent:"");b.test=function(a){for(var d=0;d<a.length;++d){var f=a[d];if("string"===typeof f&&f in b)return!0}return!1};b._detect=a;return b});
(function(a){a.fn.extend({autocomplete:function(b,c){var d="string"==typeof b;c=a.extend({},a.Autocompleter.defaults,{url:d?b:null,data:d?null:b,delay:d?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(a){return a};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(b,c){function d(){var d=x.selected();if(!d)return!1;var f=d.result;q=f;if(c.multiple){var h=e(n.val());if(1<h.length){var k=c.multipleSeparator.length,l=a(b).selection().start,m,r=0;a.each(h,function(a,b){r+=b.length;if(l<=r)return m=a,!1;r+=k});h[m]=f;f=h.join(c.multipleSeparator)}f+=c.multipleSeparator}n.val(f);g();n.trigger("result",[d.data,d.value]);
return!0}function f(a,b){if(w==l.DEL)x.hide();else{var d=n.val();if(b||d!=q)q=d,d=h(d),d.length>=c.minChars?(n.addClass(c.loadingClass),m(d,k,g)):(n.removeClass(c.loadingClass),x.hide())}}function e(b){return b?c.multiple?a.map(b.split(c.multipleSeparator),function(c){return a.trim(b).length?a.trim(c):null}):[a.trim(b)]:[""]}function h(d){if(!c.multiple)return d;var f=e(d);if(1==f.length)return f[0];f=a(b).selection().start;f=f==d.length?e(d):e(d.replace(d.substring(f),""));return f[f.length-1]}function g(){x.visible();
x.hide();clearTimeout(r);n.removeClass(c.loadingClass);c.mustMatch&&n.search(function(a){a||(c.multiple?(a=e(n.val()).slice(0,-1),n.val(a.join(c.multipleSeparator)+(a.length?c.multipleSeparator:""))):(n.val(""),n.trigger("result",null)))})}function k(d,e){if(e&&e.length&&u){n.removeClass(c.loadingClass);x.display(e,d);var f=e[0].value;c.autoFill&&h(n.val()).toLowerCase()==d.toLowerCase()&&w!=l.BACKSPACE&&(n.val(n.val()+f.substring(h(q).length)),a(b).selection(q.length,q.length+f.length));x.show()}else g()}
function m(d,e,f){var g=d;c.matchCase||(d=d.toLowerCase());var k=t.load(d);if(k&&k.length)e(d,k);else if("string"==typeof c.url&&0<c.url.length){var l={timestamp:+new Date};a.each(c.extraParams,function(a,b){l[a]="function"==typeof b?b():b});a.ajax({mode:"abort",port:"autocomplete"+b.name,dataType:c.dataType,url:c.url,data:a.extend({q:h(d),limit:c.max},l),success:function(b){var f;if(!(f=c.parse&&c.parse(b,g))){f=[];b=b.split("\n");for(var h=0;h<b.length;h++){var k=a.trim(b[h]);k&&(k=k.split("|"),
f[f.length]={data:k,value:k[0],result:c.formatResult&&c.formatResult(k,k[0])||k[0]})}}t.add(d,f);e(d,f)}})}else x.emptyList(),f(d)}var l={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},n=a(b).attr("autocomplete","off").addClass(c.inputClass),r,q="",t=a.Autocompleter.Cache(c),u=0,w,A={mouseDownOnSelect:!1},x=a.Autocompleter.Select(c,b,d,A),E;a.browser.opera&&a(b.form).bind("submit.autocomplete",function(){if(E)return E=!1});n.bind((a.browser.opera?"keypress":
"keydown")+".autocomplete",function(b){u=1;w=b.keyCode;switch(b.keyCode){case l.UP:b.preventDefault();x.visible()?x.prev():f(0,!0);break;case l.DOWN:b.preventDefault();x.visible()?x.next():f(0,!0);break;case l.PAGEUP:b.preventDefault();x.visible()?x.pageUp():f(0,!0);break;case l.PAGEDOWN:b.preventDefault();x.visible()?x.pageDown():f(0,!0);break;case c.multiple&&","==a.trim(c.multipleSeparator)&&l.COMMA:case l.TAB:case l.RETURN:if(d())return b.preventDefault(),E=!0,!1;break;case l.ESC:x.hide();break;
default:clearTimeout(r),r=setTimeout(f,c.delay)}}).focus(function(){u++}).blur(function(){u=0;A.mouseDownOnSelect||(clearTimeout(r),r=setTimeout(g,200))}).click(function(){1<u++&&!x.visible()&&f(0,!0)}).bind("search",function(){function b(a,d){var e;if(d&&d.length)for(var f=0;f<d.length;f++)if(d[f].result.toLowerCase()==a.toLowerCase()){e=d[f];break}"function"==typeof c?c(e):n.trigger("result",e&&[e.data,e.value])}var c=1<arguments.length?arguments[1]:null;a.each(e(n.val()),function(a,c){m(c,b,b)})}).bind("flushCache",
function(){t.flush()}).bind("setOptions",function(b,d){a.extend(c,d);"data"in d&&t.populate()}).bind("unautocomplete",function(){x.unbind();n.unbind();a(b.form).unbind(".autocomplete")})};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,
multipleSeparator:", ",highlight:function(a,c){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+c.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};a.Autocompleter.Cache=function(b){function c(a,c){b.matchCase||(a=a.toLowerCase());var d=a.indexOf(c);"word"==b.matchContains&&(d=a.toLowerCase().search("\\b"+c.toLowerCase()));return-1==d?!1:0==d||b.matchContains}function d(a,c){g>b.cacheLength&&e();h[a]||g++;
h[a]=c}function f(){if(!b.data)return!1;var c={},e=0;b.url||(b.cacheLength=1);c[""]=[];for(var f=0,g=b.data.length;f<g;f++){var h=b.data[f],h="string"==typeof h?[h]:h,q=b.formatMatch(h,f+1,b.data.length);if(!1!==q){var t=q.charAt(0).toLowerCase();c[t]||(c[t]=[]);h={value:q,data:h,result:b.formatResult&&b.formatResult(h)||q};c[t].push(h);e++<b.max&&c[""].push(h)}}a.each(c,function(a,c){b.cacheLength++;d(a,c)})}function e(){h={};g=0}var h={},g=0;setTimeout(f,25);return{flush:e,add:d,populate:f,load:function(d){if(!b.cacheLength||
!g)return null;if(!b.url&&b.matchContains){var e=[],f;for(f in h)if(0<f.length){var n=h[f];a.each(n,function(a,b){c(b.value,d)&&e.push(b)})}return e}if(h[d])return h[d];if(b.matchSubset)for(f=d.length-1;f>=b.minChars;f--)if(n=h[d.substr(0,f)])return e=[],a.each(n,function(a,b){c(b.value,d)&&(e[e.length]=b)}),e;return null}}};a.Autocompleter.Select=function(b,c,d,f){function e(){q&&(t=a("<div/>").hide().addClass(b.resultsClass).css("position","absolute").appendTo(document.body),u=a("<ul/>").appendTo(t).mouseover(function(b){h(b).nodeName&&
"LI"==h(b).nodeName.toUpperCase()&&(l=a("li",u).removeClass(k.ACTIVE).index(h(b)),a(h(b)).addClass(k.ACTIVE))}).click(function(b){a(h(b)).addClass(k.ACTIVE);d();c.focus();return!1}).mousedown(function(){f.mouseDownOnSelect=!0}).mouseup(function(){f.mouseDownOnSelect=!1}),0<b.width&&t.css("width",b.width),q=!1)}function h(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return a?a:[]}function g(a){m.slice(l,l+1).removeClass(k.ACTIVE);l+=a;0>l?l=m.size()-1:l>=m.size()&&(l=0);a=m.slice(l,l+1).addClass(k.ACTIVE);
if(b.scroll){var c=0;m.slice(0,l).each(function(){c+=this.offsetHeight});c+a[0].offsetHeight-u.scrollTop()>u[0].clientHeight?u.scrollTop(c+a[0].offsetHeight-u.innerHeight()):c<u.scrollTop()&&u.scrollTop(c)}}var k={ACTIVE:"ac_over"},m,l=-1,n,r="",q=!0,t,u;return{display:function(c,d){e();n=c;r=d;u.empty();var f;f=n.length;f=b.max&&b.max<f?b.max:f;for(var g=0;g<f;g++)if(n[g]){var h=b.formatItem(n[g].data,g+1,f,n[g].value,r);!1!==h&&(h=a("<li/>").html(b.highlight(h,r)).addClass(0==g%2?"ac_even":"ac_odd").appendTo(u)[0],
a.data(h,"ac_data",n[g]))}m=u.find("li");b.selectFirst&&(m.slice(0,1).addClass(k.ACTIVE),l=0);a.fn.bgiframe&&u.bgiframe()},next:function(){g(1)},prev:function(){g(-1)},pageUp:function(){0!=l&&0>l-8?g(-l):g(-8)},pageDown:function(){l!=m.size()-1&&l+8>m.size()?g(m.size()-1-l):g(8)},hide:function(){t&&t.hide();m&&m.removeClass(k.ACTIVE);l=-1},visible:function(){return t&&t.is(":visible")},current:function(){return this.visible()&&(m.filter("."+k.ACTIVE)[0]||b.selectFirst&&m[0])},show:function(){var d=
a(c).offset();t.css({width:"string"==typeof b.width||0<b.width?b.width:a(c).width(),top:d.top+c.offsetHeight,left:d.left}).show();if(b.scroll&&(u.scrollTop(0),u.css({maxHeight:b.scrollHeight,overflow:"auto"}),a.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var e=0;m.each(function(){e+=this.offsetHeight});d=e>b.scrollHeight;u.css("height",d?b.scrollHeight:e);d||m.width(u.width()-parseInt(m.css("padding-left"))-parseInt(m.css("padding-right")))}},selected:function(){var b=m&&m.filter("."+
k.ACTIVE).removeClass(k.ACTIVE);return b&&b.length&&a.data(b[0],"ac_data")},emptyList:function(){u&&u.empty()},unbind:function(){t&&t.remove()}}};a.fn.selection=function(a,c){if(void 0!==a)return this.each(function(){if(this.createTextRange){var d=this.createTextRange();void 0===c||a==c?d.move("character",a):(d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",c));d.select()}else this.setSelectionRange?this.setSelectionRange(a,c):this.selectionStart&&(this.selectionStart=a,this.selectionEnd=
c)});var d=this[0];if(d.createTextRange){var f=document.selection.createRange(),e=d.value,h=f.text.length;f.text="<->";f=d.value.indexOf("<->");d.value=e;this.selection(f,f+h);return{start:f,end:f+h}}if(void 0!==d.selectionStart)return{start:d.selectionStart,end:d.selectionEnd}}})(jQuery);
(function(a,b){"object"===typeof exports&&"object"===typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?exports.Pusher=b():a.Pusher=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var f=c[d]={exports:{},id:d,loaded:!1};a[d].call(f.exports,f,f.exports,b);f.loaded=!0;return f.exports}var c={};b.m=a;b.c=c;b.p="";return b(0)}([function(a,b,c){b=c(1);a.exports=b["default"]},function(a,b,c){var d=c(2),f=c(9),
e=c(23),h=c(38),g=c(39),k=c(40),m=c(12),l=c(5),n=c(62),r=c(8),q=c(42);a=function(){function a(b,c){var m=this;if(null===b||void 0===b)throw"You must pass your app key when you instantiate Pusher.";c=c||{};this.key=b;this.config=f.extend(n.getGlobalConfig(),c.cluster?n.getClusterConfig(c.cluster):{},c);this.channels=q["default"].createChannels();this.global_emitter=new e["default"];this.sessionID=Math.floor(1E9*Math.random());this.timeline=new h["default"](this.key,this.sessionID,{cluster:this.config.cluster,
features:a.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:g["default"].INFO,version:l["default"].VERSION});this.config.disableStats||(this.timelineSender=q["default"].createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+d["default"].TimelineTransport.name}));this.connection=q["default"].createConnectionManager(this.key,f.extend({getStrategy:function(a){a=f.extend({},m.config,a);return k.build(d["default"].getDefaultStrategy(a),a)},timeline:this.timeline,
activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()}));this.connection.bind("connected",function(){m.subscribeAll();m.timelineSender&&m.timelineSender.send(m.connection.isEncrypted())});this.connection.bind("message",function(a){var b=0===a.event.indexOf("pusher_internal:");if(a.channel){var c=m.channel(a.channel);c&&c.handleEvent(a.event,a.data)}b||m.global_emitter.emit(a.event,
a.data)});this.connection.bind("disconnected",function(){m.channels.disconnect()});this.connection.bind("error",function(a){r["default"].warn("Error",a)});a.instances.push(this);this.timeline.info({instances:a.instances.length});a.isReady&&this.connect()}a.ready=function(){a.isReady=!0;for(var b=0,c=a.instances.length;b<c;b++)a.instances[b].connect()};a.log=function(b){var c=Function("return this")();a.logToConsole&&c.console&&c.console.log&&c.console.log(b)};a.getClientFeatures=function(){return f.keys(f.filterObject({ws:d["default"].Transports.ws},
function(a){return a.isSupported({})}))};a.prototype.channel=function(a){return this.channels.find(a)};a.prototype.allChannels=function(){return this.channels.all()};a.prototype.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var a=this.connection.isEncrypted(),b=this.timelineSender;this.timelineSenderTimer=new m.PeriodicTimer(6E4,function(){b.send(a)})}};a.prototype.disconnect=function(){this.connection.disconnect();this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),
this.timelineSenderTimer=null)};a.prototype.bind=function(a,b){this.global_emitter.bind(a,b);return this};a.prototype.bind_all=function(a){this.global_emitter.bind_all(a);return this};a.prototype.subscribeAll=function(){for(var a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)};a.prototype.subscribe=function(a){a=this.channels.add(a,this);"connected"===this.connection.state&&a.subscribe();return a};a.prototype.unsubscribe=function(a){(a=this.channels.remove(a))&&
"connected"===this.connection.state&&a.unsubscribe()};a.prototype.send_event=function(a,b,c){return this.connection.send_event(a,b,c)};a.prototype.isEncrypted=function(){return"https:"===d["default"].getProtocol()?!0:Boolean(this.config.encrypted)};a.instances=[];a.isReady=!1;a.logToConsole=!1;a.Runtime=d["default"];a.ScriptReceivers=d["default"].ScriptReceivers;a.DependenciesReceivers=d["default"].DependenciesReceivers;a.auth_callbacks=d["default"].auth_callbacks;return a}();b.__esModule=!0;b["default"]=
a;d["default"].setup(a)},function(a,b,c){var d=c(3),f=c(7),e=c(14),h=c(15),g=c(16);a=c(4);var k=c(17),m=c(18),l=c(25),n=c(26),r=c(27);c=c(28);c={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a.ScriptReceivers,DependenciesReceivers:d.DependenciesReceivers,getDefaultStrategy:n["default"],Transports:m["default"],transportConnectionInitializer:r["default"],HTTPFactory:c["default"],TimelineTransport:k["default"],getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||
window.MozWebSocket},setup:function(a){var b=this;window.Pusher=a;var c=function(){b.onDocumentBody(a.ready)};window.JSON?c():d.Dependencies.load("json2",{},c)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getGlobal:function(){return window},getAuthorizers:function(){return{ajax:f["default"],jsonp:e["default"]}},onDocumentBody:function(a){var b=this;document.body?a():setTimeout(function(){b.onDocumentBody(a)},0)},createJSONPRequest:function(a,
b){return new g["default"](a,b)},createScriptRequest:function(a){return new h["default"](a)},getLocalStorage:function(){try{return window.localStorage}catch(a){}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new (this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return l.Network},createWebSocket:function(a){return new (this.getWebSocketAPI())(a)},
createSocketRequest:function(a,b){if(this.isXHRSupported())return this.HTTPFactory.createXHR(a,b);if(this.isXDRSupported(0===b.indexOf("https:")))return this.HTTPFactory.createXDR(a,b);throw"Cross-origin HTTP requests are not supported";},isXHRSupported:function(){var a=this.getXHRAPI();return Boolean(a)&&void 0!==(new a).withCredentials},isXDRSupported:function(a){a=a?"https:":"http:";var b=this.getProtocol();return Boolean(window.XDomainRequest)&&b===a},addUnloadListener:function(a){void 0!==window.addEventListener?
window.addEventListener("unload",a,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",a)},removeUnloadListener:function(a){void 0!==window.addEventListener?window.removeEventListener("unload",a,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",a)}};b.__esModule=!0;b["default"]=c},function(a,b,c){a=c(4);var d=c(5);c=c(6);b.DependenciesReceivers=new a.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers");b.Dependencies=new c["default"]({cdn_http:d["default"].cdn_http,
cdn_https:d["default"].cdn_https,version:d["default"].VERSION,suffix:d["default"].dependency_suffix,receivers:b.DependenciesReceivers})},function(a,b){var c=function(){function a(b,c){this.lastId=0;this.prefix=b;this.name=c}a.prototype.create=function(a){this.lastId++;var b=this.lastId,c=this.prefix+b,d=this.name+"["+b+"]",k=!1,m=function(){k||(a.apply(null,arguments),k=!0)};this[b]=m;return{number:b,id:c,name:d,callback:m}};a.prototype.remove=function(a){delete this[a.number]};return a}();b.ScriptReceiverFactory=
c;b.ScriptReceivers=new c("_pusher_script_","Pusher.ScriptReceivers")},function(a,b){b.__esModule=!0;b["default"]={VERSION:"3.1.0-pre11",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12E4,pong_timeout:3E4,unavailable_timeout:1E4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",
dependency_suffix:""}},function(a,b,c){var d=c(4),f=c(2);a=function(){function a(b){this.options=b;this.receivers=b.receivers||d.ScriptReceivers;this.loading={}}a.prototype.load=function(a,b,c){var d=this;if(d.loading[a]&&0<d.loading[a].length)d.loading[a].push(c);else{d.loading[a]=[c];var e=f["default"].createScriptRequest(d.getPath(a,b)),n=d.receivers.create(function(b){d.receivers.remove(n);if(d.loading[a]){var c=d.loading[a];delete d.loading[a];for(var f=function(a){a||e.cleanup()},g=0;g<c.length;g++)c[g](b,
f)}});e.send(n)}};a.prototype.getRoot=function(a){var b=f["default"].getDocument().location.protocol;return(a&&a.encrypted||"https:"===b?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version};a.prototype.getPath=function(a,b){return this.getRoot(b)+"/"+a+this.options.suffix+".js"};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(8),f=c(2);b.__esModule=!0;b["default"]=function(a,b,c){var k;k=f["default"].createXHR();k.open("POST",this.options.authEndpoint,
!0);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var m in this.authOptions.headers)k.setRequestHeader(m,this.authOptions.headers[m]);k.onreadystatechange=function(){if(4===k.readyState)if(200===k.status){var a,b=!1;try{a=JSON.parse(k.responseText),b=!0}catch(e){c(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+k.responseText)}b&&c(!1,a)}else d["default"].warn("Couldn't get auth info from your webapp",k.status),c(!0,k.status)};k.send(this.composeQuery(b));
return k}},function(a,b,c){var d=c(9),f=c(1);b.__esModule=!0;b["default"]={debug:function(){for(var a=0;a<arguments.length;a++);f["default"].log&&f["default"].log(d.stringify.apply(this,arguments))},warn:function(){for(var a=0;a<arguments.length;a++);var a=d.stringify.apply(this,arguments),b=Function("return this")();b.console&&(b.console.warn?b.console.warn(a):b.console.log&&b.console.log(a));f["default"].log&&f["default"].log(a)}}},function(a,b,c){function d(a){for(var b=[],c=1;c<arguments.length;c++)b[c-
1]=arguments[c];for(c=0;c<b.length;c++){var e=b[c],f;for(f in e)a[f]=e[f]&&e[f].constructor&&e[f].constructor===Object?d(a[f]||{},e[f]):e[f]}return a}function f(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)}function e(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a,c));return c}function h(a,b){var c={};f(a,function(a,d){c[d]=b(a)});return c}function g(a,b){var c={};f(a,function(d,e){if(b&&b(d,e,a,c)||Boolean(d))c[e]=d});return c}function k(a){var b=[];f(a,function(a,
c){b.push([c,a])});return b}function m(a){return h(a,function(a){"object"===typeof a&&(a=JSON.stringify(a));return encodeURIComponent(l["default"](a.toString()))})}var l=c(10),n=c(11),r=Function("return this")();b.extend=d;b.stringify=function(){for(var a=["Pusher"],b=0;b<arguments.length;b++)"string"===typeof arguments[b]?a.push(arguments[b]):a.push(JSON.stringify(arguments[b]));return a.join(" : ")};b.arrayIndexOf=function(a,b){var c=Array.prototype.indexOf;if(null===a)return-1;if(c&&a.indexOf===
c)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};b.objectApply=f;b.keys=function(a){var b=[];f(a,function(a,c){b.push(c)});return b};b.values=function(a){var b=[];f(a,function(a){b.push(a)});return b};b.apply=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c||r,a[d],d,a)};b.map=e;b.mapObject=h;b.filter=function(a,b){b=b||function(a){return!!a};for(var c=[],d=0;d<a.length;d++)b(a[d],d,a,c)&&c.push(a[d]);return c};b.filterObject=g;b.flatten=k;b.any=function(a,b){for(var c=
0;c<a.length;c++)if(b(a[c],c,a))return!0;return!1};b.all=function(a,b){for(var c=0;c<a.length;c++)if(!b(a[c],c,a))return!1;return!0};b.encodeParamsObject=m;b.buildQueryString=function(a){a=g(a,function(a){return void 0!==a});return e(k(m(a)),n["default"].method("join","=")).join("&")};b.safeJSONStringify=function(a){var b=[];a=JSON.stringify(a,function(a,c){if("object"===typeof c&&null!==c){if(-1!==b.indexOf(c))return;b.push(c)}return c});b=null;return a}},function(a,b){var c=Function("return this")();
b.__esModule=!0;b["default"]=function(a){return g(a.replace(/[^\x00-\x7F]/g,e))};for(var d=String.fromCharCode,f=0;64>f;f++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f);var e=function(a){var b=a.charCodeAt(0);return 128>b?a:2048>b?d(192|b>>>6)+d(128|b&63):d(224|b>>>12&15)+d(128|b>>>6&63)+d(128|b&63)},h=function(a){var b=[0,2,1][a.length%3];a=a.charCodeAt(0)<<16|(1<a.length?a.charCodeAt(1):0)<<8|(2<a.length?a.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>
18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>12&63),2<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6&63),1<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a&63)].join("")},g=c.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,h)}},function(a,b,c){var d=c(12);b.__esModule=!0;b["default"]={getGlobal:function(){return Function("return this")()},now:function(){return Date.now?Date.now():(new Date).valueOf()},
defer:function(a){return new d.OneOffTimer(0,a)},method:function(a){for(var b=1;b<arguments.length;b++);var c=Array.prototype.slice.call(arguments,1);return function(b){return b[a].apply(b,c.concat(arguments))}}}},function(a,b,c){function d(a){h.clearTimeout(a)}function f(a){h.clearInterval(a)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=c(13);var h=
Function("return this")();c=function(a){function b(c,e){a.call(this,setTimeout,d,c,function(a){e();return null})}e(b,a);return b}(a["default"]);b.OneOffTimer=c;a=function(a){function b(c,d){a.call(this,setInterval,f,c,function(a){d();return a})}e(b,a);return b}(a["default"]);b.PeriodicTimer=a},function(a,b){var c=function(){function a(b,c,d,g){var k=this;this.clear=c;this.timer=b(function(){k.timer&&(k.timer=g(k.timer))},d)}a.prototype.isRunning=function(){return null!==this.timer};a.prototype.ensureAborted=
function(){this.timer&&(this.clear(this.timer),this.timer=null)};return a}();b.__esModule=!0;b["default"]=c},function(a,b,c){var d=c(8);b.__esModule=!0;b["default"]=function(a,b,c){void 0!==this.authOptions.headers&&d["default"].warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var g=a.nextAuthCallbackID.toString();a.nextAuthCallbackID++;var k=a.getDocument(),m=k.createElement("script");a.auth_callbacks[g]=function(a){c(!1,a)};m.src=this.options.authEndpoint+
"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+g+"']")+"&"+this.composeQuery(b);a=k.getElementsByTagName("head")[0]||k.documentElement;a.insertBefore(m,a.firstChild)}},function(a,b){var c=function(){function a(b){this.src=b}a.prototype.send=function(a){var b=this,c="Error loading "+b.src;b.script=document.createElement("script");b.script.id=a.id;b.script.src=b.src;b.script.type="text/javascript";b.script.charset="UTF-8";b.script.addEventListener?(b.script.onerror=function(){a.callback(c)},
b.script.onload=function(){a.callback(null)}):b.script.onreadystatechange=function(){"loaded"!==b.script.readyState&&"complete"!==b.script.readyState||a.callback(null)};void 0===b.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(b.errorScript=document.createElement("script"),b.errorScript.id=a.id+"_error",b.errorScript.text=a.name+"('"+c+"');",b.script.async=b.errorScript.async=!1):b.script.async=!0;var d=document.getElementsByTagName("head")[0];d.insertBefore(b.script,d.firstChild);
b.errorScript&&d.insertBefore(b.errorScript,b.script.nextSibling)};a.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null);this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript);this.errorScript=this.script=null};return a}();b.__esModule=!0;b["default"]=c},function(a,b,c){var d=c(9),f=c(2);a=function(){function a(b,
c){this.url=b;this.data=c}a.prototype.send=function(a){if(!this.request){var b=d.buildQueryString(this.data);this.request=f["default"].createScriptRequest(this.url+"/"+a.number+"?"+b);this.request.send(a)}};a.prototype.cleanup=function(){this.request&&this.request.cleanup()};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(2),f=c(4);b.__esModule=!0;b["default"]={name:"jsonp",getAgent:function(a,b){return function(c,k){var m=d["default"].createJSONPRequest("http"+(b?"s":"")+"://"+
(a.host||a.options.host)+a.options.path,c),l=d["default"].ScriptReceivers.create(function(b,c){f.ScriptReceivers.remove(l);m.cleanup();c&&c.host&&(a.host=c.host);k&&k(b,c)});m.send(l)}}}},function(a,b,c){a=c(19);var d=c(21),f=c(20),e=c(2),h=c(3);c=c(9);var f=new d["default"]({file:"sockjs",urls:f.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(a,b){return new window.SockJS(a,null,{js_path:h.Dependencies.getPath("sockjs",
{encrypted:b.encrypted}),ignore_null_origin:b.ignoreNullOrigin})},beforeOpen:function(a,b){a.send(JSON.stringify({path:b}))}}),g={isSupported:function(a){return e["default"].isXDRSupported(a.encrypted)}},k=new d["default"](c.extend({},a.streamingConfiguration,g)),d=new d["default"](c.extend({},a.pollingConfiguration,g));a["default"].xdr_streaming=k;a["default"].xdr_polling=d;a["default"].sockjs=f;b.__esModule=!0;b["default"]=a["default"]},function(a,b,c){var d=c(20);a=c(21);var f=c(9),e=c(2);c=new a["default"]({urls:d.ws,
handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(e["default"].getWebSocketAPI())},isSupported:function(){return Boolean(e["default"].getWebSocketAPI())},getSocket:function(a){return e["default"].createWebSocket(a)}});d={urls:d.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};b.streamingConfiguration=f.extend({getSocket:function(a){return e["default"].HTTPFactory.createStreamingSocket(a)}},d);b.pollingConfiguration=f.extend({getSocket:function(a){return e["default"].HTTPFactory.createPollingSocket(a)}},
d);var h={isSupported:function(){return e["default"].isXHRSupported()}},d=new a["default"](f.extend({},b.streamingConfiguration,h));a=new a["default"](f.extend({},b.pollingConfiguration,h));a={ws:c,xhr_streaming:d,xhr_polling:a};b.__esModule=!0;b["default"]=a},function(a,b,c){function d(a,b,c){return a+(b.encrypted?"s":"")+"://"+(b.encrypted?b.hostEncrypted:b.hostUnencrypted)+c}function f(a,b){return"/app/"+a+("?protocol="+e["default"].PROTOCOL+"&client=js&version="+e["default"].VERSION+(b?"&"+b:
""))}var e=c(5);b.ws={getInitial:function(a,b){return d("ws",b,f(a,"flash=false"))}};b.http={getInitial:function(a,b){var c=(b.httpPath||"/pusher")+f(a);return d("http",b,c)}};b.sockjs={getInitial:function(a,b){return d("http",b,b.httpPath||"/pusher")},getPath:function(a,b){return f(a)}}},function(a,b,c){var d=c(22);a=function(){function a(b){this.hooks=b}a.prototype.isSupported=function(a){return this.hooks.isSupported(a)};a.prototype.createConnection=function(a,b,c,f){return new d["default"](this.hooks,
a,b,c,f)};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(11),e=c(9);a=c(23);var h=c(8),g=c(2);c=function(a){function b(c,d,e,f,h){a.call(this);this.initialize=g["default"].transportConnectionInitializer;this.hooks=c;this.name=d;this.priority=e;this.key=f;this.options=h;this.state="new";this.timeline=
h.timeline;this.activityTimeout=h.activityTimeout;this.id=this.timeline.generateUniqueID()}d(b,a);b.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)};b.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)};b.prototype.connect=function(){var a=this;if(this.socket||"initialized"!==this.state)return!1;var b=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(b,this.options)}catch(c){return f["default"].defer(function(){a.onError(c);
a.changeState("closed")}),!1}this.bindListeners();h["default"].debug("Connecting",{transport:this.name,url:b});this.changeState("connecting");return!0};b.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1};b.prototype.send=function(a){var b=this;return"open"===this.state?(f["default"].defer(function(){b.socket&&b.socket.send(a)}),!0):!1};b.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()};b.prototype.onOpen=function(){this.hooks.beforeOpen&&
this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options));this.changeState("open");this.socket.onopen=void 0};b.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a});this.timeline.error(this.buildTimelineMessage({error:a.toString()}))};b.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed");this.unbindListeners();this.socket=void 0};b.prototype.onMessage=function(a){this.emit("message",
a)};b.prototype.onActivity=function(){this.emit("activity")};b.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()};this.socket.onerror=function(b){a.onError(b)};this.socket.onclose=function(b){a.onClose(b)};this.socket.onmessage=function(b){a.onMessage(b)};this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})};b.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=
void 0,this.supportsPing()&&(this.socket.onactivity=void 0))};b.prototype.changeState=function(a,b){this.state=a;this.timeline.info(this.buildTimelineMessage({state:a,params:b}));this.emit(a,b)};b.prototype.buildTimelineMessage=function(a){return e.extend({cid:this.id},a)};return b}(a["default"]);b.__esModule=!0;b["default"]=c},function(a,b,c){var d=c(24),f=Function("return this")();a=function(){function a(b){this.callbacks=new d["default"];this.global_callbacks=[];this.failThrough=b}a.prototype.bind=
function(a,b,c){this.callbacks.add(a,b,c);return this};a.prototype.bind_all=function(a){this.global_callbacks.push(a);return this};a.prototype.unbind=function(a,b,c){this.callbacks.remove(a,b,c);return this};a.prototype.unbind_all=function(a,b){this.callbacks.remove(a,b);return this};a.prototype.emit=function(a,b){var c;for(c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var d=this.callbacks.get(a);if(d&&0<d.length)for(c=0;c<d.length;c++)d[c].fn.call(d[c].context||f,b);else this.failThrough&&
this.failThrough(a,b);return this};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(9);a=function(){function a(){this._callbacks={}}a.prototype.get=function(a){return this._callbacks["_"+a]};a.prototype.add=function(a,b,c){a="_"+a;this._callbacks[a]=this._callbacks[a]||[];this._callbacks[a].push({fn:b,context:c})};a.prototype.remove=function(a,b,c){a||b||c?(a=a?["_"+a]:d.keys(this._callbacks),b||c?this.removeCallback(a,b,c):this.removeAllCallbacks(a)):this._callbacks={}};a.prototype.removeCallback=
function(a,b,c){d.apply(a,function(a){this._callbacks[a]=d.filter(this._callbacks[a]||[],function(a){return b&&b!==a.fn||c&&c!==a.context});0===this._callbacks[a].length&&delete this._callbacks[a]},this)};a.prototype.removeAllCallbacks=function(a){d.apply(a,function(a){delete this._callbacks[a]},this)};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.call(this);var c=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){c.emit("online")},!1),window.addEventListener("offline",function(){c.emit("offline")},!1))}d(b,a);b.prototype.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine};return b}(c(23)["default"]);b.NetInfo=a;b.Network=new a},function(a,b){b.__esModule=!0;b["default"]=function(a){return[[":def",
"ws_options",{hostUnencrypted:a.wsHost+":"+a.wsPort,hostEncrypted:a.wsHost+":"+a.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:a.httpHost+":"+a.httpPort,hostEncrypted:a.httpHost+":"+a.httpsPort,httpPath:a.httpPath}],[":def","timeouts",{loop:!0,timeout:15E3,timeoutLimit:6E4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1E4,maxPingDelay:a.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,
minPingDelay:1E4,maxPingDelay:a.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling",
"xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",
":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4E3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18E5,[":first_connected",[":if",[":is_supported",":ws"],a.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2E3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2E3,[":wss_loop"]],[":delayed",5E3,[":http_fallback_loop"]]],
":http_fallback_loop"]]]]]}},function(a,b,c){var d=c(3);b.__esModule=!0;b["default"]=function(){var a=this;a.timeline.info(a.buildTimelineMessage({transport:a.name+(a.options.encrypted?"s":"")}));if(a.hooks.isInitialized())a.changeState("initialized");else if(a.hooks.file)a.changeState("initializing"),d.Dependencies.load(a.hooks.file,{encrypted:a.options.encrypted},function(b,c){if(a.hooks.isInitialized())a.changeState("initialized"),c(!0);else{if(b)a.onError(b);a.onClose();c(!1)}});else a.onClose()}},
function(a,b,c){var d=c(29);a=c(31);a["default"].createXDR=function(a,b){return this.createRequest(d["default"],a,b)};b.__esModule=!0;b["default"]=a["default"]},function(a,b,c){var d=c(30);b.__esModule=!0;b["default"]={getRequest:function(a){var b=new window.XDomainRequest;b.ontimeout=function(){a.emit("error",new d.RequestTimedOut);a.close()};b.onerror=function(b){a.emit("error",b);a.close()};b.onprogress=function(){if(b.responseText&&0<b.responseText.length)a.onChunk(200,b.responseText)};b.onload=
function(){if(b.responseText&&0<b.responseText.length)a.onChunk(200,b.responseText);a.emit("finished",200);a.close()};return b},abortRequest:function(a){a.ontimeout=a.onerror=a.onprogress=a.onload=null;a.abort()}}},function(a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},d=function(a){function b(){a.apply(this,arguments)}c(b,a);return b}(Error);b.BadEventName=
d;d=function(a){function b(){a.apply(this,arguments)}c(b,a);return b}(Error);b.RequestTimedOut=d;d=function(a){function b(){a.apply(this,arguments)}c(b,a);return b}(Error);b.TransportPriorityTooLow=d;d=function(a){function b(){a.apply(this,arguments)}c(b,a);return b}(Error);b.TransportClosed=d;d=function(a){function b(){a.apply(this,arguments)}c(b,a);return b}(Error);b.UnsupportedTransport=d;d=function(a){function b(){a.apply(this,arguments)}c(b,a);return b}(Error);b.UnsupportedStrategy=d},function(a,
b,c){var d=c(32),f=c(33),e=c(35),h=c(36),g=c(37);b.__esModule=!0;b["default"]={createStreamingSocket:function(a){return this.createSocket(e["default"],a)},createPollingSocket:function(a){return this.createSocket(h["default"],a)},createSocket:function(a,b){return new f["default"](a,b)},createXHR:function(a,b){return this.createRequest(g["default"],a,b)},createRequest:function(a,b,c){return new d["default"](a,b,c)}}},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(2);a=function(a){function b(c,d,f){a.call(this);this.hooks=c;this.method=d;this.url=f}d(b,a);b.prototype.start=function(a){var b=this;this.position=0;this.xhr=this.hooks.getRequest(this);this.unloader=function(){b.close()};f["default"].addUnloadListener(this.unloader);this.xhr.open(this.method,this.url,!0);this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type",
"application/json");this.xhr.send(a)};b.prototype.close=function(){this.unloader&&(f["default"].removeUnloadListener(this.unloader),this.unloader=null);this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)};b.prototype.onChunk=function(a,b){for(;;){var c=this.advanceBuffer(b);if(c)this.emit("chunk",{status:a,data:c});else break}this.isBufferTooLong(b)&&this.emit("buffer_too_long")};b.prototype.advanceBuffer=function(a){a=a.slice(this.position);var b=a.indexOf("\n");return-1!==b?(this.position+=
b+1,a.slice(0,b)):null};b.prototype.isBufferTooLong=function(a){return this.position===a.length&&262144<a.length};return b}(c(23)["default"]);b.__esModule=!0;b["default"]=a},function(a,b,c){function d(a){var b=-1===a.indexOf("?")?"?":"&";return a+b+"t="+ +new Date+"&n="+g++}var f=c(34),e=c(11),h=c(2),g=1;a=function(){function a(b,c){this.hooks=b;var d=Math.floor(1E3*Math.random())+"/",e;e=[];for(var g=0;8>g;g++)e.push(Math.floor(32*Math.random()).toString(32));e=e.join("");this.session=d+e;d=/([^\?]*)\/*(\??.*)/.exec(c);
this.location={base:d[1],queryString:d[2]};this.readyState=f["default"].CONNECTING;this.openStream()}a.prototype.send=function(a){return this.sendRaw(JSON.stringify([a]))};a.prototype.ping=function(){this.hooks.sendHeartbeat(this)};a.prototype.close=function(a,b){this.onClose(a,b,!0)};a.prototype.sendRaw=function(a){if(this.readyState===f["default"].OPEN)try{return h["default"].createSocketRequest("POST",d(this.location.base+"/"+this.session+"/xhr_send")).start(a),!0}catch(b){return!1}else return!1};
a.prototype.reconnect=function(){this.closeStream();this.openStream()};a.prototype.onClose=function(a,b,c){this.closeStream();this.readyState=f["default"].CLOSED;if(this.onclose)this.onclose({code:a,reason:b,wasClean:c})};a.prototype.onChunk=function(a){if(200===a.status){if(this.readyState===f["default"].OPEN)this.onActivity();switch(a.data.slice(0,1)){case "o":a=JSON.parse(a.data.slice(1)||"{}");this.onOpen(a);break;case "a":a=JSON.parse(a.data.slice(1)||"[]");for(var b=0;b<a.length;b++)this.onEvent(a[b]);
break;case "m":a=JSON.parse(a.data.slice(1)||"null");this.onEvent(a);break;case "h":this.hooks.onHeartbeat(this);break;case "c":a=JSON.parse(a.data.slice(1)||"[]"),this.onClose(a[0],a[1],!0)}}};a.prototype.onOpen=function(a){if(this.readyState===f["default"].CONNECTING){if(a&&a.hostname){var b=this.location;a=a.hostname;var c=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(this.location.base);b.base=c[1]+a+c[3]}this.readyState=f["default"].OPEN;if(this.onopen)this.onopen()}else this.onClose(1006,"Server lost session",
!0)};a.prototype.onEvent=function(a){if(this.readyState===f["default"].OPEN&&this.onmessage)this.onmessage({data:a})};a.prototype.onActivity=function(){if(this.onactivity)this.onactivity()};a.prototype.onError=function(a){if(this.onerror)this.onerror(a)};a.prototype.openStream=function(){var a=this;this.stream=h["default"].createSocketRequest("POST",d(this.hooks.getReceiveURL(this.location,this.session)));this.stream.bind("chunk",function(b){a.onChunk(b)});this.stream.bind("finished",function(b){a.hooks.onFinished(a,
b)});this.stream.bind("buffer_too_long",function(){a.reconnect()});try{this.stream.start()}catch(b){e["default"].defer(function(){a.onError(b);a.onClose(1006,"Could not start streaming",!1)})}};a.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)};return a}();b.__esModule=!0;b["default"]=a},function(a,b){var c,d=c||(c={});d[d.CONNECTING=0]="CONNECTING";d[d.OPEN=1]="OPEN";d[d.CLOSED=3]="CLOSED";b.__esModule=!0;b["default"]=c},function(a,b){b.__esModule=
!0;b["default"]={getReceiveURL:function(a,b){return a.base+"/"+b+"/xhr_streaming"+a.queryString},onHeartbeat:function(a){a.sendRaw("[]")},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,b){a.onClose(1006,"Connection interrupted ("+b+")",!1)}}},function(a,b){b.__esModule=!0;b["default"]={getReceiveURL:function(a,b){return a.base+"/"+b+"/xhr"+a.queryString},onHeartbeat:function(){},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,b){if(200===b)a.reconnect();else a.onClose(1006,
"Connection interrupted ("+b+")",!1)}}},function(a,b,c){var d=c(2);b.__esModule=!0;b["default"]={getRequest:function(a){var b=new (d["default"].getXHRAPI());b.onreadystatechange=b.onprogress=function(){switch(b.readyState){case 3:if(b.responseText&&0<b.responseText.length)a.onChunk(b.status,b.responseText);break;case 4:if(b.responseText&&0<b.responseText.length)a.onChunk(b.status,b.responseText);a.emit("finished",b.status);a.close()}};return b},abortRequest:function(a){a.onreadystatechange=null;a.abort()}}},
function(a,b,c){var d=c(9),f=c(11),e=c(39);a=function(){function a(b,c,d){this.key=b;this.session=c;this.events=[];this.options=d||{};this.uniqueID=this.sent=0}a.prototype.log=function(a,b){a<=this.options.level&&(this.events.push(d.extend({},b,{timestamp:f["default"].now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())};a.prototype.error=function(a){this.log(e["default"].ERROR,a)};a.prototype.info=function(a){this.log(e["default"].INFO,a)};a.prototype.debug=function(a){this.log(e["default"].DEBUG,
a)};a.prototype.isEmpty=function(){return 0===this.events.length};a.prototype.send=function(a,b){var c=this,e=d.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);this.events=[];a(e,function(a,d){a||c.sent++;b&&b(a,d)});return!0};a.prototype.generateUniqueID=function(){this.uniqueID++;return this.uniqueID};return a}();b.__esModule=!0;b["default"]=a},
function(a,b){var c,d=c||(c={});d[d.ERROR=3]="ERROR";d[d.INFO=6]="INFO";d[d.DEBUG=7]="DEBUG";b.__esModule=!0;b["default"]=c},function(a,b,c){function d(a){return function(b){return[a.apply(this,arguments),b]}}function f(a){return"string"===typeof a&&":"===a.charAt(0)}function e(a,b){if(0===a.length)return[[],b];var c=g(a[0],b),d=e(a.slice(1),c[1]);return[[c[0]].concat(d[0]),d[1]]}function h(a,b){if(f(a[0])){var c=b[a[0].slice(1)];if(1<a.length){if("function"!==typeof c)throw"Calling non-function "+
a[0];var d=[k.extend({},b)].concat(k.map(a.slice(1),function(a){return g(a,k.extend({},b))[0]}));return c.apply(this,d)}return[c,b]}return e(a,b)}function g(a,b){if("string"===typeof a){var c;if(f(a)){c=b[a.slice(1)];if(void 0===c)throw"Undefined symbol "+a;c=[c,b]}else c=[a,b];return c}return"object"===typeof a&&a instanceof Array&&0<a.length?h(a,b):[a,b]}var k=c(9),m=c(11),l=c(41),n=c(30),r=c(55),q=c(56),t=c(57),u=c(58),w=c(59),A=c(60),x=c(61),E=c(2)["default"].Transports;b.build=function(a,b){var c=
k.extend({},y,b);return g(a,c)[1].strategy};var F={isSupported:function(){return!1},connect:function(a,b){var c=m["default"].defer(function(){b(new n.UnsupportedStrategy)});return{abort:function(){c.ensureAborted()},forceMinPriority:function(){}}}},y={extend:function(a,b,c){return[k.extend({},b,c),a]},def:function(a,b,c){if(void 0!==a[b])throw"Redefining symbol "+b;a[b]=c;return[void 0,a]},def_transport:function(a,b,c,d,e,f){var g=E[c];if(!g)throw new n.UnsupportedTransport(c);c=a.enabledTransports&&
-1===k.arrayIndexOf(a.enabledTransports,b)||a.disabledTransports&&-1!==k.arrayIndexOf(a.disabledTransports,b)?F:new r["default"](b,d,f?f.getAssistant(g):g,k.extend({key:a.key,encrypted:a.encrypted,timeline:a.timeline,ignoreNullOrigin:a.ignoreNullOrigin},e));d=a.def(a,b,c)[1];d.Transports=a.Transports||{};d.Transports[b]=c;return[void 0,d]},transport_manager:d(function(a,b){return new l["default"](b)}),sequential:d(function(a,b){var c=Array.prototype.slice.call(arguments,2);return new q["default"](c,
b)}),cached:d(function(a,b,c){return new u["default"](c,a.Transports,{ttl:b,timeline:a.timeline,encrypted:a.encrypted})}),first_connected:d(function(a,b){return new x["default"](b)}),best_connected_ever:d(function(){var a=Array.prototype.slice.call(arguments,1);return new t["default"](a)}),delayed:d(function(a,b,c){return new w["default"](c,{delay:b})}),"if":d(function(a,b,c,d){return new A["default"](b,c,d)}),is_supported:d(function(a,b){return function(){return b.isSupported()}})}},function(a,b,
c){var d=c(42);a=function(){function a(b){this.options=b||{};this.livesLeft=this.options.lives||Infinity}a.prototype.getAssistant=function(a){return d["default"].createAssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})};a.prototype.isAlive=function(){return 0<this.livesLeft};a.prototype.reportDeath=function(){--this.livesLeft};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(43),f=c(44),e=c(47),h=c(48),g=c(49),
k=c(50),m=c(51),l=c(53),n=c(54);b.__esModule=!0;b["default"]={createChannels:function(){return new n["default"]},createConnectionManager:function(a,b){return new l["default"](a,b)},createChannel:function(a,b){return new m["default"](a,b)},createPrivateChannel:function(a,b){return new k["default"](a,b)},createPresenceChannel:function(a,b){return new g["default"](a,b)},createTimelineSender:function(a,b){return new h["default"](a,b)},createAuthorizer:function(a,b){return new e["default"](a,b)},createHandshake:function(a,
b){return new f["default"](a,b)},createAssistantToTheTransportManager:function(a,b,c){return new d["default"](a,b,c)}}},function(a,b,c){var d=c(11),f=c(9);a=function(){function a(b,c,d){this.manager=b;this.transport=c;this.minPingDelay=d.minPingDelay;this.maxPingDelay=d.maxPingDelay;this.pingDelay=void 0}a.prototype.createConnection=function(a,b,c,e){var l=this;e=f.extend({},e,{activityTimeout:this.pingDelay});var n=this.transport.createConnection(a,b,c,e),r=null,q=function(){n.unbind("open",q);n.bind("closed",
t);r=d["default"].now()},t=function(a){n.unbind("closed",t);1002===a.code||1003===a.code?l.manager.reportDeath():!a.wasClean&&r&&(a=d["default"].now()-r,a<2*l.maxPingDelay&&(l.manager.reportDeath(),l.pingDelay=Math.max(a/2,l.minPingDelay)))};n.bind("open",q);return n};a.prototype.isSupported=function(a){return this.manager.isAlive()&&this.transport.isSupported(a)};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(9),f=c(45),e=c(46);a=function(){function a(b,c){this.transport=b;this.callback=
c;this.bindListeners()}a.prototype.close=function(){this.unbindListeners();this.transport.close()};a.prototype.bindListeners=function(){var a=this;this.onMessage=function(b){a.unbindListeners();var c;try{c=f.processHandshake(b)}catch(d){a.finish("error",{error:d});a.transport.close();return}"connected"===c.action?a.finish("connected",{connection:new e["default"](c.id,a.transport),activityTimeout:c.activityTimeout}):(a.finish(c.action,{error:c.error}),a.transport.close())};this.onClosed=function(b){a.unbindListeners();
var c=f.getCloseAction(b)||"backoff";b=f.getCloseError(b);a.finish(c,{error:b})};this.transport.bind("message",this.onMessage);this.transport.bind("closed",this.onClosed)};a.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage);this.transport.unbind("closed",this.onClosed)};a.prototype.finish=function(a,b){this.callback(d.extend({transport:this.transport,action:a},b))};return a}();b.__esModule=!0;b["default"]=a},function(a,b){b.decodeMessage=function(a){try{var b=JSON.parse(a.data);
if("string"===typeof b.data)try{b.data=JSON.parse(b.data)}catch(f){if(!(f instanceof SyntaxError))throw f;}return b}catch(f){throw{type:"MessageParseError",error:f,data:a.data};}};b.encodeMessage=function(a){return JSON.stringify(a)};b.processHandshake=function(a){a=b.decodeMessage(a);if("pusher:connection_established"===a.event){if(!a.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:a.data.socket_id,activityTimeout:1E3*a.data.activity_timeout}}if("pusher:error"===
a.event)return{action:this.getCloseAction(a.data),error:this.getCloseError(a.data)};throw"Invalid handshake";};b.getCloseAction=function(a){return 4E3>a.code?1002<=a.code&&1004>=a.code?"backoff":null:4E3===a.code?"ssl_only":4100>a.code?"refused":4200>a.code?"backoff":4300>a.code?"retry":"refused"};b.getCloseError=function(a){return 1E3!==a.code&&1001!==a.code?{type:"PusherError",data:{code:a.code,message:a.reason||a.message}}:null}},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(9);a=c(23);var e=c(45),h=c(8);c=function(a){function b(c,d){a.call(this);this.id=c;this.transport=d;this.activityTimeout=d.activityTimeout;this.bindListeners()}d(b,a);b.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()};b.prototype.send=function(a){return this.transport.send(a)};b.prototype.send_event=function(a,b,c){a={event:a,data:b};
c&&(a.channel=c);h["default"].debug("Event sent",a);return this.send(e.encodeMessage(a))};b.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})};b.prototype.close=function(){this.transport.close()};b.prototype.bindListeners=function(){var a=this,b={message:function(b){var c;try{c=e.decodeMessage(b)}catch(d){a.emit("error",{type:"MessageParseError",error:d,data:b.data})}if(void 0!==c){h["default"].debug("Event recd",c);switch(c.event){case "pusher:error":a.emit("error",
{type:"PusherError",data:c.data});break;case "pusher:ping":a.emit("ping");break;case "pusher:pong":a.emit("pong")}a.emit("message",c)}},activity:function(){a.emit("activity")},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(b){c();b&&b.code&&a.handleCloseEvent(b);a.transport=null;a.emit("closed")}},c=function(){f.objectApply(b,function(b,c){a.transport.unbind(c,b)})};f.objectApply(b,function(b,c){a.transport.bind(c,b)})};b.prototype.handleCloseEvent=function(a){var b=
e.getCloseAction(a);(a=e.getCloseError(a))&&this.emit("error",a);b&&this.emit(b)};return b}(a["default"]);b.__esModule=!0;b["default"]=c},function(a,b,c){var d=c(2);a=function(){function a(b,c){this.channel=b;var f=c.authTransport;if("undefined"===typeof d["default"].getAuthorizers()[f])throw"'"+f+"' is not a recognized auth transport";this.type=f;this.options=c;this.authOptions=(c||{}).auth||{}}a.prototype.composeQuery=function(a){a="socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);
for(var b in this.authOptions.params)a+="&"+encodeURIComponent(b)+"="+encodeURIComponent(this.authOptions.params[b]);return a};a.prototype.authorize=function(b,c){a.authorizers=a.authorizers||d["default"].getAuthorizers();return a.authorizers[this.type].call(this,d["default"],b,c)};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(2);a=function(){function a(b,c){this.timeline=b;this.options=c||{}}a.prototype.send=function(a,b){this.timeline.isEmpty()||this.timeline.send(d["default"].TimelineTransport.getAgent(this,
a),b)};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(50),e=c(8),h=c(52);a=function(a){function b(c,d){a.call(this,c,d);this.members=new h["default"]}d(b,a);b.prototype.authorize=function(b,c){var d=this;a.prototype.authorize.call(this,b,function(a,b){if(!a){if(void 0===b.channel_data){e["default"].warn("Invalid auth response for channel '"+
d.name+"', expected 'channel_data' field");c("Invalid auth response");return}var f=JSON.parse(b.channel_data);d.members.setMyID(f.user_id)}c(a,b)})};b.prototype.handleEvent=function(a,b){switch(a){case "pusher_internal:subscription_succeeded":this.members.onSubscription(b);this.subscribed=!0;this.emit("pusher:subscription_succeeded",this.members);break;case "pusher_internal:member_added":var c=this.members.addMember(b);this.emit("pusher:member_added",c);break;case "pusher_internal:member_removed":(c=
this.members.removeMember(b))&&this.emit("pusher:member_removed",c);break;default:f["default"].prototype.handleEvent.call(this,a,b)}};b.prototype.disconnect=function(){this.members.reset();a.prototype.disconnect.call(this)};return b}(f["default"]);b.__esModule=!0;b["default"]=a},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(42);a=function(a){function b(){a.apply(this,
arguments)}d(b,a);b.prototype.authorize=function(a,b){return f["default"].createAuthorizer(this,this.pusher.config).authorize(a,b)};return b}(c(51)["default"]);b.__esModule=!0;b["default"]=a},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=c(23);var f=c(30),e=c(8);c=function(a){function b(c,d){a.call(this,function(a,b){e["default"].debug("No callbacks on "+
c+" for "+a)});this.name=c;this.pusher=d;this.subscribed=!1}d(b,a);b.prototype.authorize=function(a,b){return b(!1,{})};b.prototype.trigger=function(a,b){if(0!==a.indexOf("client-"))throw new f.BadEventName("Event '"+a+"' does not start with 'client-'");return this.pusher.send_event(a,b,this.name)};b.prototype.disconnect=function(){this.subscribed=!1};b.prototype.handleEvent=function(a,b){0===a.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===a&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",
b)):this.emit(a,b)};b.prototype.subscribe=function(){var a=this;this.authorize(this.pusher.connection.socket_id,function(b,c){b?a.handleEvent("pusher:subscription_error",c):a.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:a.name})})};b.prototype.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})};return b}(a["default"]);b.__esModule=!0;b["default"]=c},function(a,b,c){var d=c(9);a=function(){function a(){this.reset()}a.prototype.get=
function(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null};a.prototype.each=function(a){var b=this;d.objectApply(this.members,function(c,d){a(b.get(d))})};a.prototype.setMyID=function(a){this.myID=a};a.prototype.onSubscription=function(a){this.members=a.presence.hash;this.count=a.presence.count;this.me=this.get(this.myID)};a.prototype.addMember=function(a){null===this.get(a.user_id)&&this.count++;this.members[a.user_id]=a.user_info;return this.get(a.user_id)};
a.prototype.removeMember=function(a){var b=this.get(a.user_id);b&&(delete this.members[a.user_id],this.count--);return b};a.prototype.reset=function(){this.members={};this.count=0;this.me=this.myID=null};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=c(23);var f=c(12),e=c(8),h=c(9),g=c(2);c=function(a){function b(c,
d){var e=this;a.call(this);this.key=c;this.options=d||{};this.state="initialized";this.connection=null;this.encrypted=!!d.encrypted;this.timeline=this.options.timeline;this.connectionCallbacks=this.buildConnectionCallbacks();this.errorCallbacks=this.buildErrorCallbacks();this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var f=g["default"].getNetwork();f.bind("online",function(){e.timeline.info({netinfo:"online"});"connecting"!==e.state&&"unavailable"!==e.state||e.retryIn(0)});
f.bind("offline",function(){e.timeline.info({netinfo:"offline"});e.connection&&e.sendActivityCheck()});this.updateStrategy()}d(b,a);b.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))};b.prototype.send=function(a){return this.connection?this.connection.send(a):!1};b.prototype.send_event=function(a,b,c){return this.connection?this.connection.send_event(a,
b,c):!1};b.prototype.disconnect=function(){this.disconnectInternally();this.updateState("disconnected")};b.prototype.isEncrypted=function(){return this.encrypted};b.prototype.startConnecting=function(){var a=this,b=function(c,d){c?a.runner=a.strategy.connect(0,b):"error"===d.action?(a.emit("error",{type:"HandshakeError",error:d.error}),a.timeline.error({handshakeError:d.error})):(a.abortConnecting(),a.handshakeCallbacks[d.action](d))};this.runner=this.strategy.connect(0,b)};b.prototype.abortConnecting=
function(){this.runner&&(this.runner.abort(),this.runner=null)};b.prototype.disconnectInternally=function(){this.abortConnecting();this.clearRetryTimer();this.clearUnavailableTimer();this.connection&&this.abandonConnection().close()};b.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})};b.prototype.retryIn=function(a){var b=this;this.timeline.info({action:"retry",delay:a});0<a&&this.emit("connecting_in",Math.round(a/
1E3));this.retryTimer=new f.OneOffTimer(a||0,function(){b.disconnectInternally();b.connect()})};b.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)};b.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new f.OneOffTimer(this.options.unavailableTimeout,function(){a.updateState("unavailable")})};b.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()};b.prototype.sendActivityCheck=
function(){var a=this;this.stopActivityCheck();this.connection.ping();this.activityTimer=new f.OneOffTimer(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout});a.retryIn(0)})};b.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck();this.connection.handlesActivityChecks()||(this.activityTimer=new f.OneOffTimer(this.activityTimeout,function(){a.sendActivityCheck()}))};b.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()};
b.prototype.buildConnectionCallbacks=function(){var a=this;return{message:function(b){a.resetActivityCheck();a.emit("message",b)},ping:function(){a.send_event("pusher:pong",{})},activity:function(){a.resetActivityCheck()},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(){a.abandonConnection();a.shouldRetry()&&a.retryIn(1E3)}}};b.prototype.buildHandshakeCallbacks=function(a){var b=this;return h.extend({},a,{connected:function(a){b.activityTimeout=Math.min(b.options.activityTimeout,
a.activityTimeout,a.connection.activityTimeout||Infinity);b.clearUnavailableTimer();b.setConnection(a.connection);b.socket_id=b.connection.id;b.updateState("connected",{socket_id:b.socket_id})}})};b.prototype.buildErrorCallbacks=function(){var a=this,b=function(b){return function(c){c.error&&a.emit("error",{type:"WebSocketError",error:c.error});b(c)}};return{ssl_only:b(function(){a.encrypted=!0;a.updateStrategy();a.retryIn(0)}),refused:b(function(){a.disconnect()}),backoff:b(function(){a.retryIn(1E3)}),
retry:b(function(){a.retryIn(0)})}};b.prototype.setConnection=function(a){this.connection=a;for(var b in this.connectionCallbacks)this.connection.bind(b,this.connectionCallbacks[b]);this.resetActivityCheck()};b.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);a=this.connection;this.connection=null;return a}};b.prototype.updateState=function(a,b){var c=this.state;this.state=
a;if(c!==a){var d=a;"connected"===d&&(d+=" with new socket ID "+b.socket_id);e["default"].debug("State changed",c+" -> "+d);this.timeline.info({state:a,params:b});this.emit("state_change",{previous:c,current:a});this.emit(a,b)}};b.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state};return b}(a["default"]);b.__esModule=!0;b["default"]=c},function(a,b,c){var d=c(9),f=c(42);a=function(){function a(){this.channels={}}a.prototype.add=function(a,b){if(!this.channels[a]){var c=
this.channels,d;d=0===a.indexOf("private-")?f["default"].createPrivateChannel(a,b):0===a.indexOf("presence-")?f["default"].createPresenceChannel(a,b):f["default"].createChannel(a,b);c[a]=d}return this.channels[a]};a.prototype.all=function(){return d.values(this.channels)};a.prototype.find=function(a){return this.channels[a]};a.prototype.remove=function(a){var b=this.channels[a];delete this.channels[a];return b};a.prototype.disconnect=function(){d.objectApply(this.channels,function(a){a.disconnect()})};
return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){function d(a,b){e["default"].defer(function(){b(a)});return{abort:function(){},forceMinPriority:function(){}}}var f=c(42),e=c(11),h=c(30),g=c(9);a=function(){function a(b,c,d,e){this.name=b;this.priority=c;this.transport=d;this.options=e||{}}a.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})};a.prototype.connect=function(a,b){var c=this;if(!this.isSupported())return d(new h.UnsupportedStrategy,
b);if(this.priority<a)return d(new h.TransportPriorityTooLow,b);var e=!1,k=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),t=null,u=function(){k.unbind("initialized",u);k.connect()},w=function(){t=f["default"].createHandshake(k,function(a){e=!0;E();b(null,a)})},A=function(a){E();b(a)},x=function(){E();var a;try{a=JSON.stringify(k)}catch(c){a=g.safeJSONStringify(k)}b(new h.TransportClosed(a))},E=function(){k.unbind("initialized",u);k.unbind("open",w);k.unbind("error",
A);k.unbind("closed",x)};k.bind("initialized",u);k.bind("open",w);k.bind("error",A);k.bind("closed",x);k.initialize();return{abort:function(){e||(E(),t?t.close():k.close())},forceMinPriority:function(a){e||c.priority<a&&(t?t.close():k.close())}}};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(9),f=c(11),e=c(12);a=function(){function a(b,c){this.strategies=b;this.loop=Boolean(c.loop);this.failFast=Boolean(c.failFast);this.timeout=c.timeout;this.timeoutLimit=c.timeoutLimit}a.prototype.isSupported=
function(){return d.any(this.strategies,f["default"].method("isSupported"))};a.prototype.connect=function(a,b){var c=this,d=this.strategies,e=0,f=this.timeout,h=null,t=function(u,w){w?b(null,w):(e+=1,c.loop&&(e%=d.length),e<d.length?(f&&(f*=2,c.timeoutLimit&&(f=Math.min(f,c.timeoutLimit))),h=c.tryStrategy(d[e],a,{timeout:f,failFast:c.failFast},t)):b(!0))},h=this.tryStrategy(d[e],a,{timeout:f,failFast:this.failFast},t);return{abort:function(){h.abort()},forceMinPriority:function(b){a=b;h&&h.forceMinPriority(b)}}};
a.prototype.tryStrategy=function(a,b,c,d){var f=null,h=null;0<c.timeout&&(f=new e.OneOffTimer(c.timeout,function(){h.abort();d(!0)}));h=a.connect(b,function(a,b){a&&f&&f.isRunning()&&!c.failFast||(f&&f.ensureAborted(),d(a,b))});return{abort:function(){f&&f.ensureAborted();h.abort()},forceMinPriority:function(a){h.forceMinPriority(a)}}};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){function d(a,b,c){var d=h.map(a,function(a,d,e,f){return a.connect(b,c(d,f))});return{abort:function(){h.apply(d,
e)},forceMinPriority:function(a){h.apply(d,function(b){b.forceMinPriority(a)})}}}function f(a){return h.all(a,function(a){return Boolean(a.error)})}function e(a){a.error||a.aborted||(a.abort(),a.aborted=!0)}var h=c(9),g=c(11);a=function(){function a(b){this.strategies=b}a.prototype.isSupported=function(){return h.any(this.strategies,g["default"].method("isSupported"))};a.prototype.connect=function(a,b){return d(this.strategies,a,function(a,c){return function(d,e){(c[a].error=d)?f(c)&&b(!0):(h.apply(c,
function(a){a.forceMinPriority(e.transport.priority)}),b(null,e))}})};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){function d(a){return"pusherTransport"+(a?"Encrypted":"Unencrypted")}function f(a){var b=g["default"].getLocalStorage();if(b)try{var c=b[d(a)];if(c)return JSON.parse(c)}catch(f){e(a)}return null}function e(a){var b=g["default"].getLocalStorage();if(b)try{delete b[d(a)]}catch(c){}}var h=c(11),g=c(2),k=c(56);a=function(){function a(b,c,d){this.strategy=b;this.transports=c;
this.ttl=d.ttl||18E5;this.encrypted=d.encrypted;this.timeline=d.timeline}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var c=this.encrypted,m=f(c),t=[this.strategy];if(m&&m.timestamp+this.ttl>=h["default"].now()){var u=this.transports[m.transport];u&&(this.timeline.info({cached:!0,transport:m.transport,latency:m.latency}),t.push(new k["default"]([u],{timeout:2*m.latency+1E3,failFast:!0})))}var w=h["default"].now(),A=t.pop().connect(a,function E(f,
k){if(f)e(c),0<t.length?(w=h["default"].now(),A=t.pop().connect(a,E)):b(f);else{var m=k.transport.name,q=h["default"].now()-w,u=g["default"].getLocalStorage();if(u)try{u[d(c)]=JSON.stringify({timestamp:h["default"].now(),transport:m,latency:q})}catch(T){}b(null,k)}});return{abort:function(){A.abort()},forceMinPriority:function(b){a=b;A&&A.forceMinPriority(b)}}};return a}();b.__esModule=!0;b["default"]=a},function(a,b,c){var d=c(12);a=function(){function a(b,c){var d=c.delay;this.strategy=b;this.options=
{delay:d}}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var c=this.strategy,f,m=new d.OneOffTimer(this.options.delay,function(){f=c.connect(a,b)});return{abort:function(){m.ensureAborted();f&&f.abort()},forceMinPriority:function(b){a=b;f&&f.forceMinPriority(b)}}};return a}();b.__esModule=!0;b["default"]=a},function(a,b){var c=function(){function a(b,c,d){this.test=b;this.trueBranch=c;this.falseBranch=d}a.prototype.isSupported=function(){return(this.test()?
this.trueBranch:this.falseBranch).isSupported()};a.prototype.connect=function(a,b){return(this.test()?this.trueBranch:this.falseBranch).connect(a,b)};return a}();b.__esModule=!0;b["default"]=c},function(a,b){var c=function(){function a(b){this.strategy=b}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var c=this.strategy.connect(a,function(a,d){d&&c.abort();b(a,d)});return c};return a}();b.__esModule=!0;b["default"]=c},function(a,b,c){var d=
c(5);b.getGlobalConfig=function(){return{wsHost:d["default"].host,wsPort:d["default"].ws_port,wssPort:d["default"].wss_port,httpHost:d["default"].sockjs_host,httpPort:d["default"].sockjs_http_port,httpsPort:d["default"].sockjs_https_port,httpPath:d["default"].sockjs_path,statsHost:d["default"].stats_host,authEndpoint:d["default"].channel_auth_endpoint,authTransport:d["default"].channel_auth_transport,activity_timeout:d["default"].activity_timeout,pong_timeout:d["default"].pong_timeout,unavailable_timeout:d["default"].unavailable_timeout}};
b.getClusterConfig=function(a){return{wsHost:"ws-"+a+".pusher.com",httpHost:"sockjs-"+a+".pusher.com"}}}])});
(function(){function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(a){Ja&&"object"===typeof window.console&&console.log("[iFrameSizer]["+fa+"] "+a)}function c(a){"object"===typeof window.console&&console.warn("[iFrameSizer]["+fa+"] "+a)}function d(){var a=N.substr(13).split(":");fa=a[0];I=void 0!==a[1]?Number(a[1]):I;K=void 0!==a[2]?"true"===a[2]?!0:!1:K;Ja=void 0!==a[3]?"true"===a[3]?!0:!1:Ja;qa=void 0!==a[4]?Number(a[4]):
qa;ia=void 0!==a[5]?"true"===a[5]?!0:!1:ia;H=void 0!==a[6]?"true"===a[6]?!0:!1:H;Q=a[7];Y=void 0!==a[8]?a[8]:Y;T=a[9];D=a[10];V=void 0!==a[11]?Number(a[11]):V}function f(a,c){void 0!==c&&""!==c&&"null"!==c&&(document.body.style[a]=c,b("Body "+a+' set to "'+c+'"'))}function e(){a(window,"resize",function(){F("resize","Window resized")})}function h(){a(window,"click",function(){F("click","Window clicked")})}function g(){"offset"!==Y&&(Y in za||(c(Y+" is not a valid option for heightCalculationMethod."),
Y="bodyScroll"),b('Height calculation method set to "'+Y+'"'))}function k(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function m(){ia&&(b("Enable public methods"),window.parentIFrame={close:function(){F("close","parentIFrame.close()",0,0)},getId:function(){return fa},reset:function(){z("parentIFrame.size")},scrollTo:function(a,b){J(b,a,"scrollTo")},scrollToOffset:function(a,b){J(b,a,"scrollToOffset")},sendMessage:function(a,b){J(0,
0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){Y=a;g()},setTargetOrigin:function(a){b("Set targetOrigin: "+a);ja=a},size:function(a,b){F("size","parentIFrame.size("+(""+(a?a:"")+(b?","+b:""))+")",a,b)}})}function l(){0!==qa&&(b("setInterval: "+qa+"ms"),setInterval(function(){F("interval","setInterval: "+qa)},Math.abs(qa)))}function n(c){function d(c){if(void 0===c.height||void 0===c.width||0===c.height||0===c.width)b("Attach listerner to "+c.src),a(c,"load",function(){F("imageLoad",
"Image loaded")})}c.forEach(function(a){"attributes"===a.type&&"src"===a.attributeName?d(a.target):"childList"===a.type&&(a=a.target.querySelectorAll("img"),Array.prototype.forEach.call(a,function(a){d(a)}))})}function r(){function b(a){"height"!==a.propertyName&&"width"!==a.propertyName||F("transitionend","Transition end")}a(window,"transitionend",b);a(window,"webkitTransitionEnd",b);a(window,"oTransitionEnd",b);a(window,"otransitionend",b)}function q(){function a(){var c=document.querySelector("body"),
e=new d(function(a){F("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type);n(a)});b("Enable MutationObserver");e.observe(c,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var d=window.MutationObserver||window.WebKitMutationObserver;d?0>qa?l():a():(c("MutationObserver not supported in this browser!"),l())}function t(){function a(b){var c=document.body,d=0;if("defaultView"in document&&"getComputedStyle"in document.defaultView)d=document.defaultView.getComputedStyle(c,
null),d=null!==d?d[b]:0;else if(b=c.currentStyle[b],/^\d+(px)?$/i.test(b))d=parseInt(b,10);else{var d=c.style.left,e=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;c.style.left=b||0;b=c.style.pixelLeft;c.style.left=d;c.runtimeStyle.left=e;d=b}return parseInt(d,10)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}function u(){return document.body.scrollHeight}function w(){return document.documentElement.offsetHeight}function A(){return document.documentElement.scrollHeight}
function x(){for(var a=document.querySelectorAll("body *"),c=a.length,d=0,e=(new Date).getTime(),f=0;f<c;f++)a[f].getBoundingClientRect().bottom>d&&(d=a[f].getBoundingClientRect().bottom);e=(new Date).getTime()-e;b("Parsed "+c+" HTML elements");b("LowestElement bottom position calculated in "+e+"ms");return d}function E(){return Math.max.apply(null,[t(),u(),w(),A()])}function F(a,c,d,e){function f(){a in{reset:1,resetPage:1,init:1}||b("Trigger event: "+c)}d=void 0!==d?d:za[Y]();e=void 0!==e?e:Math.max(document.documentElement.scrollWidth,
document.body.scrollWidth);Math.abs(aa-d)<=V&&(!K||Math.abs(Ua-e)<=V)?!(a in{init:1,interval:1,size:1})&&Y in B?z(c):a in{interval:1}||(f(),b("No change in size detected")):(f(),aa=d,Ua=e,J(aa,Ua,a),b("--"))}function y(a){aa=za[Y]();Ua=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);J(aa,Ua,a)}function z(a){var c=Y;Y="offset";b("Reset trigger event: "+a);y("reset");Y=c}function J(a,c,d,e,f){void 0===f?f=ja:b("Message targetOrigin: "+f);a=fa+":"+(a+":"+c)+":"+d+(void 0!==e?
":"+e:"");b("Sending message to host page ("+a+")");zb.postMessage("[iFrameSizer]"+a,f)}var H=!0,T="",I=0,Q="",D="",K=!1,aa=1,p=!0,Y="offset",ba=!0,N="",qa=32,Ja=!1,fa="",ia=!1,B={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},ja="*",zb=window.parent,V=0,Ua=1,za={offset:t,bodyOffset:t,bodyScroll:u,documentElementOffset:w,scroll:A,documentElementScroll:A,max:E,min:function(){return Math.min.apply(null,[t(),u(),w(),A()])},grow:E,lowestElement:function(){return Math.max(t(),x())}};a(window,"message",
function(a){function l(){N=a.data;zb=a.source;b("Initialising iFrame");d();void 0===Q&&(Q=I+"px");-1!==Q.indexOf("-")&&c("Negative CSS value ignored for margin");f("margin",Q);f("background",T);f("padding",D);k();g();document.documentElement.style.height="";document.body.style.height="";b('HTML & body height set to "auto"');m();!0===H?(e(),h(),r(),q()):b("Auto Resize disabled");F("init","Init message from host page");p=!1;setTimeout(function(){ba=!1},128)}"[iFrameSizer]"===(""+a.data).substr(0,13)&&
(p&&a.data.split(":")[2]in{"true":1,"false":1}?l():"reset"===a.data.split("]")[1]?ba?b("Page reset ignored by init"):(b("Page size reset by host page"),y("resetPage")):a.data===N||"iFrameResize"in window||c("Unexpected message ("+a.data+")"))})})();
(function(){if(!window["com.genius.Genius"].require){var a={},b={},c=function(f,e){var h=d(e,f),g=d(h,"./index"),k;if(k=b[h]||b[g])return k;if(g=a[h]||a[h=g])return k={id:h,exports:{}},b[h]=k.exports,g(k.exports,function(a){return c(a,h.split("/").slice(0,-1).join("/"))},k),b[h]=k.exports;throw"module "+f+" not found";},d=function(a,b){var c=[],d,k;d=/^\.\.?(\/|$)/.test(b)?[a,b].join("/").split("/"):b.split("/");for(var m=0,l=d.length;m<l;m++)k=d[m],".."==k?c.pop():"."!=k&&""!=k&&c.push(k);return c.join("/")};
window["com.genius.Genius"].require=function(a){return c(a,"")};window["com.genius.Genius"].require.define=function(b){for(var c in b)a[c]=b[c]};window["com.genius.Genius"].require.modules=a;window["com.genius.Genius"].require.cache=b}return window["com.genius.Genius"].require}).call(this);
(function(){window["com.genius.Genius"].require.define({jschannel:function(a,b,c){a=function(){function a(b,c,d,e){function f(a){for(var c=0;c<a.length;c++)if(a[c].win===b)return!0;return!1}var g=!1;if("*"===c)for(var k in h){if(h.hasOwnProperty(k)&&"*"!==k&&"object"===typeof h[k][d]&&(g=f(h[k][d])))break}else h["*"]&&h["*"][d]&&(g=f(h["*"][d])),!g&&h[c]&&h[c][d]&&(g=f(h[c][d]));if(g)throw"A channel is already bound to the same window which overlaps with origin '"+c+"' and has scope '"+d+"'";"object"!=
typeof h[c]&&(h[c]={});"object"!=typeof h[c][d]&&(h[c][d]=[]);h[c][d].push({win:b,handler:e})}function b(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var c=Math.floor(1000001*Math.random()),h={},g={},k=function(a){try{var b=JSON.parse(a.data);if("object"!==typeof b||null===b)throw"malformed";}catch(c){return}var d=a.source;a=a.origin;var e,f,k;"string"===typeof b.method&&(k=b.method.split("::"),2==k.length?(e=k[0],k=k[1]):k=b.method);"undefined"!==typeof b.id&&
(f=b.id);if("string"===typeof k){f=!1;if(h[a]&&h[a][e])for(var u=0;u<h[a][e].length;u++)if(h[a][e][u].win===d){h[a][e][u].handler(a,k,b);f=!0;break}if(!f&&h["*"]&&h["*"][e])for(u=0;u<h["*"][e].length;u++)if(h["*"][e][u].win===d){h["*"][e][u].handler(a,k,b);break}}else if("undefined"!=typeof f&&g[f])g[f](a,k,b)};window.addEventListener?window.addEventListener("message",k,!1):window.attachEvent&&window.attachEvent("onmessage",k);return{build:function(k){var l=function(a){if(k.debugOutput&&window.console&&
window.console.log){try{"string"!==typeof a&&(a=JSON.stringify(a))}catch(b){}console.log("["+q+"] "+a)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof k)throw"Channel build invoked without a proper object argument";if(!k.window||!k.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===
k.window)throw"target window is same as present window -- not allowed";var n=!1;if("string"===typeof k.origin){var r;"*"===k.origin?n=!0:null!==(r=k.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(k.origin=r[0].toLowerCase(),n=!0)}if(!n)throw"Channel.build() called with an invalid origin";if("undefined"!==typeof k.scope){if("string"!==typeof k.scope)throw"scope, when specified, must be a string";if(1<k.scope.split("::").length)throw"scope may not contain double colons: '::'";}var q=function(){for(var a=
"",b=0;5>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return a}(),t={},u={},w={},A=!1,x=[],E=function(a,b,c){var d=!1,e=!1;return{origin:b,invoke:function(b,d){if(!w[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var e=!1,f=0;f<c.length;f++)if(b===c[f]){e=!0;break}if(!e)throw"request supports no such callback '"+b+"'";J({id:a,callback:b,params:d})},error:function(b,c){e=!0;if(!w[a])throw"error called for nonexistent message: "+
a;delete w[a];J({id:a,error:b,message:c})},complete:function(b){e=!0;if(!w[a])throw"complete called for nonexistent message: "+a;delete w[a];J({id:a,result:b})},delayReturn:function(a){"boolean"===typeof a&&(d=!0===a);return d},completed:function(){return e}}},F=function(a,b,c){return window.setTimeout(function(){if(u[a]){var d="timeout ("+b+"ms) exceeded on method '"+c+"'";(1,u[a].error)("timeout_error",d);delete u[a];delete g[a]}},b)},y=function(a,c,d){if("function"===typeof k.gotMessageObserver)try{k.gotMessageObserver(a,
d)}catch(e){l("gotMessageObserver() raised an exception: "+e.toString())}if(d.id&&c){if(t[c]){var h=E(d.id,a,d.callbacks?d.callbacks:[]);w[d.id]={};try{if(d.callbacks&&b(d.callbacks)&&0<d.callbacks.length)for(a=0;a<d.callbacks.length;a++){for(var n=d.callbacks[a],q=d.params,r=n.split("/"),A=0;A<r.length-1;A++){var z=r[A];"object"!==typeof q[z]&&(q[z]={});q=q[z]}q[r[r.length-1]]=function(){var a=n;return function(b){return h.invoke(a,b)}}()}var x=t[c](h,d.params);h.delayReturn()||h.completed()||h.complete(x)}catch(e){c=
"runtime_error";d=null;"string"===typeof e?d=e:"object"===typeof e&&(e&&b(e)&&2==e.length?(c=e[0],d=e[1]):"string"===typeof e.error&&(c=e.error,e.message?"string"===typeof e.message?d=e.message:e=e.message:d=""));if(null===d)try{d=JSON.stringify(e),"undefined"==typeof d&&(d=e.toString())}catch(y){d=e.toString()}h.error(c,d)}}}else if(d.id&&d.callback)if(u[d.id]&&u[d.id].callbacks&&u[d.id].callbacks[d.callback])u[d.id].callbacks[d.callback](d.params);else l("ignoring invalid callback, id:"+d.id+" ("+
d.callback+")");else if(d.id)u[d.id]?(d.error?(1,u[d.id].error)(d.error,d.message):void 0!==d.result?(1,u[d.id].success)(d.result):(1,u[d.id].success)(),delete u[d.id],delete g[d.id]):l("ignoring invalid response: "+d.id);else if(c&&t[c])t[c]({origin:a},d.params)};a(k.window,k.origin,"string"===typeof k.scope?k.scope:"",y);var z=function(a){"string"===typeof k.scope&&k.scope.length&&(a=[k.scope,a].join("::"));return a},J=function(a,b){if(!a)throw"postMessage called with null message";l((A?"post  ":
"queue ")+" message: "+JSON.stringify(a));if(b||A){if("function"===typeof k.postMessageObserver)try{k.postMessageObserver(k.origin,a)}catch(c){l("postMessageObserver() raised an exception: "+c.toString())}k.window.postMessage(JSON.stringify(a),k.origin)}else x.push(a)},H={unbind:function(a){if(t[a]){if(!delete t[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!==typeof a)throw"'method' argument to bind must be string";if(!b||"function"!==typeof b)throw"callback missing from bind params";
if(t[a])throw"method '"+a+"' is already bound!";t[a]=b;return this},call:function(a){if(!a)throw"missing arguments to call function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!==typeof a.success)throw"'success' callback missing from call";var b={},d=[],f=[],h=function(a,c){if(0<=f.indexOf(c))throw"params cannot be a recursive data structure";f.push(c);if("object"===typeof c)for(var e in c)if(c.hasOwnProperty(e)){var g=a+(a.length?
"/":"")+e;"function"===typeof c[e]?(b[g]=c[e],d.push(g),delete c[e]):"object"===typeof c[e]&&h(g,c[e])}};h("",a.params);var k={id:c,method:z(a.method),params:a.params};d.length&&(k.callbacks=d);a.timeout&&F(c,a.timeout,z(a.method));u[c]={callbacks:b,error:a.error,success:a.success};g[c]=y;c++;J(k)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to notify must be string";J({method:z(a.method),params:a.params})},
destroy:function(){for(var a=k.window,b=k.origin,c="string"===typeof k.scope?k.scope:"",d=h[b][c],e=0;e<d.length;e++)d[e].win===a&&d.splice(e,1);0===h[b][c].length&&delete h[b][c];window.removeEventListener?window.removeEventListener("message",y,!1):window.detachEvent&&window.detachEvent("onmessage",y);A=!1;t={};w={};u={};k.origin=null;x=[];l("channel destroyed");q=""}};H.bind("__ready",function(a,b){l("ready msg received");if(A)throw"received ready message while in ready state.  help!";q="ping"===
b?q+"-R":q+"-L";H.unbind("__ready");A=!0;l("ready msg accepted.");for("ping"===b&&H.notify({method:"__ready",params:"pong"});x.length;)J(x.pop());if("function"===typeof k.onReady)k.onReady(H)});setTimeout(function(){J({method:z("__ready"),params:"ping"},!0)},0);return H}}}();c.exports=a}})})();window.app=window.app||{};
$.extend(window.app,{load_vidyard_players:function(a,b,c){var d;"function"===typeof a?(d=a,a=$("body")):(a=$(a||"body"),d=c||$.noop);c=a.find(".vidyard_container[data-vidyard-id]");b||(c=c.filter(":visible"));c.each(function(){var a=$(this),b=a.attr("data-vidyard-id"),c=$("#vidyard_"+b+":first");c.length?(a.replaceWith(c.remove()),d()):(a.attr("id","vidyard_"+b).removeAttr("data-vidyard-id"),c=MOBILE_DEVICE||window.RG_EMBEDDED_PAGE?"?width="+a.parent().width():"",$.getScript("//embed.vidyard.com/embed/"+
b+"/iframe/"+c,function(){a.removeClass("loading_with_indicator");d()}))})}});window.app=window.app||{};window.app.youtubeURLre=/https?:\/\/youtube.com\/watch|https?:\/\/www.youtube.com\/watch|https?:\/\/youtu.be\//;window.app.twitterURLre=/((http:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo|pic\.twitter\.com\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*))|(https:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo\/.*|www\.twitter\.com\/.*\/status\/.*\/photo\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*)))/i;
window.app.rgURLre=new RegExp("^(https?:\\/\\/(.+\\.)?((?:rap)?genius\\.com|"+CANONICAL_DOMAIN.replace(/\.|\-/g,"\\$&")+")\\/(\\d+)(?:\\/|\\?|$))","i");window.app.embedlyURLre=/((https?:\/\/(.*yfrog\..*\/.*|www\.flickr\.com\/photos\/.*|flic\.kr\/.*|twitpic\.com\/.*|www\.twitpic\.com\/.*|twitpic\.com\/photos\/.*|www\.twitpic\.com\/photos\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|s.*\.photobucket\.com\/albums\/.*|phodroid\.com\/.*\/.*\/.*|www\.mobypicture\.com\/user\/.*\/view\/.*|moby\.to\/.*|xkcd\.com\/.*|www\.xkcd\.com\/.*|imgs\.xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.asofterworld\.com\/.*\.jpg|asofterworld\.com\/.*\.jpg|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|.*dribbble\.com\/shots\/.*|drbl\.in\/.*|.*\.smugmug\.com\/.*|.*\.smugmug\.com\/.*#.*|emberapp\.com\/.*\/images\/.*|emberapp\.com\/.*\/images\/.*\/sizes\/.*|emberapp\.com\/.*\/collections\/.*\/.*|emberapp\.com\/.*\/categories\/.*\/.*\/.*|embr\.it\/.*|picasaweb\.google\.com.*\/.*\/.*#.*|picasaweb\.google\.com.*\/lh\/photo\/.*|picasaweb\.google\.com.*\/.*\/.*|dailybooth\.com\/.*\/.*|brizzly\.com\/pic\/.*|pics\.brizzly\.com\/.*\.jpg|img\.ly\/.*|www\.tinypic\.com\/view\.php.*|tinypic\.com\/view\.php.*|www\.tinypic\.com\/player\.php.*|tinypic\.com\/player\.php.*|www\.tinypic\.com\/r\/.*\/.*|tinypic\.com\/r\/.*\/.*|.*\.tinypic\.com\/.*\.jpg|.*\.tinypic\.com\/.*\.png|meadd\.com\/.*\/.*|meadd\.com\/.*|.*\.deviantart\.com\/art\/.*|.*\.deviantart\.com\/gallery\/.*|.*\.deviantart\.com\/#\/.*|fav\.me\/.*|.*\.deviantart\.com|.*\.deviantart\.com\/gallery|.*\.deviantart\.com\/.*\/.*\.jpg|.*\.deviantart\.com\/.*\/.*\.gif|.*\.deviantart\.net\/.*\/.*\.jpg|.*\.deviantart\.net\/.*\/.*\.gif|www\.fotopedia\.com\/.*\/.*|fotopedia\.com\/.*\/.*|photozou\.jp\/photo\/show\/.*\/.*|photozou\.jp\/photo\/photo_only\/.*\/.*|instagr\.am\/p\/.*|instagram\.com\/p\/.*|www\.instagram\.com\/p\/.*|skitch\.com\/.*\/.*\/.*|img\.skitch\.com\/.*|share\.ovi\.com\/media\/.*\/.*|www\.questionablecontent\.net\/|questionablecontent\.net\/|www\.questionablecontent\.net\/view\.php.*|questionablecontent\.net\/view\.php.*|questionablecontent\.net\/comics\/.*\.png|www\.questionablecontent\.net\/comics\/.*\.png|picplz\.com\/user\/.*\/pic\/.*\/|twitrpix\.com\/.*|.*\.twitrpix\.com\/.*|www\.someecards\.com\/.*\/.*|someecards\.com\/.*\/.*|some\.ly\/.*|www\.some\.ly\/.*|pikchur\.com\/.*|achewood\.com\/.*|www\.achewood\.com\/.*|achewood\.com\/index\.php.*|www\.achewood\.com\/index\.php.*|www\.whosay\.com\/content\/.*|www\.whosay\.com\/photos\/.*|www\.whosay\.com\/videos\/.*|say\.ly\/.*|ow\.ly\/i\/.*|color\.com\/s\/.*|bnter\.com\/convo\/.*|mlkshk\.com\/p\/.*|lockerz\.com\/s\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|snd\.sc\/.*|www\.last\.fm\/music\/.*|www\.last\.fm\/music\/+videos\/.*|www\.last\.fm\/music\/+images\/.*|www\.last\.fm\/music\/.*\/_\/.*|www\.last\.fm\/music\/.*\/.*|www\.mixcloud\.com\/.*\/.*\/|www\.radionomy\.com\/.*\/radio\/.*|radionomy\.com\/.*\/radio\/.*|www\.hark\.com\/clips\/.*|www\.rdio\.com\/#\/artist\/.*\/album\/.*|www\.rdio\.com\/artist\/.*\/album\/.*|www\.zero-inch\.com\/.*|.*\.bandcamp\.com\/|.*\.bandcamp\.com\/track\/.*|.*\.bandcamp\.com\/album\/.*|freemusicarchive\.org\/music\/.*|www\.freemusicarchive\.org\/music\/.*|freemusicarchive\.org\/curator\/.*|www\.freemusicarchive\.org\/curator\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/templates\/story\/story\.php.*|huffduffer\.com\/.*\/.*|www\.audioboo\.fm\/boos\/.*|audioboo\.fm\/boos\/.*|boo\.fm\/b.*|www\.xiami\.com\/song\/.*|xiami\.com\/song\/.*|www\.saynow\.com\/playMsg\.html.*|www\.saynow\.com\/playMsg\.html.*|grooveshark\.com\/s\/.*|listen\.grooveshark\.com\/s\/.*|radioreddit\.com\/songs.*|www\.radioreddit\.com\/songs.*|radioreddit\.com\/\?q=songs.*|www\.radioreddit\.com\/\?q=songs.*|www\.gogoyoko\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|.*amazon\..*\/gp\/aw\/d\/.*|www\.amzn\.com\/.*|amzn\.com\/.*|www\.shopstyle\.com\/browse.*|www\.shopstyle\.com\/action\/apiVisitRetailer.*|api\.shopstyle\.com\/action\/apiVisitRetailer.*|www\.shopstyle\.com\/action\/viewLook.*|gist\.github\.com\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*|www\.crunchbase\.com\/.*\/.*|crunchbase\.com\/.*\/.*|www\.slideshare\.net\/.*\/.*|www\.slideshare\.net\/mobile\/.*\/.*|slidesha\.re\/.*|scribd\.com\/doc\/.*|www\.scribd\.com\/doc\/.*|scribd\.com\/mobile\/documents\/.*|www\.scribd\.com\/mobile\/documents\/.*|screenr\.com\/.*|polldaddy\.com\/community\/poll\/.*|polldaddy\.com\/poll\/.*|answers\.polldaddy\.com\/poll\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|issuu\.com\/.*\/docs\/.*|www\.kickstarter\.com\/projects\/.*\/.*|www\.scrapblog\.com\/viewer\/viewer\.aspx.*|ping\.fm\/p\/.*|chart\.ly\/symbols\/.*|chart\.ly\/.*|maps\.google\.com\/maps\?.*|maps\.google\.com\/\?.*|maps\.google\.com\/maps\/ms\?.*|.*\.craigslist\.org\/.*\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*|tumblr\.com\/.*|.*\.tumblr\.com\/post\/.*|www\.polleverywhere\.com\/polls\/.*|www\.polleverywhere\.com\/multiple_choice_polls\/.*|www\.polleverywhere\.com\/free_text_polls\/.*|www\.quantcast\.com\/wd:.*|www\.quantcast\.com\/.*|siteanalytics\.compete\.com\/.*|statsheet\.com\/statplot\/charts\/.*\/.*\/.*\/.*|statsheet\.com\/statplot\/charts\/e\/.*|statsheet\.com\/.*\/teams\/.*\/.*|statsheet\.com\/tools\/chartlets\?chart=.*|.*\.status\.net\/notice\/.*|identi\.ca\/notice\/.*|brainbird\.net\/notice\/.*|shitmydadsays\.com\/notice\/.*|www\.studivz\.net\/Profile\/.*|www\.studivz\.net\/l\/.*|www\.studivz\.net\/Groups\/Overview\/.*|www\.studivz\.net\/Gadgets\/Info\/.*|www\.studivz\.net\/Gadgets\/Install\/.*|www\.studivz\.net\/.*|www\.meinvz\.net\/Profile\/.*|www\.meinvz\.net\/l\/.*|www\.meinvz\.net\/Groups\/Overview\/.*|www\.meinvz\.net\/Gadgets\/Info\/.*|www\.meinvz\.net\/Gadgets\/Install\/.*|www\.meinvz\.net\/.*|www\.schuelervz\.net\/Profile\/.*|www\.schuelervz\.net\/l\/.*|www\.schuelervz\.net\/Groups\/Overview\/.*|www\.schuelervz\.net\/Gadgets\/Info\/.*|www\.schuelervz\.net\/Gadgets\/Install\/.*|www\.schuelervz\.net\/.*|myloc\.me\/.*|pastebin\.com\/.*|pastie\.org\/.*|www\.pastie\.org\/.*|redux\.com\/stream\/item\/.*\/.*|redux\.com\/f\/.*\/.*|www\.redux\.com\/stream\/item\/.*\/.*|www\.redux\.com\/f\/.*\/.*|cl\.ly\/.*|cl\.ly\/.*\/content|speakerdeck\.com\/u\/.*\/p\/.*|www\.kiva\.org\/lend\/.*|www\.timetoast\.com\/timelines\/.*|storify\.com\/.*\/.*|.*meetup\.com\/.*|meetu\.ps\/.*|www\.dailymile\.com\/people\/.*\/entries\/.*|.*\.kinomap\.com\/.*|www\.metacdn\.com\/api\/users\/.*\/content\/.*|www\.metacdn\.com\/api\/users\/.*\/media\/.*|prezi\.com\/.*\/.*|.*\.uservoice\.com\/.*\/suggestions\/.*|formspring\.me\/.*|www\.formspring\.me\/.*|formspring\.me\/.*\/q\/.*|www\.formspring\.me\/.*\/q\/.*|twitlonger\.com\/show\/.*|www\.twitlonger\.com\/show\/.*|tl\.gd\/.*|www\.qwiki\.com\/q\/.*|crocodoc\.com\/.*|.*\.crocodoc\.com\/.*|.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|.*\.youtube\.com\/user\/.*|.*\.youtube\.com\/.*#.*\/.*|m\.youtube\.com\/watch.*|m\.youtube\.com\/index.*|.*\.youtube\.com\/profile.*|.*\.youtube\.com\/view_play_list.*|.*\.youtube\.com\/playlist.*|www\.vevo\.com\/watch\/.*|www\.vevo\.com\/video\/.*|.*justin\.tv\/.*|.*justin\.tv\/.*\/b\/.*|.*justin\.tv\/.*\/w\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|www\.ustream\.tv\/.*|qik\.com\/video\/.*|qik\.com\/.*|qik\.ly\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|collegehumor\.com\/video:.*|collegehumor\.com\/video\/.*|www\.collegehumor\.com\/video:.*|www\.collegehumor\.com\/video\/.*|.*twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|www\.metacafe\.com\/w\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|www\.overstream\.net\/view\.php\?oid=.*|www\.livestream\.com\/.*|www\.worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|teachertube\.com\/viewVideo\.php.*|www\.teachertube\.com\/viewVideo\.php.*|www1\.teachertube\.com\/viewVideo\.php.*|www2\.teachertube\.com\/viewVideo\.php.*|bambuser\.com\/v\/.*|bambuser\.com\/channel\/.*|bambuser\.com\/channel\/.*\/broadcast\/.*|www\.schooltube\.com\/video\/.*\/.*|bigthink\.com\/ideas\/.*|bigthink\.com\/series\/.*|sendables\.jibjab\.com\/view\/.*|sendables\.jibjab\.com\/originals\/.*|www\.xtranormal\.com\/watch\/.*|socialcam\.com\/v\/.*|www\.socialcam\.com\/v\/.*|dipdive\.com\/media\/.*|dipdive\.com\/member\/.*\/media\/.*|dipdive\.com\/v\/.*|.*\.dipdive\.com\/media\/.*|.*\.dipdive\.com\/v\/.*|v\.youku\.com\/v_show\/.*\.html|v\.youku\.com\/v_playlist\/.*\.html|www\.snotr\.com\/video\/.*|snotr\.com\/video\/.*|video\.jardenberg\.se\/.*|www\.clipfish\.de\/.*\/.*\/video\/.*|www\.myvideo\.de\/watch\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|www\.hulu\.com\/w\/.*|hulu\.com\/watch.*|hulu\.com\/w\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.funnyordie\.com\/m\/.*|funnyordie\.com\/videos\/.*|funnyordie\.com\/m\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|vimeo\.com\/m\/#\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/trailer|movies\.yahoo\.com\/movie\/.*\/video|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|www\.trailerspy\.com\/trailer\/.*\/.*|www\.trailerspy\.com\/trailer\/.*|www\.trailerspy\.com\/view_video\.php.*|www\.atom\.com\/.*\/.*\/|fora\.tv\/.*\/.*\/.*\/.*|www\.spike\.com\/video\/.*|www\.gametrailers\.com\/video\/.*|gametrailers\.com\/video\/.*|www\.koldcast\.tv\/video\/.*|www\.koldcast\.tv\/#video:.*|techcrunch\.tv\/watch.*|techcrunch\.tv\/.*\/watch.*|mixergy\.com\/.*|video\.pbs\.org\/video\/.*|www\.zapiks\.com\/.*|tv\.digg\.com\/diggnation\/.*|tv\.digg\.com\/diggreel\/.*|tv\.digg\.com\/diggdialogg\/.*|www\.trutv\.com\/video\/.*|www\.nzonscreen\.com\/title\/.*|nzonscreen\.com\/title\/.*|app\.wistia\.com\/embed\/medias\/.*|hungrynation\.tv\/.*\/episode\/.*|www\.hungrynation\.tv\/.*\/episode\/.*|hungrynation\.tv\/episode\/.*|www\.hungrynation\.tv\/episode\/.*|indymogul\.com\/.*\/episode\/.*|www\.indymogul\.com\/.*\/episode\/.*|indymogul\.com\/episode\/.*|www\.indymogul\.com\/episode\/.*|channelfrederator\.com\/.*\/episode\/.*|www\.channelfrederator\.com\/.*\/episode\/.*|channelfrederator\.com\/episode\/.*|www\.channelfrederator\.com\/episode\/.*|tmiweekly\.com\/.*\/episode\/.*|www\.tmiweekly\.com\/.*\/episode\/.*|tmiweekly\.com\/episode\/.*|www\.tmiweekly\.com\/episode\/.*|99dollarmusicvideos\.com\/.*\/episode\/.*|www\.99dollarmusicvideos\.com\/.*\/episode\/.*|99dollarmusicvideos\.com\/episode\/.*|www\.99dollarmusicvideos\.com\/episode\/.*|ultrakawaii\.com\/.*\/episode\/.*|www\.ultrakawaii\.com\/.*\/episode\/.*|ultrakawaii\.com\/episode\/.*|www\.ultrakawaii\.com\/episode\/.*|barelypolitical\.com\/.*\/episode\/.*|www\.barelypolitical\.com\/.*\/episode\/.*|barelypolitical\.com\/episode\/.*|www\.barelypolitical\.com\/episode\/.*|barelydigital\.com\/.*\/episode\/.*|www\.barelydigital\.com\/.*\/episode\/.*|barelydigital\.com\/episode\/.*|www\.barelydigital\.com\/episode\/.*|threadbanger\.com\/.*\/episode\/.*|www\.threadbanger\.com\/.*\/episode\/.*|threadbanger\.com\/episode\/.*|www\.threadbanger\.com\/episode\/.*|vodcars\.com\/.*\/episode\/.*|www\.vodcars\.com\/.*\/episode\/.*|vodcars\.com\/episode\/.*|www\.vodcars\.com\/episode\/.*|confreaks\.net\/videos\/.*|www\.confreaks\.net\/videos\/.*|video\.allthingsd\.com\/video\/.*|videos\.nymag\.com\/.*|aniboom\.com\/animation-video\/.*|www\.aniboom\.com\/animation-video\/.*|clipshack\.com\/Clip\.aspx\?.*|www\.clipshack\.com\/Clip\.aspx\?.*|grindtv\.com\/.*\/video\/.*|www\.grindtv\.com\/.*\/video\/.*|ifood\.tv\/recipe\/.*|ifood\.tv\/video\/.*|ifood\.tv\/channel\/user\/.*|www\.ifood\.tv\/recipe\/.*|www\.ifood\.tv\/video\/.*|www\.ifood\.tv\/channel\/user\/.*|logotv\.com\/video\/.*|www\.logotv\.com\/video\/.*|lonelyplanet\.com\/Clip\.aspx\?.*|www\.lonelyplanet\.com\/Clip\.aspx\?.*|streetfire\.net\/video\/.*\.htm.*|www\.streetfire\.net\/video\/.*\.htm.*|trooptube\.tv\/videos\/.*|www\.trooptube\.tv\/videos\/.*|sciencestage\.com\/v\/.*\.html|sciencestage\.com\/a\/.*\.html|www\.sciencestage\.com\/v\/.*\.html|www\.sciencestage\.com\/a\/.*\.html|www\.godtube\.com\/featured\/video\/.*|godtube\.com\/featured\/video\/.*|www\.godtube\.com\/watch\/.*|godtube\.com\/watch\/.*|www\.tangle\.com\/view_video.*|mediamatters\.org\/mmtv\/.*|www\.clikthrough\.com\/theater\/video\/.*|espn\.go\.com\/video\/clip.*|espn\.go\.com\/.*\/story.*|abcnews\.com\/.*\/video\/.*|abcnews\.com\/video\/playerIndex.*|abcnews\.go\.com\/.*\/video\/.*|abcnews\.go\.com\/video\/playerIndex.*|washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.boston\.com\/video.*|boston\.com\/video.*|www\.facebook\.com\/photo\.php.*|www\.facebook\.com\/video\/video\.php.*|www\.facebook\.com\/v\/.*|www\.facebook\.com\/.*\/videos\/.*|cnbc\.com\/id\/.*\?.*video.*|www\.cnbc\.com\/id\/.*\?.*video.*|cnbc\.com\/id\/.*\/play\/1\/video\/.*|www\.cnbc\.com\/id\/.*\/play\/1\/video\/.*|cbsnews\.com\/video\/watch\/.*|www\.google\.com\/buzz\/.*\/.*\/.*|www\.google\.com\/buzz\/.*|www\.google\.com\/profiles\/.*|google\.com\/buzz\/.*\/.*\/.*|google\.com\/buzz\/.*|google\.com\/profiles\/.*|www\.cnn\.com\/video\/.*|edition\.cnn\.com\/video\/.*|money\.cnn\.com\/video\/.*|today\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/ns\/.*|today\.msnbc\.msn\.com\/id\/.*\/ns\/.*|multimedia\.foxsports\.com\/m\/video\/.*\/.*|msn\.foxsports\.com\/video.*|www\.globalpost\.com\/video\/.*|www\.globalpost\.com\/dispatch\/.*|guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|www\.guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|bravotv\.com\/.*\/.*\/videos\/.*|www\.bravotv\.com\/.*\/.*\/videos\/.*|video\.nationalgeographic\.com\/.*\/.*\/.*\.html|dsc\.discovery\.com\/videos\/.*|animal\.discovery\.com\/videos\/.*|health\.discovery\.com\/videos\/.*|investigation\.discovery\.com\/videos\/.*|military\.discovery\.com\/videos\/.*|planetgreen\.discovery\.com\/videos\/.*|science\.discovery\.com\/videos\/.*|tlc\.discovery\.com\/videos\/.*|video\.forbes\.com\/fvn\/.*|vine\.co\/v\/.*|www\.vine\.co\/v\/.*|video\.foxnews\.com\/v\/.*|thinglink\.com\/.*|www\.thinglink\.com\/.*|nbcnews\.com\/.*|www\.nbcnews\.com\/.*|itunes\.apple\.com\/.*)))|((http:\/\/(link\.brightcove\.com\/services\/player\/bcpid.*|bcove\.me\/.*|players\.brightcove\.net\/.*))|(https:\/\/(players\.brightcove\.net\/.*)))/i;
window.app=window.app||{};
app.templates={ajax_error_message:'<h1>Whoops, our bad!!!</h1>       <h3>Something went wrong; we have to reload the page</h3>       <p class="callout"><a class="facebox" href="/feedback/new">Contact us</a> if this keeps happening</p>',link_injection_error_message:"<h1>Something weird is going on!</h1>       <p>We noticed some links on the page that shouldn't be there. It's       possible you have a malicious browser extension installed that is       putting spam on the page.</p>",twitter_embed:Hogan.compile('<blockquote class="twitter-tweet"><a href="{{tweet_url}}"></a></blockquote>'),
cosign_message:function(){var a=null;return function(){a||(a=Hogan.compile('<li class="cosign_message" data-user-id="{{user_id}}" data-uncosign-path="{{uncosign_path}}"><a href="{{artist_url}}" class="cosigner">You</a> cosigned this '+I18n.t("annotation.singular_noun")+' {{#moderator}}<a href="#" class="remove_cosign">Remove</a>{{/moderator}}</li>'));return a}}(),rg_standalone_annotation_embed:function(){var a=null;return function(){a||(a=Hogan.compile('<blockquote class="rg_standalone_container" data-src="//'+
CANONICAL_DOMAIN+"/annotations/{{annotation_id}}/standalone_embed"+("undefined"!==typeof RG_EMBEDDED_PAGE&&RG_EMBEDDED_PAGE?"":"?dark=1")+'"></blockquote>'));return a}}()};window.app=window.app||{};$.expr[":"].inner_text_matches=function(a,b,c){return(new RegExp(c[3],"i")).test($.trim($(a).text()))};
$.extend(window.app,{setup_embedly_pro:function(a,b){var c,d;"function"===typeof a?(d=a,c=$(".embedly_pro:visible")):(d=b||$.noop,c=$(a||".embedly_pro:visible"));c.find("a:inner_text_matches(^https?://)").each(function(){if(app.embedlyURLre.test(this.href))return!0;var a=$(this);a.embedly({key:EMBEDLY_KEY,width:"",secure:!0,query:{secure:"true"},display:function(b){if(b.description&&a.parent().text().trim()===a.text().trim()){var c='<div class="embedly_preview"><img class="thumb" src="'+(b.thumbnail_url||
"")+'">           <div class="text"><a class="title" href="'+b.original_url+'">'+b.title+'</a>           <a class="provider" href="'+b.provider_url+'">'+b.provider_name+'</a>           <div class="description">'+b.description+"</div></div></div>";b.thumbnail_url||(c=$(c).removeClass("has_thumb").find("img.thumb").remove().end().outer_html());a.replaceWith(c)}else a.text(b.title);d()}})})},setup_embedly:function(a,b){var c,d;"function"===typeof a?(d=a,c=$(".embedly:visible")):(d=b||$.noop,c=$(a||".embedly:visible"));
c.find("a:inner_text_matches(^https?://)").each(function(){var a=$(this),b;if(a.parent().is(".embedly_preview"))return!0;if(app.twitterURLre.test(this.href))a.replaceWith($(app.templates.twitter_embed.render({tweet_url:this.href}))),$.getScript("//platform.twitter.com/widgets.js",d);else if(app.rgURLre.test(this.href)&&this.href===a.text()&&!a.closest(".cont-annotations.act-standlone_embed").length)b=app.rgURLre.exec(this.href).pop(),a.replaceWith($(app.templates.rg_standalone_annotation_embed().render({annotation_id:b}))),
$.getScript("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",d);else{if(b=this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))return a.addClass("vidyard_container").attr("data-vidyard-id",b[2]).removeAttr("href"),app.load_vidyard_players(c,!1,d),!0;if(app.embedlyURLre.test(this.href))b=a.closest("[data-embedly-width]").attr("data-embedly-width")||a.parent().width()-10,MOBILE_DEVICE&&(b=a.parent().width()),a.embedly({addImageStyles:!1,className:"embedly_preview",
secure:!0,query:{maxwidth:b,luxe:!MOBILE_DEVICE,secure:"true"},key:EMBEDLY_KEY,width:"",display:function(a){var b=a.html;/soundcloud\.com/.test(b)&&(a.html=b.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),a.height=165);a.display();d()}});else return!0}a.text("Loading embed...")});app.setup_embedly_pro(a,d)}});
window.Modernizr=function(a,b,c){function d(a,b){for(var d in a){var e=a[d];if(!~(""+e).indexOf("-")&&k[e]!==c)return"pfx"==b?e:!0}return!1}function f(a,b,e){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+l.join(f+" ")+f).split(" ");if("string"===typeof b||"undefined"===typeof b)b=d(g,b);else a:{g=(a+" "+n.join(f+" ")+f).split(" "),a=g;for(var h in a)if(f=b[a[h]],f!==c){b=!1===e?a[h]:"function"===typeof f?f.bind(e||b):f;break a}b=!1}return b}var e={},h=b.documentElement,g=b.createElement("modernizr"),
k=g.style,m=" -webkit- -moz- -o- -ms- ".split(" "),l=["Webkit","Moz","O","ms"],n=["webkit","moz","o","ms"],g={},r=[],q=r.slice,t,u=function(a,c,d,e){var f,g,k,l,m=b.createElement("div"),n=b.body,q=n||b.createElement("body");if(parseInt(d,10))for(;d--;)k=b.createElement("div"),k.id=e?e[d]:"modernizr"+(d+1),m.appendChild(k);return f=['&#173;<style id="smodernizr">',a,"</style>"].join(""),m.id="modernizr",(n?m:q).innerHTML+=f,q.appendChild(m),n||(q.style.background="",q.style.overflow="hidden",l=h.style.overflow,
h.style.overflow="hidden",h.appendChild(q)),g=c(m,a),n?m.parentNode.removeChild(m):(q.parentNode.removeChild(q),h.style.overflow=l),!!g},w={}.hasOwnProperty,A;"undefined"===typeof w||"undefined"===typeof w.call?A=function(a,b){return b in a&&"undefined"===typeof a.constructor.prototype[b]}:A=function(a,b){return w.call(a,b)};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=q.call(arguments,1),d=function(){if(this instanceof
d){var e=function(){};e.prototype=b.prototype;var e=new e,f=b.apply(e,c.concat(q.call(arguments)));return Object(f)===f?f:e}return b.apply(a,c.concat(q.call(arguments)))};return d});g.flexbox=function(){return f("flexWrap")};g.flexboxlegacy=function(){return f("boxDirection")};g.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:u(["@media (",m.join("touch-enabled),("),"modernizr){#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),
c};g.history=function(){return!!a.history&&!!history.pushState};g.csstransforms=function(){return!!f("transform")};g.csstransforms3d=function(){var a=!!f("perspective");return a&&"webkitPerspective"in h.style&&u("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a};for(var x in g)A(g,x)&&(t=x.toLowerCase(),e[t]=g[x](),r.push((e[t]?"":"no-")+t));e.addTest=function(a,b){if("object"==typeof a)for(var d in a)A(a,
d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b="function"==typeof b?b():b;h.className+=" "+(b?"":"no-")+a;e[a]=b}return e};k.cssText="";return g=null,function(a,b){function c(){var a=u.elements;return"string"==typeof a?a.split(" "):a}function d(a){var b=r[a[n]];return b||(b={},q++,a[n]=q,r[q]=b),b}function e(a,c,f){c||(c=b);if(t)return c.createElement(a);f||(f=d(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():l.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),
!g.canHaveChildren||k.test(a)||g.tagUrn?g:f.frag.appendChild(g)}function f(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag());a.createElement=function(c){return u.shivMethods?e(c,a,b):b.createElem(c)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(u,
b.frag)}function g(a){a||(a=b);var c=d(a);if(u.shivCSS&&!m&&!c.hasCSS){var e,h=a;e=h.createElement("p");h=h.getElementsByTagName("head")[0]||h.documentElement;e=(e.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",h.insertBefore(e.lastChild,h.firstChild));c.hasCSS=!!e}return t||f(a,c),a}var h=a.html5||{},k=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
l=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m,n="_html5shiv",q=0,r={},t;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>";m="hidden"in a;var c;if(!(c=1==a.childNodes.length)){b.createElement("a");var d=b.createDocumentFragment();c="undefined"==typeof d.cloneNode||"undefined"==typeof d.createDocumentFragment||"undefined"==typeof d.createElement}t=c}catch(e){t=m=!0}})();var u={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
version:"3.7.0",shivCSS:!1!==h.shivCSS,supportsUnknownElements:t,shivMethods:!1!==h.shivMethods,type:"default",shivDocument:g,createElement:e,createDocumentFragment:function(a,e){a||(a=b);if(t)return a.createDocumentFragment();e=e||d(a);for(var f=e.frag.cloneNode(),g=0,h=c(),k=h.length;g<k;g++)f.createElement(h[g]);return f}};a.html5=u;g(b)}(this,b),e._version="2.8.3",e._prefixes=m,e._domPrefixes=n,e._cssomPrefixes=l,e.testProp=function(a){return d([a])},e.testAllProps=f,e.testStyles=u,h.className=
h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+r.join(" ")),e}(this,this.document);
(function(a,b,c){function d(a){return"[object Function]"==t.call(a)}function f(a){return"string"==typeof a}function e(){}function h(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function g(){var a=u.shift();w=1;a?a.t?r(function(){("c"==a.t?Q.injectCss:Q.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),g()):w=0}function k(a,c,d,e,f,k,l){function m(b){if(!t&&h(n.readyState)&&(z.r=t=1,!w&&g(),n.onload=n.onreadystatechange=null,b)){"img"!=a&&r(function(){E.removeChild(n)},50);for(var d in H[c])H[c].hasOwnProperty(d)&&
H[c][d].onload()}}l=l||Q.errorTimeout;var n=b.createElement(a),t=0,A=0,z={t:d,s:c,e:f,a:k,x:l};1===H[c]&&(A=1,H[c]=[]);"object"==a?n.data=c:(n.src=c,n.type=a);n.width=n.height="0";n.onerror=n.onload=n.onreadystatechange=function(){m.call(this,A)};u.splice(e,0,z);"img"!=a&&(A||2===H[c]?(E.insertBefore(n,x?null:q),r(m,l)):H[c].push(n))}function m(a,b,c,d,e){return w=0,b=b||"j",f(a)?k("c"==b?y:F,a,b,this.i++,c,d,e):(u.splice(this.i++,0,a),1==u.length&&g()),this}function l(){var a=Q;return a.loader={load:m,
i:0},a}var n=b.documentElement,r=a.setTimeout,q=b.getElementsByTagName("script")[0],t={}.toString,u=[],w=0,A="MozAppearance"in n.style,x=A&&!!b.createRange().compareNode,E=x?n:q.parentNode,n=a.opera&&"[object Opera]"==t.call(a.opera),n=!!b.attachEvent&&!n,F=A?"object":n?"script":"img",y=n?"script":F,z=Array.isArray||function(a){return"[object Array]"==t.call(a)},J=[],H={},T={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},I,Q;Q=function(a){function b(a){a=a.split("!");var c=J.length,d=
a.pop(),e=a.length,d={url:d,origUrl:d,prefixes:a},f,g,h;for(g=0;g<e;g++)h=a[g].split("="),(f=T[h.shift()])&&(d=f(d,h));for(g=0;g<c;g++)d=J[g](d);return d}function g(a,e,f,h,k){var m=b(a),n=m.autoCallback;m.url.split(".").pop().split("?").shift();m.bypass||(e&&(e=d(e)?e:e[a]||e[h]||e[a.split("/").pop().split("?")[0]]),m.instead?m.instead(a,e,f,h,k):(H[m.url]?m.noexec=!0:H[m.url]=1,f.load(m.url,m.forceCSS||!m.forceJS&&"css"==m.url.split(".").pop().split("?").shift()?"c":c,m.noexec,m.attrs,m.timeout),
(d(e)||d(n))&&f.load(function(){l();e&&e(m.origUrl,k,h);n&&n(m.origUrl,k,h);H[m.url]=2})))}function h(a,b){function c(a,e){if(a)if(f(a))e||(m=function(){var a=[].slice.call(arguments);n.apply(this,a);q()}),g(a,m,b,0,k);else{if(Object(a)===a)for(t in r=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(t)&&(!e&&!--r&&(d(m)?m=function(){var a=[].slice.call(arguments);n.apply(this,a);q()}:m[t]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,
b);q()}}(n[t])),g(a[t],m,b,t,k))}else!e&&q()}var k=!!a.test,l=a.load||a.both,m=a.callback||e,n=m,q=a.complete||e,r,t;c(k?a.yep:a.nope,!!l);l&&c(l)}var k,m,n=this.yepnope.loader;if(f(a))g(a,0,n,0);else if(z(a))for(k=0;k<a.length;k++)m=a[k],f(m)?g(m,0,n,0):z(m)?Q(m):Object(m)===m&&h(m,n);else Object(a)===a&&h(a,n)};Q.addPrefix=function(a,b){T[a]=b};Q.addFilter=function(a){J.push(a)};Q.errorTimeout=1E4;null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",
I=function(){b.removeEventListener("DOMContentLoaded",I,0);b.readyState="complete"},0));a.yepnope=l();a.yepnope.executeStack=g;a.yepnope.injectJs=function(a,c,d,f,k,l){var m=b.createElement("script"),n,t;f=f||Q.errorTimeout;m.src=a;for(t in d)m.setAttribute(t,d[t]);c=l?g:c||e;m.onreadystatechange=m.onload=function(){!n&&h(m.readyState)&&(n=1,c(),m.onload=m.onreadystatechange=null)};r(function(){n||(n=1,c(1))},f);k?m.onload():q.parentNode.insertBefore(m,q)};a.yepnope.injectCss=function(a,c,d,f,h,k){f=
b.createElement("link");var l;c=k?g:c||e;f.href=a;f.rel="stylesheet";f.type="text/css";for(l in d)f.setAttribute(l,d[l]);h||(q.parentNode.insertBefore(f,q),r(c,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};Modernizr.addTest("cssfilters",function(){var a=document.createElement("div");return a.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!a.style.length&&(void 0===document.documentMode||9<document.documentMode)});
(function(a,b){function c(b,c){var e=function(h){if(!c.is(":not(:visible)"))if(a(h.target).closest(c).length)a(document).one("click",e);else return b.toggle_target(!1),!a(h.target).is_toggle_target_control_for(c)};a(document).one("click",e)}a.fn.scroll_lock=function(){return a(this).on("DOMMouseScroll mousewheel",function(b){var c=a(this),e=this.scrollTop,h=this.scrollHeight,g=c.height(),k="DOMMouseScroll"===b.type?-40*b.originalEvent.detail:b.originalEvent.wheelDelta,m=0<k,l=function(){b.stopPropagation();
b.preventDefault();return b.returnValue=!1};if(!m&&-k>h-g-e)return c.scrollTop(h),l();if(m&&k>e)return c.scrollTop(0),l()})};a.fn.scroll_release=function(){return a(this).off("DOMMouseScroll mousewheel")};a.fn.outer_html=function(){return this[0].outerHTML};a.fn.unique_items_in_array=function(){var b=[];a.each(this,function(c,e){-1===a.inArray(e,b)&&b.push(e)});return b};a.fn.force_reflow=function(){this[0].offsetHeight;return this};a.fn.is_scrolled_into_view=function(){return this.is_scrolled_vertically_into_view()&&
this.is_scrolled_horizontally_into_view()};a.fn.is_scrolled_vertically_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.top&&a.bottom<=window.innerHeight};a.fn.is_scrolled_horizontally_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.left&&a.right<=window.innerWidth};a.fn.scroll_bottom=function(){var a=this.prop("innerHeight");if(void 0!==a)return a+this.scrollTop()};a.fn.get_bounding_client_rect=function(){for(var a=this[0].getBoundingClientRect(),a={top:a.top,
bottom:a.bottom,left:a.left,right:a.right},b=1;b<this.length;b++){var c=this[b].getBoundingClientRect();a.top=Math.min(a.top,c.top);a.bottom=Math.max(a.bottom,c.bottom);a.left=Math.min(a.left,c.left);a.right=Math.max(a.right,c.right)}a.height=a.bottom-a.top;a.width=a.right-a.left;return a};a.fn.closest_block_level_element=function(){return this.parents().filter(function(){return"block"===a(this).css("display")}).first()};a.fn.is_block_level_element=function(){var b=a(this).css("display");return void 0===
b?!1:!("inline"===b||"none"===b)};a.fn.on_screen=function(b){a(this).waypoint(b,{offset:"150%",triggerOnce:!0})};a.fn.auto_load_more_on_scroll=function(){a(this).scroll(function(){a.doTimeout("context_scroll",250,function(){Waypoint.refreshAll();var b=a("a.more:visible:not(.loading, .no_auto_more a)");b.on_screen(function(){b.click()})})});return this};a.fn.scrollToCenterOfScreen=function(b){b=b||{};if(!this.length)return this;var c=a(b.scroller||(MOBILE_DEVICE?"#container":document)),e=a(window).height(),
h=this.height();c.scrollTo(this,{offset:h/2-e/2,onAfter:b.onAfter||function(){}});return this};a.fn.retainingScrollPosition=function(a,b){if(!a.length)return b(),this;var c=a.offset().top,h=this.scrollTop();b();var g=a.offset().top;if(g===c)return this;this.scrollTop(h+(g-c));return this};a.fn.reloadTooltip=function(){var a;try{a=this.qtip("api")}catch(b){return this}a.updateContent("Loading...");a.loadContent(a.options.content.url);return this};a.fn.reset_editable=function(){this.length&&"function"===
typeof this[0].reset&&this[0].reset()};a.fn.counter_value=function(){return parseInt(this.text().replace(/[^0-9]/g,""))};a.fn.change_counter_value_by=function(a){this.text(this.text().replace(/[0-9]+/,this.counter_value()+a))};a.fn.detect=function(a){var b=null;this.each(function(){if(a.call(this))return b=this,!1});return b};a.fn.insertAtCursor=function(a){return this.each(function(){if(this.selectionStart||"0"===this.selectionStart){var b=this.selectionStart,c=this.selectionEnd,h=this.scrollTop;
this.value=this.value.substring(0,b)+a+this.value.substring(c,this.value.length);this.focus();this.selectionStart=b+a.length;this.selectionEnd=b+a.length;this.scrollTop=h}else this.value+=a,this.focus()})};a.fn.submitWithAjaxQueue=function(b){var c=(b||{}).complete||a.noop;return this.each(function(){var e=a(this);app.ajaxQueue.add(a.extend({type:this.method,url:this.action,data:e.serialize()},b,{complete:function(){e.trigger("ajax:complete");c.apply(this,arguments)}}))})};a.referents_for_this_annotation=
{settings:{selector:function(a){return'a[data-id="'+a+'"]'},attribute:"data-id"}};a.fn.referents_for_this_annotation=function(){var b=this.attr(a.referents_for_this_annotation.settings.attribute),c=a.referents_for_this_annotation.settings.selector;return void 0===b?this:a(c(b))};a.fn.hydrate_diff=function(){a(this).each(function(){var b=a(this),c=new diff_match_patch,e=c.diff_main(b.data("before"),b.data("after"));c.diff_cleanupSemantic(e);b.html(c.diff_prettyHtml(e).replace(/&para;/g,""))});return this};
a.fn.chosen_auto_choose=function(b){var c=a(this),e=c.find('option[value="'+b+'"]');c.find("option.auto-selected").removeAttr("selected").removeClass("auto-selected");e.is(":selected")||e.attr("selected",!0).addClass("auto-selected");setTimeout(function(){var a=c.parent().find("ul.chzn-choices"),b=a.parent().attr("id");a.find("#"+b+"_c_"+e.index()).addClass("locked").siblings().removeClass("locked")},0);c.trigger("liszt:updated")};a.fn.toggle_target=function(b){var f=a(this).toggleClass("pressed",
b),e=f.attr("data-relative")?f.find(f.attr("data-target")):a(f.attr("data-target")),h=f.attr("data-show-with-class");h?e.toggleClass(h,b):e.toggle(b);(b=e.is(":visible"))&&app.process_auto_load_containers&&app.process_auto_load_containers();void 0!==f.attr("data-hide-on-blur")&&c(f,e);f.attr("data-hide-siblings")&&(e.is(":visible")?(e.siblings(":visible").addClass("toggle_target_hidden_sibling"),h?e.siblings().removeClass(h):e.siblings(":visible").hide()):e.siblings().removeClass("toggle_target_hidden_sibling"),
f.siblings(".toggle_target").removeClass("pressed"));h=f.attr("data-toggles-to-hide");void 0!==h&&b&&a(h).not(f).toggle_target(!1);(f=f.attr("data-focus"))&&a(f).focus();e.trigger(b?"toggle_target:visible":"toggle_target:hidden")};a.fn.is_toggle_target_control_for=function(b){var c=a(this).closest(".toggle_target");return c.length&&b.is(c.attr("data-target"))};a.fn.dirtyable=function(){if("undefined"===typeof this.data("dirty")){var b=this;this.data("dirty",!1);this.on("dirtyable:changed",function(a,
c){b.data("dirty",c).toggleClass("dirty",c)});this.on("input propertychange",function(){b.trigger("dirtyable:changed",!!b.val())});this.each(function(){var b=a(this),c=b.closest("form")[0];if(c){var d="function"===typeof c.onsubmit?c.onsubmit.bind(c):function(){return!0};c.onsubmit=function(){b.trigger("dirtyable:changed",!1);return d()};var g="function"===typeof c.onreset?c.onreset.bind(c):function(){return!0};c.onreset=function(){b.trigger("dirtyable:changed",!1);return g()}}})}};a.fn.values_for_attribute=
function(b){return a.map(a(this),function(c){return a(c).attr(b)})};a.when_all=function(b){return a.when.apply(a,b)};a.fn.toggle_boolean_attribute=function(b){var c=a(this);c.attr(b)?c.removeAttr(b):c.attr(b,!0)};a.trim=function(a){return(a||"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.html_to_text=function(b){return a("<div>").prop("innerHTML",b).text()};a.capitalize_first_letter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};a.hyphen_compatible_titleize=function(a){return a.replace(/\b('?[a-z])/g,
function(a){return a.toUpperCase()})};a.trim_to_length=function(b,c){return b.length>c?a.trim(b).substring(0,c).split(" ").slice(0,-1).join(" ")+"...":b};a.fn.unwrap_contents=function(){return a(this).contents().unwrap()};a.fn.acts_like_input=function(){var b=a(this);return b.is(":input")||b.prop("isContentEditable")};a.fn.cache_iframe_contents=function(){this.each(function(){this.src||this.srcdoc||!this.contentWindow||(this.srcdoc=this.contentWindow.document.documentElement.outerHTML)})};a.fn.capture=
function(b){var c,e;2===arguments.length?e=arguments[1]:(c=arguments[1],e=arguments[2]);var h=function(b,d){var h=b.originalEvent,l;if(l=c?a(h.target).closest(c)[0]:d)h=a.extend(a.event.fix(h),{currentTarget:l,delegateTarget:d,target:h.target}),!1===e.call(l,h)&&(h.stopPropagation(),h.preventDefault())};this.each(function(){var c=a(this),e=c.data("_capture_event_listener");e||(e=a({}),c.data("_capture_event_listener",e));e.prop(b)||(e.prop(b,!0),this.addEventListener(b,function(b){e.triggerHandler(a.Event(b),
this)},!0));e.on(b,h)});return this};void 0!==a.facebox&&(a.facebox_then_reload=function(b,c){a.facebox(b);a(document).bind("close.facebox",function(){(c||PRODUCTION_ENV)&&window.location.reload(!0)})});a.ajax_with_retry=function(b){b=a.extend({},{retry_limit:2,type:"get",dataType:"html",success:function(){},data:{}},b);a.ajax({url:b.url,type:b.type,data:b.data,dataType:b.dataType,contentType:b.contentType,try_count:0,retry_limit:b.retry_limit,success:b.success,error:function(){this.try_count++;this.try_count<=
this.retry_limit&&a.ajax(this)}})};a.event_emitter={ensure_jquery_wrapper:function(){return this.jquery_wrapper||(this.jquery_wrapper=a(this))},emit:function(a,b){this.ensure_jquery_wrapper().triggerHandler(a,b)},once:function(a,b){this.ensure_jquery_wrapper().one(a,b)},on:function(a,b){this.ensure_jquery_wrapper().bind(a,b)},off:function(a,b){this.ensure_jquery_wrapper().unbind(a,b)}};a.get_selection=function(){var b=(window.getSelection||document.getSelection||a.noop)();if("undefined"!==typeof b&&
b.rangeCount&&!b.isCollapsed)return b};a.get_selection_range=function(){return getSelection().getRangeAt(0)};a.on_body_available=function(){var b=a.Deferred();if(document.body)b.resolve();else{var c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!c)return a;(new c(function(a,c){document.body&&(c.disconnect(),b.resolve())})).observe(document.documentElement,{childList:!0})}c=b.promise();return c.done.bind(c)}();a(function(){var c=function(){var b=a.get_selection();
if(b)return a("<div>").append(b.getRangeAt(0).cloneContents()).html()};a(document).on("mouseup",function(){setTimeout(function(){var b=a.get_selection();if(b)for(var c=0;c<b.rangeCount;c++){for(var d=b.getRangeAt(c),f=d.commonAncestorContainer;f.nodeType!==Node.ELEMENT_NODE;)f=f.parentNode;var m=a.Event("textselected",{selection:b,range:d,triggering_event:m});a(f).trigger(m)}},0)});if(b.touch){var f=function(b){c()&&a(b.target).trigger("textselected",{triggering_event:b});window.setImmediate(function(){a(document).one("selectionchange",
f)})};a(document).one("selectionchange",f)}})})(jQuery,Modernizr);
(function(a,b){"function"===typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"===typeof exports?module.exports=b(require("jquery")):b(jQuery)})(this,function(a){var b,c,d,f,e,h,g,k,m,l=[].slice,n=function(a,b){function c(){this.constructor=a}for(var d in b)r.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},r={}.hasOwnProperty;c=function(){function b(c){this.currentFlag=null;this.controllers={};this.aliasMaps={};this.$inputor=
a(c);this.setupRootElement();this.listen()}b.prototype.createContainer=function(b){var c;null!=(c=this.$el)&&c.remove();return a(b.body).append(this.$el=a("<div class='atwho-container'></div>"))};b.prototype.setupRootElement=function(b,c){null==c&&(c=!1);if(b)this.window=b.contentWindow,this.document=b.contentDocument||this.window.document,this.iframe=b;else{this.document=this.$inputor[0].ownerDocument;this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(d){if(this.iframe=
null,a.fn.atwho.debug)throw Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+d);}}return this.createContainer((this.iframeAsRoot=c)?this.document:document)};b.prototype.controller=function(a){var b,c,d,e;if(this.aliasMaps[a])c=this.controllers[this.aliasMaps[a]];else for(d in e=this.controllers,e)if(b=e[d],d===a){c=b;break}return c?c:this.controllers[this.currentFlag]};b.prototype.setContextFor=function(a){this.currentFlag=a;return this};b.prototype.reg=
function(a,b){var c,d;d=(c=this.controllers)[a]||(c[a]=this.$inputor.is("[contentEditable]")?new e(this,a):new k(this,a));b.alias&&(this.aliasMaps[b.alias]=a);d.init(b);return this};b.prototype.listen=function(){return this.$inputor.on("compositionstart",function(a){return function(b){var c;null!=(c=a.controller())&&c.view.hide();a.isComposing=!0;return null}}(this)).on("compositionend",function(a){return function(b){a.isComposing=!1;return null}}(this)).on("keyup.atwhoInner",function(a){return function(b){return a.onKeyup(b)}}(this)).on("keydown.atwhoInner",
function(a){return function(b){return a.onKeydown(b)}}(this)).on("blur.atwhoInner",function(a){return function(b){var c;if(c=a.controller())return c.expectedQueryCBId=null,c.view.hide(b,c.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(a){return function(b){return a.dispatch(b)}}(this)).on("scroll.atwhoInner",function(a){return function(){var b;b=a.$inputor.scrollTop();return function(c){var d,e;d=c.target.scrollTop;b!==d&&null!=(e=a.controller())&&e.view.hide(c);b=d;return!0}}}(this)())};
b.prototype.shutdown=function(){var a,b,c;c=this.controllers;for(a in c)b=c[a],b.destroy(),delete this.controllers[a];this.$inputor.off(".atwhoInner");return this.$el.remove()};b.prototype.dispatch=function(a){var b,c,d,e;d=this.controllers;e=[];for(b in d)c=d[b],e.push(c.lookUp(a));return e};b.prototype.onKeyup=function(b){var c;switch(b.keyCode){case h.ESC:b.preventDefault();null!=(c=this.controller())&&c.view.hide();break;case h.DOWN:case h.UP:case h.CTRL:case h.ENTER:a.noop();break;case h.P:case h.N:b.ctrlKey||
this.dispatch(b);break;default:this.dispatch(b)}};b.prototype.onKeydown=function(b){var c,d;if((d=null!=(c=this.controller())?c.view:void 0)&&d.visible())switch(b.keyCode){case h.ESC:b.preventDefault();d.hide(b);break;case h.UP:b.preventDefault();d.prev();break;case h.DOWN:b.preventDefault();d.next();break;case h.P:if(!b.ctrlKey)break;b.preventDefault();d.prev();break;case h.N:if(!b.ctrlKey)break;b.preventDefault();d.next();break;case h.TAB:case h.ENTER:case h.SPACE:if(!d.visible())break;if(!this.controller().getOpt("spaceSelectsMatch")&&
b.keyCode===h.SPACE)break;if(!this.controller().getOpt("tabSelectsMatch")&&b.keyCode===h.TAB)break;d.highlighted()?(b.preventDefault(),d.choose(b)):d.hide(b);break;default:a.noop()}};return b}();d=function(){function b(c,d){this.app=c;this.at=d;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||this.uid();this.query=this.setting=this.expectedQueryCBId=null;this.pos=0;this.range=null;0===(this.$el=a("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=a("<div id='atwho-ground-"+
this.id+"'></div>"));this.model=new g(this);this.view=new m(this)}b.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()};b.prototype.init=function(b){this.setting=a.extend({},this.setting||a.fn.atwho["default"],b);this.view.init();return this.model.reload(this.setting.data)};b.prototype.destroy=function(){this.trigger("beforeDestroy");this.model.destroy();this.view.destroy();return this.$el.remove()};b.prototype.callDefault=function(){var b,c;c=
arguments[0];b=2<=arguments.length?l.call(arguments,1):[];try{return f[c].apply(this,b)}catch(d){return b=d,a.error(b+" Or maybe At.js doesn't have function "+c)}};b.prototype.trigger=function(a,b){var c;null==b&&(b=[]);b.push(this);c=this.getOpt("alias");return this.$inputor.trigger(c?a+"-"+c+".atwho":a+".atwho",b)};b.prototype.callbacks=function(a){return this.getOpt("callbacks")[a]||f[a]};b.prototype.getOpt=function(a,b){try{return this.setting[a]}catch(c){return null}};b.prototype.insertContentFor=
function(b){var c;c=this.getOpt("insertTpl");b=a.extend({},b.data("item-data"),{"atwho-at":this.at});return this.callbacks("tplEval").call(this,c,b,"onInsert")};b.prototype.renderView=function(a){var b;b=this.getOpt("searchKey");a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,1001),b);return this.view.render(a.slice(0,this.getOpt("limit")))};b.arrayToDefaultHash=function(b){var c,d,e,f;if(!a.isArray(b))return b;f=[];c=0;for(e=b.length;c<e;c++)d=b[c],a.isPlainObject(d)?f.push(d):f.push({name:d});
return f};b.prototype.lookUp=function(a){var b;if(!a||"click"!==a.type||this.getOpt("lookUpOnClick"))if(!this.getOpt("suspendOnComposing")||!this.app.isComposing){a=this.catchQuery(a);if(!a)return this.expectedQueryCBId=null,a;this.app.setContextFor(this.at);(b=this.getOpt("delay"))?this._delayLookUp(a,b):this._lookUp(a);return a}};b.prototype._delayLookUp=function(a,b){var c,d;c=Date.now?Date.now():(new Date).getTime();this.previousCallTime||(this.previousCallTime=c);d=b-(c-this.previousCallTime);
if(0<d&&d<b)return this.previousCallTime=c,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(b){return function(){b.previousCallTime=0;b.delayedCallTimeout=null;return b._lookUp(a)}}(this),b);this._stopDelayedCall();this.previousCallTime!==c&&(this.previousCallTime=0);return this._lookUp(a)};b.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null};b.prototype._generateQueryCBId=function(){return{}};
b.prototype._lookUp=function(b){this.expectedQueryCBId=this._generateQueryCBId();return this.model.query(b.text,a.proxy(function(a,b){if(a===this.expectedQueryCBId)return b&&0<b.length?this.renderView(this.constructor.arrayToDefaultHash(b)):this.view.hide()},this,this.expectedQueryCBId))};return b}();k=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}n(c,b);c.prototype.catchQuery=function(){var a,b,c;b=this.$inputor.val();a=this.$inputor.caret("pos",{iframe:this.app.iframe});
b=b.slice(0,a);b=this.callbacks("matcher").call(this,this.at,b,this.getOpt("startWithSpace"));c="string"===typeof b;if(!(c&&b.length<this.getOpt("minLen",0)))return c&&b.length<=this.getOpt("maxLen",20)?(c=a-b.length,a=c+b.length,this.pos=c,b={text:b,headPos:c,endPos:a},this.trigger("matched",[this.at,b.text])):(b=null,this.view.hide()),this.query=b};c.prototype.rect=function(){var b,c;if(b=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&
(c=a(this.app.iframe).offset(),b.left+=c.left,b.top+=c.top),c=this.app.document.selection?0:2,{left:b.left,top:b.top,bottom:b.top+b.height+c}};c.prototype.insert=function(a,b){var c,d,e,f;c=this.$inputor;d=c.val();e=d.slice(0,Math.max(this.query.headPos-this.at.length,0));f=""===(f=this.getOpt("suffix"))?f:f||" ";a+=f;d=""+e+a+d.slice(this.query.endPos||0);c.val(d);c.caret("pos",e.length+a.length,{iframe:this.app.iframe});c.is(":focus")||c.focus();return c.change()};return c}(d);e=function(b){function c(){return c.__super__.constructor.apply(this,
arguments)}n(c,b);c.prototype._getRange=function(){var a;a=this.app.window.getSelection();if(0<a.rangeCount)return a.getRangeAt(0)};c.prototype._setRange=function(b,c,d){null==d&&(d=this._getRange());if(d)return c=a(c)[0],"after"===b?(d.setEndAfter(c),d.setStartAfter(c)):(d.setEndBefore(c),d.setStartBefore(c)),d.collapse(!1),this._clearRange(d)};c.prototype._clearRange=function(a){var b;null==a&&(a=this._getRange());b=this.app.window.getSelection();if(null==this.ctrl_a_pressed)return b.removeAllRanges(),
b.addRange(a)};c.prototype._movingEvent=function(a){var b;return"click"===a.type||(b=a.which)===h.RIGHT||b===h.LEFT||b===h.UP||b===h.DOWN};c.prototype._unwrap=function(b){var c;b=a(b).unwrap().get(0);(c=b.nextSibling)&&c.nodeValue&&(b.nodeValue+=c.nodeValue,a(c).remove());return b};c.prototype.catchQuery=function(b){var c,d,e,f,g,k;if((k=this._getRange())&&k.collapsed)if(b.which===h.ENTER)(d=a(k.startContainer).closest(".atwho-query")).contents().unwrap(),d.is(":empty")&&d.remove(),(d=a(".atwho-query",
this.app.document)).text(d.text()).contents().last().unwrap(),this._clearRange();else{if(/firefox/i.test(navigator.userAgent)){if(a(k.startContainer).is(this.$inputor)){this._clearRange();return}b.which===h.BACKSPACE&&k.startContainer.nodeType===document.ELEMENT_NODE&&0<=(g=k.startOffset-1)?(c=k.cloneRange(),c.setStart(k.startContainer,g),a(c.cloneContents()).contents().last().is(".atwho-inserted")&&(c=a(k.startContainer).contents().get(g),this._setRange("after",a(c).contents().last()))):b.which===
h.LEFT&&k.startContainer.nodeType===document.TEXT_NODE&&(c=a(k.startContainer.previousSibling),c.is(".atwho-inserted")&&0===k.startOffset&&this._setRange("after",c.contents().last()))}a(k.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query");0<(d=a(".atwho-query",this.app.document)).length&&d.is(":empty")&&0===d.text().length&&d.remove();this._movingEvent(b)||d.removeClass("atwho-inserted");if(0<d.length)switch(b.which){case h.LEFT:this._setRange("before",
d.get(0),k);d.removeClass("atwho-query");return;case h.RIGHT:this._setRange("after",d.get(0).nextSibling,k);d.removeClass("atwho-query");return}0<d.length&&(f=d.attr("data-atwho-at-query"))&&(d.empty().html(f).attr("data-atwho-at-query",null),this._setRange("after",d.get(0),k));c=k.cloneRange();c.setStart(k.startContainer,0);c=this.callbacks("matcher").call(this,this.at,c.toString(),this.getOpt("startWithSpace"));f="string"===typeof c;0===d.length&&f&&0<=(e=k.startOffset-this.at.length-c.length)&&
(k.setStart(k.startContainer,e),d=a("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),k.surroundContents(d.get(0)),e=d.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(k.setStart(e,e.length),k.setEnd(e,e.length),this._clearRange(k)):this._setRange("after",e,k));if(!(f&&c.length<this.getOpt("minLen",0))){if(f&&c.length<=this.getOpt("maxLen",20))return b={text:c,el:d},this.trigger("matched",[this.at,b.text]),this.query=b;this.view.hide();
this.query={el:d};0<=d.text().indexOf(this.at)&&(this._movingEvent(b)&&d.hasClass("atwho-inserted")?d.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,d)&&this._setRange("after",this._unwrap(d.text(d.text()).contents().first())));return null}}};c.prototype.rect=function(){var b,c;c=this.query.el.offset();this.app.iframe&&!this.app.iframeAsRoot&&(b=a(this.app.iframe).offset(),c.left+=b.left-this.$inputor.scrollLeft(),c.top+=b.top-this.$inputor.scrollTop());c.bottom=
c.top+this.query.el.height();return c};c.prototype.insert=function(a,b){var c,d;d=""===(d=this.getOpt("suffix"))?d:d||"\u00a0";c=b.data("item-data");this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(a).attr("data-atwho-at-query",""+c["atwho-at"]+this.query.text);if(c=this._getRange())c.setEndAfter(this.query.el[0]),c.collapse(!1),c.insertNode(d=this.app.document.createTextNode("\u2060"+d)),this._setRange("after",d,c);this.$inputor.is(":focus")||this.$inputor.focus();return this.$inputor.change()};
return c}(d);g=function(){function b(a){this.context=a;this.at=this.context.at;this.storage=this.context.$inputor}b.prototype.destroy=function(){return this.storage.data(this.at,null)};b.prototype.saved=function(){return 0<this.fetch()};b.prototype.query=function(a,b){var c,d;d=this.fetch();c=this.context.getOpt("searchKey");d=this.context.callbacks("filter").call(this.context,a,d,c)||[];c=this.context.callbacks("remoteFilter");return 0<d.length||!c&&0===d.length?b(d):c.call(this.context,a,b)};b.prototype.fetch=
function(){return this.storage.data(this.at)||[]};b.prototype.save=function(a){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,a||[]))};b.prototype.load=function(a){if(!this.saved()&&a)return this._load(a)};b.prototype.reload=function(a){return this._load(a)};b.prototype._load=function(b){return"string"===typeof b?a.ajax(b,{dataType:"json"}).done(function(a){return function(b){return a.save(b)}}(this)):this.save(b)};return b}();m=function(){function b(c){this.context=
c;this.$el=a("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>");this.timeoutID=null;this.context.$el.append(this.$el);this.bindEvent()}b.prototype.init=function(){var a;a=this.context.getOpt("alias")||this.context.at.charCodeAt(0);return this.$el.attr({id:"at-view-"+a})};b.prototype.destroy=function(){return this.$el.remove()};b.prototype.bindEvent=function(){var b;b=this.$el.find("ul");return b.on("mouseenter.atwho-view","li",function(c){b.find(".cur").removeClass("cur");return a(c.currentTarget).addClass("cur")}).on("click.atwho-view",
"li",function(c){return function(d){b.find(".cur").removeClass("cur");a(d.currentTarget).addClass("cur");c.choose(d);return d.preventDefault()}}(this))};b.prototype.visible=function(){return this.$el.is(":visible")};b.prototype.highlighted=function(){return 0<this.$el.find(".cur").length};b.prototype.choose=function(a){var b,c;(b=this.$el.find(".cur")).length&&(c=this.context.insertContentFor(b),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,
c,b),b),this.context.trigger("inserted",[b,a]),this.hide(a));if(this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0};b.prototype.reposition=function(b){var c,d;c=this.context.app.iframeAsRoot?this.context.app.window:window;b.bottom+this.$el.height()-a(c).scrollTop()>a(c).height()&&(b.bottom=b.top-this.$el.height());b.left>(c=a(c).width()-this.$el.width()-5)&&(b.left=c);b={left:b.left,top:b.bottom};null!=(d=this.context.callbacks("beforeReposition"))&&d.call(this.context,b);this.$el.offset(b);
return this.context.trigger("reposition",[b])};b.prototype.next=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.next();b.length||(b=this.$el.find("li:first"));b.addClass("cur");return this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))};b.prototype.prev=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.prev();b.length||(b=this.$el.find("li:last"));b.addClass("cur");return this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))};
b.prototype.scrollTop=function(a){var b;return(b=this.context.getOpt("scrollDuration"))?this.$el.animate({scrollTop:a},b):this.$el.scrollTop(a)};b.prototype.show=function(){var a;if(this.stopShowing)this.stopShowing=!1;else if(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),a=this.context.rect())return this.reposition(a)};b.prototype.hide=function(a,b){var c;if(this.visible()){if(isNaN(b))return this.$el.hide(),this.context.trigger("hidden",[a]);c=function(a){return function(){return a.hide()}}(this);
clearTimeout(this.timeoutID);return this.timeoutID=setTimeout(c,b)}};b.prototype.render=function(b){var c,d,e,f,g,h;if(a.isArray(b)&&0<b.length){this.$el.find("ul").empty();d=this.$el.find("ul");h=this.context.getOpt("displayTpl");e=0;for(g=b.length;e<g;e++)f=b[e],f=a.extend({},f,{"atwho-at":this.context.at}),c=this.context.callbacks("tplEval").call(this.context,h,f,"onDisplay"),c=a(this.context.callbacks("highlighter").call(this.context,c,this.context.query.text)),c.data("item-data",f),d.append(c);
this.show();if(this.context.getOpt("highlightFirst"))return d.find("li:first").addClass("cur")}else this.hide()};return b}();h={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32};f={beforeSave:function(a){return d.arrayToDefaultHash(a)},matcher:function(a,b,c,d){var e;a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");c&&(a="(?:^|\\s)"+a);c=decodeURI("%C3%80");e=decodeURI("%C3%BF");return(a=(new RegExp(a+"([A-Za-z"+c+"-"+e+"0-9_"+
(d?" ":"")+"'.+-]*)$|"+a+"([^\\x00-\\xff]*)$","gi")).exec(b))?a[2]||a[1]:null},filter:function(a,b,c){var d,e,f,g;d=[];e=0;for(g=b.length;e<g;e++)f=b[e],~(new String(f[c])).toLowerCase().indexOf(a.toLowerCase())&&d.push(f);return d},remoteFilter:null,sorter:function(a,b,c){var d,e,f,g;if(!a)return b;d=[];e=0;for(g=b.length;e<g;e++)f=b[e],f.atwho_order=(new String(f[c])).toLowerCase().indexOf(a.toLowerCase()),-1<f.atwho_order&&d.push(f);return d.sort(function(a,b){return a.atwho_order-b.atwho_order})},
tplEval:function(a,b){var c;c=a;try{return"string"!==typeof a&&(c=a(b)),c.replace(/\$\{([^\}]*)\}/g,function(a,c,d){return b[c]})}catch(d){return""}},highlighter:function(a,b){var c;if(!b)return a;c=new RegExp(">\\s*(\\w*?)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig");return a.replace(c,function(a,b,c,d){return"> "+b+"<strong>"+c+"</strong>"+d+" <"})},beforeInsert:function(a,b){return a},beforeReposition:function(a){return a},afterMatchFailed:function(a,b){}};b={load:function(a,b){var c;if(c=this.controller(a))return c.model.load(b)},
isSelecting:function(){var a;return!(null==(a=this.controller())||!a.view.visible())},hide:function(){var a;return null!=(a=this.controller())?a.view.hide():void 0},reposition:function(){var a;if(a=this.controller())return a.view.reposition(a.rect())},setIframe:function(a,b){this.setupRootElement(a,b);return null},run:function(){return this.dispatch()},destroy:function(){this.shutdown();return this.$inputor.data("atwho",null)}};a.fn.atwho=function(d){var e,f;e=arguments;f=null;this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var g,
h;(h=(g=a(this)).data("atwho"))||g.data("atwho",h=new c(this));return"object"!==typeof d&&d?b[d]&&h?f=b[d].apply(h,Array.prototype.slice.call(e,1)):a.error("Method "+d+" does not exist on jQuery.atwho"):h.reg(d.at,d)});return null!=f?f:this};a.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:f,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,
delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0};a.fn.atwho.debug=!1});$(document).on("click",".atwho-container",function(a){a.stopPropagation()});
(function(a,b){"function"===typeof define&&define.amd?define(["jquery"],function(c){return a.returnExportsGlobal=b(c)}):"object"===typeof exports?module.exports=b(require("jquery")):b(jQuery)})(this,function(a){var b,c,d,f,e,h,g,k;b=function(){function b(a){this.$inputor=a;this.domInputor=this.$inputor[0]}b.prototype.setPos=function(a){return this.domInputor};b.prototype.getIEPosition=function(){return this.getPosition()};b.prototype.getPosition=function(){var a,b;b=this.getOffset();a=this.$inputor.offset();
b.left-=a.left;b.top-=a.top;return b};b.prototype.getOldIEPos=function(){var a,b;b=h.selection.createRange();a=h.body.createTextRange();a.moveToElementText(this.domInputor);a.setEndPoint("EndToEnd",b);return a.text.length};b.prototype.getPos=function(){var a,b;if(b=this.range())return a=b.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(b.endContainer,b.endOffset),b=a.toString().length,a.detach(),b;if(h.selection)return this.getOldIEPos()};b.prototype.getOldIEOffset=function(){var a;a=
h.selection.createRange().duplicate();a.moveStart("character",-1);a=a.getBoundingClientRect();return{height:a.bottom-a.top,left:a.left,top:a.top}};b.prototype.getOffset=function(b){var c,d;g.getSelection&&(d=this.range())?(0<d.endOffset-1&&d.endContainer===!this.domInputor&&(b=d.cloneRange(),b.setStart(d.endContainer,d.endOffset-1),b.setEnd(d.endContainer,d.endOffset),c=b.getBoundingClientRect(),c={height:c.height,left:c.left+c.width,top:c.top},b.detach()),c&&0!==(null!=c?c.height:void 0)||(b=d.cloneRange(),
d=a(h.createTextNode("|")),b.insertNode(d[0]),b.selectNode(d[0]),c=b.getBoundingClientRect(),c={height:c.height,left:c.left,top:c.top},d.remove(),b.detach())):h.selection&&(c=this.getOldIEOffset());c&&(c.top+=a(g).scrollTop(),c.left+=a(g).scrollLeft());return c};b.prototype.range=function(){var a;if(g.getSelection)return a=g.getSelection(),0<a.rangeCount?a.getRangeAt(0):null};return b}();c=function(){function b(a){this.$inputor=a;this.domInputor=this.$inputor[0]}b.prototype.getIEPos=function(){var a,
b,c,d;a=this.domInputor;c=h.selection.createRange();b=0;c&&c.parentElement()===a&&(b=a.value.replace(/\r\n/g,"\n"),b=b.length,d=a.createTextRange(),d.moveToBookmark(c.getBookmark()),a=a.createTextRange(),a.collapse(!1),b=-1<d.compareEndPoints("StartToEnd",a)?b:-d.moveStart("character",-b));return b};b.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart};b.prototype.setPos=function(a){var b,c;b=this.domInputor;h.selection?(c=b.createTextRange(),c.move("character",
a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a);return b};b.prototype.getIEOffset=function(a){var b;b=this.domInputor.createTextRange();a||(a=this.getPos());b.move("character",a);return{left:b.boundingLeft,top:b.boundingTop,height:b.boundingHeight}};b.prototype.getOffset=function(b){var c,d;c=this.$inputor;if(h.selection)return d=this.getIEOffset(b),d.top+=a(g).scrollTop()+c.scrollTop(),d.left+=a(g).scrollLeft()+c.scrollLeft(),d;d=c.offset();b=this.getPosition(b);return{left:d.left+b.left-
c.scrollLeft(),top:d.top+b.top-c.scrollTop(),height:b.height}};b.prototype.getPosition=function(a){var b,c,e;b=this.$inputor;c=function(a){a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>");/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\s/g,"&nbsp;"));return a};void 0===a&&(a=this.getPos());e=b.val().slice(0,a);a=b.val().slice(a);e="<span style='position: relative; display: inline;'>"+c(e)+"</span>";e=e+"<span id='caret' style='position: relative; display: inline;'>|</span>"+("<span style='position: relative; display: inline;'>"+
c(a)+"</span>");return(new d(b)).create(e).rect()};b.prototype.getIEPosition=function(a){var b;b=this.getIEOffset(a);a=this.$inputor.offset();return{left:b.left-a.left,top:b.top-a.top,height:b.height}};return b}();d=function(){function b(a){this.$inputor=a}b.prototype.css_attr="borderBottomWidth borderLeftWidth borderRightWidth borderTopStyle borderRightStyle borderBottomStyle borderLeftStyle borderTopWidth boxSizing fontFamily fontSize fontWeight height letterSpacing lineHeight marginBottom marginLeft marginRight marginTop outlineWidth overflow overflowX overflowY paddingBottom paddingLeft paddingRight paddingTop textAlign textOverflow textTransform whiteSpace wordBreak wordWrap".split(" ");
b.prototype.mirrorCss=function(){var b,c=this;b={position:"absolute",left:-9999,top:0,zIndex:-2E4};"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width");a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)});return b};b.prototype.create=function(b){this.$mirror=a("<div></div>");this.$mirror.css(this.mirrorCss());this.$mirror.html(b);this.$inputor.after(this.$mirror);return this};b.prototype.rect=function(){var a,b;a=this.$mirror.find("#caret");b=a.position();a={left:b.left,
top:b.top,height:a.height()};this.$mirror.remove();return a};return b}();f={contentEditable:function(a){return!(!a[0].contentEditable||"true"!==a[0].contentEditable)}};e={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){return this.getOffset(a)}};g=h=null;k=function(a){if(a=null!=a?a.iframe:void 0)return g=a.contentWindow,h=a.contentDocument||g.document;g=window;return h=document};a.fn.caret=
function(d,g,h){return e[d]?(a.isPlainObject(g)?(k(g),g=void 0):k(h),h=f.contentEditable(this)?new b(this):new c(this),e[d].apply(h,[g])):a.error("Method "+d+" does not exist on jQuery.caret")};a.fn.caret.EditableCaret=b;a.fn.caret.InputCaret=c;a.fn.caret.Utils=f;a.fn.caret.apis=e});
(function(){function a(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function b(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function c(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function d(a,b){for(var c=null==a?0:a.length;c--&&!1!==b(a[c],c,a););return a}function f(a,b){for(var c=-1,d=null==a?0:a.length;++c<
d;)if(!b(a[c],c,a))return!1;return!0}function e(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function h(a,b){return!(null==a||!a.length)&&-1<u(a,b,0)}function g(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function m(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function l(a,b,c,d){var e=-1,f=null==
a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function r(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function q(a,b,c){var d;c(a,function(a,c,e){if(b(a,c,e))return d=c,!1});return d}function t(a,b,c,d){var e=a.length;for(c+=d?1:-1;d?c--:++c<e;)if(b(a[c],c,a))return c;return-1}function u(a,b,c){if(b===b)a:{--c;for(var d=a.length;++c<d;)if(a[c]===b){a=
c;break a}a=-1}else a=t(a,A,c);return a}function w(a,b,c,d){--c;for(var e=a.length;++c<e;)if(d(a[c],b))return c;return-1}function A(a){return a!==a}function x(a,b){var c=null==a?0:a.length;return c?J(a,b)/c:zb}function E(a){return function(b){return null==b?B:b[a]}}function F(a){return function(b){return null==a?B:a[b]}}function y(a,b,c,d,e){e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)});return c}function z(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function J(a,b){for(var c,d=
-1,e=a.length;++d<e;){var f=b(a[d]);f!==B&&(c=c===B?f:c+f)}return c}function H(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function T(a,b){return k(b,function(b){return[b,a[b]]})}function I(a){return function(b){return a(b)}}function Q(a,b){return k(b,function(b){return a[b]})}function D(a,b){return a.has(b)}function K(a,b){for(var c=-1,d=a.length;++c<d&&-1<u(b,a[c],0););return c}function aa(a,b){for(var c=a.length;c--&&-1<u(b,a[c],0););return c}function p(a){return"\\"+Cb[a]}function Y(a){var b=
-1,c=Array(a.size);a.forEach(function(a,d){c[++b]=[d,a]});return c}function ba(a,b){return function(c){return a(b(c))}}function N(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];if(g===b||"__lodash_placeholder__"===g)a[c]="__lodash_placeholder__",f[e++]=c}return f}function qa(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function Ja(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=[a,a]});return c}function fa(a){if(Bb.test(a)){for(var b=hb.lastIndex=0;hb.test(a);)++b;
a=b}else a=ha(a);return a}function ia(a){return Bb.test(a)?a.match(hb)||[]:a.split("")}var B,ja=1/0,zb=0/0,V=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ua=/\b__p \+= '';/g,za=/\b(__p \+=) '' \+/g,ga=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gb=/&(?:amp|lt|gt|quot|#39);/g,Ca=/[&<>"']/g,Sb=RegExp(gb.source),kb=RegExp(Ca.source),Xa=/<%-([\s\S]+?)%>/g,Ga=/<%([\s\S]+?)%>/g,qb=/<%=([\s\S]+?)%>/g,Da=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
W=/^\w*$/,Kb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,db=/[\\^$.*+?()[\]{}|]/g,Tb=RegExp(db.source),ra=/^\s+|\s+$/g,Lb=/^\s+/,Na=/\s+$/,C=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qa=/\{\n\/\* \[wrapped with (.+)\] \*/,ac=/,? & /,ua=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hc=/\\(\\)?/g,Mb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ka=/\w*$/,Uc=/^[-+]0x[0-9a-f]+$/i,zc=/^0b[01]+$/i,sc=/^\[object .+?Constructor\]$/,bc=/^0o[0-7]+$/i,Ub=/^(?:0|[1-9]\d*)$/,
Vb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ab=/($^)/,wa=/['\n\r\u2028\u2029\\]/g,Ba=/['\u2019]/g,O=/[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]/g,hb=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,
Ea=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,
Bb=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/,Nb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eb="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Ac=-1,ka={};ka["[object Float32Array]"]=ka["[object Float64Array]"]=ka["[object Int8Array]"]=
ka["[object Int16Array]"]=ka["[object Int32Array]"]=ka["[object Uint8Array]"]=ka["[object Uint8ClampedArray]"]=ka["[object Uint16Array]"]=ka["[object Uint32Array]"]=!0;ka["[object Arguments]"]=ka["[object Array]"]=ka["[object ArrayBuffer]"]=ka["[object Boolean]"]=ka["[object DataView]"]=ka["[object Date]"]=ka["[object Error]"]=ka["[object Function]"]=ka["[object Map]"]=ka["[object Number]"]=ka["[object Object]"]=ka["[object RegExp]"]=ka["[object Set]"]=ka["[object String]"]=ka["[object WeakMap]"]=
!1;var na={};na["[object Arguments]"]=na["[object Array]"]=na["[object ArrayBuffer]"]=na["[object DataView]"]=na["[object Boolean]"]=na["[object Date]"]=na["[object Float32Array]"]=na["[object Float64Array]"]=na["[object Int8Array]"]=na["[object Int16Array]"]=na["[object Int32Array]"]=na["[object Map]"]=na["[object Number]"]=na["[object Object]"]=na["[object RegExp]"]=na["[object Set]"]=na["[object String]"]=na["[object Symbol]"]=na["[object Uint8Array]"]=na["[object Uint8ClampedArray]"]=na["[object Uint16Array]"]=
na["[object Uint32Array]"]=!0;na["[object Error]"]=na["[object Function]"]=na["[object WeakMap]"]=!1;var Cb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lb=parseFloat,Bc=parseInt,Ob="object"==typeof global&&global&&global.Object===Object&&global,rb="object"==typeof self&&self&&self.Object===Object&&self,xa=Ob||rb||Function("return this")(),ib="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ya=ib&&"object"==typeof module&&module&&!module.nodeType&&module,mb=
Ya&&Ya.exports===ib,Za=mb&&Ob.process,Ha=function(){try{var a=Ya&&Ya.require&&Ya.require("util").types;return a?a:Za&&Za.binding&&Za.binding("util")}catch(b){}}(),nb=Ha&&Ha.isArrayBuffer,Wc=Ha&&Ha.isDate,Ra=Ha&&Ha.isMap,pd=Ha&&Ha.isRegExp,ic=Ha&&Ha.isSet,Xc=Ha&&Ha.isTypedArray,ha=E("length"),Yc=F({"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d",
"\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y",
"\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G",
"\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n",
"\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u",
"\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Wb=F({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Zc=F({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sb=function $c(F){function v(a){if(jb(a)&&!ta(a)&&!(a instanceof da)){if(a instanceof Ma)return a;if(Ia.call(a,"__wrapped__"))return cg(a)}return new Ma(a)}
function ha(){}function Ma(a,b){this.__wrapped__=a;this.__actions__=[];this.__chain__=!!b;this.__index__=0;this.__values__=B}function da(a){this.__wrapped__=a;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function $a(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function sa(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Sa(a){var b=
-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Ha(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new Sa;++b<c;)this.add(a[b])}function ab(a){this.size=(this.__data__=new sa(a)).size}function Ya(a,b){var c=ta(a),d=!c&&Ne(a),e=!c&&!d&&ye(a),f=!c&&!d&&!e&&nf(a),d=(c=c||d||e||f)?H(a.length,dg):[],g=d.length,h;for(h in a)!b&&!Ia.call(a,h)||c&&("length"==h||e&&("offset"==h||"parent"==h)||f&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||zd(h,g))||d.push(h);
return d}function Za(a){var b=a.length;return b?a[oe(0,b-1)]:B}function ib(a,b){return Ad(ob(a),cd(b,0,a.length))}function Cb(a){return Ad(ob(a))}function rb(a,b,c){(c===B||Rc(a[b],c))&&(c!==B||b in a)||vc(a,b,c)}function hb(a,b,c){var d=a[b];Ia.call(a,b)&&Rc(d,c)&&(c!==B||b in a)||vc(a,b,c)}function Xb(a,b){for(var c=a.length;c--;)if(Rc(a[c][0],b))return c;return-1}function Ob(a,b,c,d){G(a,function(a,e,f){b(d,a,c(a),f)});return d}function ke(a,b){return a&&pc(b,wb(b),a)}function He(a,b){return a&&
pc(b,wc(b),a)}function vc(a,b,c){"__proto__"==b&&of?of(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function Qd(a,b){for(var c=-1,d=b.length,e=xb(d),f=null==a;++c<d;)e[c]=f?B:ld(a,b[c]);return e}function cd(a,b,c){a===a&&(c!==B&&(a=a<=c?a:c),b!==B&&(a=a>=b?a:b));return a}function Eb(a,b,d,e,f,g){var h,k=b&1,l=b&2,G=b&4;d&&(h=f?d(a,e,f,g):d(a));if(h!==B)return h;if(!cb(a))return a;if(e=ta(a)){if(h=Ld(a),!k)return ob(a,h)}else{var m=yb(a),n="[object Function]"==m||"[object GeneratorFunction]"==
m;if(ye(a))return be(a,k);if("[object Object]"==m||"[object Arguments]"==m||n&&!f){if(h=l||n?{}:bg(a),!k)return l?Nd(a,He(h,a)):lf(a,ke(h,a))}else{if(!na[m])return f?a:{};h=Oe(a,m,k)}}g||(g=new ab);if(f=g.get(a))return f;g.set(a,h);bh(a)?a.forEach(function(c){h.add(Eb(c,b,d,c,a,g))}):ch(a)&&a.forEach(function(c,e){h.set(e,Eb(c,b,d,e,a,g))});var l=G?l?df:Pa:l?wc:wb,S=e?B:l(a);c(S||a,function(c,e){S&&(e=c,c=a[e]);hb(h,e,Eb(c,b,d,e,a,g))});return h}function Rd(a){var b=wb(a);return function(c){return Sd(c,
a,b)}}function Sd(a,b,c){var d=c.length;if(null==a)return!d;for(a=Va(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===B&&!(e in a)||!f(g))return!1}return!0}function Id(a,b,c){if("function"!=typeof a)throw new Dc("Expected a function");return Jf(function(){a.apply(B,c)},b)}function Yb(a,b,c,d){var e=-1,f=h,l=!0,G=a.length,m=[],n=b.length;if(!G)return m;c&&(b=k(b,I(c)));d?(f=g,l=!1):200<=b.length&&(f=D,l=!1,b=new Ha(b));a:for(;++e<G;){var S=a[e],q=null==c?S:c(S),S=d||0!==S?S:0;if(l&&q===q){for(var r=n;r--;)if(b[r]===
q)continue a;m.push(S)}else f(b,q,d)||m.push(S)}return m}function tb(a,b){var c=!0;G(a,function(a,d,e){return c=!!b(a,d,e)});return c}function Jc(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===B?g===g&&!Ec(g):c(g,h)))var h=g,k=f}return k}function P(a,b){var c=[];G(a,function(a,d,e){b(a,d,e)&&c.push(a)});return c}function ca(a,b,c,d,e){var f=-1,g=a.length;c||(c=Eg);for(e||(e=[]);++f<g;){var h=a[f];0<b&&c(h)?1<b?ca(h,b-1,c,d,e):m(e,h):d||(e[e.length]=h)}return e}function bb(a,
b){return a&&X(a,b,wb)}function fd(a,b){return a&&ya(a,b,wb)}function gd(a,b){return e(b,function(b){return Bd(a[b])})}function Kc(a,b){b=Zb(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Fc(b[c++])];return c&&c==d?a:B}function Td(a,b,c){b=b(a);return ta(a)?b:m(b,c(a))}function Fb(a){if(null==a)return a===B?"[object Undefined]":"[object Null]";if(ce&&ce in Va(a)){var b=Ia.call(a,ce),c=a[ce];try{a[ce]=B;var d=!0}catch(e){}var f=pf.call(a);d&&(b?a[ce]=c:delete a[ce]);a=f}else a=pf.call(a);return a}function Ud(a,
b){return a>b}function Vd(a,b){return null!=a&&Ia.call(a,b)}function Wd(a,b){return null!=a&&b in Va(a)}function Oa(a,b,c){for(var d=c?g:h,e=a[0].length,f=a.length,l=f,G=xb(f),m=Infinity,n=[];l--;){var S=a[l];l&&b&&(S=k(S,I(b)));m=fc(S.length,m);G[l]=!c&&(b||120<=e&&120<=S.length)?new Ha(l&&S):B}var S=a[0],q=-1,r=G[0];a:for(;++q<e&&n.length<m;){var ya=S[q],X=b?b(ya):ya,ya=c||0!==ya?ya:0;if(r?!r.has(X):!d(n,X,c)){for(l=f;--l;){var t=G[l];if(t?!t.has(X):!d(a[l],X,c))continue a}r&&r.push(X);n.push(ya)}}return n}
function rd(a,b,c,d){bb(a,function(a,e,f){b(d,c(a),e,f)});return d}function Cc(b,c,d){c=Zb(c,b);b=2>c.length?b:Kc(b,Gb(c,0,-1));c=null==b?b:b[Fc(Sc(c))];return null==c?B:a(c,b,d)}function Xd(a){return jb(a)&&"[object Arguments]"==Fb(a)}function Jd(a){return jb(a)&&"[object ArrayBuffer]"==Fb(a)}function Kd(a){return jb(a)&&"[object Date]"==Fb(a)}function jc(a,b,c,d,e){if(a===b)return!0;if(null==a||null==b||!jb(a)&&!jb(b))return a!==a&&b!==b;a:{var f=ta(a),g=ta(b),h=f?"[object Array]":yb(a),k=g?"[object Array]":
yb(b),h="[object Arguments]"==h?"[object Object]":h,k="[object Arguments]"==k?"[object Object]":k,l="[object Object]"==h,g="[object Object]"==k;if((k=h==k)&&ye(a)){if(!ye(b)){b=!1;break a}f=!0;l=!1}if(k&&!l)e||(e=new ab),b=f||nf(a)?lc(a,b,c,d,jc,e):oa(a,b,h,c,d,jc,e);else{if(!(c&1)&&(f=l&&Ia.call(a,"__wrapped__"),h=g&&Ia.call(b,"__wrapped__"),f||h)){a=f?a.value():a;b=h?b.value():b;e||(e=new ab);b=jc(a,b,c,d,e);break a}if(k)b:if(e||(e=new ab),f=c&1,h=Pa(a),g=h.length,k=Pa(b).length,g==k||f){for(l=
g;l--;){var G=h[l];if(!(f?G in b:Ia.call(b,G))){b=!1;break b}}if((k=e.get(a))&&e.get(b))b=k==b;else{k=!0;e.set(a,b);e.set(b,a);for(var m=f;++l<g;){var G=h[l],n=a[G],S=b[G];if(d)var q=f?d(S,n,G,b,a,e):d(n,S,G,a,b,e);if(q===B?n!==S&&!jc(n,S,c,d,e):!q){k=!1;break}m||(m="constructor"==G)}k&&!m&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(k=!1));e["delete"](a);e["delete"](b);b=k}}else b=!1;
else b=!1}}return b}function Lc(a){return jb(a)&&"[object Map]"==yb(a)}function kc(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Va(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],k=h[0],l=a[k],G=h[1];if(g&&h[2]){if(l===B&&!(k in a))return!1}else{h=new ab;if(d)var m=d(l,G,k,a,b,h);if(m===B?!jc(G,l,3,d,h):!m)return!1}}return!0}function cc(a){return!cb(a)||eg&&eg in a?!1:(Bd(a)?Fg:sc).test(Od(a))}function va(a){return jb(a)&&"[object RegExp]"==
Fb(a)}function L(a){return jb(a)&&"[object Set]"==yb(a)}function R(a){return jb(a)&&md(a.length)&&!!ka[Fb(a)]}function Ta(a){return"function"==typeof a?a:null==a?xc:"object"==typeof a?ta(a)?gf(a[0],a[1]):le(a):fg(a)}function hd(a){if(!Pe(a))return Gg(a);var b=[],c;for(c in Va(a))Ia.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Nc(a,b){return a<b}function jd(a,b){var c=-1,d=gc(a)?xb(a.length):[];G(a,function(a,e,f){d[++c]=b(a,e,f)});return d}function le(a){var b=Gf(a);return 1==b.length&&
b[0][2]?qf(b[0][0],b[0][1]):function(c){return c===a||kc(c,a,b)}}function gf(a,b){return ze(a)&&b===b&&!cb(b)?qf(Fc(a),b):function(c){var d=ld(c,a);return d===B&&d===b?Gc(c,a):jc(b,d,3)}}function me(a,b,c,d,e){a!==b&&X(b,function(f,g){e||(e=new ab);if(cb(f)){var h=e,k=Kf(a,g),l=Kf(b,g),G=h.get(l);if(!G){var G=d?d(k,l,g+"",a,b,h):B,m=G===B;if(m){var n=ta(l),S=!n&&ye(l),q=!n&&!S&&nf(l),G=l;if(n||S||q)ta(k)?G=k:pb(k)?G=ob(k):S?(m=!1,G=be(l,!0)):q?(m=!1,G=Me(l,!0)):G=[];else if(Cd(l)||Ne(l))if(G=k,Ne(k))G=
M(k);else{if(!cb(k)||Bd(k))G=bg(l)}else m=!1}m&&(h.set(l,G),me(G,l,c,d,h),h["delete"](l))}rb(a,g,G)}else h=d?d(Kf(a,g),f,g+"",a,b,e):B,h===B&&(h=f),rb(a,g,h)},wc)}function hf(a,b){var c=a.length;if(c)return b+=0>b?c:0,zd(b,c)?a[b]:B}function ne(a,b,c){var d=-1;b=k(b.length?b:[xc],I(ea()));a=jd(a,function(a,c,e){return{criteria:k(b,function(b){return b(a)}),index:++d,value:a}});return z(a,function(a,b){var d;a:{d=-1;for(var e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var k=ec(e[d],f[d]);
if(k){if(d>=h){d=k;break a}d=k*("desc"==c[d]?-1:1);break a}}d=a.index-b.index}return d})}function If(a,b){return dd(a,b,function(b,c){return Gc(a,c)})}function dd(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=Kc(a,g);c(h,g)&&Pc(f,Zb(g,a),h)}return f}function jf(a){return function(b){return Kc(b,a)}}function Ie(a,b,c,d){var e=d?w:u,f=-1,g=b.length,h=a;a===b&&(b=ob(b));for(c&&(h=k(a,I(c)));++f<g;)for(var l=0,G=b[f],G=c?c(G):G;-1<(l=e(h,G,l,d));)h!==a&&rf.call(h,l,1),rf.call(a,l,1);return a}
function Je(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;zd(e)?rf.call(a,e,1):$d(a,e)}}return a}function oe(a,b){return a+de(gg()*(b-a+1))}function pe(a,b){var c="";if(!a||1>b||9007199254740991<b)return c;do b%2&&(c+=a),(b=de(b/2))&&(a+=a);while(b);return c}function pa(a,b){return Hg(hg(a,b,xc),a+"")}function vd(a){return Za(ee(a))}function Oc(a,b){var c=ee(a);return Ad(c,cd(b,0,c.length))}function Pc(a,b,c,d){if(!cb(a))return a;b=Zb(b,a);for(var e=-1,f=b.length,g=f-
1,h=a;null!=h&&++e<f;){var k=Fc(b[e]),l=c;if(e!=g){var G=h[k],l=d?d(G,k,h):B;l===B&&(l=cb(G)?G:zd(b[e+1])?[]:{})}hb(h,k,l);h=h[k]}return a}function Ke(a){return Ad(ee(a))}function Gb(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b);c=c>e?e:c;0>c&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;for(c=xb(e);++d<e;)c[d]=a[d+b];return c}function kf(a,b){var c;G(a,function(a,d,e){c=b(a,d,e);return!c});return!!c}function Zd(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&2147483647>=e){for(;d<e;){var f=d+
e>>>1,g=a[f];null!==g&&!Ec(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return qe(a,b,xc,c)}function qe(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,k=Ec(b),l=b===B;e<f;){var G=de((e+f)/2),m=c(a[G]),n=m!==B,S=null===m,q=m===m,r=Ec(m);(g?d||q:l?q&&(d||n):h?q&&n&&(d||!S):k?q&&n&&!S&&(d||!r):S||r?0:d?m<=b:m<b)?e=G+1:f=G}return fc(f,4294967294)}function wd(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!Rc(h,k)){var k=h;f[e++]=0===g?0:g}}return f}function ub(a){return"number"==
typeof a?a:Ec(a)?zb:+a}function Hb(a){if("string"==typeof a)return a;if(ta(a))return k(a,Hb)+"";if(Ec(a))return Lf?Lf.call(a):"";var b=a+"";return"0"==b&&1/a==-ja?"-0":b}function Qc(a,b,c){var d=-1,e=h,f=a.length,k=!0,l=[],G=l;if(c)k=!1,e=g;else if(200<=f){if(e=b?null:nd(a))return qa(e);k=!1;e=D;G=new Ha}else G=b?[]:l;a:for(;++d<f;){var m=a[d],n=b?b(m):m,m=c||0!==m?m:0;if(k&&n===n){for(var S=G.length;S--;)if(G[S]===n)continue a;b&&G.push(n);l.push(m)}else e(G,n,c)||(G!==l&&G.push(n),l.push(m))}return l}
function $d(a,b){b=Zb(b,a);a=2>b.length?a:Kc(a,Gb(b,0,-1));return null==a||delete a[Fc(Sc(b))]}function xd(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Gb(a,d?0:f,d?f+1:e):Gb(a,d?f+1:0,d?e:f)}function re(a,b){var c=a;c instanceof da&&(c=c.value());return l(b,function(a,b){return b.func.apply(b.thisArg,m([a],b.args))},c)}function Le(a,b,c){var d=a.length;if(2>d)return d?Qc(a[0]):[];for(var e=-1,f=xb(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=Yb(f[e]||g,a[h],b,c));
return Qc(ca(f,1),b,c)}function se(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;)c(g,a[d],d<f?b[d]:B);return g}function ae(a){return pb(a)?a:[]}function te(a){return"function"==typeof a?a:xc}function Zb(a,b){return ta(a)?a:ze(a,b)?[a]:dh(Fa(a))}function oc(a,b,c){var d=a.length;c=c===B?d:c;return!b&&c>=d?a:Gb(a,b,c)}function be(a,b){if(b)return a.slice();var c=a.length,c=ig?ig(c):new a.constructor(c);a.copy(c);return c}function ue(a){var b=new a.constructor(a.byteLength);(new sf(b)).set(new sf(a));
return b}function Me(a,b){var c=b?ue(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function ec(a,b){if(a!==b){var c=a!==B,d=null===a,e=a===a,f=Ec(a),g=b!==B,h=null===b,k=b===b,l=Ec(b);if(!h&&!l&&!f&&a>b||f&&g&&k&&!h&&!l||d&&g&&k||!c&&k||!e)return 1;if(!d&&!f&&!l&&a<b||l&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!k)return-1}return 0}function vb(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,k=b.length,l=Ib(f-g,0),G=xb(k+l);for(d=!d;++h<k;)G[h]=b[h];for(;++e<g;)if(d||e<f)G[c[e]]=a[e];for(;l--;)G[h++]=
a[e++];return G}function Md(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,k=-1,l=b.length,G=Ib(f-h,0),m=xb(G+l);for(d=!d;++e<G;)m[e]=a[e];for(G=e;++k<l;)m[G+k]=b[k];for(;++g<h;)if(d||e<f)m[G+c[g]]=a[e++];return m}function ob(a,b){var c=-1,d=a.length;for(b||(b=xb(d));++c<d;)b[c]=a[c];return b}function pc(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],k=d?d(c[h],a[h],h,c,a):B;k===B&&(k=a[h]);e?vc(c,h,k):hb(c,h,k)}return c}function lf(a,b){return pc(a,Wa(a),b)}function Nd(a,b){return pc(a,
jg(a),b)}function kd(a,c){return function(d,e){var f=ta(d)?b:Ob,g=c?c():{};return f(d,a,ea(e,2),g)}}function yd(a){return pa(function(b,c){var d=-1,e=c.length,f=1<e?c[e-1]:B,g=2<e?c[2]:B,f=3<a.length&&"function"==typeof f?(e--,f):B;g&&qc(c[0],c[1],g)&&(f=3>e?B:f,e=1);for(b=Va(b);++d<e;)(g=c[d])&&a(b,g,d,f);return b})}function ve(a,b){return function(c,d){if(null==c)return c;if(!gc(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Va(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function we(a){return function(b,
c,d){var e=-1,f=Va(b);d=d(b);for(var g=d.length;g--;){var h=d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}function xe(a,b,c){function d(){return(this&&this!==xa&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&1,f=od(a);return d}function mf(a){return function(b){b=Fa(b);var c=Bb.test(b)?ia(b):B,d=c?c[0]:b.charAt(0);b=c?oc(c,1).join(""):b.slice(1);return d[a]()+b}}function Gd(a){return function(b){return l(tf(Mf(b).replace(Ba,"")),a,"")}}function od(a){return function(){var b=arguments;switch(b.length){case 0:return new a;
case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=fe(a.prototype),b=a.apply(c,b);return cb(b)?b:c}}function Qb(b,c,d){function e(){for(var g=arguments.length,h=xb(g),k=g,l=td(e);k--;)h[k]=arguments[k];k=3>g&&h[0]!==l&&h[g-1]!==l?[]:N(h,l);g-=k.length;return g<
d?ag(b,c,rc,e.placeholder,B,h,k,B,B,d-g):a(this&&this!==xa&&this instanceof e?f:b,this,h)}var f=od(b);return e}function Rb(a){return function(b,c,d){var e=Va(b);if(!gc(b)){var f=ea(c,3);b=wb(b);c=function(a){return f(e[a],a,e)}}c=a(b,c,d);return-1<c?e[f?b[c]:c]:B}}function bf(a){return sd(function(b){var c=b.length,d=c,e=Ma.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new Dc("Expected a function");if(e&&!g&&"wrapper"==id(f))var g=new Ma([],!0)}for(d=g?d:c;++d<c;)var f=
b[d],e=id(f),h="wrapper"==e?fb(f):B,g=h&&Qe(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[id(h[0])].apply(g,h[3]):1==f.length&&Qe(f)?g[e]():g.thru(f);return function(){var a=arguments,d=a[0];if(g&&1==a.length&&ta(d))return g.plant(d).value();for(var e=0,a=c?b[e].apply(this,a):d;++e<c;)a=b[e].call(this,a);return a}})}function rc(a,b,c,d,e,f,g,h,k,l){function G(){for(var X=arguments.length,t=xb(X),u=X;u--;)t[u]=arguments[u];if(q){var p=td(G),Aa,u=t.length;for(Aa=0;u--;)t[u]===p&&++Aa}d&&(t=vb(t,d,e,q));
f&&(t=Md(t,f,g,q));X-=Aa;if(q&&X<l)return p=N(t,p),ag(a,b,rc,G.placeholder,c,t,p,h,k,l-X);p=n?c:this;u=S?p[a]:a;X=t.length;if(h){Aa=t.length;for(var L=fc(h.length,Aa),w=ob(t);L--;){var ma=h[L];t[L]=zd(ma,Aa)?w[ma]:B}}else r&&1<X&&t.reverse();m&&k<X&&(t.length=k);this&&this!==xa&&this instanceof G&&(u=ya||od(u));return u.apply(p,t)}var m=b&128,n=b&1,S=b&2,q=b&24,r=b&512,ya=S?B:od(a);return G}function La(a,b){return function(c,d){return rd(c,a,b(d),{})}}function Vc(a,b){return function(c,d){var e;if(c===
B&&d===B)return b;c!==B&&(e=c);if(d!==B){if(e===B)return d;"string"==typeof c||"string"==typeof d?(c=Hb(c),d=Hb(d)):(c=ub(c),d=ub(d));e=a(c,d)}return e}}function Hc(b){return sd(function(c){c=k(c,I(ea()));return pa(function(d){var e=this;return b(c,function(b){return a(b,e,d)})})})}function Z(a,b){b=b===B?" ":Hb(b);var c=b.length;if(2>c)return c?pe(b,a):b;c=pe(b,Dd(a/fa(b)));return Bb.test(b)?oc(ia(c),0,a).join(""):c.slice(0,a)}function Hd(b,c,d,e){function f(){for(var c=-1,k=arguments.length,l=-1,
G=e.length,m=xb(G+k),n=this&&this!==xa&&this instanceof f?h:b;++l<G;)m[l]=e[l];for(;k--;)m[l++]=arguments[++c];return a(n,g?d:this,m)}var g=c&1,h=od(b);return f}function Mc(a){return function(b,c,d){d&&"number"!=typeof d&&qc(b,c,d)&&(c=d=B);b=Ed(b);c===B?(c=b,b=0):c=Ed(c);d=d===B?b<c?1:-1:Ed(d);var e=-1;c=Ib(Dd((c-b)/(d||1)),0);for(var f=xb(c);c--;)f[a?c:++e]=b,b+=d;return f}}function ef(a){return function(b,c){if("string"!=typeof b||"string"!=typeof c)b=yc(b),c=yc(c);return a(b,c)}}function ag(a,
b,c,d,e,f,g,h,k,l){var G=b&8,m=G?g:B;g=G?B:g;var n=G?f:B;f=G?B:f;b=(b|(G?32:64))&~(G?64:32);b&4||(b&=-4);e=[a,b,e,n,m,f,g,h,k,l];c=c.apply(B,e);Qe(a)&&eh(c,e);c.placeholder=d;return Tc(c,a,b)}function dc(a){var b=Ae[a];return function(a,c){a=yc(a);if((c=null==c?0:fc(la(c),292))&&Re(a)){var d=(Fa(a)+"e").split("e"),d=b(d[0]+"e"+(+d[1]+c)),d=(Fa(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}function Ff(a){return function(b){var c=yb(b);return"[object Map]"==c?Y(b):"[object Set]"==c?Ja(b):
T(b,a(b))}}function mc(a,b,c,d,e,f,g,h){var k=b&2;if(!k&&"function"!=typeof a)throw new Dc("Expected a function");var l=d?d.length:0;l||(b&=-97,d=e=B);g=g===B?g:Ib(la(g),0);h=h===B?h:la(h);l-=e?e.length:0;if(b&64){var G=d,m=e;d=e=B}var n=k?B:fb(a);f=[a,b,c,d,e,G,m,f,g,h];if(n&&(c=f[1],a=n[1],b=c|a,d=128==a&&8==c||128==a&&256==c&&f[7].length<=n[8]||384==a&&n[7].length<=n[8]&&8==c,131>b||d)){a&1&&(f[2]=n[2],b|=c&1?0:4);if(c=n[3])d=f[3],f[3]=d?vb(d,c,n[4]):c,f[4]=d?N(f[3],"__lodash_placeholder__"):n[4];
if(c=n[5])d=f[5],f[5]=d?Md(d,c,n[6]):c,f[6]=d?N(f[5],"__lodash_placeholder__"):n[6];(c=n[7])&&(f[7]=c);a&128&&(f[8]=null==f[8]?n[8]:fc(f[8],n[8]));null==f[9]&&(f[9]=n[9]);f[0]=n[0];f[1]=b}a=f[0];b=f[1];c=f[2];d=f[3];e=f[4];h=f[9]=f[9]===B?k?0:a.length:Ib(f[9]-l,0);!h&&b&24&&(b&=-25);k=b&&1!=b?8==b||16==b?Qb(a,b,h):32!=b&&33!=b||e.length?rc.apply(B,f):Hd(a,b,c,d):xe(a,b,c);return Tc((n?Aa:eh)(k,f),a,b)}function nc(a,b,c,d){return a===B||Rc(a,ge[c])&&!Ia.call(d,c)?b:a}function ff(a,b,c,d,e,f){cb(a)&&
cb(b)&&(f.set(b,a),me(a,b,B,ff,f),f["delete"](b));return a}function cf(a){return Cd(a)?B:a}function lc(a,b,c,d,e,f){var g=c&1,h=a.length,k=b.length;if(h!=k&&!(g&&k>h))return!1;if((k=f.get(a))&&f.get(b))return k==b;var k=-1,l=!0,G=c&2?new Ha:B;f.set(a,b);for(f.set(b,a);++k<h;){var m=a[k],n=b[k];if(d)var S=g?d(n,m,k,b,a,f):d(m,n,k,a,b,f);if(S!==B){if(S)continue;l=!1;break}if(G){if(!r(b,function(a,b){if(!G.has(b)&&(m===a||e(m,a,c,d,f)))return G.push(b)})){l=!1;break}}else if(m!==n&&!e(m,n,c,d,f)){l=
!1;break}}f["delete"](a);f["delete"](b);return l}function oa(a,b,c,d,e,f,g){switch(c){case "[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer;b=b.buffer;case "[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new sf(a),new sf(b)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return Rc(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object RegExp]":case "[object String]":return a==
b+"";case "[object Map]":var h=Y;case "[object Set]":h||(h=qa);if(a.size!=b.size&&!(d&1))break;if(c=g.get(a))return c==b;d|=2;g.set(a,b);b=lc(h(a),h(b),d,e,f,g);g["delete"](a);return b;case "[object Symbol]":if(Be)return Be.call(a)==Be.call(b)}return!1}function sd(a){return Hg(hg(a,B,kg),a+"")}function Pa(a){return Td(a,wb,Wa)}function df(a){return Td(a,wc,jg)}function id(a){for(var b=a.name+"",c=Ce[b],d=Ia.call(Ce,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function td(a){return(Ia.call(v,
"placeholder")?v:a).placeholder}function ea(){var a=v.iteratee||Nf,a=a===Nf?Ta:a;return arguments.length?a(arguments[0],arguments[1]):a}function ud(a,b){var c=a.__data__,d=typeof b;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==b:null===b)?c["string"==typeof b?"string":"hash"]:c.map}function Gf(a){for(var b=wb(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!cb(e)]}return b}function Yd(a,b){var c=null==a?B:a[b];return cc(c)?c:B}function Hf(a,b,c){b=Zb(b,a);for(var d=
-1,e=b.length,f=!1;++d<e;){var g=Fc(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}if(f||++d!=e)return f;e=null==a?0:a.length;return!!e&&md(e)&&zd(g,e)&&(ta(a)||Ne(a))}function Ld(a){var b=a.length,c=new a.constructor(b);b&&"string"==typeof a[0]&&Ia.call(a,"index")&&(c.index=a.index,c.input=a.input);return c}function bg(a){return"function"!=typeof a.constructor||Pe(a)?{}:fe(uf(a))}function Oe(a,b,c){var d=a.constructor;switch(b){case "[object ArrayBuffer]":return ue(a);case "[object Boolean]":case "[object Date]":return new d(+a);
case "[object DataView]":return b=c?ue(a.buffer):a.buffer,new a.constructor(b,a.byteOffset,a.byteLength);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return Me(a,c);case "[object Map]":return new d;case "[object Number]":case "[object String]":return new d(a);case "[object RegExp]":return b=
new a.constructor(a.source,Ka.exec(a)),b.lastIndex=a.lastIndex,b;case "[object Set]":return new d;case "[object Symbol]":return Be?Va(Be.call(a)):{}}}function Eg(a){return ta(a)||Ne(a)||!!(lg&&a&&a[lg])}function zd(a,b){var c=typeof a;b=null==b?9007199254740991:b;return!!b&&("number"==c||"symbol"!=c&&Ub.test(a))&&-1<a&&0==a%1&&a<b}function qc(a,b,c){if(!cb(c))return!1;var d=typeof b;return("number"==d?gc(c)&&zd(b,c.length):"string"==d&&b in c)?Rc(c[b],a):!1}function ze(a,b){if(ta(a))return!1;var c=
typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||Ec(a)?!0:W.test(a)||!Da.test(a)||null!=b&&a in Va(b)}function Qe(a){var b=id(a),c=v[b];if("function"!=typeof c||!(b in da.prototype))return!1;if(a===c)return!0;b=fb(c);return!!b&&a===b[0]}function Pe(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||ge)}function qf(a,b){return function(c){return null==c?!1:c[a]===b&&(b!==B||a in Va(c))}}function hg(b,c,d){c=Ib(c===B?b.length-1:c,0);return function(){for(var e=arguments,
f=-1,g=Ib(e.length-c,0),h=xb(g);++f<g;)h[f]=e[c+f];f=-1;for(g=xb(c+1);++f<c;)g[f]=e[f];g[c]=d(h);return a(b,this,g)}}function Kf(a,b){if(("constructor"!==b||"function"!==typeof a[b])&&"__proto__"!=b)return a[b]}function Tc(a,b,c){var d=b+"";b=Hg;var e=mg,f;f=(f=d.match(Qa))?f[1].split(ac):[];c=e(f,c);if(e=c.length)f=e-1,c[f]=(1<e?"& ":"")+c[f],c=c.join(2<e?", ":" "),d=d.replace(C,"{\n/* [wrapped with "+c+"] */\n");return b(a,d)}function ng(a){var b=0,c=0;return function(){var d=Ig(),e=16-(d-c);c=
d;if(0<e){if(800<=++b)return arguments[0]}else b=0;return a.apply(B,arguments)}}function Ad(a,b){var c=-1,d=a.length,e=d-1;for(b=b===B?d:b;++c<b;){var d=oe(c,e),f=a[d];a[d]=a[c];a[c]=f}a.length=b;return a}function Fc(a){if("string"==typeof a||Ec(a))return a;var b=a+"";return"0"==b&&1/a==-ja?"-0":b}function Od(a){if(null!=a){try{return Se.call(a)}catch(b){}return a+""}return""}function mg(a,b){c(V,function(c){var d="_."+c[0];b&c[1]&&!h(a,d)&&a.push(d)});return a.sort()}function cg(a){if(a instanceof
da)return a.clone();var b=new Ma(a.__wrapped__,a.__chain__);b.__actions__=ob(a.__actions__);b.__index__=a.__index__;b.__values__=a.__values__;return b}function Te(a,b,c){var d=null==a?0:a.length;if(!d)return-1;c=null==c?0:la(c);0>c&&(c=Ib(d+c,0));return t(a,ea(b,3),c)}function og(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;c!==B&&(e=la(c),e=0>c?Ib(d+e,0):fc(e,d-1));return t(a,ea(b,3),e,!0)}function kg(a){return(null==a?0:a.length)?ca(a,1):[]}function pg(a){return a&&a.length?a[0]:B}function Sc(a){var b=
null==a?0:a.length;return b?a[b-1]:B}function qg(a,b){return a&&a.length&&b&&b.length?Ie(a,b):a}function Of(a){return null==a?a:Jg.call(a)}function Fd(a){if(!a||!a.length)return[];var b=0;a=e(a,function(a){if(pb(a))return b=Ib(a.length,b),!0});return H(b,function(b){return k(a,E(b))})}function Pf(b,c){if(!b||!b.length)return[];var d=Fd(b);return null==c?d:k(d,function(b){return a(c,B,b)})}function rg(a){a=v(a);a.__chain__=!0;return a}function vf(a,b){return b(a)}function Kg(){return this}function sg(a,
b){return(ta(a)?c:G)(a,ea(b,3))}function tg(a,b){return(ta(a)?d:S)(a,ea(b,3))}function wf(a,b){return(ta(a)?k:jd)(a,ea(b,3))}function Jb(a,b,c){b=c?B:b;b=a&&null==b?a.length:b;return mc(a,128,B,B,B,B,b)}function xf(a,b){var c;if("function"!=typeof b)throw new Dc("Expected a function");a=la(a);return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=B);return c}}function Qf(a,b,c){b=c?B:b;a=mc(a,8,B,B,B,B,B,b);a.placeholder=Qf.placeholder;return a}function ug(a,b,c){b=c?B:b;a=mc(a,16,B,B,B,B,
B,b);a.placeholder=ug.placeholder;return a}function Rf(a,b,c){function d(b){var c=k,e=l;k=l=B;q=b;return m=a.apply(e,c)}function e(a){var c=a-S;a-=q;return S===B||c>=b||0>c||ya&&a>=G}function f(){var a=vg();if(e(a))return g(a);var c=Jf,d;d=a-q;a=b-(a-S);d=ya?fc(a,G-d):a;n=c(f,d)}function g(a){n=B;if(X&&k)return d(a);k=l=B;return m}function h(){var a=vg(),c=e(a);k=arguments;l=this;S=a;if(c){if(n===B)return q=a=S,n=Jf(f,b),r?d(a):m;if(ya)return ma(n),n=Jf(f,b),d(S)}n===B&&(n=Jf(f,b));return m}var k,
l,G,m,n,S,q=0,r=!1,ya=!1,X=!0;if("function"!=typeof a)throw new Dc("Expected a function");b=yc(b)||0;cb(c)&&(r=!!c.leading,G=(ya="maxWait"in c)?Ib(yc(c.maxWait)||0,b):G,X="trailing"in c?!!c.trailing:X);h.cancel=function(){n!==B&&ma(n);q=0;k=S=l=n=B};h.flush=function(){return n===B?m:g(vg())};return h}function Ue(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new Dc("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);
d=a.apply(this,d);c.cache=f.set(e,d)||f;return d};c.cache=new (Ue.Cache||Sa);return c}function yf(a){if("function"!=typeof a)throw new Dc("Expected a function");return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function Rc(a,b){return a===b||a!==a&&b!==b}function gc(a){return null!=a&&md(a.length)&&!Bd(a)}function pb(a){return jb(a)&&gc(a)}
function Sf(a){if(!jb(a))return!1;var b=Fb(a);return"[object Error]"==b||"[object DOMException]"==b||"string"==typeof a.message&&"string"==typeof a.name&&!Cd(a)}function Bd(a){if(!cb(a))return!1;a=Fb(a);return"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}function zf(a){return"number"==typeof a&&a==la(a)}function md(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function cb(a){var b=typeof a;return null!=a&&("object"==b||"function"==
b)}function jb(a){return null!=a&&"object"==typeof a}function wg(a){return"number"==typeof a||jb(a)&&"[object Number]"==Fb(a)}function Cd(a){if(!jb(a)||"[object Object]"!=Fb(a))return!1;a=uf(a);if(null===a)return!0;a=Ia.call(a,"constructor")&&a.constructor;return"function"==typeof a&&a instanceof a&&Se.call(a)==Lg}function Af(a){return"string"==typeof a||!ta(a)&&jb(a)&&"[object String]"==Fb(a)}function Ec(a){return"symbol"==typeof a||jb(a)&&"[object Symbol]"==Fb(a)}function he(a){if(!a)return[];if(gc(a))return Af(a)?
ia(a):ob(a);if(Ve&&a[Ve]){a=a[Ve]();for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}b=yb(a);return("[object Map]"==b?Y:"[object Set]"==b?qa:ee)(a)}function Ed(a){if(!a)return 0===a?a:0;a=yc(a);return a===ja||a===-ja?1.7976931348623157E308*(0>a?-1:1):a===a?a:0}function la(a){a=Ed(a);var b=a%1;return a===a?b?a-b:a:0}function xg(a){return a?cd(la(a),0,4294967295):0}function yc(a){if("number"==typeof a)return a;if(Ec(a))return zb;cb(a)&&(a="function"==typeof a.valueOf?a.valueOf():a,a=cb(a)?
a+"":a);if("string"!=typeof a)return 0===a?a:+a;a=a.replace(ra,"");var b=zc.test(a);return b||bc.test(a)?Bc(a.slice(2),b?2:8):Uc.test(a)?zb:+a}function M(a){return pc(a,wc(a))}function Fa(a){return null==a?"":Hb(a)}function ld(a,b,c){a=null==a?B:Kc(a,b);return a===B?c:a}function Gc(a,b){return null!=a&&Hf(a,b,Wd)}function wb(a){return gc(a)?Ya(a):hd(a)}function wc(a){if(gc(a))a=Ya(a,!0);else if(cb(a)){var b=Pe(a),c=[],d;for(d in a)("constructor"!=d||!b&&Ia.call(a,d))&&c.push(d);a=c}else{d=[];if(null!=
a)for(b in Va(a))d.push(b);a=d}return a}function $b(a,b){if(null==a)return{};var c=k(df(a),function(a){return[a]});b=ea(b);return dd(a,c,function(a,c){return b(a,c[0])})}function ee(a){return null==a?[]:Q(a,wb(a))}function Tf(a){return Mg(Fa(a).toLowerCase())}function Mf(a){return(a=Fa(a))&&a.replace(Vb,Yc).replace(O,"")}function tf(a,b,c){a=Fa(a);b=c?B:b;return b===B?Nb.test(a)?a.match(Ea)||[]:a.match(ua)||[]:a.match(b)||[]}function Uf(a){return function(){return a}}function xc(a){return a}function Nf(a){return Ta("function"==
typeof a?a:Eb(a,1))}function Vf(a,b,d){var e=wb(b),f=gd(b,e);null!=d||cb(b)&&(f.length||!e.length)||(d=b,b=a,a=this,f=gd(b,wb(b)));var g=!(cb(d)&&"chain"in d)||!!d.chain,h=Bd(a);c(f,function(c){var d=b[c];a[c]=d;h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__);(c.__actions__=ob(this.__actions__)).push({func:d,args:arguments,thisArg:a});c.__chain__=b;return c}return d.apply(a,m([this.value()],arguments))})});return a}function Wf(){}function fg(a){return ze(a)?E(Fc(a)):
jf(a)}function De(){return[]}function Ee(){return!1}F=null==F?xa:sb.defaults(xa.Object(),F,sb.pick(xa,eb));var xb=F.Array,Bf=F.Date,yg=F.Error,zg=F.Function,Ae=F.Math,Va=F.Object,Xf=F.RegExp,dg=F.String,Dc=F.TypeError,Fe=xb.prototype,ge=Va.prototype,We=F["__core-js_shared__"],Se=zg.prototype.toString,Ia=ge.hasOwnProperty,Ag=0,eg=function(){var a=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),pf=ge.toString,Lg=Se.call(Va),Ng=xa._,Fg=Xf("^"+Se.call(Ia).replace(db,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cf=mb?F.Buffer:B,Pd=F.Symbol,sf=F.Uint8Array,ig=Cf?Cf.allocUnsafe:B,uf=ba(Va.getPrototypeOf,Va),Bg=Va.create,Yf=ge.propertyIsEnumerable,rf=Fe.splice,lg=Pd?Pd.isConcatSpreadable:B,Ve=Pd?Pd.iterator:B,ce=Pd?Pd.toStringTag:B,of=function(){try{var a=Yd(Va,"defineProperty");a({},"",{});return a}catch(b){}}(),Og=F.clearTimeout!==xa.clearTimeout&&F.clearTimeout,Xe=Bf&&Bf.now!==xa.Date.now&&Bf.now,Cg=F.setTimeout!==xa.setTimeout&&
F.setTimeout,Dd=Ae.ceil,de=Ae.floor,ie=Va.getOwnPropertySymbols,Pg=Cf?Cf.isBuffer:B,Re=F.isFinite,Qg=Fe.join,Gg=ba(Va.keys,Va),Ib=Ae.max,fc=Ae.min,Ig=Bf.now,Rg=F.parseInt,gg=Ae.random,Jg=Fe.reverse,Zf=Yd(F,"DataView"),Ye=Yd(F,"Map"),$f=Yd(F,"Promise"),Ge=Yd(F,"Set"),Ze=Yd(F,"WeakMap"),$e=Yd(Va,"create"),Df=Ze&&new Ze,Ce={},Sg=Od(Zf),Tg=Od(Ye),Ug=Od($f),Vg=Od(Ge),Wg=Od(Ze),af=Pd?Pd.prototype:B,Be=af?af.valueOf:B,Lf=af?af.toString:B,fe=function(){function a(){}return function(b){if(!cb(b))return{};
if(Bg)return Bg(b);a.prototype=b;b=new a;a.prototype=B;return b}}();v.templateSettings={escape:Xa,evaluate:Ga,interpolate:qb,variable:"",imports:{_:v}};v.prototype=ha.prototype;v.prototype.constructor=v;Ma.prototype=fe(ha.prototype);Ma.prototype.constructor=Ma;da.prototype=fe(ha.prototype);da.prototype.constructor=da;$a.prototype.clear=function(){this.__data__=$e?$e(null):{};this.size=0};$a.prototype["delete"]=function(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a};$a.prototype.get=
function(a){var b=this.__data__;return $e?(a=b[a],"__lodash_hash_undefined__"===a?B:a):Ia.call(b,a)?b[a]:B};$a.prototype.has=function(a){var b=this.__data__;return $e?b[a]!==B:Ia.call(b,a)};$a.prototype.set=function(a,b){var c=this.__data__;this.size+=this.has(a)?0:1;c[a]=$e&&b===B?"__lodash_hash_undefined__":b;return this};sa.prototype.clear=function(){this.__data__=[];this.size=0};sa.prototype["delete"]=function(a){var b=this.__data__;a=Xb(b,a);if(0>a)return!1;a==b.length-1?b.pop():rf.call(b,a,
1);--this.size;return!0};sa.prototype.get=function(a){var b=this.__data__;a=Xb(b,a);return 0>a?B:b[a][1]};sa.prototype.has=function(a){return-1<Xb(this.__data__,a)};sa.prototype.set=function(a,b){var c=this.__data__,d=Xb(c,a);0>d?(++this.size,c.push([a,b])):c[d][1]=b;return this};Sa.prototype.clear=function(){this.size=0;this.__data__={hash:new $a,map:new (Ye||sa),string:new $a}};Sa.prototype["delete"]=function(a){a=ud(this,a)["delete"](a);this.size-=a?1:0;return a};Sa.prototype.get=function(a){return ud(this,
a).get(a)};Sa.prototype.has=function(a){return ud(this,a).has(a)};Sa.prototype.set=function(a,b){var c=ud(this,a),d=c.size;c.set(a,b);this.size+=c.size==d?0:1;return this};Ha.prototype.add=Ha.prototype.push=function(a){this.__data__.set(a,"__lodash_hash_undefined__");return this};Ha.prototype.has=function(a){return this.__data__.has(a)};ab.prototype.clear=function(){this.__data__=new sa;this.size=0};ab.prototype["delete"]=function(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a};
ab.prototype.get=function(a){return this.__data__.get(a)};ab.prototype.has=function(a){return this.__data__.has(a)};ab.prototype.set=function(a,b){var c=this.__data__;if(c instanceof sa){var d=c.__data__;if(!Ye||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new Sa(d)}c.set(a,b);this.size=c.size;return this};var G=ve(bb),S=ve(fd,!0),X=we(),ya=we(!0),Aa=Df?function(a,b){Df.set(a,b);return a}:xc,U=of?function(a,b){return of(a,"toString",{configurable:!0,enumerable:!1,value:Uf(b),
writable:!0})}:xc,ma=Og||function(a){return xa.clearTimeout(a)},nd=Ge&&1/qa(new Ge([,-0]))[1]==ja?function(a){return new Ge(a)}:Wf,fb=Df?function(a){return Df.get(a)}:Wf,Wa=ie?function(a){if(null==a)return[];a=Va(a);return e(ie(a),function(b){return Yf.call(a,b)})}:De,jg=ie?function(a){for(var b=[];a;)m(b,Wa(a)),a=uf(a);return b}:De,yb=Fb;if(Zf&&"[object DataView]"!=yb(new Zf(new ArrayBuffer(1)))||Ye&&"[object Map]"!=yb(new Ye)||$f&&"[object Promise]"!=yb($f.resolve())||Ge&&"[object Set]"!=yb(new Ge)||
Ze&&"[object WeakMap]"!=yb(new Ze))yb=function(a){var b=Fb(a);if(a=(a="[object Object]"==b?a.constructor:B)?Od(a):"")switch(a){case Sg:return"[object DataView]";case Tg:return"[object Map]";case Ug:return"[object Promise]";case Vg:return"[object Set]";case Wg:return"[object WeakMap]"}return b};var mh=We?Bd:Ee,eh=ng(Aa),Jf=Cg||function(a,b){return xa.setTimeout(a,b)},Hg=ng(U),dh=function(a){a=Ue(a,function(a){500===b.size&&b.clear();return a});var b=a.cache;return a}(function(a){var b=[];46===a.charCodeAt(0)&&
b.push("");a.replace(Kb,function(a,c,d,e){b.push(d?e.replace(hc,"$1"):c||a)});return b}),nh=pa(function(a,b){return pb(a)?Yb(a,ca(b,1,pb,!0)):[]}),oh=pa(function(a,b){var c=Sc(b);pb(c)&&(c=B);return pb(a)?Yb(a,ca(b,1,pb,!0),ea(c,2)):[]}),Xg=pa(function(a,b){var c=Sc(b);pb(c)&&(c=B);return pb(a)?Yb(a,ca(b,1,pb,!0),B,c):[]}),Yg=pa(function(a){var b=k(a,ae);return b.length&&b[0]===a[0]?Oa(b):[]}),ph=pa(function(a){var b=Sc(a),c=k(a,ae);b===Sc(c)?b=B:c.pop();return c.length&&c[0]===a[0]?Oa(c,ea(b,2)):
[]}),qh=pa(function(a){var b=Sc(a),c=k(a,ae);(b="function"==typeof b?b:B)&&c.pop();return c.length&&c[0]===a[0]?Oa(c,B,b):[]}),rh=pa(qg),sh=sd(function(a,b){var c=null==a?0:a.length,d=Qd(a,b);Je(a,k(b,function(a){return zd(a,c)?+a:a}).sort(ec));return d}),th=pa(function(a){return Qc(ca(a,1,pb,!0))}),uh=pa(function(a){var b=Sc(a);pb(b)&&(b=B);return Qc(ca(a,1,pb,!0),ea(b,2))}),vh=pa(function(a){var b=Sc(a),b="function"==typeof b?b:B;return Qc(ca(a,1,pb,!0),B,b)}),wh=pa(function(a,b){return pb(a)?Yb(a,
b):[]}),xh=pa(function(a){return Le(e(a,pb))}),yh=pa(function(a){var b=Sc(a);pb(b)&&(b=B);return Le(e(a,pb),ea(b,2))}),zh=pa(function(a){var b=Sc(a),b="function"==typeof b?b:B;return Le(e(a,pb),B,b)}),Ah=pa(Fd),Bh=pa(function(a){var b=a.length,b=1<b?a[b-1]:B,b="function"==typeof b?(a.pop(),b):B;return Pf(a,b)}),Ch=sd(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return Qd(b,a)};if(1<b||this.__actions__.length||!(d instanceof da)||!zd(c))return this.thru(e);d=d.slice(c,+c+
(b?1:0));d.__actions__.push({func:vf,args:[e],thisArg:B});return(new Ma(d,this.__chain__)).thru(function(a){b&&!a.length&&a.push(B);return a})}),Dh=kd(function(a,b,c){Ia.call(a,c)?++a[c]:vc(a,c,1)}),Eh=Rb(Te),Fh=Rb(og),Gh=kd(function(a,b,c){Ia.call(a,c)?a[c].push(b):vc(a,c,[b])}),Hh=pa(function(b,c,d){var e=-1,f="function"==typeof c,g=gc(b)?xb(b.length):[];G(b,function(b){g[++e]=f?a(c,b,d):Cc(b,c,d)});return g}),Ih=kd(function(a,b,c){vc(a,c,b)}),Jh=kd(function(a,b,c){a[c?0:1].push(b)},function(){return[[],
[]]}),Kh=pa(function(a,b){if(null==a)return[];var c=b.length;1<c&&qc(a,b[0],b[1])?b=[]:2<c&&qc(b[0],b[1],b[2])&&(b=[b[0]]);return ne(a,ca(b,1),[])}),vg=Xe||function(){return xa.Date.now()},Zg=pa(function(a,b,c){var d=1;if(c.length)var e=N(c,td(Zg)),d=d|32;return mc(a,d,b,c,e)}),fh=pa(function(a,b,c){var d=3;if(c.length)var e=N(c,td(fh)),d=d|32;return mc(b,d,a,c,e)}),Lh=pa(function(a,b){return Id(a,1,b)}),Mh=pa(function(a,b,c){return Id(a,yc(b)||0,c)});Ue.Cache=Sa;var Nh=pa(function(b,c){c=1==c.length&&
ta(c[0])?k(c[0],I(ea())):k(ca(c,1),I(ea()));var d=c.length;return pa(function(e){for(var f=-1,g=fc(e.length,d);++f<g;)e[f]=c[f].call(this,e[f]);return a(b,this,e)})}),$g=pa(function(a,b){var c=N(b,td($g));return mc(a,32,B,b,c)}),gh=pa(function(a,b){var c=N(b,td(gh));return mc(a,64,B,b,c)}),Oh=sd(function(a,b){return mc(a,256,B,B,B,b)}),Ph=ef(Ud),Qh=ef(function(a,b){return a>=b}),Ne=Xd(function(){return arguments}())?Xd:function(a){return jb(a)&&Ia.call(a,"callee")&&!Yf.call(a,"callee")},ta=xb.isArray,
Rh=nb?I(nb):Jd,ye=Pg||Ee,Sh=Wc?I(Wc):Kd,ch=Ra?I(Ra):Lc,ah=pd?I(pd):va,bh=ic?I(ic):L,nf=Xc?I(Xc):R,Th=ef(Nc),Uh=ef(function(a,b){return a<=b}),Vh=yd(function(a,b){if(Pe(b)||gc(b))pc(b,wb(b),a);else for(var c in b)Ia.call(b,c)&&hb(a,c,b[c])}),hh=yd(function(a,b){pc(b,wc(b),a)}),Dg=yd(function(a,b,c,d){pc(b,wc(b),a,d)}),Wh=yd(function(a,b,c,d){pc(b,wb(b),a,d)}),Xh=sd(Qd),Yh=pa(function(a,b){a=Va(a);var c=-1,d=b.length,e=2<d?b[2]:B;for(e&&qc(b[0],b[1],e)&&(d=1);++c<d;)for(var e=b[c],f=wc(e),g=-1,h=f.length;++g<
h;){var k=f[g],l=a[k];if(l===B||Rc(l,ge[k])&&!Ia.call(a,k))a[k]=e[k]}return a}),Zh=pa(function(b){b.push(B,ff);return a(ih,B,b)}),$h=La(function(a,b,c){null!=b&&"function"!=typeof b.toString&&(b=pf.call(b));a[b]=c},Uf(xc)),ai=La(function(a,b,c){null!=b&&"function"!=typeof b.toString&&(b=pf.call(b));Ia.call(a,b)?a[b].push(c):a[b]=[c]},ea),bi=pa(Cc),ci=yd(function(a,b,c){me(a,b,c)}),ih=yd(function(a,b,c,d){me(a,b,c,d)}),di=sd(function(a,b){var c={};if(null==a)return c;var d=!1;b=k(b,function(b){b=Zb(b,
a);d||(d=1<b.length);return b});pc(a,df(a),c);d&&(c=Eb(c,7,cf));for(var e=b.length;e--;)$d(c,b[e]);return c}),ei=sd(function(a,b){return null==a?{}:If(a,b)}),jh=Ff(wb),kh=Ff(wc),fi=Gd(function(a,b,c){b=b.toLowerCase();return a+(c?Tf(b):b)}),gi=Gd(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),hi=Gd(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),ii=mf("toLowerCase"),ji=Gd(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),ki=Gd(function(a,b,c){return a+(c?" ":"")+Mg(b)}),li=Gd(function(a,
b,c){return a+(c?" ":"")+b.toUpperCase()}),Mg=mf("toUpperCase"),lh=pa(function(b,c){try{return a(b,B,c)}catch(d){return Sf(d)?d:new yg(d)}}),mi=sd(function(a,b){c(b,function(b){b=Fc(b);vc(a,b,Zg(a[b],a))});return a}),ni=bf(),oi=bf(!0),pi=pa(function(a,b){return function(c){return Cc(c,a,b)}}),qi=pa(function(a,b){return function(c){return Cc(a,c,b)}}),ri=Hc(k),si=Hc(f),ti=Hc(r),ui=Mc(),vi=Mc(!0),wi=Vc(function(a,b){return a+b},0),xi=dc("ceil"),yi=Vc(function(a,b){return a/b},1),zi=dc("floor"),Ai=Vc(function(a,
b){return a*b},1),Bi=dc("round"),Ci=Vc(function(a,b){return a-b},0);v.after=function(a,b){if("function"!=typeof b)throw new Dc("Expected a function");a=la(a);return function(){if(1>--a)return b.apply(this,arguments)}};v.ary=Jb;v.assign=Vh;v.assignIn=hh;v.assignInWith=Dg;v.assignWith=Wh;v.at=Xh;v.before=xf;v.bind=Zg;v.bindAll=mi;v.bindKey=fh;v.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return ta(a)?a:[a]};v.chain=rg;v.chunk=function(a,b,c){b=(c?qc(a,b,c):b===B)?1:Ib(la(b),
0);c=null==a?0:a.length;if(!c||1>b)return[];for(var d=0,e=0,f=xb(Dd(c/b));d<c;)f[e++]=Gb(a,d,d+=b);return f};v.compact=function(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e};v.concat=function(){var a=arguments.length;if(!a)return[];for(var b=xb(a-1),c=arguments[0];a--;)b[a-1]=arguments[a];return m(ta(c)?ob(c):[c],ca(b,1))};v.cond=function(b){var c=null==b?0:b.length,d=ea();b=c?k(b,function(a){if("function"!=typeof a[1])throw new Dc("Expected a function");
return[d(a[0]),a[1]]}):[];return pa(function(d){for(var e=-1;++e<c;){var f=b[e];if(a(f[0],this,d))return a(f[1],this,d)}})};v.conforms=function(a){return Rd(Eb(a,1))};v.constant=Uf;v.countBy=Dh;v.create=function(a,b){var c=fe(a);return null==b?c:ke(c,b)};v.curry=Qf;v.curryRight=ug;v.debounce=Rf;v.defaults=Yh;v.defaultsDeep=Zh;v.defer=Lh;v.delay=Mh;v.difference=nh;v.differenceBy=oh;v.differenceWith=Xg;v.drop=function(a,b,c){var d=null==a?0:a.length;if(!d)return[];b=c||b===B?1:la(b);return Gb(a,0>b?
0:b,d)};v.dropRight=function(a,b,c){var d=null==a?0:a.length;if(!d)return[];b=c||b===B?1:la(b);b=d-b;return Gb(a,0,0>b?0:b)};v.dropRightWhile=function(a,b){return a&&a.length?xd(a,ea(b,3),!0,!0):[]};v.dropWhile=function(a,b){return a&&a.length?xd(a,ea(b,3),!0):[]};v.fill=function(a,b,c,d){var e=null==a?0:a.length;if(!e)return[];c&&"number"!=typeof c&&qc(a,b,c)&&(c=0,d=e);e=a.length;c=la(c);0>c&&(c=-c>e?0:e+c);d=d===B||d>e?e:la(d);0>d&&(d+=e);for(d=c>d?0:xg(d);c<d;)a[c++]=b;return a};v.filter=function(a,
b){return(ta(a)?e:P)(a,ea(b,3))};v.flatMap=function(a,b){return ca(wf(a,b),1)};v.flatMapDeep=function(a,b){return ca(wf(a,b),ja)};v.flatMapDepth=function(a,b,c){c=c===B?1:la(c);return ca(wf(a,b),c)};v.flatten=kg;v.flattenDeep=function(a){return(null==a?0:a.length)?ca(a,ja):[]};v.flattenDepth=function(a,b){if(null==a||!a.length)return[];b=b===B?1:la(b);return ca(a,b)};v.flip=function(a){return mc(a,512)};v.flow=ni;v.flowRight=oi;v.fromPairs=function(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=
a[b];d[e[0]]=e[1]}return d};v.functions=function(a){return null==a?[]:gd(a,wb(a))};v.functionsIn=function(a){return null==a?[]:gd(a,wc(a))};v.groupBy=Gh;v.initial=function(a){return(null==a?0:a.length)?Gb(a,0,-1):[]};v.intersection=Yg;v.intersectionBy=ph;v.intersectionWith=qh;v.invert=$h;v.invertBy=ai;v.invokeMap=Hh;v.iteratee=Nf;v.keyBy=Ih;v.keys=wb;v.keysIn=wc;v.map=wf;v.mapKeys=function(a,b){var c={};b=ea(b,3);bb(a,function(a,d,e){vc(c,b(a,d,e),a)});return c};v.mapValues=function(a,b){var c={};
b=ea(b,3);bb(a,function(a,d,e){vc(c,d,b(a,d,e))});return c};v.matches=function(a){return le(Eb(a,1))};v.matchesProperty=function(a,b){return gf(a,Eb(b,1))};v.memoize=Ue;v.merge=ci;v.mergeWith=ih;v.method=pi;v.methodOf=qi;v.mixin=Vf;v.negate=yf;v.nthArg=function(a){a=la(a);return pa(function(b){return hf(b,a)})};v.omit=di;v.omitBy=function(a,b){return $b(a,yf(ea(b)))};v.once=function(a){return xf(2,a)};v.orderBy=function(a,b,c,d){if(null==a)return[];ta(b)||(b=null==b?[]:[b]);c=d?B:c;ta(c)||(c=null==
c?[]:[c]);return ne(a,b,c)};v.over=ri;v.overArgs=Nh;v.overEvery=si;v.overSome=ti;v.partial=$g;v.partialRight=gh;v.partition=Jh;v.pick=ei;v.pickBy=$b;v.property=fg;v.propertyOf=function(a){return function(b){return null==a?B:Kc(a,b)}};v.pull=rh;v.pullAll=qg;v.pullAllBy=function(a,b,c){return a&&a.length&&b&&b.length?Ie(a,b,ea(c,2)):a};v.pullAllWith=function(a,b,c){return a&&a.length&&b&&b.length?Ie(a,b,B,c):a};v.pullAt=sh;v.range=ui;v.rangeRight=vi;v.rearg=Oh;v.reject=function(a,b){return(ta(a)?e:
P)(a,yf(ea(b,3)))};v.remove=function(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=ea(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}Je(a,e);return c};v.rest=function(a,b){if("function"!=typeof a)throw new Dc("Expected a function");b=b===B?b:la(b);return pa(a,b)};v.reverse=Of;v.sampleSize=function(a,b,c){b=(c?qc(a,b,c):b===B)?1:la(b);return(ta(a)?ib:Oc)(a,b)};v.set=function(a,b,c){return null==a?a:Pc(a,b,c)};v.setWith=function(a,b,c,d){d="function"==typeof d?d:B;
return null==a?a:Pc(a,b,c,d)};v.shuffle=function(a){return(ta(a)?Cb:Ke)(a)};v.slice=function(a,b,c){var d=null==a?0:a.length;if(!d)return[];c&&"number"!=typeof c&&qc(a,b,c)?(b=0,c=d):(b=null==b?0:la(b),c=c===B?d:la(c));return Gb(a,b,c)};v.sortBy=Kh;v.sortedUniq=function(a){return a&&a.length?wd(a):[]};v.sortedUniqBy=function(a,b){return a&&a.length?wd(a,ea(b,2)):[]};v.split=function(a,b,c){c&&"number"!=typeof c&&qc(a,b,c)&&(b=c=B);c=c===B?4294967295:c>>>0;return c?(a=Fa(a))&&("string"==typeof b||
null!=b&&!ah(b))&&(b=Hb(b),!b&&Bb.test(a))?oc(ia(a),0,c):a.split(b,c):[]};v.spread=function(b,c){if("function"!=typeof b)throw new Dc("Expected a function");c=null==c?0:Ib(la(c),0);return pa(function(d){var e=d[c];d=oc(d,0,c);e&&m(d,e);return a(b,this,d)})};v.tail=function(a){var b=null==a?0:a.length;return b?Gb(a,1,b):[]};v.take=function(a,b,c){if(!a||!a.length)return[];b=c||b===B?1:la(b);return Gb(a,0,0>b?0:b)};v.takeRight=function(a,b,c){var d=null==a?0:a.length;if(!d)return[];b=c||b===B?1:la(b);
b=d-b;return Gb(a,0>b?0:b,d)};v.takeRightWhile=function(a,b){return a&&a.length?xd(a,ea(b,3),!1,!0):[]};v.takeWhile=function(a,b){return a&&a.length?xd(a,ea(b,3)):[]};v.tap=function(a,b){b(a);return a};v.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Dc("Expected a function");cb(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e);return Rf(a,b,{leading:d,maxWait:b,trailing:e})};v.thru=vf;v.toArray=he;v.toPairs=jh;v.toPairsIn=kh;v.toPath=function(a){return ta(a)?
k(a,Fc):Ec(a)?[a]:ob(dh(Fa(a)))};v.toPlainObject=M;v.transform=function(a,b,d){var e=ta(a),f=e||ye(a)||nf(a);b=ea(b,4);if(null==d){var g=a&&a.constructor;d=f?e?new g:[]:cb(a)?Bd(g)?fe(uf(a)):{}:{}}(f?c:bb)(a,function(a,c,e){return b(d,a,c,e)});return d};v.unary=function(a){return Jb(a,1)};v.union=th;v.unionBy=uh;v.unionWith=vh;v.uniq=function(a){return a&&a.length?Qc(a):[]};v.uniqBy=function(a,b){return a&&a.length?Qc(a,ea(b,2)):[]};v.uniqWith=function(a,b){b="function"==typeof b?b:B;return a&&a.length?
Qc(a,B,b):[]};v.unset=function(a,b){return null==a?!0:$d(a,b)};v.unzip=Fd;v.unzipWith=Pf;v.update=function(a,b,c){null!=a&&(c=te(c),a=Pc(a,b,c(Kc(a,b)),void 0));return a};v.updateWith=function(a,b,c,d){d="function"==typeof d?d:B;null!=a&&(c=te(c),a=Pc(a,b,c(Kc(a,b)),d));return a};v.values=ee;v.valuesIn=function(a){return null==a?[]:Q(a,wc(a))};v.without=wh;v.words=tf;v.wrap=function(a,b){return $g(te(b),a)};v.xor=xh;v.xorBy=yh;v.xorWith=zh;v.zip=Ah;v.zipObject=function(a,b){return se(a||[],b||[],
hb)};v.zipObjectDeep=function(a,b){return se(a||[],b||[],Pc)};v.zipWith=Bh;v.entries=jh;v.entriesIn=kh;v.extend=hh;v.extendWith=Dg;Vf(v,v);v.add=wi;v.attempt=lh;v.camelCase=fi;v.capitalize=Tf;v.ceil=xi;v.clamp=function(a,b,c){c===B&&(c=b,b=B);c!==B&&(c=yc(c),c=c===c?c:0);b!==B&&(b=yc(b),b=b===b?b:0);return cd(yc(a),b,c)};v.clone=function(a){return Eb(a,4)};v.cloneDeep=function(a){return Eb(a,5)};v.cloneDeepWith=function(a,b){b="function"==typeof b?b:B;return Eb(a,5,b)};v.cloneWith=function(a,b){b=
"function"==typeof b?b:B;return Eb(a,4,b)};v.conformsTo=function(a,b){return null==b||Sd(a,b,wb(b))};v.deburr=Mf;v.defaultTo=function(a,b){return null==a||a!==a?b:a};v.divide=yi;v.endsWith=function(a,b,c){a=Fa(a);b=Hb(b);var d=a.length,d=c=c===B?d:cd(la(c),0,d);c-=b.length;return 0<=c&&a.slice(c,d)==b};v.eq=Rc;v.escape=function(a){return(a=Fa(a))&&kb.test(a)?a.replace(Ca,Wb):a};v.escapeRegExp=function(a){return(a=Fa(a))&&Tb.test(a)?a.replace(db,"\\$&"):a};v.every=function(a,b,c){var d=ta(a)?f:tb;
c&&qc(a,b,c)&&(b=B);return d(a,ea(b,3))};v.find=Eh;v.findIndex=Te;v.findKey=function(a,b){return q(a,ea(b,3),bb)};v.findLast=Fh;v.findLastIndex=og;v.findLastKey=function(a,b){return q(a,ea(b,3),fd)};v.floor=zi;v.forEach=sg;v.forEachRight=tg;v.forIn=function(a,b){return null==a?a:X(a,ea(b,3),wc)};v.forInRight=function(a,b){return null==a?a:ya(a,ea(b,3),wc)};v.forOwn=function(a,b){return a&&bb(a,ea(b,3))};v.forOwnRight=function(a,b){return a&&fd(a,ea(b,3))};v.get=ld;v.gt=Ph;v.gte=Qh;v.has=function(a,
b){return null!=a&&Hf(a,b,Vd)};v.hasIn=Gc;v.head=pg;v.identity=xc;v.includes=function(a,b,c,d){a=gc(a)?a:ee(a);c=c&&!d?la(c):0;d=a.length;0>c&&(c=Ib(d+c,0));return Af(a)?c<=d&&-1<a.indexOf(b,c):!!d&&-1<u(a,b,c)};v.indexOf=function(a,b,c){var d=null==a?0:a.length;if(!d)return-1;c=null==c?0:la(c);0>c&&(c=Ib(d+c,0));return u(a,b,c)};v.inRange=function(a,b,c){b=Ed(b);c===B?(c=b,b=0):c=Ed(c);a=yc(a);return a>=fc(b,c)&&a<Ib(b,c)};v.invoke=bi;v.isArguments=Ne;v.isArray=ta;v.isArrayBuffer=Rh;v.isArrayLike=
gc;v.isArrayLikeObject=pb;v.isBoolean=function(a){return!0===a||!1===a||jb(a)&&"[object Boolean]"==Fb(a)};v.isBuffer=ye;v.isDate=Sh;v.isElement=function(a){return jb(a)&&1===a.nodeType&&!Cd(a)};v.isEmpty=function(a){if(null==a)return!0;if(gc(a)&&(ta(a)||"string"==typeof a||"function"==typeof a.splice||ye(a)||nf(a)||Ne(a)))return!a.length;var b=yb(a);if("[object Map]"==b||"[object Set]"==b)return!a.size;if(Pe(a))return!hd(a).length;for(var c in a)if(Ia.call(a,c))return!1;return!0};v.isEqual=function(a,
b){return jc(a,b)};v.isEqualWith=function(a,b,c){var d=(c="function"==typeof c?c:B)?c(a,b):B;return d===B?jc(a,b,B,c):!!d};v.isError=Sf;v.isFinite=function(a){return"number"==typeof a&&Re(a)};v.isFunction=Bd;v.isInteger=zf;v.isLength=md;v.isMap=ch;v.isMatch=function(a,b){return a===b||kc(a,b,Gf(b))};v.isMatchWith=function(a,b,c){c="function"==typeof c?c:B;return kc(a,b,Gf(b),c)};v.isNaN=function(a){return wg(a)&&a!=+a};v.isNative=function(a){if(mh(a))throw new yg("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");
return cc(a)};v.isNil=function(a){return null==a};v.isNull=function(a){return null===a};v.isNumber=wg;v.isObject=cb;v.isObjectLike=jb;v.isPlainObject=Cd;v.isRegExp=ah;v.isSafeInteger=function(a){return zf(a)&&-9007199254740991<=a&&9007199254740991>=a};v.isSet=bh;v.isString=Af;v.isSymbol=Ec;v.isTypedArray=nf;v.isUndefined=function(a){return a===B};v.isWeakMap=function(a){return jb(a)&&"[object WeakMap]"==yb(a)};v.isWeakSet=function(a){return jb(a)&&"[object WeakSet]"==Fb(a)};v.join=function(a,b){return null==
a?"":Qg.call(a,b)};v.kebabCase=gi;v.last=Sc;v.lastIndexOf=function(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;c!==B&&(e=la(c),e=0>e?Ib(d+e,0):fc(e,d-1));if(b===b)a:{for(c=e+1;c--;)if(a[c]===b){a=c;break a}a=c}else a=t(a,A,e,!0);return a};v.lowerCase=hi;v.lowerFirst=ii;v.lt=Th;v.lte=Uh;v.max=function(a){return a&&a.length?Jc(a,xc,Ud):B};v.maxBy=function(a,b){return a&&a.length?Jc(a,ea(b,2),Ud):B};v.mean=function(a){return x(a,xc)};v.meanBy=function(a,b){return x(a,ea(b,2))};v.min=function(a){return a&&
a.length?Jc(a,xc,Nc):B};v.minBy=function(a,b){return a&&a.length?Jc(a,ea(b,2),Nc):B};v.stubArray=De;v.stubFalse=Ee;v.stubObject=function(){return{}};v.stubString=function(){return""};v.stubTrue=function(){return!0};v.multiply=Ai;v.nth=function(a,b){return a&&a.length?hf(a,la(b)):B};v.noConflict=function(){xa._===this&&(xa._=Ng);return this};v.noop=Wf;v.now=vg;v.pad=function(a,b,c){a=Fa(a);var d=(b=la(b))?fa(a):0;if(!b||d>=b)return a;b=(b-d)/2;return Z(de(b),c)+a+Z(Dd(b),c)};v.padEnd=function(a,b,
c){a=Fa(a);var d=(b=la(b))?fa(a):0;return b&&d<b?a+Z(b-d,c):a};v.padStart=function(a,b,c){a=Fa(a);var d=(b=la(b))?fa(a):0;return b&&d<b?Z(b-d,c)+a:a};v.parseInt=function(a,b,c){c||null==b?b=0:b&&(b=+b);return Rg(Fa(a).replace(Lb,""),b||0)};v.random=function(a,b,c){c&&"boolean"!=typeof c&&qc(a,b,c)&&(b=c=B);c===B&&("boolean"==typeof b?(c=b,b=B):"boolean"==typeof a&&(c=a,a=B));a===B&&b===B?(a=0,b=1):(a=Ed(a),b===B?(b=a,a=0):b=Ed(b));if(a>b){var d=a;a=b;b=d}return c||a%1||b%1?(c=gg(),fc(a+c*(b-a+lb("1e-"+
((c+"").length-1))),b)):oe(a,b)};v.reduce=function(a,b,c){var d=ta(a)?l:y,e=3>arguments.length;return d(a,ea(b,4),c,e,G)};v.reduceRight=function(a,b,c){var d=ta(a)?n:y,e=3>arguments.length;return d(a,ea(b,4),c,e,S)};v.repeat=function(a,b,c){b=(c?qc(a,b,c):b===B)?1:la(b);return pe(Fa(a),b)};v.replace=function(){var a=arguments,b=Fa(a[0]);return 3>a.length?b:b.replace(a[1],a[2])};v.result=function(a,b,c){b=Zb(b,a);var d=-1,e=b.length;e||(e=1,a=B);for(;++d<e;){var f=null==a?B:a[Fc(b[d])];f===B&&(d=e,
f=c);a=Bd(f)?f.call(a):f}return a};v.round=Bi;v.runInContext=$c;v.sample=function(a){return(ta(a)?Za:vd)(a)};v.size=function(a){if(null==a)return 0;if(gc(a))return Af(a)?fa(a):a.length;var b=yb(a);return"[object Map]"==b||"[object Set]"==b?a.size:hd(a).length};v.snakeCase=ji;v.some=function(a,b,c){var d=ta(a)?r:kf;c&&qc(a,b,c)&&(b=B);return d(a,ea(b,3))};v.sortedIndex=function(a,b){return Zd(a,b)};v.sortedIndexBy=function(a,b,c){return qe(a,b,ea(c,2))};v.sortedIndexOf=function(a,b){var c=null==a?
0:a.length;if(c){var d=Zd(a,b);if(d<c&&Rc(a[d],b))return d}return-1};v.sortedLastIndex=function(a,b){return Zd(a,b,!0)};v.sortedLastIndexBy=function(a,b,c){return qe(a,b,ea(c,2),!0)};v.sortedLastIndexOf=function(a,b){if(null==a?0:a.length){var c=Zd(a,b,!0)-1;if(Rc(a[c],b))return c}return-1};v.startCase=ki;v.startsWith=function(a,b,c){a=Fa(a);c=null==c?0:cd(la(c),0,a.length);b=Hb(b);return a.slice(c,c+b.length)==b};v.subtract=Ci;v.sum=function(a){return a&&a.length?J(a,xc):0};v.sumBy=function(a,b){return a&&
a.length?J(a,ea(b,2)):0};v.template=function(a,b,c){var d=v.templateSettings;c&&qc(a,b,c)&&(b=B);a=Fa(a);b=Dg({},b,d,nc);c=Dg({},b.imports,d.imports,nc);var e=wb(c),f=Q(c,e),g,h,k=0;c=b.interpolate||Ab;var l="__p += '";c=Xf((b.escape||Ab).source+"|"+c.source+"|"+(c===qb?Mb:Ab).source+"|"+(b.evaluate||Ab).source+"|$","g");var G="//# sourceURL="+(Ia.call(b,"sourceURL")?(b.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ac+"]")+"\n";a.replace(c,function(b,c,d,e,f,G){d||(d=e);l+=a.slice(k,
G).replace(wa,p);c&&(g=!0,l+="' +\n__e("+c+") +\n'");f&&(h=!0,l+="';\n"+f+";\n__p += '");d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");k=G+b.length;return b});l+="';\n";(b=Ia.call(b,"variable")&&b.variable)||(l="with (obj) {\n"+l+"\n}\n");l=(h?l.replace(Ua,""):l).replace(za,"$1").replace(ga,"$1;");l="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(g?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":
";\n")+l+"return __p\n}";b=lh(function(){return zg(e,G+"return "+l).apply(B,f)});b.source=l;if(Sf(b))throw b;return b};v.times=function(a,b){a=la(a);if(1>a||9007199254740991<a)return[];var c=4294967295,d=fc(a,4294967295);b=ea(b);a-=4294967295;for(d=H(d,b);++c<a;)b(c);return d};v.toFinite=Ed;v.toInteger=la;v.toLength=xg;v.toLower=function(a){return Fa(a).toLowerCase()};v.toNumber=yc;v.toSafeInteger=function(a){return a?cd(la(a),-9007199254740991,9007199254740991):0===a?a:0};v.toString=Fa;v.toUpper=
function(a){return Fa(a).toUpperCase()};v.trim=function(a,b,c){if((a=Fa(a))&&(c||b===B))return a.replace(ra,"");if(!a||!(b=Hb(b)))return a;a=ia(a);c=ia(b);b=K(a,c);c=aa(a,c)+1;return oc(a,b,c).join("")};v.trimEnd=function(a,b,c){if((a=Fa(a))&&(c||b===B))return a.replace(Na,"");if(!a||!(b=Hb(b)))return a;a=ia(a);b=aa(a,ia(b))+1;return oc(a,0,b).join("")};v.trimStart=function(a,b,c){if((a=Fa(a))&&(c||b===B))return a.replace(Lb,"");if(!a||!(b=Hb(b)))return a;a=ia(a);b=K(a,ia(b));return oc(a,b).join("")};
v.truncate=function(a,b){var c=30,d="...";if(cb(b))var e="separator"in b?b.separator:e,c="length"in b?la(b.length):c,d="omission"in b?Hb(b.omission):d;a=Fa(a);var f=a.length;if(Bb.test(a))var g=ia(a),f=g.length;if(c>=f)return a;f=c-fa(d);if(1>f)return d;c=g?oc(g,0,f).join(""):a.slice(0,f);if(e===B)return c+d;g&&(f+=c.length-f);if(ah(e)){if(a.slice(f).search(e)){var h=c;e.global||(e=Xf(e.source,Fa(Ka.exec(e))+"g"));for(e.lastIndex=0;g=e.exec(h);)var k=g.index;c=c.slice(0,k===B?f:k)}}else a.indexOf(Hb(e),
f)!=f&&(e=c.lastIndexOf(e),-1<e&&(c=c.slice(0,e)));return c+d};v.unescape=function(a){return(a=Fa(a))&&Sb.test(a)?a.replace(gb,Zc):a};v.uniqueId=function(a){var b=++Ag;return Fa(a)+b};v.upperCase=li;v.upperFirst=Mg;v.each=sg;v.eachRight=tg;v.first=pg;Vf(v,function(){var a={};bb(v,function(b,c){Ia.call(v.prototype,c)||(a[c]=b)});return a}(),{chain:!1});v.VERSION="4.17.13";c("bind bindKey curry curryRight partial partialRight".split(" "),function(a){v[a].placeholder=v});c(["drop","take"],function(a,
b){da.prototype[a]=function(c){c=c===B?1:Ib(la(c),0);var d=this.__filtered__&&!b?new da(this):this.clone();d.__filtered__?d.__takeCount__=fc(c,d.__takeCount__):d.__views__.push({size:fc(c,4294967295),type:a+(0>d.__dir__?"Right":"")});return d};da.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}});c(["filter","map","takeWhile"],function(a,b){var c=b+1,d=1==c||3==c;da.prototype[a]=function(a){var b=this.clone();b.__iteratees__.push({iteratee:ea(a,3),type:c});b.__filtered__=b.__filtered__||
d;return b}});c(["head","last"],function(a,b){var c="take"+(b?"Right":"");da.prototype[a]=function(){return this[c](1).value()[0]}});c(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");da.prototype[a]=function(){return this.__filtered__?new da(this):this[c](1)}});da.prototype.compact=function(){return this.filter(xc)};da.prototype.find=function(a){return this.filter(a).head()};da.prototype.findLast=function(a){return this.reverse().find(a)};da.prototype.invokeMap=pa(function(a,b){return"function"==
typeof a?new da(this):this.map(function(c){return Cc(c,a,b)})});da.prototype.reject=function(a){return this.filter(yf(ea(a)))};da.prototype.slice=function(a,b){a=la(a);var c=this;if(c.__filtered__&&(0<a||0>b))return new da(c);0>a?c=c.takeRight(-a):a&&(c=c.drop(a));b!==B&&(b=la(b),c=0>b?c.dropRight(-b):c.take(b-a));return c};da.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()};da.prototype.toArray=function(){return this.take(4294967295)};bb(da.prototype,function(a,
b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=v[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(v.prototype[b]=function(){var b=this.__wrapped__,g=d?[1]:arguments,h=b instanceof da,k=g[0],l=h||ta(b),G=function(a){a=e.apply(v,m([a],g));return d&&n?a[0]:a};l&&c&&"function"==typeof k&&1!=k.length&&(h=l=!1);var n=this.__chain__,S=!!this.__actions__.length,k=f&&!n,h=h&&!S;if(!f&&l)return b=h?b:new da(this),b=a.apply(b,g),b.__actions__.push({func:vf,args:[G],
thisArg:B}),new Ma(b,n);if(k&&h)return a.apply(this,g);b=this.thru(G);return k?d?b.value()[0]:b.value():b})});c("pop push shift sort splice unshift".split(" "),function(a){var b=Fe[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);v.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(ta(e)?e:[],a)}return this[c](function(c){return b.apply(ta(c)?c:[],a)})}});bb(da.prototype,function(a,b){var c=v[b];if(c){var d=c.name+"";Ia.call(Ce,
d)||(Ce[d]=[]);Ce[d].push({name:b,func:c})}});Ce[rc(B,2).name]=[{name:"wrapper",func:B}];da.prototype.clone=function(){var a=new da(this.__wrapped__);a.__actions__=ob(this.__actions__);a.__dir__=this.__dir__;a.__filtered__=this.__filtered__;a.__iteratees__=ob(this.__iteratees__);a.__takeCount__=this.__takeCount__;a.__views__=ob(this.__views__);return a};da.prototype.reverse=function(){if(this.__filtered__){var a=new da(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a};
da.prototype.value=function(){var a,b=this.__wrapped__.value(),c=this.__dir__,d=ta(b),e=0>c,f=d?b.length:0;a=0;for(var g=f,h=this.__views__,k=-1,l=h.length;++k<l;){var G=h[k],m=G.size;switch(G.type){case "drop":a+=m;break;case "dropRight":g-=m;break;case "take":g=fc(g,a+m);break;case "takeRight":a=Ib(a,g-m)}}h=g;g=h-a;a=e?h:a-1;h=this.__iteratees__;k=h.length;l=0;G=fc(g,this.__takeCount__);if(!d||!e&&f==g&&G==g)return re(b,this.__actions__);d=[];a:for(;g--&&l<G;){a+=c;e=-1;for(f=b[a];++e<k;){var n=
h[e],m=n.iteratee,n=n.type,m=m(f);if(2==n)f=m;else if(!m)if(1==n)continue a;else break a}d[l++]=f}return d};v.prototype.at=Ch;v.prototype.chain=function(){return rg(this)};v.prototype.commit=function(){return new Ma(this.value(),this.__chain__)};v.prototype.next=function(){this.__values__===B&&(this.__values__=he(this.value()));var a=this.__index__>=this.__values__.length,b=a?B:this.__values__[this.__index__++];return{done:a,value:b}};v.prototype.plant=function(a){for(var b,c=this;c instanceof ha;){var d=
cg(c);d.__index__=0;d.__values__=B;b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}e.__wrapped__=a;return b};v.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof da?(this.__actions__.length&&(a=new da(this)),a=a.reverse(),a.__actions__.push({func:vf,args:[Of],thisArg:B}),new Ma(a,this.__chain__)):this.thru(Of)};v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=function(){return re(this.__wrapped__,this.__actions__)};v.prototype.first=v.prototype.head;Ve&&(v.prototype[Ve]=
Kg);return v}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(xa._=sb,define(function(){return sb})):Ya?((Ya.exports=sb)._=sb,ib._=sb):xa._=sb}).call(this);_.mixin({eachCons:function(a,b,c){return _.zipWith.apply(null,_.times(b,function(c){return _.slice(a,c,a.length-b+c+1)}).concat(c))},flattenObject:function(a){return _.reduce(a,function(a,c,d){_.isPlainObject(c)?_.each(_.flattenObject(c),function(c,e){a[d+"."+e]=c}):a[d]=c;return a},{})}});
window.JSONStore={get_object:function(a){try{return JSON.parse(localStorage.getItem(a))}catch(b){return null}},set_object:function(a,b){var c=JSON.stringify(b);try{localStorage.setItem(a,c)}catch(d){}},delete:function(a){try{localStorage.removeItem(a)}catch(b){}},modify_store:function(a,b){this.set_object(a,b(this.get_object(a)))}};var SESSION_END_TRACKING_DATA_KEY="session_end_tracking_events",Tracking=function(){this.enabled=!1;this.reset_counters()};
Tracking.arrange_arguments=function(a){return function(b,c,d){"function"===typeof c&&(d=c,c={});return a.call(this,b,c,d)}};Tracking.if_enabled=function(a){return function(){var b=arguments[arguments.length-1];return this.enabled?a.apply(this,arguments):("function"===typeof b&&setTimeout(b),!1)}};
Tracking.prototype={start_tracking:function(){if("undefined"===typeof mixpanel||"undefined"===typeof mixpanel.register)return!1;this.enabled=!0;this.tracking_data=window.TRACKING_DATA;var a;"undefined"!==typeof CURRENT_TAG&&CURRENT_TAG&&(a=CURRENT_TAG.tag.slug);mixpanel.register({"Logged In":!!CURRENT_USER,"Is Editor":CURRENT_USER&&CURRENT_USER.is_editor,"Is Moderator":CURRENT_USER&&CURRENT_USER.is_moderator,"Mobile Site":MOBILE_DEVICE,AMP:!1,Tag:a,genius_platform:"web"});"AB Test - apple_desktop_static_cta;AB Test - apple_player_position;AB Test - apple_player_position_mobile;Annotatable ID;Annotatable Type;Comment Count;Has Apple Match;Has Description;Has Recirculated Articles;Has Translation Q&A;Has Youtube URL;Lyrics Language;Music?;NRM Target Date;NRM Tier;Primary Album;Primary Album ID;Primary Artist;Primary Artist ID;Primary Tag;Primary Tag ID;Release Date;Song ID;Title;amp_cache;cohort_ids;containing_frame_is_fullbleed;created_at;created_month;created_year;distinct_id;featured_video;has_featured_annotation;has_verified_callout;hot;platform_variant;provider;provider_id;react;song;song_id;song_tier;web_interstitial_variant".split(";").forEach(function(a){mixpanel.unregister(a)});
CURRENT_USER?mixpanel.identify(CURRENT_USER.id):window.ga(function(a){return mixpanel.identify(a.get("clientId"))});app.is_on_song_page&&app.is_on_song_page()&&this.track("Song Page Load");0<$("body.act-new.cont-users").length&&(a=$.deparam(location.search.substring(1)).from_question_email)&&this.track("Question email signup clicked",{question_id:a});mixpanel.track_links(".android_interstitial-download","clicked_download_from_android_interstitial",{"from url":document.location.href});window["Genius.cmp"]=
window["Genius.cmp"]||[];window["Genius.cmp"].push(function(a){a.resolve_with_tracking(this)}.bind(this))},set_tacking_data:function(a){this.tracking_data=a},reset_counters:function(){this.annotations_opened=0;this.line_item_opens={};this.song_page_loaded_from_direct_link_to_un_annotated_line=!1;this.annotation_id_opened_from_permalink=null},registered_properties:{},register:function(a){_.extend(this.registered_properties,a)},build_event_data:function(a,b){b=b||{};var c;c=b.properties?b.properties:
this.is_old_preprocessed_event(a)?this.preprocess_options(a,b):b;return $.extend({},this.registered_properties,this.tracking_data,_.flattenObject(c),{dfp_enabled:"googletag"in window})},is_old_preprocessed_event:function(a){return _.includes("Song Page Load;Wrapped Web Page Load;Annotated Web Page Load;Open Annotation;Engaged Annotation View;Offsite Filter Selection;Inbox Open;Line Item Open".split(";"),a)},preprocess_options:function(a,b){if("Song Page Load"===a)return _.merge(b,{"Un-annotated direct link":!!this.song_page_loaded_from_direct_link_to_un_annotated_line,
"Un-annotated line":this.song_page_loaded_from_direct_link_to_un_annotated_line});if("Wrapped Web Page Load"===a||"Annotated Web Page Load"===a)return{"Source location":b.source_location,script_source:b.script_source,script_source_version:b.script_source_version,"Host Page Referrer":b.referrer};if("Open Annotation"===a||"Engaged Annotation View"===a){this.annotations_opened++;var c={"Annotation ID":b.annotation_id,"Annotator Login":b.annotator_login,"Annotatable Type":b.annotatable_type,script_source:b.script_source,
script_source_version:b.script_source_version};b.skip_counters||$.extend(c,{"Cumulative Annos Opened":this.annotations_opened,"Anno Opened from Permalink":b.annotation_id===this.annotation_id_opened_from_permalink,"First Anno was Permalink":!!this.annotation_id_opened_from_permalink});return c}if("Offsite Filter Selection"===a)return{"Filter Type":b.filter_type,"Filter Arguments":b.filter_args,"Filter Reason":b.reason,script_source:b.script_source,script_source_version:b.script_source_version};if("Inbox Open"===
a)return{"Inbox Name":b.inbox_name,"Unread Count When Opened":b.unread_count};if("Line Item Open"===a)return"undefined"==typeof this.line_item_opens[b.inbox_name]&&(this.line_item_opens[b.inbox_name]=0),{"Inbox Name":b.inbox_name,"Line Item Index":b.index,"Action Name":b.action_name,"Target Type":b.target_type,"Viewing Context":b.viewing_context,"Cumulative Line Items Opened":this.line_item_opens[b.inbox_name]++,"Line Item Strategy":b.strategy_name,Bagon:!!b.bagon,iframe:!!b.iframe}},track:Tracking.arrange_arguments(Tracking.if_enabled(function(a,
b,c){b=this.build_event_data(a,b);mixpanel.track(a,b,c);window.FS&&window.FS.from_mixpanel(a,b)})),track_with_delayed_handling:Tracking.arrange_arguments(Tracking.if_enabled(function(a,b,c){bowser.mobile||bowser.tablet?JSONStore.modify_store(SESSION_END_TRACKING_DATA_KEY,function(c){c=c||[];return c.concat({event_name:a,event_options:this.build_event_data(a,b),event_occurred_at:Date.now()})}.bind(this)):this.track(a,b,c)})),track_with_timeout:Tracking.arrange_arguments(Tracking.if_enabled(function(a,
b,c){var d=this.fetch_mixpanel_config("track_links_timeout",0);c=_.once(c);setTimeout(c,d);this.track(a,b,c)})),track_link_click:function(a){var b=$(a.target).closest("a"),c=b.attr("href"),b=2===a.which||a.metaKey||a.ctrlKey||"_blank"===b.attr("target"),d=Array.prototype.slice.call(arguments,1);if(b)return this.track.apply(this,d);a.preventDefault();var f="function"===typeof d[d.length-1]?d.pop():null;return this.track_with_timeout.apply(this,d.concat(function(){f&&f();window.location.href=c}))},
set_annotation_opened_from_permalink:function(a){this.annotation_id_opened_from_permalink=a},set_song_page_loaded_from_direct_link_to_un_annotated_line:function(a){this.song_page_loaded_from_direct_link_to_un_annotated_line=a},fetch_mixpanel_config:function(a,b){return this.enabled&&"function"==typeof mixpanel.get_config?mixpanel.get_config(a):b}};$.extend(window.app,{tracking:new Tracking});
$(function(){$(document.body).on("annotation:open","a[data-id]",function(){app.tracking.track("Open Annotation",{annotation_id:$(this).attr("data-id")})});$(document).on("click",".show_help:not(.pressed)",function(){app.tracking.track("opened_what_is_genius_dropdown",{standalone_annotation:0<$(this).closest(".stand_alone_annotation_container").length})});JSONStore.modify_store(SESSION_END_TRACKING_DATA_KEY,function(a){_.each(a,function(a){Date.now()-a.event_occurred_at<1E3*APP_CONFIG.mixpanel_delayed_events_timeout&&
mixpanel.track(a.event_name,a.event_options)});return[]})});
(function(){function a(a,b){b=b||"";"string"!==typeof a&&(a.global&&0>b.indexOf("g")&&(b+="g"),a.ignoreCase&&0>b.indexOf("i")&&(b+="i"),a.multiline&&0>b.indexOf("m")&&(b+="m"),a=a.source);return new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=e.txt.regexen[b]||"";"string"!==typeof c&&(c=c.source);return c}),b)}function b(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function c(a,b,c){var d=String.fromCharCode(b);c!==b&&(d+="-"+String.fromCharCode(c));a.push(d);return a}
function d(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function f(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"===typeof a&&a.match(b)&&RegExp["$&"]===a}if("undefined"===typeof e||null===e)var e={};e.txt={};e.txt.regexen={};var h={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};e.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return h[a]})};e.txt.regexSupplant=a;e.txt.stringSupplant=b;e.txt.addCharsToCharClass=c;var g=String.fromCharCode,
k=[g(32),g(133),g(160),g(5760),g(6158),g(8232),g(8233),g(8239),g(8287),g(12288)];c(k,9,13);c(k,8192,8202);var m=[g(65534),g(65279),g(65535)];c(m,8234,8238);e.txt.regexen.spaces_group=a(k.join(""));e.txt.regexen.spaces=a("["+k.join("")+"]");e.txt.regexen.invalid_chars_group=a(m.join(""));e.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;e.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;e.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;
k=[];c(k,192,214);c(k,216,246);c(k,248,255);c(k,256,591);c(k,595,596);c(k,598,599);c(k,601,601);c(k,603,603);c(k,611,611);c(k,616,616);c(k,623,623);c(k,626,626);c(k,649,649);c(k,651,651);c(k,699,699);c(k,768,879);c(k,7680,7935);e.txt.regexen.latinAccentChars=a(k.join(""));e.txt.regexen.hashSigns=/[#\uff03]/;e.txt.regexen.hashtagAlpha=/[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d]/;
e.txt.regexen.hashtagAlphaNumeric=/[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19_\u200c\u200d\ua67e\u05be\u05f3\u05f4\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u0f0d]/;
e.txt.regexen.endHashtagMatch=a(/^(?:#{hashSigns}|:\/\/)/);e.txt.regexen.hashtagBoundary=/(?:^|$|[^&A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19_\u200c\u200d\ua67e\u05be\u05f3\u05f4\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u0f0d])/;
e.txt.regexen.validHashtag=a(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);e.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|(?:rt|RT|rT|Rt):?)/;e.txt.regexen.atSigns=/[@\uff20]/;e.txt.regexen.validMentionOrList=a("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g");e.txt.regexen.validReply=a(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);e.txt.regexen.endMentionMatch=
a(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);e.txt.regexen.validUrlPrecedingChars=a(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;e.txt.regexen.invalidDomainChars=b("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen);e.txt.regexen.validDomainChars=a(/[^#{invalidDomainChars}]/);e.txt.regexen.validSubdomain=a(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);e.txt.regexen.validDomainName=
a(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);e.txt.regexen.validGTLD=a(/(?:(?:abogado|academy|accountants|active|actor|adult|aero|agency|airforce|allfinanz|alsace|android|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|care|career|careers|cartier|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|church|citic|city|claims|cleaning|click|clinic|clothing|club|coach|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cricket|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|delivery|democrat|dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|equipment|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|fail|farm|fashion|feedback|finance|financial|firmdale|fish|fishing|fitness|flights|florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|international|investments|irish|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|lacaixa|land|latrobe|lawyer|lds|lease|legal|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|luxury|madrid|maison|management|mango|market|marketing|media|meet|melbourne|meme|memorial|menu|miami|mil|mini|mobi|moda|moe|monash|money|mormon|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|partners|parts|party|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|realtor|recipes|red|rehab|reise|reisen|reit|ren|rentals|repair|report|republican|rest|restaurant|reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|samsung|sarl|sca|scb|schmidt|schule|science|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|sydney|systems|taipei|tatar|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|trust|tui|university|uno|uol|vacations|vegas|ventures|verm\u00f6gensberater|verm\u00f6gensberatung|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|youtube|zip|zone|\u0434\u0435\u0442\u0438|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u043e\u0440\u0433|\u0440\u0443\u0441|\u0441\u0430\u0439\u0442|\u0628\u0627\u0632\u0627\u0631|\u0634\u0628\u0643\u0629|\u0645\u0648\u0642\u0639|\u0938\u0902\u0917\u0920\u0928|\u307f\u3093\u306a|\u30b0\u30fc\u30b0\u30eb|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u6587\u7f51|\u4f01\u4e1a|\u4f5b\u5c71|\u516b\u5366|\u516c\u53f8|\u516c\u76ca|\u5546\u57ce|\u5546\u5e97|\u5546\u6807|\u5728\u7ebf|\u5e7f\u4e1c|\u6211\u7231\u4f60|\u624b\u673a|\u653f\u52a1|\u673a\u6784|\u6e38\u620f|\u79fb\u52a8|\u7ec4\u7ec7\u673a\u6784|\u7f51\u5740|\u7f51\u5e97|\u7f51\u7edc|\u8c37\u6b4c|\u96c6\u56e2|\uc0bc\uc131|onion)(?=[^0-9a-zA-Z@]|$))/);
e.txt.regexen.validCCTLD=a(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u0431\u0435\u043b|\u043c\u043a\u0434|\u043c\u043e\u043d|\u0440\u0444|\u0441\u0440\u0431|\u0443\u043a\u0440|\u049b\u0430\u0437|\u0570\u0561\u0575|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0628\u06be\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0639\u0631\u0627\u0642|\u0639\u0645\u0627\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0645\u0635\u0631|\u0645\u0644\u064a\u0633\u064a\u0627|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u092d\u093e\u0930\u0924|\u09ac\u09be\u0982\u09b2\u09be|\u09ad\u09be\u09b0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0dbd\u0d82\u0d9a\u0dcf|\u0e44\u0e17\u0e22|\u10d2\u10d4|\u4e2d\u56fd|\u4e2d\u570b|\u53f0\u6e7e|\u53f0\u7063|\u65b0\u52a0\u5761|\u9999\u6e2f|\ud55c\uad6d)(?=[^0-9a-zA-Z@]|$))/);
e.txt.regexen.validPunycode=a(/(?:xn--[0-9a-z]+)/);e.txt.regexen.validSpecialCCTLD=a(/(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/);e.txt.regexen.validDomain=a(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);e.txt.regexen.validAsciiDomain=a(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);e.txt.regexen.invalidShortDomain=a(/^#{validDomainName}#{validCCTLD}$/i);e.txt.regexen.validSpecialShortDomain=a(/^#{validDomainName}#{validSpecialCCTLD}$/i);
e.txt.regexen.validPortNumber=a(/[0-9]+/);e.txt.regexen.validGeneralUrlPathChars=a(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);e.txt.regexen.validUrlBalancedParens=a("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i");e.txt.regexen.validUrlPathEndingChars=a(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);e.txt.regexen.validUrlPath=a("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))",
"i");e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;e.txt.regexen.extractUrl=a("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");e.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;e.txt.regexen.urlHasProtocol=/^https?:\/\//i;e.txt.regexen.urlHasHttps=/^https:\/\//i;e.txt.regexen.cashtag=
/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;e.txt.regexen.validCashtag=a("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi");e.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;e.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;e.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;e.txt.regexen.validateUrlPchar=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");e.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;e.txt.regexen.validateUrlUserinfo=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*",
"i");e.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;e.txt.regexen.validateUrlIpv4=a(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);e.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;e.txt.regexen.validateUrlIp=a("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");e.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;e.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;e.txt.regexen.validateUrlDomainTld=
/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;e.txt.regexen.validateUrlDomain=a(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);e.txt.regexen.validateUrlHost=a("(?:#{validateUrlIp}|#{validateUrlDomain})","i");e.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;e.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
e.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;e.txt.regexen.validateUrlUnicodeDomain=a(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);e.txt.regexen.validateUrlUnicodeHost=a("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");e.txt.regexen.validateUrlPort=/[0-9]{1,5}/;e.txt.regexen.validateUrlUnicodeAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?",
"i");e.txt.regexen.validateUrlAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");e.txt.regexen.validateUrlPath=a(/(\/#{validateUrlPchar}*)*/i);e.txt.regexen.validateUrlQuery=a(/(#{validateUrlPchar}|\/|\?)*/i);e.txt.regexen.validateUrlFragment=a(/(#{validateUrlPchar}|\/|\?)*/i);e.txt.regexen.validateUrlUnencoded=a("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var l={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,
usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},n={disabled:!0,readonly:!0,multiple:!0,checked:!0};e.txt.tagAttrs=function(a){var b="",c;for(c in a){var d=a[c];
n[c]&&(d=d?c:null);null!=d&&(b+=" "+e.txt.htmlEscape(c)+'="'+e.txt.htmlEscape(d.toString())+'"')}return b};e.txt.linkToText=function(a,c,d,f){f.suppressNoFollow||(d.rel="nofollow");f.linkAttributeBlock&&f.linkAttributeBlock(a,d);f.linkTextBlock&&(c=f.linkTextBlock(a,c));a={text:c,attr:e.txt.tagAttrs(d)};return b("<a#{attr}>#{text}</a>",a)};e.txt.linkToTextWithSymbol=function(a,b,c,d,f){var g=f.symbolTag?"<"+f.symbolTag+">"+b+"</"+f.symbolTag+">":b;c=e.txt.htmlEscape(c);c=f.textWithSymbolTag?"<"+f.textWithSymbolTag+
">"+c+"</"+f.textWithSymbolTag+">":c;return f.usernameIncludeSymbol||!b.match(e.txt.regexen.atSigns)?e.txt.linkToText(a,g+c,d,f):g+e.txt.linkToText(a,c,d,f)};e.txt.linkToHashtag=function(a,b,c){b=b.substring(a.indices[0],a.indices[0]+1);var f=e.txt.htmlEscape(a.hashtag),g=d(c.htmlAttrs||{});g.href=c.hashtagUrlBase+f;g.title="#"+f;g["class"]=c.hashtagClass;f.charAt(0).match(e.txt.regexen.rtl_chars)&&(g["class"]+=" rtl");c.targetBlank&&(g.target="_blank");return e.txt.linkToTextWithSymbol(a,b,f,g,c)};
e.txt.linkToCashtag=function(a,b,c){b=e.txt.htmlEscape(a.cashtag);var f=d(c.htmlAttrs||{});f.href=c.cashtagUrlBase+b;f.title="$"+b;f["class"]=c.cashtagClass;c.targetBlank&&(f.target="_blank");return e.txt.linkToTextWithSymbol(a,"$",b,f,c)};e.txt.linkToMentionAndList=function(a,b,c){b=b.substring(a.indices[0],a.indices[0]+1);var f=e.txt.htmlEscape(a.screenName),g=e.txt.htmlEscape(a.listSlug),h=a.listSlug&&!c.suppressLists,k=d(c.htmlAttrs||{});k["class"]=h?c.listClass:c.usernameClass;k.href=h?c.listUrlBase+
f+g:c.usernameUrlBase+f;h||c.suppressDataScreenName||(k["data-screen-name"]=f);c.targetBlank&&(k.target="_blank");return e.txt.linkToTextWithSymbol(a,b,h?f+g:f,k,c)};e.txt.linkToUrl=function(a,b,c){b=a.url;var f=e.txt.htmlEscape(b),g=c.urlEntities&&c.urlEntities[b]||a;g.display_url&&(f=e.txt.linkTextWithEntity(g,c));var h=d(c.htmlAttrs||{});b.match(e.txt.regexen.urlHasProtocol)||(b="http://"+b);h.href=b;c.targetBlank&&(h.target="_blank");c.urlClass&&(h["class"]=c.urlClass);c.urlTarget&&(h.target=
c.urlTarget);!c.title&&g.display_url&&(h.title=g.expanded_url);return e.txt.linkToText(a,f,h,c)};e.txt.linkTextWithEntity=function(a,c){var d=a.display_url,f=a.expanded_url,g=d.replace(/\u2026/g,"");if(-1!=f.indexOf(g)){var h=f.indexOf(g),d={displayUrlSansEllipses:g,beforeDisplayUrl:f.substr(0,h),afterDisplayUrl:f.substr(h+g.length),precedingEllipsis:d.match(/^\u2026/)?"\u2026":"",followingEllipsis:d.match(/\u2026$/)?"\u2026":""},k;for(k in d)d.hasOwnProperty(k)&&(d[k]=e.txt.htmlEscape(d[k]));d.invisible=
c.invisibleTagAttrs;return b("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",d)}return d};e.txt.autoLinkEntities=function(a,b,c){c=d(c||{});c.hashtagClass=c.hashtagClass||"tweet-url hashtag";c.hashtagUrlBase=c.hashtagUrlBase||
"https://twitter.com/#!/search?q=%23";c.cashtagClass=c.cashtagClass||"tweet-url cashtag";c.cashtagUrlBase=c.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";c.listClass=c.listClass||"tweet-url list-slug";c.usernameClass=c.usernameClass||"tweet-url username";c.usernameUrlBase=c.usernameUrlBase||"https://twitter.com/";c.listUrlBase=c.listUrlBase||"https://twitter.com/";c.htmlAttrs=e.txt.extractHtmlAttrsFromOptions(c);c.invisibleTagAttrs=c.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";
var f,g,h;if(c.urlEntities){f={};g=0;for(h=c.urlEntities.length;g<h;g++)f[c.urlEntities[g].url]=c.urlEntities[g];c.urlEntities=f}f="";h=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});var k=c.htmlEscapeNonEntities?e.txt.htmlEscape:function(a){return a};for(g=0;g<b.length;g++){var l=b[g];f+=k(a.substring(h,l.indices[0]));l.url?f+=e.txt.linkToUrl(l,a,c):l.hashtag?f+=e.txt.linkToHashtag(l,a,c):l.screenName?f+=e.txt.linkToMentionAndList(l,a,c):l.cashtag&&(f+=e.txt.linkToCashtag(l,a,c));h=l.indices[1]}return f+=
k(a.substring(h,a.length))};e.txt.autoLinkWithJSON=function(a,b,c){if(b.user_mentions)for(var d=0;d<b.user_mentions.length;d++)b.user_mentions[d].screenName=b.user_mentions[d].screen_name;if(b.hashtags)for(d=0;d<b.hashtags.length;d++)b.hashtags[d].hashtag=b.hashtags[d].text;if(b.symbols)for(d=0;d<b.symbols.length;d++)b.symbols[d].cashtag=b.symbols[d].text;var d=[],f;for(f in b)d=d.concat(b[f]);e.txt.modifyIndicesFromUnicodeToUTF16(a,d);return e.txt.autoLinkEntities(a,d,c)};e.txt.extractHtmlAttrsFromOptions=
function(a){var b={},c;for(c in a){var d=a[c];l[c]||(n[c]&&(d=d?c:null),null!=d&&(b[c]=d))}return b};e.txt.autoLink=function(a,b){var c=e.txt.extractEntitiesWithIndices(a,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkUsernamesOrLists=function(a,b){var c=e.txt.extractMentionsOrListsWithIndices(a);return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkHashtags=function(a,b){var c=e.txt.extractHashtagsWithIndices(a);return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkCashtags=
function(a,b){var c=e.txt.extractCashtagsWithIndices(a);return e.txt.autoLinkEntities(a,c,b)};e.txt.autoLinkUrlsCustom=function(a,b){var c=e.txt.extractUrlsWithIndices(a,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(a,c,b)};e.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]};e.txt.extractEntitiesWithIndices=function(a,b){var c=e.txt.extractUrlsWithIndices(a,
b).concat(e.txt.extractMentionsOrListsWithIndices(a)).concat(e.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(e.txt.extractCashtagsWithIndices(a));if(0==c.length)return[];e.txt.removeOverlappingEntities(c);return c};e.txt.extractMentions=function(a){var b=[];a=e.txt.extractMentionsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].screenName);return b};e.txt.extractMentionsWithIndices=function(a){for(var b=[],c=e.txt.extractMentionsOrListsWithIndices(a),d=0;d<c.length;d++)a=c[d],
""==a.listSlug&&b.push({screenName:a.screenName,indices:a.indices});return b};e.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(e.txt.regexen.atSigns))return[];var b=[];a.replace(e.txt.regexen.validMentionOrList,function(a,c,d,f,g,h,k){k.slice(h+a.length).match(e.txt.regexen.endMentionMatch)||(g=g||"",a=h+c.length,b.push({screenName:f,listSlug:g,indices:[a,a+f.length+g.length+1]}))});return b};e.txt.extractReplies=function(a){if(!a)return null;a=a.match(e.txt.regexen.validReply);
return!a||RegExp.rightContext.match(e.txt.regexen.endMentionMatch)?null:a[1]};e.txt.extractUrls=function(a,b){for(var c=[],d=e.txt.extractUrlsWithIndices(a,b),f=0;f<d.length;f++)c.push(d[f].url);return c};e.txt.extractUrlsWithIndices=function(a,b){b||(b={extractUrlsWithoutProtocol:!0});if(!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];for(var c=[];e.txt.regexen.extractUrl.exec(a);){var d=RegExp.$2,f=RegExp.$3,g=RegExp.$5,h=RegExp.$7,k=e.txt.regexen.extractUrl.lastIndex,l=
k-f.length;if(RegExp.$4)f.match(e.txt.regexen.validTcoUrl)&&(f=RegExp.lastMatch,k=l+f.length),c.push({url:f,indices:[l,k]});else if(b.extractUrlsWithoutProtocol&&!d.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var m=null,n=0;g.replace(e.txt.regexen.validAsciiDomain,function(a){var b=g.indexOf(a,n);n=b+a.length;m={url:a,indices:[l+b,l+n]};(h||a.match(e.txt.regexen.validSpecialShortDomain)||!a.match(e.txt.regexen.invalidShortDomain))&&c.push(m)});null!=m&&h&&(m.url=f.replace(g,m.url),
m.indices[1]=k)}}return c};e.txt.extractHashtags=function(a){var b=[];a=e.txt.extractHashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].hashtag);return b};e.txt.extractHashtagsWithIndices=function(a,b){b||(b={checkUrlOverlap:!0});if(!a||!a.match(e.txt.regexen.hashSigns))return[];var c=[];a.replace(e.txt.regexen.validHashtag,function(a,b,d,f,g,h){h.slice(g+a.length).match(e.txt.regexen.endHashtagMatch)||(a=g+b.length,c.push({hashtag:f,indices:[a,a+f.length+1]}))});if(b.checkUrlOverlap){var d=
e.txt.extractUrlsWithIndices(a);if(0<d.length){d=c.concat(d);e.txt.removeOverlappingEntities(d);for(var c=[],f=0;f<d.length;f++)d[f].hashtag&&c.push(d[f])}}return c};e.txt.extractCashtags=function(a){var b=[];a=e.txt.extractCashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].cashtag);return b};e.txt.extractCashtagsWithIndices=function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];a.replace(e.txt.regexen.validCashtag,function(a,c,d,e,f,g){a=f+c.length;b.push({cashtag:e,indices:[a,a+e.length+
1]})});return b};e.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){e.txt.convertUnicodeIndices(a,b,!1)};e.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){e.txt.convertUnicodeIndices(a,b,!0)};e.txt.getUnicodeTextLength=function(a){return a.replace(e.txt.regexen.non_bmp_code_pairs," ").length};e.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,g=b[0];d<a.length;){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-
g.indices[0];g.indices[0]=c?e:d;g.indices[1]=g.indices[0]+h;f++;if(f==b.length)break;g=b[f]}h=a.charCodeAt(d);55296<=h&&56319>=h&&d<a.length-1&&(h=a.charCodeAt(d+1),56320<=h&&57343>=h&&d++);e++;d++}}};e.txt.splitTags=function(a){a=a.split("<");for(var b,c=[],d=0;d<a.length;d+=1)if(b=a[d]){b=b.split(">");for(var e=0;e<b.length;e+=1)c.push(b[e])}else c.push("");return c};e.txt.hitHighlight=function(a,b,c){b=b||[];c=c||{};if(0===b.length)return a;c=c.tag||"em";c=["<"+c+">","</"+c+">"];a=e.txt.splitTags(a);
var d,f,g="",h=0,k=a[0],l=0,m=0,n=!1,q=k,r=[],t;for(d=0;d<b.length;d+=1)for(f=0;f<b[d].length;f+=1)r.push(b[d][f]);for(b=0;b<r.length;b+=1){f=r[b];d=c[b%2];for(t=!1;null!=k&&f>=l+k.length;)g+=q.slice(m),n&&f===l+q.length&&(g+=d,t=!0),a[h+1]&&(g+="<"+a[h+1]+">"),l+=q.length,m=0,h+=2,q=k=a[h],n=!1;t||null==k?t||(g+=d):(n=f-l,g+=q.slice(m,n)+d,m=n,n=0===b%2?!0:!1)}if(null!=k)for(m<q.length&&(g+=q.slice(m)),b=h+1;b<a.length;b+=1)g+=0===b%2?a[b]:"<"+a[b]+">";return g};var r=[g(65534),g(65279),g(65535),
g(8234),g(8235),g(8236),g(8237),g(8238)];e.txt.getTweetLength=function(a,b){b||(b={short_url_length:22,short_url_length_https:23});var c=e.txt.getUnicodeTextLength(a),d=e.txt.extractUrlsWithIndices(a);e.txt.modifyIndicesFromUTF16ToUnicode(a,d);for(var f=0;f<d.length;f++)c+=d[f].indices[0]-d[f].indices[1],c=d[f].url.toLowerCase().match(e.txt.regexen.urlHasHttps)?c+b.short_url_length_https:c+b.short_url_length;return c};e.txt.isInvalidTweet=function(a){return a?140<e.txt.getTweetLength(a)?"too_long":
e.txt.hasInvalidCharacters(a)?"invalid_characters":!1:"empty"};e.txt.hasInvalidCharacters=function(a){for(var b=0;b<r.length;b++)if(0<=a.indexOf(r[b]))return!0;return!1};e.txt.isValidTweetText=function(a){return!e.txt.isInvalidTweet(a)};e.txt.isValidUsername=function(a){if(!a)return!1;var b=e.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var q=a(/^#{validMentionOrList}$/);e.txt.isValidList=function(a){a=a.match(q);return!(!a||""!=a[1]||!a[4])};e.txt.isValidHashtag=function(a){if(!a)return!1;
var b=e.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)};e.txt.isValidUrl=function(a,b,c){null==b&&(b=!0);null==c&&(c=!0);if(!a)return!1;var d=a.match(e.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;a=d[1];var g=d[2],h=d[3],k=d[4],d=d[5];return(!c||f(a,e.txt.regexen.validateUrlScheme)&&a.match(/^https?$/i))&&f(h,e.txt.regexen.validateUrlPath)&&f(k,e.txt.regexen.validateUrlQuery,!0)&&f(d,e.txt.regexen.validateUrlFragment,!0)?b&&f(g,e.txt.regexen.validateUrlUnicodeAuthority)||
!b&&f(g,e.txt.regexen.validateUrlAuthority):!1};"undefined"!=typeof module&&module.exports&&(module.exports=e.txt);"function"==typeof define&&define.amd&&define([],e.txt);if("undefined"!=typeof window)if(window.twttr)for(var t in e)window.twttr[t]=e[t];else window.twttr=e})();
$(function(){$(document).ajaxError(function(a,b,c){if(!1!==c.alert_on_error&&0!==b.readyState)app.on_ajax_error(b,c)}).ajaxComplete(app.on_ajax_complete).ajaxSend(function(a,b,c){b.setRequestHeader("Accept","application/x-javascript, text/javascript, text/html, application/xml, text/xml, */*");a=app.get_csrf_token();c.skip_csrf||c.type.match(/^get$/i)||!a||b.setRequestHeader("X-CSRF-Token",a)})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/annotation_filter":function(a,b,c){var d={all:function(){return function(){return!0}},featured:function(){return function(a){return a.featured}},annotator:function(a){return function(b){return b.annotator_login===a}}};a=function(a){this.filter_string=a;a=this.filter_args=a.split(":");var b=this.filter_type=a.shift();this.test=d[b].apply(null,a)};a.ALL=new a("all");c.exports=a}})})();window.app=window.app||{};
$.extend(window.app,{ajaxQueue:jQuery.manageAjax.create("queue",{queue:!0}),markdown_to_html:function(a,b,c){var d=function(a){var b=new Attacklab.showdown.converter;a=a.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(a){return"\n\n![]("+$.trim(a)+")"});a=b.makeHtml(a);return $("<div>").append(a).find("a").each(function(){var a=$(this);a.attr("href").match(/^\d+$/)&&a.attr("href","/"+a.attr("href"))}).end().html()};if(null==b)return d(a);
var f=b.attr("data-autolink-mentions")&&a.match(/@\S/);-1<a.indexOf("[[")||f||b.html(d(a));$.ajax_with_retry({url:"/utils/markdown_preview",type:"POST",data:{md:a,autolink_mentions:f},success:function(a){b.html(a);c=c||$.noop;c(b);app.setup_embedly()}});return b},get_csrf_token:function(){return $.cookie("_csrf_token")},setup_zeroclipboard:function(){var a;a="https://assets.genius.com/flash/ZeroClipboard.swf?1687466772".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:a});
$(document.body).on("click",".copy_to_clipboard",function(){return!1});$(document.body).on("click",".copy_content input, .embed_content input",function(){this.select()});var b=new ZeroClipboard;b.on("ready",function(){b.on("copy",function(a){a.clipboardData.setData("text/plain",$(a.target).attr("title"))});b.on("aftercopy",function(a){var b=$(a.target),f=b.text();b.text("Copied!").addClass("copied");setTimeout(function(){b.text(f).removeClass("copied")},500)})});$(document).on("mouseenter",".copy_to_clipboard.inactive",
function(){ZeroClipboard.focus(this);b.clip(this);$(this).removeClass("inactive")})},is_on_song_page:function(){return 0<$("body.act-show.cont-songs").length&&0<$(".lyrics").length},set_up_timeago:function(){var a=null,b=function(a){$(a||"body").find("[data-timeago]").each(function(){var a=$(this),b=a.data("timeago"),c=null;a.data("timeago-shortened")?(c=$.timeago.settings.strings,$.timeago.settings.strings={suffixAgo:"",seconds:"<1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",
month:"1 month",months:"%d months",year:"1 year",years:"%d years"},b=$.timeago(b),$.timeago.settings.strings=c,c=b):c=$.timeago(b).replace(/^about /,"");c!==a.text()&&a.text(c)})};return function(c){b(c);a||(a=setInterval(function(){b()},6E4))}}(),set_up_autogrow:function(){$(document).on("focus",".autogrow",function(){$(this).autosize({callback:function(){$(this).trigger("textarea:autogrown")}}).removeClass("autogrow")})},set_up_dirtyable_inputs:function(){$(document).on("focus","textarea:not([data-not-dirtyable])",
function(){$(this).dirtyable()})},delete_annotation:function(a){var b={_method:"delete"},c=$("#explain_as").attr("login");c&&(b.explain_as=c);app.ajaxQueue.add({type:"post",url:a,data:b})},set_up_disable_annotation_draft_status_button:function(){$(document).on("click",".disable_annotation_draft_status",function(){if(!confirm("Are you sure? This annotation will be publicly visible."))return!1;var a=$(this);$.post(a.attr("href"),{_method:"put"}).then(function(){a.prop("href","#").removeClass(".disable_annotation_draft_status").text("published!")});
return!1})},start_annotation_edit_mode:function(a,b){b||(b="");var c=a.closest(".annotation_container");a.hide().after($("#edit_annotation_form").html());c.addClass("editing_annotation");c=a.nextAll(".edit_annotation_form").addClass("editing_explanation");c.find("textarea").trigger("dirtyable:changed",!0);a.find(".edit_annotation").data("proposed_edit")&&(c.find(".submit_annotation").attr("data-proposed_edit",!0),c.find(".annotation_text_wrapper .edit_label").first().html("Propose an edit:"));""!==
$.trim(b)&&c.children(".edit_annotation_form-integration_notice").removeClass("hide");var d=$.trim(a.find(".markdown_version").val()+b);a.hasClass("description")&&"?"===d&&(d="");c.find(".annotation_text").focus().val(d).trigger("autosize.resize");app.set_up_vidyard_id_container(a);app.set_up_tooltip_lyric_editor();$("#explain_as").attr("login")&&$(".annotation_container").addClass("current_user_can_add_verified_to_this_song");return c},process_auto_load_containers:function(a){$(a||".auto_load_url:visible, .auto_load_url.load_if_not_visible").each(function(){var a=
$(this);$.ajax_with_retry({url:a.attr("data-url"),success:function(c){if(""==$.trim(c))return a.remove();a.html(c).removeClass("auto_load_url").trigger("auto_load_url:loaded");setTimeout(function(){app.activate_more_links(a)},250)}})})},activate_more_links:function(a){$(a||"body").find("a.more:visible:not(.loading, .no_auto_more a)").click()},angular_inject_get__deprecated:function(a){return angular.element(document.body).injector().get(a)}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/flash":function(a,b,c){c.exports={read:function(){var a=$.cookie("flash");if(!a)return{};this.clear();return JSON.parse(a)},clear:function(){$.removeCookie("flash",{path:"/"})}}}})})();
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).FingerprintJS={})}(this,function(a){function b(a){for(var b="",c=0;c<a.length;++c)if(0<c){var d=a[c].toLowerCase();d!==a[c]?b+=" "+d:b+=a[c]}else b+=a[c].toUpperCase();return b}function c(a,b,d){return void 0===d&&(d=0),b(d).catch(function(e){if(d>=a.maxRetries)throw e;var f,g,h,k;return(k=(f=a.baseDelay,
g=a.maxDelay,h=a.baseDelay*Math.pow(2,d),Math.max(f,Math.min(g,h))),new Promise(function(a){return setTimeout(a,k)})).then(function(){return c(a,b,d+1)})})}function d(a){var b=a.scriptUrlPattern,d=a.token,e=a.apiKey,g=void 0===e?d:e,h=function(a,b){var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,
d[e])&&(c[d[e]]=a[d[e]])}return c}(a,["scriptUrlPattern","token","apiKey"]),k=Object.prototype.hasOwnProperty.call(a,"scriptUrlPattern")?b:void 0,l=[];return Promise.resolve().then(function(){if(!g||"string"!=typeof g)throw Error("API key required");return c({maxRetries:5,baseDelay:100,maxDelay:3E3},function(){var a,b=new Date,c=function(){return l.push({startedAt:b,finishedAt:new Date})},d=(a=function(a,b){void 0===b&&(b="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js");var c=
encodeURIComponent;return b.replace(/<[^<>]+>/g,function(b){return"<version>"===b?"3":"<apiKey>"===b?c(a):"<loaderVersion>"===b?c("3.7.0"):b})}(g,k),new Promise(function(b,c){var d=document.createElement("script"),e=function(){var a;return null===(a=d.parentNode)||void 0===a?void 0:a.removeChild(d)},f=document.head||document.getElementsByTagName("head")[0];d.onload=function(){e();b()};d.onerror=function(){e();c(Error("Failed to load the JS script of the agent"))};d.async=!0;d.src=a;f.appendChild(d)}));
return d.then(c,c),d})}).then(function(){var a=window,b=a.__fpjs_p_l_b,c,d=null===(c=Object.getOwnPropertyDescriptor)||void 0===c?void 0:c.call(Object,a,"__fpjs_p_l_b");(null==d?0:d.configurable)?delete a.__fpjs_p_l_b:d&&!d.writable||(a.__fpjs_p_l_b=void 0);if("function"!=typeof(null==b?void 0:b.load))throw Error("Failed to load the JS script of the agent");return b.load(f(f({},h),{ldi:{attempts:l}}))})}var f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=
arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},e=b("WrongRegion"),h=b("SubscriptionNotActive"),g=b("UnsupportedVersion"),k=b("InstallationMethodRestricted"),m=b("HostnameRestricted"),l={load:d,ERROR_SCRIPT_LOAD_FAIL:"Failed to load the JS script of the agent",ERROR_API_KEY_EXPIRED:"API key expired",ERROR_API_KEY_INVALID:"API key not found",ERROR_API_KEY_MISSING:"API key required",ERROR_BAD_REQUEST_FORMAT:"Request cannot be parsed",ERROR_BAD_RESPONSE_FORMAT:"Response cannot be parsed",
ERROR_CLIENT_TIMEOUT:"Client timeout",ERROR_FORBIDDEN_ENDPOINT:m,ERROR_FORBIDDEN_HEADER:"Not available with restricted header",ERROR_FORBIDDEN_ORIGIN:"Not available for this origin",ERROR_GENERAL_SERVER_FAILURE:"Request failed",ERROR_INSTALLATION_METHOD_RESTRICTED:k,ERROR_NETWORK_ABORT:"Network request aborted",ERROR_NETWORK_CONNECTION:"Network connection error",ERROR_RATE_LIMIT:"Too many requests, rate limit exceeded",ERROR_SERVER_TIMEOUT:"Request failed to process",ERROR_SUBSCRIPTION_NOT_ACTIVE:h,
ERROR_TOKEN_EXPIRED:"API key expired",ERROR_TOKEN_INVALID:"API key not found",ERROR_TOKEN_MISSING:"API key required",ERROR_UNSUPPORTED_VERSION:g,ERROR_WRONG_REGION:e};a.ERROR_API_KEY_EXPIRED="API key expired";a.ERROR_API_KEY_INVALID="API key not found";a.ERROR_API_KEY_MISSING="API key required";a.ERROR_BAD_REQUEST_FORMAT="Request cannot be parsed";a.ERROR_BAD_RESPONSE_FORMAT="Response cannot be parsed";a.ERROR_CLIENT_TIMEOUT="Client timeout";a.ERROR_FORBIDDEN_ENDPOINT=m;a.ERROR_FORBIDDEN_HEADER="Not available with restricted header";
a.ERROR_FORBIDDEN_ORIGIN="Not available for this origin";a.ERROR_GENERAL_SERVER_FAILURE="Request failed";a.ERROR_INSTALLATION_METHOD_RESTRICTED=k;a.ERROR_NETWORK_ABORT="Network request aborted";a.ERROR_NETWORK_CONNECTION="Network connection error";a.ERROR_RATE_LIMIT="Too many requests, rate limit exceeded";a.ERROR_SCRIPT_LOAD_FAIL="Failed to load the JS script of the agent";a.ERROR_SERVER_TIMEOUT="Request failed to process";a.ERROR_SUBSCRIPTION_NOT_ACTIVE=h;a.ERROR_TOKEN_EXPIRED="API key expired";
a.ERROR_TOKEN_INVALID="API key not found";a.ERROR_TOKEN_MISSING="API key required";a.ERROR_UNSUPPORTED_VERSION=g;a.ERROR_WRONG_REGION=e;a.default=l;a.load=d;Object.defineProperty(a,"__esModule",{value:!0})});
$(function(){var a=!1,b=!1;$(document).on("submit","form.new_user",function(){var c=$(this);if($("#user_device_fingerprint").val())return!0;if(a)return b?!0:!1;a=!0;FingerprintJS.load({apiKey:APP_CONFIG.fingerprint_api_key,endpoint:"https://fp.genius.com"}).then(function(a){return a.get()}).then(function(a){a=a.visitorId;$("#user_device_fingerprint").val(a)}).catch(function(){b=!0;$("#user_device_fingerprint").val("errored-mecha")}).then(function(){return c.trigger("submit")});return!1})});
$(function(){$(document).on("click",".toggle_target",function(a){$(this).toggle_target();a.stopImmediatePropagation();return!1});$(document).on("click",".click_to_select_all",function(){$(this).select()});$(document).on("click",".click_to_toggle_hidden_radio_button",function(){var a=$(this).find('input[type="radio"]');a.prop("checked",!a.is(":checked"));return!1});$(document).on("click",".custom_share[data-service='facebook']",function(){FB.ui({method:"share",href:$(this).attr("href")},function(){});
return!1});$(document).on("click","[data-focuses-form-field]",function(){$("[data-focusable-form-field="+$(this).data("focuses-form-field")+"]").focus()});$(document).on("click",".custom_share[data-service='twitter']:not(.tweet_composer, .auth)",function(a){a.stopImmediatePropagation();return!1});$(document).on("focus",".condensed textarea, .condensed input",function(){$(this).closest(".condensed").removeClass("condensed");$(this).trigger("genius:resized")});$(document).on("click",'form.validate input[type="submit"], form[data-validate] input[type="submit"]',
function(a){var b=$(this.form).validate();if(!b.form())return b.showErrors(),a.stopImmediatePropagation(),!1}).on("click","[data-disable-with]",function(a){var b=$(this);if(!b.attr("disabled")){var c=b.data("disable-with"),d=b.is("button")?"html":"val";b.data("value-before-disabled",b.data("value-before-disabled")||b[d]());b[d](c);b.attr("disabled",!0);b.attr("href","#");a.preventDefault();this.form&&(a=$(this.form),a.trigger("submit"),a.one("ajax:complete",function(){b[d](b.data("value-before-disabled"));
b.removeAttr("disabled")}))}});$(document).on("click","[data-method]",function(){var a=$(this),b=a.attr("target"),a=$("<form>",{method:"post",action:a.attr("href")}).append($("<input>",{name:"_method",value:a.attr("data-method"),type:"hidden"})).append($("<input>",{name:"authenticity_token",value:app.get_csrf_token(),type:"hidden"}));b&&a.attr("target",b);a.hide().appendTo("body").submit();return!1});$(".header-primary").on("click",".create_account:not(.pressed)",function(){$.cookie("desired_location",
window.location.href,{path:"/"});$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1})});$(document).on("click",".edit_annotation",function(){if($(".edit_annotation_form:visible").length)return!1;app.start_annotation_edit_mode($(this).closest(".annotation_unit"));return!1});$(document).on("click",".report_annotation, .report_forum_post",function(){if(!confirm("Are you sure?"))return!1;var a=$(this);$.post(a.data("href")).done(function(){a.text("thanks, we\u2019ll notify the moderators").removeClass("report_annotation").removeClass("report_forum_post").removeAttr("href")});
return!1});$(document).on("click",".feature_annotation",function(){var a=$(this);$.post(a.attr("href")).done(function(){a.closest(".annotation_unit").trigger("annotation:featured");a.text("featured").addClass("unfeature_annotation").removeClass("feature_annotation");a.attr("href",a.attr("data-report-url"));setTimeout(function(){a.text("unfeature")},2E3)});return!1});$(document).on("click",".unfeature_annotation",function(){var a=$(this);$.post(a.attr("href")).done(function(){a.closest(".annotation_unit").trigger("annotation:unfeatured");
a.text("unfeatured").addClass("feature_annotation").removeClass("unfeature_annotation");a.attr("href",a.attr("data-feature-url"));setTimeout(function(){a.text("feature")},2E3)});return!1});$(document).on("click",".cancel_annotation",function(){var a=$(this),b=a.closest(".edit_annotation_form"),c=b.prev(".annotation_unit"),d=c.closest(".annotation_container"),a=a.closest(".qtip.explanation");a.length&&(a.qtip("api").beforeHide=function(){return!0},c.hasClass("un_edited")&&c.find(".delete_annotation").data("no-confirm",
!0).click());d.removeClass("editing_annotation");b.find("textarea").trigger("dirtyable:changed",!1);b.remove();c.hasClass("needs_exegesis")&&!c.hasClass("description")||c.show();a.length&&a.is(":visible")&&a.qtip("api").reposition();return!1});$(document).on("click",".submit_annotation",function(){var a=$(this),b=a.closest(".edit_annotation_form"),c=b.prev(".annotation_unit"),d=c.closest(".annotation_container"),f=c.attr("data-id"),e=d.attr("data-id"),h=!!c.closest(".stand_alone_annotation_container").length||
c.hasClass("description"),g=a.data("proposed_edit"),k=$.trim(b.find(".annotation_text").val()),m=$.trim(b.find(".video_id").val()),l=$.trim(b.find(".edit_annotation_note").val()),n=k||m||c.hasClass("video_processing");if(!n&&!c.hasClass("verified")&&!c.hasClass("description"))return!1;var f=a.attr("data-url")||"/annotations/"+f,r={_method:a.attr("data-method")||"put","annotation[body]":k};m&&(r["annotation[video_id]"]=m);l&&(r["annotation[edit_note]"]=l);if(m=$("#explain_as").attr("login"))r.explain_as=
m;(n||c.hasClass("description"))&&app.ajaxQueue.add({type:"post",url:f,data:r,success:function(a){h||app.update_editorial_state(e,a.editorial_state);a.user_can_clear_votes&&c.find(".footer .voting_links").addClass("user_can_clear_votes")}});c.find(".markdown_version").text(k);c.removeClass("being_created");c.hasClass("description")&&(k?c.removeClass("blank"):c.addClass("blank"),"?"===k?c.addClass("needs_exegesis"):c.removeClass("needs_exegesis"));if(0<b.find(".lyric_editor").length&&(l=b.find(".lyric_text").data("old-value"),
m=$.trim(b.find(".lyric_text").val()),""!==m&&m!==l&&(l=$("div.lyrics a[data-id='"+e+"']"),m=m.replace(/\n/gi,"<br>"),l.html().match(/<br[\s\/]?>$/i)&&(m+="<br>"),l.html(m),app.save_lyrics()),!n&&c.hasClass("verified")))return d.find("button.cancel_annotation").click(),!1;var q;h||(q=a.closest(".qtip"),q.qtip("api").beforeHide=function(){return!0},k.match(/^\?$/)?c.addClass("needs_exegesis"):c.removeClass("needs_exegesis"));b.find("textarea").trigger("dirtyable:changed",!1);d.removeClass("editing_annotation");
b.remove();g?(a=c.find(".editor_links .view_proposed_edits").closest("a"),$.facebox("Your edit has been proposed and will be reviewed!<br>"+$("<div>").append(a.clone()).html()),c.find(".view_proposed_edits_wrapper").addClass("has_pending_edits")):app.markdown_to_html(k,c.find(".annotation_body .body_text"),function(){h||(q.qtip("api").reposition(),app.update_bulk_loaded_annotation(q.find(".annotation_container")))});c.show().addClass("just_submitted_edit").removeClass("un_edited").closest(".annotation_container").addClass("just_submitted_edit");
!h&&q.qtip("api").reposition()});$(document).on("submit","form[data-submit-with-ajax-queue]",function(a){var b=$(this);b.find('input[type="submit"]').each(function(){var a=$(this);b.data("disable-with")&&a.prop("value",b.data("disable-with"));a.prop("disabled",!0)});b.submitWithAjaxQueue({dataType:b.data("ajax-data-type")||"script",success:function(a){b.trigger("submit_with_ajax_queue:success",a)},error:function(a){b.trigger("submit_with_ajax_queue:error",a)},complete:function(a){b.trigger("submit_with_ajax_queue:complete",
a)}});a.stopImmediatePropagation();return!1});$(document).on("click","[data-select-on-click]",function(){this.select()})});(function(){var a=$(document.documentElement);a.toggleClass("chrome",!!bowser.chrome);a.toggleClass("iphone",!!bowser.iphone);a.toggleClass("ios",!!bowser.ios);a.toggleClass("win",/Windows/i.test(navigator.userAgent));a.toggleClass("msie",!!bowser.msie);a.toggleClass("firefox",!!bowser.firefox)})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/jquery":function(a,b,c){c.exports=(window["com.genius.Genius"]||{}).jQuery||jQuery}})})();(function(){window["com.genius.Genius"].require.define({"shared/universal/keyboard_shortcuts":function(a,b,c){var d=b("shared/universal/jquery");c.exports={shortcut:function(a,b){d(window).bind("keydown",a,function(a){b(a);return!1})}}}})})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/lodash":function(a,b,c){c.exports=(window["com.genius.Genius"]||{}).lodash}})})();Modernizr.addTest("flash_enabled",function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){return navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/mutation_observer":function(a,b,c){c.exports=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}})})();(function(){window["com.genius.Genius"].require.define({"shared/universal/performance_mark_once":function(a,b,c){var d={};c.exports=function(a){if(!d.hasOwnProperty(a))return d[a]=!0,window.performance.mark("genius."+a)}}})})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/promise_channel":function(a,b,c){var d=function(a){this.buffer=[];a.done(function(a){this.buffer.forEach(function(b){a[b.method].apply(a,b.arguments)})}.bind(this))};["bind","notify","call"].forEach(function(a){d.prototype[a]=function(){this.buffer.push({method:a,arguments:arguments})}});c.exports=d}})})();
$(function(){$(document).on("rg:toggled",".toggle_follow",function(){var a=$(this),b=a.hasClass("new_status_follow");a.removeClass("disabled");a.toggleClass("new_status_follow",!b);a.toggleClass("new_status_unfollow",b);a.find("span").text(b?"Following":"Follow")});$(document).on("click",".toggle_follow:not(.disabled)",function(a){a.preventDefault();a=$(this);var b=a.hasClass("new_status_follow");a.addClass("disabled");a.trigger("rg:toggled");$.ajax({type:b?"post":"delete",url:a.attr("href")})});
$(document).on("hover",".toggle_follow.new_status_unfollow",function(a){var b=$(this);"mouseenter"===a.type?b.find("span").text("Unfollow!"):"mouseleave"===a.type&&(a=b.hasClass("new_status_unfollow"),b.find("span").text(a?"Following":"Follow"))})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/tweet_composer":function(a,b,c){var d=b("shared/universal/jquery");a=function(a){var b=a.find(".twitter_button");b.attr({"data-href":b.attr("href"),href:"#"});this.$annotation=a;this.$compose_tweet_wrapper=this.$annotation.find(".compose_tweet_wrapper");this.attach_events()};a.prototype={show_tweet_composer:function(){this.$compose_tweet_wrapper.show();var a=this.$compose_tweet_wrapper.find("#tweet_text");a.focus();Modernizr.touch||
(a[0].selectionStart=0,a[0].selectionEnd=parseInt(a.attr("data-tweet-body-length"),10))},validate_tweet_text:function(){var a=this.$compose_tweet_wrapper.find("#tweet_text"),b=a.closest(".annotation_tweet_form"),c=a.closest(".compose_tweet_wrapper"),d=a.val(),k=b.find(".referent_image"),a=b.find(".characters_remaining"),b=b.find('input[type="submit"]');c.hasClass("has_image_attachment")&&(d=d+" "+(k.attr("src")||"http://www.example.com/image.png"));c=140-twttr.txt.getTweetLength(d);a.html(c);c=0>
c;a.toggleClass("warning",c);b.prop("disabled",c)},toggle_image_attachment:function(){var a=!this.$compose_tweet_wrapper.hasClass("has_image_attachment");this.$compose_tweet_wrapper.toggleClass("has_image_attachment",a);this.$compose_tweet_wrapper.find("#include_referent_image").val(a);this.$compose_tweet_wrapper.find("#tweet_text").focus();this.validate_tweet_text()},attach_events:function(){var a=this.$compose_tweet_wrapper;this.$annotation.find(".twitter_button.tweet_composer").on("click",function(){this.show_tweet_composer();
return!1}.bind(this));this.$annotation.find(".twitter_button.auth").on("click",function(){d.cookie("desired_location",d(this).closest(".embedded_annotation").attr("data-path"),{path:"/"});d.cookie("focus_tweet_text",!0,{path:"/",expires:1/24/60})});if(d.cookie("focus_tweet_text"))d(window).one("frame_visible",function(){this.show_tweet_composer();return!1}.bind(this));this.$annotation.find(".annotation_tweet_form").on("click","input[type='submit']",function(){d(this).val("Tweeting...")}).on("submit_with_ajax_queue:success",
function(b,c){a.html(c)}).on("submit_with_ajax_queue:error",function(){a.find("footer").html('<span class="tweet_composer_error"><em>Whoops!</em> Refresh the page to try again.</span>')}).on("submit_with_ajax_queue:complete",function(){a.find("#tweet_text").attr("disabled",!0)});a.on("click",".referent_image",function(){d(this).toggleClass("zoom")});this.$annotation.find("#tweet_text").on("input focus",this.validate_tweet_text.bind(this));this.$annotation.find(".toggle_attachment_label").on("click",
function(){this.toggle_image_attachment();return!1}.bind(this))}};c.exports=a}})})();
(function(a){function b(a){if(F(a))E(a.objectMaxDepth)&&(Rb.objectMaxDepth=c(a.objectMaxDepth)?a.objectMaxDepth:NaN);else return Rb}function c(a){return J(a)&&0<a}function d(a,b){b=b||Error;return function(){for(var c=arguments[0],d=arguments[1],e="["+(a?a+":":"")+c+"] ",f=Mc.call(arguments,2).map(function(a){return zc(a,Rb.objectMaxDepth)}),e=e+d.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b<f.length?f[b]:a}),e=e+("\nhttp://errors.angularjs.org/1.6.6/"+(a?a+"/":"")+c),d=0,c="?";d<
f.length;d++,c="&")e+=c+"p"+d+"="+encodeURIComponent(f[d]);return new b(e)}}function f(a){if(null==a||D(a))return!1;if(oa(a)||z(a)||Z&&a instanceof Z)return!0;var b="length"in Object(a)&&a.length;return J(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"===typeof a.item)}function e(a,b,c){var d,g;if(a)if(I(a))for(d in a)"prototype"!==d&&"length"!==d&&"name"!==d&&a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else if(oa(a)||f(a)){var h="object"!==typeof a;d=0;for(g=a.length;d<g;d++)(h||d in a)&&b.call(c,
a[d],d,a)}else if(a.forEach&&a.forEach!==e)a.forEach(b,c,a);else if(y(a))for(d in a)b.call(c,a[d],d,a);else if("function"===typeof a.hasOwnProperty)for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else for(d in a)rc.call(a,d)&&b.call(c,a[d],d,a);return a}function h(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function g(a){return function(b,c){a(c,b)}}function k(){return++cf}function m(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(F(g)||
I(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var n=h[k],q=g[n];c&&F(q)?H(q)?a[n]=new Date(q.valueOf()):Q(q)?a[n]=new RegExp(q):q.nodeName?a[n]=q.cloneNode(!0):Y(q)?a[n]=q.clone():(F(a[n])||(a[n]=oa(q)?[]:{}),m(a[n],[q],!0)):a[n]=q}}d?a.$$hashKey=d:delete a.$$hashKey;return a}function l(a){return m(a,Mc.call(arguments,1),!1)}function n(a){return m(a,Mc.call(arguments,1),!0)}function r(a){return parseInt(a,10)}function q(a,b){return l(Object.create(a),b)}function t(){}function u(a){return a}
function w(a){return function(){return a}}function A(a){return I(a.toString)&&a.toString!==dc}function x(a){return"undefined"===typeof a}function E(a){return"undefined"!==typeof a}function F(a){return null!==a&&"object"===typeof a}function y(a){return null!==a&&"object"===typeof a&&!Ff(a)}function z(a){return"string"===typeof a}function J(a){return"number"===typeof a}function H(a){return"[object Date]"===dc.call(a)}function T(a){switch(dc.call(a)){case "[object Error]":return!0;case "[object Exception]":return!0;
case "[object DOMException]":return!0;default:return a instanceof Error}}function I(a){return"function"===typeof a}function Q(a){return"[object RegExp]"===dc.call(a)}function D(a){return a&&a.window===a}function K(a){return a&&a.$evalAsync&&a.$watch}function aa(a){return"boolean"===typeof a}function p(a){return a&&J(a.length)&&sd.test(dc.call(a))}function Y(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function ba(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}
function N(a){return La(a.nodeName||a[0]&&a[0].nodeName)}function qa(a,b){var c=a.indexOf(b);0<=c&&a.splice(c,1);return c}function Ja(a,b,d){function f(a,b,c){c--;if(0>c)return"...";var d=b.$$hashKey,e;if(oa(a)){e=0;for(var h=a.length;e<h;e++)b.push(g(a[e],c))}else if(y(a))for(e in a)b[e]=g(a[e],c);else if(a&&"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&(b[e]=g(a[e],c));else for(e in a)rc.call(a,e)&&(b[e]=g(a[e],c));d?b.$$hashKey=d:delete b.$$hashKey;return b}function g(a,
b){if(!F(a))return a;var c=k.indexOf(a);if(-1!==c)return l[c];if(D(a)||K(a))throw mc("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var c=!1,d=h(a);void 0===d&&(d=oa(a)?[]:Object.create(Ff(a)),c=!0);k.push(a);l.push(d);return c?f(a,d,b):d}function h(a){switch(dc.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(g(a.buffer),
a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(I(a.cloneNode))return a.cloneNode(!0)}
var k=[],l=[];d=c(d)?d:NaN;if(b){if(p(b)||"[object ArrayBuffer]"===dc.call(b))throw mc("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw mc("cpi","Can't copy! Source and destination are identical.");oa(b)?b.length=0:e(b,function(a,c){"$$hashKey"!==c&&delete b[c]});k.push(a);l.push(b);return f(a,b,d)}return g(a,d)}function fa(a,b){return a===b||a!==a&&b!==b}function ia(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,d;if(c===
typeof b&&"object"===c)if(oa(a)){if(!oa(b))return!1;if((c=a.length)===b.length){for(d=0;d<c;d++)if(!ia(a[d],b[d]))return!1;return!0}}else{if(H(a))return H(b)?fa(a.getTime(),b.getTime()):!1;if(Q(a))return Q(b)?a.toString()===b.toString():!1;if(K(a)||K(b)||D(a)||D(b)||oa(b)||H(b)||Q(b))return!1;c=ua();for(d in a)if("$"!==d.charAt(0)&&!I(a[d])){if(!ia(a[d],b[d]))return!1;c[d]=!0}for(d in b)if(!(d in c)&&"$"!==d.charAt(0)&&E(b[d])&&!I(b[d]))return!1;return!0}return!1}function B(a,b,c){return a.concat(Mc.call(b,
c))}function ja(a,b){var c=2<arguments.length?Mc.call(arguments,2):[];return!I(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,B(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function zb(b,c){var d=c;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:D(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":K(c)&&(d="$SCOPE");return d}function V(a,b){if(!x(a))return J(b)||(b=b?2:null),JSON.stringify(a,zb,b)}
function Ua(a){return z(a)?JSON.parse(a):a}function za(a,b){a=a.replace(ea,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return lc(c)?b:c}function ga(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset();b=za(b,d);c*=b-d;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+c);return a}function gb(a){a=Z(a).clone().empty();var b=Z("<div>").append(a).html();try{return a[0].nodeType===Ld?La(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+La(b)})}catch(c){return La(b)}}function Ca(a){try{return decodeURIComponent(a)}catch(b){}}
function Sb(a){var b={};e((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(d=a.substring(0,c),e=a.substring(c+1)),d=Ca(d),E(d)&&(e=E(e)?Ca(e):!0,rc.call(b,d)?oa(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))});return b}function kb(a){var b=[];e(a,function(a,c){oa(a)?e(a,function(a){b.push(Ga(c,!0)+(!0===a?"":"="+Ga(a,!0)))}):b.push(Ga(c,!0)+(!0===a?"":"="+Ga(a,!0)))});return b.length?b.join("&"):""}function Xa(a){return Ga(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,
"=").replace(/%2B/gi,"+")}function Ga(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function qb(a,b){var c,d,e=ud.length;for(d=0;d<e;++d)if(c=ud[d]+b,z(c=a.getAttribute(c)))return c;return null}function Da(b,c){var d,f,g={};e(ud,function(a){a+="app";!d&&b.hasAttribute&&b.hasAttribute(a)&&(d=b,f=b.getAttribute(a))});e(ud,function(a){a+="app";var c;!d&&(c=b.querySelector("["+a.replace(":",
"\\:")+"]"))&&(d=c,f=c.getAttribute(a))});d&&(Gf?(g.strictDi=null!==qb(d,"strict-di"),c(d,f?[f]:[],g)):a.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function W(b,c,d){F(d)||(d={});d=l({strictDi:!1},d);var f=function(){b=Z(b);if(b.injector()){var e=b[0]===a.document?"document":gb(b);throw mc("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"));}c=c||[];c.unshift(["$provide",
function(a){a.value("$rootElement",b)}]);d.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);c.unshift("ng");e=ic(c,d.strictDi);e.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return e},g=/^NG_ENABLE_DEBUG_INFO!/,h=/^NG_DEFER_BOOTSTRAP!/;a&&g.test(a.name)&&(d.debugInfoEnabled=!0,a.name=a.name.replace(g,""));if(a&&!h.test(a.name))return f();a.name=a.name.replace(h,"");nc.resumeBootstrap=
function(a){e(a,function(a){c.push(a)});return f()};I(nc.resumeDeferredBootstrap)&&nc.resumeDeferredBootstrap()}function Kb(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name;a.location.reload()}function db(a){a=nc.element(a).injector();if(!a)throw mc("test","no injector found for element argument to getTestability");return a.get("$$testability")}function Tb(a,b){b=b||"_";return a.replace(Yd,function(a,c){return(c?b:"")+a.toLowerCase()})}function ra(){var b;if(!Hf){var c=td();(Hd=x(c)?a.jQuery:c?a[c]:void 0)&&
Hd.fn.on?(Z=Hd,l(Hd.fn,{scope:Ad.scope,isolateScope:Ad.isolateScope,controller:Ad.controller,injector:Ad.injector,inheritedData:Ad.inheritedData}),b=Hd.cleanData,Hd.cleanData=function(a){for(var c,d=0,e;null!=(e=a[d]);d++)(c=Hd._data(e,"events"))&&c.$destroy&&Hd(e).triggerHandler("$destroy");b(a)}):Z=wa;nc.element=Z;Hf=!0}}function Lb(a,b,c){if(!a)throw mc("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function Na(a,b,c){c&&oa(a)&&(a=a[a.length-1]);Lb(I(a),b,"not a function, got "+
(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function C(a,b){if("hasOwnProperty"===a)throw mc("badname","hasOwnProperty is not a valid {0} name",b);}function Qa(a,b,c){if(!b)return a;b=b.split(".");for(var d,e=a,f=b.length,g=0;g<f;g++)d=b[g],a&&(a=(e=a)[d]);return!c&&I(a)?ja(e,a):a}function ac(a){for(var b=a[0],c=a[a.length-1],d,e=1;b!==c&&(b=b.nextSibling);e++)if(d||a[e]!==b)d||(d=Z(Mc.call(a,0,e))),d.push(b);return d||a}function ua(){return Object.create(null)}function hc(a){if(null==
a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!A(a)||oa(a)||H(a)?V(a):a.toString()}return a}function Mb(a){function b(a,c,d){return a[c]||(a[c]=d())}var c=d("$injector"),e=d("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||d;return b(a,"module",function(){var a={};return function(d,f,g){var h={};if("hasOwnProperty"===d)throw e("badname","hasOwnProperty is not a valid {0} name","module");f&&a.hasOwnProperty(d)&&(a[d]=null);return b(a,d,function(){function a(b,
c,d,e){e||(e=k);return function(){e[d||"push"]([b,c,arguments]);return n}}function b(a,c,e){e||(e=k);return function(b,f){f&&I(f)&&(f.$$moduleName=d);e.push([a,c,arguments]);return n}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var k=[],l=[],m=[],G=a("$injector","invoke","push",l),n={_invokeQueue:k,_configBlocks:l,_runBlocks:m,info:function(a){if(E(a)){if(!F(a))throw e("aobj",
"Argument '{0}' must be an object","value");h=a;return this}return h},requires:f,name:d,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",l),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),
config:G,run:function(a){m.push(a);return this}};g&&G(g);return n})}})}function Ka(a,b){if(oa(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(F(a))for(c in b=b||{},a)if("$"!==c.charAt(0)||"$"!==c.charAt(1))b[c]=a[c];return b||a}function Uc(a,b){var d=[];c(b)&&(a=nc.copy(a,null,b));return JSON.stringify(a,function(a,b){b=zb(a,b);if(F(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}function zc(a,b){return"function"===typeof a?a.toString().replace(/ \{[\s\S]*$/,""):x(a)?"undefined":
"string"!==typeof a?Uc(a,b):a}function sc(c){l(c,{errorHandlingConfig:b,bootstrap:W,copy:Ja,extend:l,merge:n,equals:ia,element:Z,forEach:e,injector:ic,noop:t,bind:ja,toJson:V,fromJson:Ua,identity:u,isUndefined:x,isDefined:E,isString:z,isFunction:I,isObject:F,isNumber:J,isElement:Y,isArray:oa,version:bg,isDate:H,lowercase:La,uppercase:Vc,callbacks:{$$counter:0},getTestability:db,reloadWithDebugInfo:Kb,$$minErr:d,$$csp:id,$$encodeUriSegment:Xa,$$encodeUriQuery:Ga,$$stringify:hc});ff=Mb(a);ff("ng",["ngLocale"],
["$provide",function(a){a.provider({$$sanitizeUri:hd});a.provider("$compile",Pb).directive({a:fg,input:Ag,textarea:Ag,form:Bf,script:Sg,select:Vg,option:Wg,ngBind:Lg,ngBindHtml:Fg,ngBindTemplate:Ng,ngClass:Pd,ngClassEven:ig,ngClassOdd:sf,ngCloak:uf,ngController:Bg,ngForm:yg,ngHide:Ye,ngIf:lg,ngInclude:Ve,ngInit:of,ngNonBindable:Ib,ngPluralize:gg,ngRepeat:Jg,ngShow:Zf,ngStyle:$f,ngSwitch:Ge,ngSwitchWhen:Ze,ngSwitchDefault:$e,ngOptions:Rg,ngTransclude:Ce,ngModel:Pg,ngList:Og,ngChange:Cf,pattern:Be,
ngPattern:Be,required:af,ngRequired:af,minlength:fe,ngMinlength:fe,maxlength:Lf,ngMaxlength:Lf,ngValue:pf,ngModelOptions:Gg}).directive({ngInclude:ce}).directive(De).directive(Yf);a.provider({$anchorScroll:Xc,$animate:Kg,$animateCss:wf,$$animateJs:rg,$$animateQueue:vf,$$AnimateRunner:tg,$$animateAsyncRun:sg,$browser:sb,$cacheFactory:tc,$controller:sa,$document:Sa,$$isDocumentHidden:uc,$exceptionHandler:ab,$filter:pe,$$forceReflow:yf,$interpolate:Qd,$interval:cd,$http:Ef,$httpParamSerializer:ad,$httpParamSerializerJQLike:ed,
$httpBackend:He,$xhrFactory:ke,$jsonpCallbacks:cb,$location:Kc,$log:Td,$parse:kc,$rootScope:Ta,$q:cc,$$q:va,$sce:gf,$sceDelegate:le,$sniffer:me,$templateCache:$c,$templateRequest:hf,$$testability:ne,$timeout:If,$window:Ie,$$rAF:R,$$jqLite:Ha,$$Map:og,$$cookieReader:oe})}]).info({angularVersion:"1.6.6"})}function bc(a,b){return b.toUpperCase()}function Ub(a){return a.replace(zd,bc)}function Vb(a){a=a.nodeType;return 1===a||!a||9===a}function Ab(a,b){var c,d,f=b.createDocumentFragment(),g=[];if(qf.test(a)){c=
f.appendChild(b.createElement("div"));d=(hg.exec(a)||["",""])[1].toLowerCase();d=Tc[d]||Tc._default;c.innerHTML=d[1]+a.replace(Kf,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;g=B(g,c.childNodes);c=f.firstChild;c.textContent=""}else g.push(b.createTextNode(a));f.textContent="";f.innerHTML="";e(g,function(a){f.appendChild(a)});return f}function wa(b){if(b instanceof wa)return b;var c;z(b)&&(b=Pa(b),c=!0);if(!(this instanceof wa)){if(c&&"<"!==b.charAt(0))throw Qe("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
return new wa(b)}if(c){c=a.document;var d;b=(d=Pe.exec(b))?[c.createElement(d[1])]:(d=Ab(b,c))?d.childNodes:[];na(this,b)}else I(b)?xa(b):na(this,b)}function Ba(a){return a.cloneNode(!0)}function O(a,b){!b&&Vb(a)&&Z.cleanData([a]);a.querySelectorAll&&Z.cleanData(a.querySelectorAll("*"))}function hb(a,b,c,d){if(E(d))throw Qe("offargs","jqLite#off() does not support the `selector` argument");var f=(d=Bb(a))&&d.events,g=d&&d.handle;if(g)if(b){var h=function(b){var d=f[b];E(c)&&qa(d||[],c);E(c)&&d&&0<
d.length||(a.removeEventListener(b,g),delete f[b])};e(b.split(" "),function(a){h(a);ze[a]&&h(ze[a])})}else for(b in f)"$destroy"!==b&&a.removeEventListener(b,g),delete f[b]}function Ea(a,b){var c=a.ng339,d=c&&Oe[c];d&&(b?delete d.data[b]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),hb(a)),delete Oe[c],a.ng339=void 0))}function Bb(a,b){var c=a.ng339,c=c&&Oe[c];b&&!c&&(a.ng339=c=++Eg,c=Oe[c]={events:{},data:{},handle:void 0});return c}function Nb(a,b,c){if(Vb(a)){var d,e=E(c),f=!e&&b&&!F(b),
g=!b;a=(a=Bb(a,!f))&&a.data;if(e)a[Ub(b)]=c;else{if(g)return a;if(f)return a&&a[Ub(b)];for(d in b)a[Ub(d)]=b[d]}}}function eb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Ac(a,b){b&&a.setAttribute&&e(b.split(" "),function(b){a.setAttribute("class",Pa((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Pa(b)+" "," ")))})}function ka(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+
" ").replace(/[\n\t]/g," ");e(b.split(" "),function(a){a=Pa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});a.setAttribute("class",Pa(c))}}function na(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"===typeof c&&b.window!==b){if(c)for(var d=0;d<c;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Cb(a,b){return lb(a,"$"+(b||"ngController")+"Controller")}function lb(a,b,c){9===a.nodeType&&(a=a.documentElement);for(b=oa(b)?b:[b];a;){for(var d=0,e=b.length;d<e;d++)if(E(c=Z.data(a,
b[d])))return c;a=a.parentNode||11===a.nodeType&&a.host}}function Bc(a){for(O(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ob(a,b){b||O(a);var c=a.parentNode;c&&c.removeChild(a)}function rb(b,c){c=c||a;if("complete"===c.document.readyState)c.setTimeout(b);else Z(c).on("load",b)}function xa(b){function c(){a.document.removeEventListener("DOMContentLoaded",c);a.removeEventListener("load",c);b()}"complete"===a.document.readyState?a.setTimeout(b):(a.document.addEventListener("DOMContentLoaded",
c),a.addEventListener("load",c))}function ib(a,b){var c=Fc[b.toLowerCase()];return c&&Od[N(a)]&&c}function Ya(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(x(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};
var h=e.specialHandlerWrapper||mb;1<f&&(e=Ka(e));for(var k=0;k<f;k++)c.isImmediatePropagationStopped()||h(a,c,e[k])}};c.elem=a;return c}function mb(a,b,c){c.call(a,b)}function Za(a,b,c){var d=b.relatedTarget;d&&(d===a||ng.call(a,d))||c.call(a,b)}function Ha(){this.$get=function(){return l(wa,{hasClass:function(a,b){a.attr&&(a=a[0]);return eb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return ka(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Ac(a,b)}})}}function nb(a,b){var c=a&&a.$$hashKey;
if(c)return"function"===typeof c&&(c=a.$$hashKey()),c;c=typeof a;return c="function"===c||"object"===c&&null!==a?a.$$hashKey=c+":"+(b||k)():c+":"+a}function Wc(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function Ra(a){a=Function.prototype.toString.call(a).replace(Of,"");return a.match(kg)||a.match(pg)}function pd(a){return(a=Ra(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ic(a,b){function c(a){return function(b,c){if(F(b))e(b,g(a));else return a(b,
c)}}function d(a,b){C(a,"service");if(I(b)||oa(b))b=t.instantiate(b);if(!b.$get)throw Fd("pget","Provider '{0}' must define $get factory method.",a);return r[a+"Provider"]=b}function f(a,b){return function(){var c=u.invoke(b,this);if(x(c))throw Fd("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return d(a,{$get:!1!==c?f(a,b):b})}function k(a){Lb(x(a)||oa(a),"modulesToLoad","not an array");var b=[],c;e(a,function(a){function d(a){var b,c;b=0;for(c=
a.length;b<c;b++){var e=a[b],f=t.get(e[0]);f[e[1]].apply(f,e[2])}}if(!q.get(a)){q.set(a,!0);try{z(a)?(c=ff(a),u.modules[a]=c,b=b.concat(k(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):I(a)?b.push(t.invoke(a)):oa(a)?b.push(t.invoke(a)):Na(a,"module")}catch(e){throw oa(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Fd("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e);}}});return b}function l(a,
c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===m)throw Fd("cdep","Circular dependency found: {0}",b+" <- "+n.join(" <- "));return a[b]}try{return n.unshift(b),a[b]=m,a[b]=c(b,e),a[b]}catch(f){throw a[b]===m&&delete a[b],f;}finally{n.shift()}}function e(a,c,f){var g=[];a=ic.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Fd("itkn","Incorrect injection token! Expected service name as string, got {0}",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}
return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);oa(a)&&(a=a[a.length-1]);d=a;if(Hc||"function"!==typeof d)d=!1;else{var f=d.$$ngIsClass;aa(f)||(f=d.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(d)));d=f}return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=oa(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:ic.$$annotate,
has:function(b){return r.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var m={},n=[],q=new Te,r={$provide:{provider:c(d),factory:c(h),service:c(function(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return h(a,w(b),!1)}),constant:c(function(a,b){C(a,"constant");r[a]=b;p[a]=b}),decorator:function(a,b){var c=t.get(a+"Provider"),d=c.$get;c.$get=function(){var a=u.invoke(d,c);return u.invoke(b,null,{$delegate:a})}}}},t=r.$injector=l(r,function(a,
b){nc.isString(b)&&n.push(b);throw Fd("unpr","Unknown provider: {0}",n.join(" <- "));}),p={},L=l(p,function(a,b){var c=t.get(a+"Provider",b);return u.invoke(c.$get,c,void 0,a)}),u=L;r.$injectorProvider={$get:w(L)};u.modules=t.modules=ua();var R=k(a),u=L.get("$injector");u.strictDi=b;e(R,function(a){a&&u.invoke(a)});return u}function Xc(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;Array.prototype.some.call(a,
function(a){if("a"===N(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;I(c)?c=c():Y(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):J(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=z(a)?a:J(a)?a.toString():c.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&d.$watch(function(){return c.hash()},
function(a,b){a===b&&""===a||rb(function(){d.$evalAsync(g)})});return g}]}function ha(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;oa(a)&&(a=a.join(" "));oa(b)&&(b=b.join(" "));return a+" "+b}function Yc(a){z(a)&&(a=a.split(" "));var b=ua();e(a,function(a){a.length&&(b[a]=!0)});return b}function Wb(a){return F(a)?a:{}}function Zc(a,b,c,d){function f(a){try{a.apply(null,Mc.call(arguments,1))}finally{if(L--,0===L)for(;u.length;)try{u.pop()()}catch(b){c.error(b)}}}function g(){H=null;k()}function h(){z=
F();z=x(z)?null:z;ia(z,Ta)&&(z=Ta);w=Ta=z}function k(){var a=w;h();if(R!==l.url()||a!==z)R=l.url(),w=z,e(A,function(a){a(l.url(),z)})}var l=this,m=a.location,n=a.history,q=a.setTimeout,r=a.clearTimeout,p={};l.isMock=!1;var L=0,u=[];l.$$completeOutstandingRequest=f;l.$$incOutstandingRequestCount=function(){L++};l.notifyWhenNoOutstandingRequests=function(a){0===L?a():u.push(a)};var z,w,R=m.href,y=b.find("base"),H=null,F=d.history?function(){try{return n.state}catch(a){}}:t;h();l.url=function(b,c,e){x(e)&&
(e=null);m!==a.location&&(m=a.location);n!==a.history&&(n=a.history);if(b){var f=w===e;if(R===b&&(!d.history||f))return l;var g=R&&tb(R)===tb(b);R=b;w=e;!d.history||g&&f?(g||(H=b),c?m.replace(b):g?(c=m,e=b.indexOf("#"),e=-1===e?"":b.substr(e),c.hash=e):m.href=b,m.href!==b&&(H=b)):(n[c?"replaceState":"pushState"](e,"",b),h());H&&(H=b);return l}return H||m.href.replace(/%27/g,"'")};l.state=function(){return z};var A=[],D=!1,Ta=null;l.onUrlChange=function(b){if(!D){if(d.history)Z(a).on("popstate",g);
Z(a).on("hashchange",g);D=!0}A.push(b);return b};l.$$applicationDestroyed=function(){Z(a).off("hashchange popstate",g)};l.$$checkUrlChange=k;l.baseHref=function(){var a=y.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""};l.defer=function(a,b){var c;L++;c=q(function(){delete p[c];f(a)},b||0);p[c]=!0;return c};l.defer.cancel=function(a){return p[a]?(delete p[a],r(a),f(t),!0):!1}}function sb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Zc(a,d,b,c)}]}
function tc(){this.$get=function(){function a(c,e){function f(a){a!==q&&(r?r===a&&(r=a.n):r=a,g(a.n,a.p),g(a,q),q=a,q.n=null)}function g(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(c in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",c);var h=0,k=l({},e,{id:c}),m=ua(),n=e&&e.capacity||Number.MAX_VALUE,G=ua(),q=null,r=null;return b[c]={put:function(a,b){if(!x(b)){if(n<Number.MAX_VALUE){var c=G[a]||(G[a]={key:a});f(c)}a in m||h++;m[a]=b;h>n&&this.remove(r.key);return b}},get:function(a){if(n<
Number.MAX_VALUE){var b=G[a];if(!b)return;f(b)}return m[a]},remove:function(a){if(n<Number.MAX_VALUE){var b=G[a];if(!b)return;b===q&&(q=b.p);b===r&&(r=b.n);g(b.n,b.p);delete G[a]}a in m&&(delete m[a],h--)},removeAll:function(){m=ua();h=0;G=ua();q=r=null},destroy:function(){G=k=m=null;delete b[c]},info:function(){return l({},k,{size:h})}}}var b={};a.info=function(){var a={};e(b,function(b,c){a[c]=b.info()});return a};a.get=function(a){return b[a]};return a}}function $c(){this.$get=["$cacheFactory",
function(a){return a("templates")}]}function Pb(b,c){function d(a,b,c){var f=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,g=ua();e(a,function(a,d){if(a in R)g[d]=R[a];else{var e=a.match(f);if(!e)throw Jb("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,d,a,c?"controller bindings definition":"isolate scope definition");g[d]={mode:e[1][0],collection:"*"===e[2],optional:"?"===e[3],attrName:e[4]||d};e[4]&&(R[a]=g[d])}});return g}function f(a){var b=a.charAt(0);if(!b||b!==La(b))throw Jb("baddir",
"Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw Jb("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a);}function h(a){var b=a.require||a.controller&&a.name;!oa(b)&&F(b)&&e(b,function(a,c){var d=a.match(p);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var k={},m=/^\s*directive:\s*([\w-]+)\s+(.*)$/,n=/(([\w-]+)(?::([^;]+))?;?)/,r=ba("ngSrc,ngSrcset,src,srcset"),
p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,L=/^(on[a-z]+|formaction)$/,R=ua();this.directive=function Xg(a,c){Lb(a,"name");C(a,"directive");z(a)?(f(a),Lb(c,"directiveFactory"),k.hasOwnProperty(a)||(k[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,c){var d=[];e(k[a],function(e,f){try{var g=b.invoke(e);I(g)?g={compile:w(g)}:!g.compile&&g.link&&(g.compile=w(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=h(g);var k=g,l=g.restrict;if(l&&(!z(l)||!/[EACM]/.test(l)))throw Jb("badrestrict",
"Restrict property '{0}' of directive '{1}' is invalid",l,a);k.restrict=l||"EA";g.$$moduleName=e.$$moduleName;d.push(g)}catch(m){c(m)}});return d}])),k[a].push(c)):e(a,g(Xg));return this};this.component=function Yg(a,b){function c(a){function f(b){return I(b)||oa(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var g=b.template||b.templateUrl?b.template:"",h={controller:d,controllerAs:$a(b.controller)||b.controllerAs||"$ctrl",template:f(g),templateUrl:f(b.templateUrl),transclude:b.transclude,
scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};e(b,function(a,b){"$"===b.charAt(0)&&(h[b]=a)});return h}if(!z(a))return e(a,g(ja(this,Yg))),this;var d=b.controller||function(){};e(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,I(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return E(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return E(a)?
(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(a){return E(a)?(y=a,this):y};var H=!1;this.preAssignBindingsEnabled=function(a){return E(a)?(H=a,this):H};var A=!1;this.strictComponentBindingsEnabled=function(a){return E(a)?(A=a,this):A};var D=10;this.onChangesTtl=function(a){return arguments.length?(D=a,this):D};var Ta=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(Ta=a,this):Ta};var J=!0;this.cssClassDirectivesEnabled=
function(a){return arguments.length?(J=a,this):J};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,f,g,h,G,S,ya,Aa,w){function R(){try{if(!--pa)throw ha=void 0,Jb("infchng","{0} $onChanges() iterations reached. Aborting!\n",D);S.$apply(function(){for(var a=[],b=0,c=ha.length;b<c;++b)try{ha[b]()}catch(d){a.push(d)}ha=void 0;if(a.length)throw a;})}finally{pa++}}function ga(a,b){if(b){var c=
Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function B(a,b,c){ka.innerHTML="<span "+b+">";b=ka.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function Q(a,b){try{a.addClass(b)}catch(c){}}function C(a,b,c,d,e){a instanceof Z||(a=Z(a));var f=V(a,b,a,c,d,e);C.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw Jb("multilink","This element has already been linked.");Lb(b,"scope");
e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==N(d)&&dc.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==g?Z(Xa(g,Z("<div>").append(a).html())):c?Ad.clone.call(a):a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);C.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);c||(a=f=null);return d}}function V(a,b,c,d,e,f){function g(a,
c,d,e){var f,k,l,m,n,G,r;if(q)for(r=Array(c.length),m=0;m<h.length;m+=3)f=h[m],r[f]=c[f];else r=c;m=0;for(n=h.length;m<n;)k=r[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),C.$$addScopeInfo(Z(k),l)):l=a,G=c.transcludeOnThisElement?yb(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?yb(a,b):null,c(f,l,k,d,G)):f&&f(a,k.childNodes,void 0,e)}for(var h=[],k=oa(a)||a instanceof Z,l,m,n,G,q,r=0;r<a.length;r++){l=new ga;11===Hc&&za(a,r,k);m=hd(a[r],[],l,0===r?d:void 0,e);(f=m.length?Ca(m,a[r],l,b,
c,null,[],[],f):null)&&f.scope&&C.$$addScopeClass(l.$$element);l=f&&f.terminal||!(n=a[r].childNodes)||!n.length?null:V(n,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(r,f,l),G=!0,q=q||f;f=null}return G?g:null}function za(a,b,c){var d=a[b],e=d.parentNode,f;if(d.nodeType===Ld)for(;;){f=e?d.nextSibling:a[b+1];if(!f||f.nodeType!==Ld)break;d.nodeValue+=f.nodeValue;f.parentNode&&f.parentNode.removeChild(f);c&&f===a[b+1]&&a.splice(b+1,1)}}function yb(a,b,c){function d(e,
f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=ua(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?yb(a,b.$$slots[f],c):null;return d}function hd(a,b,c,d,e){var f=c.$attr,g;switch(a.nodeType){case 1:g=N(a);jd(b,Db(g),"E",d,e);for(var h,k,l,m,G=a.attributes,q=0,r=G&&G.length;q<r;q++){var S=!1,t=!1;h=G[q];k=h.name;l=h.value;h=Db(k);(m=xa.test(h))&&(k=k.replace(Qf,"").substr(8).replace(/_(.)/g,function(a,
b){return b.toUpperCase()}));(h=h.match(le))&&Sb(h[1])&&(S=k,t=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));h=Db(k.toLowerCase());f[h]=k;if(m||!c.hasOwnProperty(h))c[h]=l,ib(a,h)&&(c[h]=!0);Ja(a,b,l,h,m);jd(b,h,"A",d,e,S,t)}"input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off");if(!na)break;f=a.className;F(f)&&(f=f.animVal);if(z(f)&&""!==f)for(;a=n.exec(f);)h=Db(a[2]),jd(b,h,"C",d,e)&&(c[h]=Pa(a[3])),f=f.substr(a.index+a[0].length);break;case Ld:ra(b,a.nodeValue);
break;case 8:if(!Na)break;Y(a,b,c,d,e)}b.sort(db);return b}function Y(a,b,c,d,e){try{var f=m.exec(a.nodeValue);if(f){var g=Db(f[1]);jd(b,g,"M",d,e)&&(c[g]=Pa(f[2]))}}catch(h){}}function Ua(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Jb("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return Z(d)}function ba(a,b,c){return function(d,
e,f,g,h){e=Ua(e[0],b,c);return a(d,e,f,g,h)}}function Nc(a,b,c,d,e,f){var g;return a?C(b,c,d,e,f):function(){g||(g=C(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function Ca(a,b,c,d,g,h,k,m,n){function G(a,b,c,d){if(a){c&&(a=ba(a,c,d));a.require=U.require;a.directiveName=z;if(p===U||U.$$isolateScope)a=ea(a,{isolateScope:!0});k.push(a)}if(b){c&&(b=ba(b,c,d));b.require=U.require;b.directiveName=z;if(p===U||U.$$isolateScope)b=ea(b,{isolateScope:!0});m.push(b)}}function q(a,d,g,h,n){function G(a,
b,c,d){var e;K(a)||(d=c,c=b,b=a,a=void 0);u&&(e=U);c||(c=u?w.parent():w);if(d){var f=n.$$slots[d];if(f)return f(a,b,e,c,fb);if(x(f))throw Jb("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,gb(w));}else return n(a,b,e,c,fb)}var r,L,X,Aa,ma,U,z,w;b===g?(h=c,w=c.$$element):(w=Z(g),h=new ga(w,c));ma=d;p?Aa=d.$new(!0):S&&(ma=d.$parent);n&&(z=G,z.$$boundTransclude=n,z.isSlotFilled=function(a){return!!n.$$slots[a]});t&&(U=M(w,h,z,t,Aa,d,p));p&&(C.$$addScopeInfo(w,
Aa,!0,!(ya&&(ya===p||ya===p.$$originalDirective))),C.$$addScopeClass(w,!0),Aa.$$isolateBindings=p.$$isolateBindings,L=Qa(d,h,Aa,Aa.$$isolateBindings,p),L.removeWatches&&Aa.$on("$destroy",L.removeWatches));for(r in U){L=t[r];X=U[r];var R=L.$$bindings.bindToController;if(H){X.bindingInfo=R?Qa(ma,h,X.instance,R,L):{};var nd=X();nd!==X.instance&&(X.instance=nd,w.data("$"+L.name+"Controller",nd),X.bindingInfo.removeWatches&&X.bindingInfo.removeWatches(),X.bindingInfo=Qa(ma,h,X.instance,R,L))}else X.instance=
X(),w.data("$"+L.name+"Controller",X.instance),X.bindingInfo=Qa(ma,h,X.instance,R,L)}e(t,function(a,b){var c=a.require;a.bindToController&&!oa(c)&&F(c)&&l(U[b].instance,W(b,c,w,U))});e(U,function(a){var b=a.instance;if(I(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(c){f(c)}if(I(b.$onInit))try{b.$onInit()}catch(c){f(c)}I(b.$doCheck)&&(ma.$watch(function(){b.$doCheck()}),b.$doCheck());I(b.$onDestroy)&&ma.$on("$destroy",function(){b.$onDestroy()})});r=0;for(L=k.length;r<L;r++)X=
k[r],Kb(X,X.isolateScope?Aa:d,w,h,X.require&&W(X.directiveName,X.require,w,U),z);var fb=d;p&&(p.template||null===p.templateUrl)&&(fb=Aa);a&&a(fb,g.childNodes,void 0,n);for(r=m.length-1;0<=r;r--)X=m[r],Kb(X,X.isolateScope?Aa:d,w,h,X.require&&W(X.directiveName,X.require,w,U),z);e(U,function(a){a=a.instance;I(a.$postLink)&&a.$postLink()})}n=n||{};for(var r=-Number.MAX_VALUE,S=n.newScopeDirective,t=n.controllerDirectives,p=n.newIsolateScopeDirective,ya=n.templateDirective,L=n.nonTlbTranscludeDirective,
X=!1,Aa=!1,u=n.hasElementTranscludeDirective,ma=c.$$element=Z(b),U,z,w,R=d,nd,fb=!1,y=!1,A,Wa=0,D=a.length;Wa<D;Wa++){U=a[Wa];var Ta=U.$$start,v=U.$$end;Ta&&(ma=Ua(b,Ta,v));w=void 0;if(r>U.priority)break;if(A=U.scope)U.templateUrl||(F(A)?(kb("new/isolated scope",p||S,U,ma),p=U):kb("new/isolated scope",p,U,ma)),S=S||U;z=U.name;if(!fb&&(U.replace&&(U.templateUrl||U.template)||U.transclude&&!U.$$tlb)){for(A=Wa+1;fb=a[A++];)if(fb.transclude&&!fb.$$tlb||fb.replace&&(fb.templateUrl||fb.template)){y=!0;
break}fb=!0}!U.templateUrl&&U.controller&&(t=t||ua(),kb("'"+z+"' controller",t[z],U,ma),t[z]=U);if(A=U.transclude)if(X=!0,U.$$tlb||(kb("transclusion",L,U,ma),L=U),"element"===A)u=!0,r=U.priority,w=ma,ma=c.$$element=Z(C.$$createComment(z,c[z])),b=ma[0],qb(g,Mc.call(w,0),b),w[0].$$parentNode=w[0].parentNode,R=Nc(y,w,d,r,h&&h.name,{nonTlbTranscludeDirective:L});else{var J=ua();if(F(A)){w=[];var B=ua(),T=ua();e(A,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;B[a]=b;J[b]=null;T[b]=c});e(ma.contents(),
function(a){var b=B[Db(N(a))];b?(T[b]=!0,J[b]=J[b]||[],J[b].push(a)):w.push(a)});e(T,function(a,b){if(!a)throw Jb("reqslot","Required transclusion slot `{0}` was not filled.",b);});for(var E in J)J[E]&&(J[E]=Nc(y,J[E],d))}else w=Z(Ba(b)).contents();ma.empty();R=Nc(y,w,d,void 0,void 0,{needsNewScope:U.$$isolateScope||U.$$newScope});R.$$slots=J}if(U.template)if(Aa=!0,kb("template",ya,U,ma),ya=U,A=I(U.template)?U.template(ma,c):U.template,A=wa(A),U.replace){h=U;w=qf.test(A)?da(Xa(U.templateNamespace,
Pa(A))):[];b=w[0];if(1!==w.length||1!==b.nodeType)throw Jb("tplrt","Template for directive '{0}' must have exactly one root element. {1}",z,"");qb(g,ma,b);D={$attr:{}};A=hd(b,[],D);var jg=a.splice(Wa+1,a.length-(Wa+1));(p||S)&&O(A,p,S);a=a.concat(A).concat(jg);P(c,D);D=a.length}else ma.html(A);if(U.templateUrl)Aa=!0,kb("template",ya,U,ma),ya=U,U.replace&&(h=U),q=Da(a.splice(Wa,a.length-Wa),ma,c,g,X&&R,k,m,{controllerDirectives:t,newScopeDirective:S!==U&&S,newIsolateScopeDirective:p,templateDirective:ya,
nonTlbTranscludeDirective:L}),D=a.length;else if(U.compile)try{nd=U.compile(ma,c,R);var Q=U.$$originalDirective||U;I(nd)?G(null,ja(Q,nd),Ta,v):nd&&G(ja(Q,nd.pre),ja(Q,nd.post),Ta,v)}catch(V){f(V,gb(ma))}U.terminal&&(q.terminal=!0,r=Math.max(r,U.priority))}q.scope=S&&!0===S.scope;q.transcludeOnThisElement=X;q.templateOnThisElement=Aa;q.transclude=R;n.hasElementTranscludeDirective=u;return q}function W(a,b,c,d){var f;if(z(b)){var g=b.match(p);b=b.substring(g[0].length);var h=g[1]||g[3],g="?"===g[2];
"^^"===h?c=c.parent():f=(f=d&&d[b])&&f.instance;if(!f){var k="$"+b+"Controller";f=h?c.inheritedData(k):c.data(k)}if(!f&&!g)throw Jb("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);}else if(oa(b))for(f=[],h=0,g=b.length;h<g;h++)f[h]=W(a,b[h],c,d);else F(b)&&(f={},e(b,function(b,e){f[e]=W(a,b,c,d)}));return f||null}function M(a,b,c,d,e,f,g){var h=ua(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},n=l.controller;"@"===
n&&(n=b[l.name]);m=G(n,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function O(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=q(a[d],{$$isolateScope:b,$$newScope:c})}function jd(a,c,e,f,g,h,l){if(c===g)return null;var m=null;if(k.hasOwnProperty(c)){g=b.get(c+"Directive");for(var n=0,G=g.length;n<G;n++)if(c=g[n],(x(f)||f>c.priority)&&-1!==c.restrict.indexOf(e)){h&&(c=q(c,{$$start:h,$$end:l}));if(!c.$$bindings){var r=m=c,S=c.name,t={isolateScope:null,bindToController:null};
F(r.scope)&&(!0===r.bindToController?(t.bindToController=d(r.scope,S,!0),t.isolateScope={}):t.isolateScope=d(r.scope,S,!1));F(r.bindToController)&&(t.bindToController=d(r.bindToController,S,!0));if(t.bindToController&&!r.controller)throw Jb("noctrl","Cannot bind to controller without directive '{0}'s controller.",S);m=m.$$bindings=t;F(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}a.push(c);m=c}}return m}function Sb(a){if(k.hasOwnProperty(a))for(var c=b.get(a+"Directive"),d=0,e=c.length;d<
e;d++)if(a=c[d],a.multiElement)return!0;return!1}function P(a,b){var c=b.$attr,d=a.$attr;e(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});e(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function Da(a,b,c,d,h,k,l,m){var n=[],G,r,S=b[0],t=a.shift(),p=q(t,{templateUrl:null,transclude:null,replace:null,$$originalDirective:t}),ya=I(t.templateUrl)?t.templateUrl(b,c):t.templateUrl,
L=t.templateNamespace;b.empty();g(ya).then(function(f){var g,q;f=wa(f);if(t.replace){f=qf.test(f)?da(Xa(L,Pa(f))):[];g=f[0];if(1!==f.length||1!==g.nodeType)throw Jb("tplrt","Template for directive '{0}' must have exactly one root element. {1}",t.name,ya);f={$attr:{}};qb(d,b,g);var X=hd(g,[],f);F(t.scope)&&O(X,!0);a=X.concat(a);P(c,f)}else g=S,b.html(f);a.unshift(p);G=Ca(a,g,c,h,b,t,k,l,m);e(d,function(a,c){a===g&&(d[c]=b[0])});for(r=V(b[0].childNodes,h);n.length;){f=n.shift();q=n.shift();var Aa=n.shift(),
u=n.shift(),X=b[0];if(!f.$$destroyed){if(q!==S){var ma=q.className;m.hasElementTranscludeDirective&&t.replace||(X=Ba(g));qb(Aa,Z(q),X);Q(Z(X),ma)}q=G.transcludeOnThisElement?yb(f,G.transclude,u):u;G(r,f,X,d,q)}}n=null}).catch(function(a){T(a)&&f(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(n?n.push(b,c,d,a):(G.transcludeOnThisElement&&(a=yb(b,G.transclude,e)),G(r,b,c,d,a)))}}function db(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function kb(a,
b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw Jb("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,gb(d));}function ra(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&C.$$addBindingClass(a);return function(a,c){var e=c.parent();b||C.$$addBindingClass(e);C.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Xa(b,c){b=La(b||"html");
switch(b){case "svg":case "math":var d=a.document.createElement("div");d.innerHTML="<"+b+">"+c+"</"+b+">";return d.childNodes[0].childNodes;default:return c}}function ca(a,b){if("srcdoc"===b)return ya.HTML;var c=N(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return ya.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return ya.RESOURCE_URL}function Ja(a,b,d,e,f){var g=ca(a,e),h=r[e]||f,k=c(d,!f,g,h);if(k){if("multiple"===
e&&"select"===N(a))throw Jb("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",gb(a));if(L.test(e))throw Jb("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");b.push({priority:100,compile:function(){return{pre:function(a,b,f){b=f.$$observers||(f.$$observers=ua());var l=f[e];l!==d&&(k=l&&c(l,!0,g,h),d=l);k&&(f[e]=k(a),(b[e]||(b[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||
a).$watch(k,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function qb(b,c,d){var e=c[0],f=c.length,g=e.parentNode,h,k;if(b)for(h=0,k=b.length;h<k;h++)if(b[h]===e){b[h++]=d;k=h+f-1;for(var l=b.length;h<l;h++,k++)k<l?b[h]=b[k]:delete b[h];b.length-=f-1;b.context===e&&(b.context=d);break}g&&g.replaceChild(d,e);b=a.document.createDocumentFragment();for(h=0;h<f;h++)b.appendChild(c[h]);Z.hasData(e)&&(Z.data(d,Z.data(e)),Z(e).off("$destroy"));Z.cleanData(b.querySelectorAll("*"));
for(h=1;h<f;h++)delete c[h];c[0]=d;c.length=1}function ea(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function Kb(a,b,c,d,e,g){try{a(b,c,d,e,g)}catch(h){f(h,gb(c))}}function Ga(a,b){if(A)throw Jb("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",a,b);}function Qa(a,b,d,f,g){function k(b,c,e){I(d.$onChanges)&&!fa(c,e)&&(ha||(a.$$postDigest(R),ha=[]),G||(G={},ha.push(l)),G[b]&&(e=G[b].previousValue),G[b]=new v(e,c))}function l(){d.$onChanges(G);G=void 0}var m=
[],n={},G;e(f,function(e,f){var l=e.attrName,G=e.optional,q,r,S,p;switch(e.mode){case "@":G||rc.call(b,l)||(Ga(l,g.name),d[f]=b[l]=void 0);G=b.$observe(l,function(a){if(z(a)||aa(a))k(f,a,d[f]),d[f]=a});b.$$observers[l].$$scope=a;q=b[l];z(q)?d[f]=c(q)(a):aa(q)&&(d[f]=q);n[f]=new v(xf,d[f]);m.push(G);break;case "=":if(!rc.call(b,l)){if(G)break;Ga(l,g.name);b[l]=void 0}if(G&&!b[l])break;r=h(b[l]);p=r.literal?ia:fa;S=r.assign||function(){q=d[f]=r(a);throw Jb("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",
b[l],l,g.name);};q=d[f]=r(a);G=function(b){p(b,d[f])||(p(b,q)?S(a,b=d[f]):d[f]=b);return q=b};G.$stateful=!0;G=e.collection?a.$watchCollection(b[l],G):a.$watch(h(b[l],G),null,r.literal);m.push(G);break;case "<":if(!rc.call(b,l)){if(G)break;Ga(l,g.name);b[l]=void 0}if(G&&!b[l])break;r=h(b[l]);var ya=r.literal,L=d[f]=r(a);n[f]=new v(xf,d[f]);G=a.$watch(r,function(a,b){if(b===a){if(b===L||ya&&ia(b,L))return;b=L}k(f,a,b);d[f]=a},ya);m.push(G);break;case "&":G||rc.call(b,l)||Ga(l,g.name);r=b.hasOwnProperty(l)?
h(b[l]):t;if(r===t&&G)break;d[f]=function(b){return r(a,b)}}});return{initialChanges:n,removeWatches:m.length&&function(){for(var a=0,b=m.length;a<b;++a)m[a]()}}}var la=/^\w/,ka=a.document.createElement("div"),Na=Ta,na=J,pa=D,ha;ga.prototype={$normalize:Db,$addClass:function(a){a&&0<a.length&&Aa.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&Aa.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Ma(a,b);c&&c.length&&Aa.addClass(this.$$element,c);(c=Ma(b,a))&&c.length&&
Aa.removeClass(this.$$element,c)},$set:function(a,b,c,d){var g=ib(this.$$element[0],a),h=mg[a],k=a;g?(this.$$element.prop(a,b),d=g):h&&(this[h]=b,k=h);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=Tb(a,"-"));g=N(this.$$element);if("a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=w(b,"src"===a);else if("img"===g&&"srcset"===a&&E(b)){for(var g="",h=Pa(b),l=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,l=/\s/.test(h)?l:/(,)/,h=h.split(l),l=Math.floor(h.length/2),m=0;m<
l;m++)var n=2*m,g=g+w(Pa(h[n]),!0),g=g+(" "+Pa(h[n+1]));h=Pa(h[2*m]).split(/\s/);g+=w(Pa(h[0]),!0);2===h.length&&(g+=" "+Pa(h[1]));this[a]=b=g}!1!==c&&(null===b||x(b)?this.$$element.removeAttr(d):la.test(d)?this.$$element.attr(d,b):B(this.$$element[0],d,b));(a=this.$$observers)&&e(a[k],function(a){try{a(b)}catch(c){f(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ua()),e=d[a]||(d[a]=[]);e.push(b);S.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});
return function(){qa(e,b)}}};var sa=c.startSymbol(),va=c.endSymbol(),wa="{{"===sa&&"}}"===va?u:function(a){return a.replace(/\{\{/g,sa).replace(/}}/g,va)},xa=/^ngAttr[A-Z]/,le=/^(.+)Start$/;C.$$addBindingInfo=y?function(a,b){var c=a.data("$binding")||[];oa(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:t;C.$$addBindingClass=y?function(a){Q(a,"ng-binding")}:t;C.$$addScopeInfo=y?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:t;C.$$addScopeClass=y?function(a,b){Q(a,
b?"ng-isolate-scope":"ng-scope")}:t;C.$$createComment=function(b,c){var d="";y&&(d=" "+(b||"")+": ",c&&(d+=c+" "));return a.document.createComment(d)};return C}]}function v(a,b){this.previousValue=a;this.currentValue=b}function Db(a){return a.replace(Qf,"").replace(ug,bc)}function Ma(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g===e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function da(a){a=Z(a);var b=a.length;if(1>=b)return a;
for(;b--;){var c=a[b];(8===c.nodeType||c.nodeType===Ld&&""===c.nodeValue.trim())&&ef.call(a,b,1)}return a}function $a(a,b){if(b&&z(b))return b;if(z(a)){var c=Ue.exec(a);if(c)return c[3]}}function sa(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){C(b,"controller");F(b)?l(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(c,e){function f(a,b,c,e){if(!a||!F(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",
e,b);a.$scope[b]=c}return function(d,g,h,k){var m,n,q;h=!0===h;k&&z(k)&&(q=k);if(z(d)){k=d.match(Ue);if(!k)throw Rf("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);n=k[1];q=q||k[3];d=a.hasOwnProperty(n)?a[n]:Qa(g.$scope,n,!0)||(b?Qa(e,n,!0):void 0);if(!d)throw Rf("ctrlreg","The controller with the name '{0}' is not registered.",n);Na(d,n,!0)}if(h)return h=(oa(d)?d[d.length-1]:d).prototype,m=Object.create(h||null),q&&f(g,q,m,n||d.name),l(function(){var a=
c.invoke(d,m,g,n);a!==m&&(F(a)||I(a))&&(m=a,q&&f(g,q,m,n||d.name));return m},{instance:m,identifier:q});m=c.instantiate(d,g,n);q&&f(g,q,m,n||d.name);return m}}]}function Sa(){this.$get=["$window",function(a){return Z(a.document)}]}function uc(){this.$get=["$document","$rootScope",function(a,b){function c(){e=d.hidden}var d=a[0],e=d&&d.hidden;a.on("visibilitychange",c);b.$on("$destroy",function(){a.off("visibilitychange",c)});return function(){return e}}]}function ab(){this.$get=["$log",function(a){return function(b,
c){a.error.apply(a,arguments)}}]}function Ic(a){return F(a)?H(a)?a.toISOString():V(a):a}function ad(){this.$get=function(){return function(a){if(!a)return"";var b=[];h(a,function(a,c){null===a||x(a)||I(a)||(oa(a)?e(a,function(a){b.push(Ga(c)+"="+Ga(Ic(a)))}):b.push(Ga(c)+"="+Ga(Ic(a))))});return b.join("&")}}}function ed(){this.$get=function(){return function(a){function b(a,d,f){null===a||x(a)||(oa(a)?e(a,function(a,c){b(a,d+"["+(F(a)?c:"")+"]")}):F(a)&&!H(a)?h(a,function(a,c){b(a,d+(f?"":"[")+c+
(f?"":"]"))}):c.push(Ga(d)+"="+Ga(Ic(a))))}if(!a)return"";var c=[];b(a,"",!0);return c.join("&")}}}function bd(a,b){if(z(a)){var c=a.replace(Bd,"").trim();if(c){var d=b("Content-Type"),d=d&&0===d.indexOf(Rc),e;(e=d)||(e=(e=c.match(pb))&&Sf[e[0]].test(c));if(e)try{a=Ua(c)}catch(f){if(!d)return a;throw zf("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',a,f);}}}return a}function je(a){var b=ua(),c;z(a)?e(a.split("\n"),function(a){c=a.indexOf(":");var d=La(Pa(a.substr(0,
c)));a=Pa(a.substr(c+1));d&&(b[d]=b[d]?b[d]+", "+a:a)}):F(a)&&e(a,function(a,c){var d=La(c),e=Pa(a);d&&(b[d]=b[d]?b[d]+", "+e:e)});return b}function qd(a){var b;return function(c){b||(b=je(a));return c?(c=b[La(c)],void 0===c&&(c=null),c):b}}function Xb(a,b,c,d){if(I(d))return d(a,b,c);e(d,function(d){a=d(a,b,c)});return a}function Ef(){var a=this.defaults={transformResponse:[bd],transformRequest:[function(a){return F(a)&&"[object File]"!==dc.call(a)&&"[object Blob]"!==dc.call(a)&&"[object FormData]"!==
dc.call(a)?V(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ka(gc),put:Ka(gc),patch:Ka(gc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return E(a)?(b=!!a,this):b};var c=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(f,g,h,k,m,n,q,r){function p(b){function c(a,b){for(var d=
0,e=b.length;d<e;){var f=b[d++],g=b[d++];a=a.then(f,g)}b.length=0;return a}function g(a,b){var c,d={};e(a,function(a,e){I(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}function h(a){var b=l({},a);b.data=Xb(a.data,a.headers,a.status,k.transformResponse);a=a.status;return 200<=a&&300>a?b:n.reject(b)}if(!F(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);if(!z(r.valueOf(b.url)))throw d("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",
b.url);var k=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},b);k.headers=function(b){var c=a.headers,d=l({},b.headers),e,f,h,c=l({},c.common,c[La(b.method)]);a:for(e in c){f=La(e);for(h in d)if(La(h)===f)continue a;d[e]=c[e]}return g(d,Ka(b))}(b);k.method=Vc(k.method);k.paramSerializer=z(k.paramSerializer)?q.get(k.paramSerializer):k.paramSerializer;f.$$incOutstandingRequestCount();
var m=[],S=[];b=n.resolve(k);e(y,function(a){(a.request||a.requestError)&&m.unshift(a.request,a.requestError);(a.response||a.responseError)&&S.push(a.response,a.responseError)});b=c(b,m);b=b.then(function(b){var c=b.headers,d=Xb(b.data,qd(c),void 0,b.transformRequest);x(d)&&e(c,function(a,b){"content-type"===La(b)&&delete c[b]});x(b.withCredentials)&&!x(a.withCredentials)&&(b.withCredentials=a.withCredentials);return L(b,d).then(h,h)});b=c(b,S);return b=b.finally(function(){f.$$completeOutstandingRequest(t)})}
function L(c,d){function f(a){if(a){var c={};e(a,function(a,d){c[d]=function(c){function d(){a(c)}b?m.$applyAsync(d):m.$$phase?d():m.$apply(d)}});return c}}function k(a,c,d,e,f){function g(){l(c,a,d,e,f)}ma&&(200<=a&&300>a?ma.put(Wa,[a,c,je(d),e,f]):ma.remove(Wa));b?m.$applyAsync(g):(g(),m.$$phase||m.$apply())}function l(a,b,d,e,f){b=-1<=b?b:0;(200<=b&&300>b?ya.resolve:ya.reject)({data:a,status:b,headers:qd(d),config:c,statusText:e,xhrStatus:f})}function q(a){l(a.data,a.status,Ka(a.headers()),a.statusText,
a.xhrStatus)}function t(){var a=p.pendingRequests.indexOf(c);-1!==a&&p.pendingRequests.splice(a,1)}var ya=n.defer(),X=ya.promise,ma,y,A=c.headers,H="jsonp"===La(c.method),Wa=c.url;H?Wa=r.getTrustedResourceUrl(Wa):z(Wa)||(Wa=r.valueOf(Wa));Wa=u(Wa,c.paramSerializer(c.params));H&&(Wa=w(Wa,c.jsonpCallbackParam));p.pendingRequests.push(c);X.then(t,t);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(ma=F(c.cache)?c.cache:F(a.cache)?a.cache:R);ma&&(y=ma.get(Wa),E(y)?y&&I(y.then)?
y.then(q,q):oa(y)?l(y[1],y[0],Ka(y[2]),y[3],y[4]):l(y,200,{},"OK","complete"):ma.put(Wa,X));x(y)&&((y=jf(c.url)?h()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(A[c.xsrfHeaderName||a.xsrfHeaderName]=y),g(c.method,Wa,d,k,A,c.timeout,c.withCredentials,c.responseType,f(c.eventHandlers),f(c.uploadEventHandlers)));return X}function u(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function w(a,b){if(/[&?][^=]+=JSON_CALLBACK/.test(a))throw zf("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',
a);if((new RegExp("[&?]"+b+"=")).test(a))throw zf("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',b,a);return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var R=k("$http");a.paramSerializer=z(a.paramSerializer)?q.get(a.paramSerializer):a.paramSerializer;var y=[];e(c,function(a){y.unshift(z(a)?q.get(a):q.invoke(a))});p.pendingRequests=[];(function(a){e(arguments,function(a){p[a]=function(b,c){return p(l({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){e(arguments,
function(a){p[a]=function(b,c,d){return p(l({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");p.defaults=a;return p}]}function ke(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function He(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,c,d){return vc(a,d,a.defer,b,c[0])}]}function vc(a,b,c,d,f){function g(a,b,c){a=a.replace("JSON_CALLBACK",b);var e=f.createElement("script"),h=null;e.type="text/javascript";e.src=a;e.async=!0;h=function(a){e.removeEventListener("load",
h);e.removeEventListener("error",h);f.body.removeChild(e);e=null;var g=-1,k="unknown";a&&("load"!==a.type||d.wasCalled(b)||(a={type:"error"}),k=a.type,g="error"===a.type?404:200);c&&c(g,k)};e.addEventListener("load",h);e.addEventListener("error",h);f.body.appendChild(e);return h}return function(f,h,k,l,m,n,q,r,t,p){function L(){z&&z();w&&w.abort()}function u(a,b,d,e,f,g){E(y)&&c.cancel(y);z=w=null;a(b,d,e,f,g)}h=h||a.url();if("jsonp"===La(f))var Aa=d.createCallback(h),z=g(h,Aa,function(a,b){var c=
200===a&&d.getResponse(Aa);u(l,a,c,"",b,"complete");d.removeCallback(Aa)});else{var w=b(f,h);w.open(f,h,!0);e(m,function(a,b){E(a)&&w.setRequestHeader(b,a)});w.onload=function(){var a=w.statusText||"",b="response"in w?w.response:w.responseText,c=1223===w.status?204:w.status;0===c&&(c=b?200:"file"===dd(h).protocol?404:0);u(l,c,b,w.getAllResponseHeaders(),a,"complete")};w.onerror=function(){u(l,-1,null,null,"","error")};w.onabort=function(){u(l,-1,null,null,"","abort")};w.ontimeout=function(){u(l,-1,
null,null,"","timeout")};e(t,function(a,b){w.addEventListener(b,a)});e(p,function(a,b){w.upload.addEventListener(b,a)});q&&(w.withCredentials=!0);if(r)try{w.responseType=r}catch(R){if("json"!==r)throw R;}w.send(x(k)?null:k)}if(0<n)var y=c(L,n);else n&&I(n.then)&&n.then(L)}}function Qd(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}
function g(c){return c.replace(q,a).replace(r,b)}function h(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function k(f,q,r,t){function p(a){try{var b=a;a=r?e.getTrusted(r,b):e.valueOf(b);return t&&!E(a)?a:hc(a)}catch(c){d(md.interr(f,c))}}if(!f.length||-1===f.indexOf(a)){var L;q||(q=g(f),L=w(q),L.exp=f,L.expressions=[],L.$$watchDelegate=h);return L}t=!!t;var u,U,z=0,R=[],y=[];L=f.length;for(var fb=[],A=[];z<L;)if(-1!==(u=f.indexOf(a,z))&&-1!==(U=f.indexOf(b,u+m)))z!==u&&fb.push(g(f.substring(z,
u))),z=f.substring(u+m,U),R.push(z),y.push(c(z,p)),z=U+n,A.push(fb.length),fb.push("");else{z!==L&&fb.push(g(f.substring(z)));break}r&&1<fb.length&&md.throwNoconcat(f);if(!q||R.length){var H=function(a){for(var b=0,c=R.length;b<c;b++){if(t&&x(a[b]))return;fb[A[b]]=a[b]}return fb.join("")};return l(function(a){var b=0,c=R.length,e=Array(c);try{for(;b<c;b++)e[b]=y[b](a);return H(e)}catch(g){d(md.interr(f,g))}},{exp:f,expressions:R,$$watchDelegate:function(a,b){var c;return a.$watchGroup(y,function(d,
e){var f=H(d);I(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var m=a.length,n=b.length,q=new RegExp(a.replace(/./g,f),"g"),r=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function cd(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(h,k,l,m){function n(){q?h.apply(null,r):h(L)}var q=4<arguments.length,r=q?Mc.call(arguments,4):[],t=b.setInterval,p=b.clearInterval,L=0,u=E(m)&&!m,z=(u?d:c).defer(),U=
z.promise;l=E(l)?l:0;U.$$intervalId=t(function(){u?e.defer(n):a.$evalAsync(n);z.notify(L++);0<l&&L>=l&&(z.resolve(L),p(U.$$intervalId),delete g[U.$$intervalId]);u||a.$apply()},k);g[U.$$intervalId]=z;return U}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].promise.$$state.pur=!0,g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function Eb(a){a=a.split("/");for(var b=a.length;b--;)a[b]=Xa(a[b]);return a.join("/")}
function Rd(a,b){var c=dd(a);b.$$protocol=c.protocol;b.$$host=c.hostname;b.$$port=r(c.port)||wg[c.protocol]||null}function Sd(a,b){if(Af.test(a))throw Cd("badpath",'Invalid url "{0}".',a);var c="/"!==a.charAt(0);c&&(a="/"+a);var d=dd(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);b.$$search=Sb(d.search);b.$$hash=decodeURIComponent(d.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Id(a,b){return a.slice(0,b.length)===b}function Yb(a,
b){if(Id(b,a))return b.substr(a.length)}function tb(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function Jc(a){return a.replace(/(#.+)|#$/,"$1")}function P(a,b,c){this.$$html5=!0;c=c||"";Rd(a,this);this.$$parse=function(a){var c=Yb(b,a);if(!z(c))throw Cd("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Sd(c,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=kb(this.$$search),c=this.$$hash?"#"+Xa(this.$$hash):"";this.$$url=Eb(this.$$path)+
(a?"?"+a:"")+c;this.$$absUrl=b+this.$$url.substr(1);this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;E(f=Yb(a,d))?(g=f,g=c&&E(f=Yb(c,f))?b+(Yb("/",f)||f):a+g):E(f=Yb(b,d))?g=b+f:b===d+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function ca(a,b,c){Rd(a,this);this.$$parse=function(d){var e=Yb(a,d)||Yb(b,d),f;x(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",x(e)&&(a=d,this.replace())):(f=Yb(c,e),x(f)&&(f=e));Sd(f,this);d=this.$$path;
var e=a,g=/^\/[A-Z]:(\/.*)/;Id(f,e)&&(f=f.replace(e,""));g.exec(f)||(d=(f=g.exec(d))?f[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var b=kb(this.$$search),d=this.$$hash?"#"+Xa(this.$$hash):"";this.$$url=Eb(this.$$path)+(b?"?"+b:"")+d;this.$$absUrl=a+(this.$$url?c+this.$$url:"");this.$$urlUpdatedByLocation=!0};this.$$parseLinkUrl=function(b,c){return tb(a)===tb(b)?(this.$$parse(b),!0):!1}}function bb(a,b,c){this.$$html5=!0;ca.apply(this,arguments);this.$$parseLinkUrl=function(d,
e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a===tb(d)?f=d:(g=Yb(b,d))?f=a+c+g:b===d+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=kb(this.$$search),d=this.$$hash?"#"+Xa(this.$$hash):"";this.$$url=Eb(this.$$path)+(b?"?"+b:"")+d;this.$$absUrl=a+c+this.$$url;this.$$urlUpdatedByLocation=!0}}function fd(a){return function(){return this[a]}}function gd(a,b){return function(c){if(x(c))return this[a];this[a]=b(c);this.$$compose();return this}}function Kc(){var a=
"!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return E(b)?(a=b,this):a};this.html5Mode=function(a){if(aa(a))return b.enabled=a,this;if(F(a)){aa(a.enabled)&&(b.enabled=a.enabled);aa(a.requireBase)&&(b.requireBase=a.requireBase);if(aa(a.rewriteLinks)||z(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=l.url(),f=l.$$state;try{d.url(a,b,
c),l.$$state=d.state()}catch(g){throw l.url(e),l.$$state=f,g;}}function k(a,b){c.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=d.baseHref();var n=d.url(),q;if(b.enabled){if(!m&&b.requireBase)throw Cd("nobase","$location in HTML5 mode requires a <base> tag to be present!");q=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=e.history?P:bb}else q=tb(n),m=ca;var r=q.substr(0,tb(q).lastIndexOf("/")+1);l=new m(q,r,"#"+a);l.$$parseLinkUrl(n,n);l.$$state=d.state();var t=
/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var h=Z(a.target);"a"!==N(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!z(e)||!x(h.attr(e))){var e=h.prop("href"),k=h.attr("href")||h.attr("xlink:href");F(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=dd(e.animVal).href);t.test(e)||!e||h.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(e,k)||(a.preventDefault(),l.absUrl()!==d.url()&&
(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}});Jc(l.absUrl())!==Jc(n)&&d.url(l.absUrl(),!0);var p=!0;d.onUrlChange(function(a,b){Id(a,r)?(c.$evalAsync(function(){var d=l.absUrl(),e=l.$$state,f;a=Jc(a);l.$$parse(a);l.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(d),l.$$state=e,h(d,!1,e)):(p=!1,k(d,e)))}),c.$$phase||c.$digest()):g.location.href=a});c.$watch(function(){if(p||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var a=
Jc(d.url()),b=Jc(l.absUrl()),f=d.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(p||m)p=!1,c.$evalAsync(function(){var b=l.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(d?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))})}l.$$replace=!1});return l}]}function Td(){var a=!0,b=this;this.debugEnabled=function(b){return E(b)?(a=b,this):a};this.$get=["$window",function(c){function d(a){T(a)&&(a.stack&&g?
a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function f(a){var b=c.console||{},g=b[a]||b.log||t;return function(){var a=[];e(arguments,function(b){a.push(d(b))});return Function.prototype.apply.call(g,b,a)}}var g=Hc||/\bEdge\//.test(c.navigator&&c.navigator.userAgent);return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,
arguments)}}()}}]}function Fb(a){return a+""}function Ud(a,b){return"undefined"!==typeof a?a:b}function Vd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Wd(a,b){switch(a.type){case M.MemberExpression:if(a.computed)return!1;break;case M.UnaryExpression:return 1;case M.BinaryExpression:return"+"!==a.operator?1:!1;case M.CallExpression:return!1}return void 0===b?Fa:b}function Oa(a,b,c){var d,f,g=a.isPure=Wd(a,c);switch(a.type){case M.Program:d=!0;e(a.body,function(a){Oa(a.expression,
b,g);d=d&&a.expression.constant});a.constant=d;break;case M.Literal:a.constant=!0;a.toWatch=[];break;case M.UnaryExpression:Oa(a.argument,b,g);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case M.BinaryExpression:Oa(a.left,b,g);Oa(a.right,b,g);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case M.LogicalExpression:Oa(a.left,b,g);Oa(a.right,b,g);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case M.ConditionalExpression:Oa(a.test,
b,g);Oa(a.alternate,b,g);Oa(a.consequent,b,g);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case M.Identifier:a.constant=!1;a.toWatch=[a];break;case M.MemberExpression:Oa(a.object,b,g);a.computed&&Oa(a.property,b,g);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=a.constant?[]:[a];break;case M.CallExpression:d=c=a.filter?!b(a.callee.name).$stateful:!1;f=[];e(a.arguments,function(a){Oa(a,b,g);d=d&&a.constant;f.push.apply(f,
a.toWatch)});a.constant=d;a.toWatch=c?f:[a];break;case M.AssignmentExpression:Oa(a.left,b,g);Oa(a.right,b,g);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case M.ArrayExpression:d=!0;f=[];e(a.elements,function(a){Oa(a,b,g);d=d&&a.constant;f.push.apply(f,a.toWatch)});a.constant=d;a.toWatch=f;break;case M.ObjectExpression:d=!0;f=[];e(a.properties,function(a){Oa(a.value,b,g);d=d&&a.value.constant;f.push.apply(f,a.value.toWatch);a.computed&&(Oa(a.key,b,!1),d=d&&a.key.constant,f.push.apply(f,
a.key.toWatch))});a.constant=d;a.toWatch=f;break;case M.ThisExpression:a.constant=!1;a.toWatch=[];break;case M.LocalsExpression:a.constant=!1,a.toWatch=[]}}function rd(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Cc(a){return a.type===M.Identifier||a.type===M.MemberExpression}function Xd(a){if(1===a.body.length&&Cc(a.body[0].expression))return{type:M.AssignmentExpression,left:a.body[0].expression,right:{type:M.NGValueParameter},operator:"="}}
function Jd(a){this.$filter=a}function Kd(a){this.$filter=a}function jc(a,b,c){this.ast=new M(a,c);this.astCompiler=c.csp?new Kd(b):new Jd(b)}function Lc(a){return I(a.valueOf)?a.valueOf():Ed.call(a)}function kc(){var a=ua(),b={"true":!0,"false":!1,"null":null,undefined:void 0},c,d;this.addLiteral=function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){c=a;d=b;return this};this.$get=["$filter",function(f){function g(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=Lc(a),"object"!==typeof a||
c)?a===b||a!==a&&b!==b:!1}function h(a,b,c,d,e){var f=d.inputs,k;if(1===f.length){var l=g,f=f[0];return a.$watch(function(a){var b=f(a);g(b,l,f.isPure)||(k=d(a,void 0,void 0,[b]),l=b&&Lc(b));return k},b,c,e)}for(var m=[],n=[],G=0,q=f.length;G<q;G++)m[G]=g,n[G]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var h=f[c](a);if(b||(b=!g(h,m[c],f[c].isPure)))n[c]=h,m[c]=h&&Lc(h)}b&&(k=d(a,void 0,void 0,n));return k},b,c,e)}function k(a,b,c,d,e){function f(a){return d(a)}function g(a,
c,d){m=a;I(b)&&b(a,c,d);E(a)&&d.$$postDigest(function(){E(m)&&l()})}var l,m;return l=d.inputs?h(a,g,c,d,e):a.$watch(f,g,c)}function l(a,b,c,d){function f(a){var b=!0;e(a,function(a){E(a)||(b=!1)});return b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a;I(b)&&b(a,c,d);f(a)&&d.$$postDigest(function(){f(h)&&g()})},c)}function m(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function n(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==l&&c!==k?function(c,
e,f,g){f=d&&g?g[0]:a(c,e,f,g);return b(f,c,e)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return E(e)?c:e},d=!a.inputs;c&&c!==h?(e.$$watchDelegate=c,e.inputs=a.inputs):b.$stateful||(e.$$watchDelegate=h,e.inputs=a.inputs?a.inputs:[a]);e.inputs&&(e.inputs=e.inputs.map(function(a){return a.isPure===Fa?function(b){return a(b)}:a}));return e}var q={csp:id().noUnsafeEval,literals:Ja(b),isIdentifierStart:I(c)&&c,isIdentifierContinue:I(d)&&d};return function(b,c){var d,e,g;switch(typeof b){case "string":return g=
b=b.trim(),d=a[g],d||(":"===b.charAt(0)&&":"===b.charAt(1)&&(e=!0,b=b.substring(2)),d=new yc(q),d=(new jc(d,f,q)).parse(b),d.constant?d.$$watchDelegate=m:e?d.$$watchDelegate=d.literal?l:k:d.inputs&&(d.$$watchDelegate=h),a[g]=d),n(d,c);case "function":return n(b,c);default:return n(t,c)}}}]}function cc(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,c){return L(function(a){b.$evalAsync(a)},c,a)}];this.errorOnUnhandledRejections=function(b){return E(b)?(a=b,this):a}}function va(){var a=
!0;this.$get=["$browser","$exceptionHandler",function(b,c){return L(function(a){b.defer(a)},c,a)}];this.errorOnUnhandledRejections=function(b){return E(b)?(a=b,this):a}}function L(a,b,c){function f(){return new g}function g(){var a=this.promise=new h;this.resolve=function(b){n(a,b)};this.reject=function(b){r(a,b)};this.notify=function(b){p(a,b)}}function h(){this.$$state={status:0}}function k(){for(;!y&&A.length;){var a=A.shift();if(!a.pur){a.pur=!0;var c="Possibly unhandled rejection: "+zc(a.value);
T(a.value)?b(a.value,c):b(c)}}}function m(b){!c||b.pending||2!==b.status||b.pur||(0===y&&0===A.length&&a(k),A.push(b));!b.processScheduled&&b.pending&&(b.processScheduled=!0,++y,a(function(){var d,e,f;f=b.pending;b.processScheduled=!1;b.pending=void 0;try{for(var g=0,h=f.length;g<h;++g){b.pur=!0;e=f[g][0];d=f[g][b.status];try{I(d)?n(e,d(b.value)):1===b.status?n(e,b.value):r(e,b.value)}catch(l){r(e,l)}}}finally{--y,c&&0===y&&a(k)}}))}function n(a,b){a.$$state.status||(b===a?t(a,R("qcycle","Expected promise to be resolved with value other than itself '{0}'",
b)):q(a,b))}function q(a,b){function c(b){g||(g=!0,q(a,b))}function d(b){g||(g=!0,t(a,b))}function e(b){p(a,b)}var f,g=!1;try{if(F(b)||I(b))f=b.then;I(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,m(a.$$state))}catch(h){d(h)}}function r(a,b){a.$$state.status||t(a,b)}function t(a,b){a.$$state.value=b;a.$$state.status=2;m(a.$$state)}function p(c,d){var e=c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=
e[f][3];try{p(c,I(a)?a(d):d)}catch(h){b(h)}}})}function L(a){var b=new h;r(b,a);return b}function u(a,b,c){var d=null;try{I(c)&&(d=c())}catch(e){return L(e)}return d&&I(d.then)?d.then(function(){return b(a)},L):b(a)}function z(a,b,c,d){var e=new h;n(e,a);return e.then(b,c,d)}function w(a){if(!I(a))throw R("norslvr","Expected resolverFn, got '{0}'",a);var b=new h;a(function(a){n(b,a)},function(a){r(b,a)});return b}var R=d("$q",TypeError),y=0,A=[];l(h.prototype,{then:function(a,b,c){if(x(a)&&x(b)&&
x(c))return this;var d=new h;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&m(this.$$state);return d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return u(b,H,a)},function(b){return u(b,L,a)},b)}});var H=z;w.prototype=h.prototype;w.defer=f;w.reject=L;w.when=z;w.resolve=H;w.all=function(a){var b=new h,c=0,d=oa(a)?[]:{};e(a,function(a,e){c++;z(a).then(function(a){d[e]=a;--c||n(b,d)},function(a){r(b,
a)})});0===c&&n(b,d);return b};w.race=function(a){var b=f();e(a,function(a){z(a).then(b.resolve,b.reject)});return b.promise};return w}function R(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Ta(){function a(b){function c(){this.$$watchers=
this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++cf;this.$$ChildScope=null}c.prototype=b;return c}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(d,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(a){9===Hc&&(a.$$childHead&&n(a.$$childHead),a.$$nextSibling&&n(a.$$nextSibling));a.$parent=a.$$nextSibling=
a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function q(){this.$id=++cf;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function r(a){if(R.$$phase)throw c("inprog","{0} already in progress",R.$$phase);R.$$phase=a}function p(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function L(a,
b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function z(){for(;H.length;)try{H.shift()()}catch(a){d(a)}h=null}function w(){null===h&&(h=l.defer(function(){R.$apply(z)}))}q.prototype={constructor:q,$new:function(b,c){var d;c=c||this;b?(d=new q,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=
d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",m);return d},$watch:function(a,b,c,d){var e=k(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,h=f.$$watchers,l={fn:b,last:u,get:e,exp:d||a,eq:!!c};g=null;I(b)||(l.fn=t);h||(h=f.$$watchers=[],h.$$digestWatchIndex=-1);h.unshift(l);h.$$digestWatchIndex++;p(this,1);return function(){var a=qa(h,l);0<=a&&(p(f,-1),a<h.$$digestWatchIndex&&h.$$digestWatchIndex--);g=null}},$watchGroup:function(a,b){function c(){k=!1;
l?(l=!1,b(f,f,h)):b(f,d,h)}var d=Array(a.length),f=Array(a.length),g=[],h=this,k=!1,l=!0;if(!a.length){var m=!0;h.$evalAsync(function(){m&&b(f,f,h)});return function(){m=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,e){f[0]=a;d[0]=c;b(f,a===c?f:d,e)});e(a,function(a,b){var e=h.$watch(a,function(a,e){f[b]=a;d[b]=e;k||(k=!0,h.$evalAsync(c))});g.push(e)});return function(){for(;g.length;)g.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,h,k;if(!x(e)){if(F(e))if(f(e))for(g!==
q&&(g=q,t=g.length=0,m++),a=e.length,t!==a&&(m++,g.length=t=a),b=0;b<a;b++)k=g[b],h=e[b],d=k!==k&&h!==h,d||k===h||(m++,g[b]=h);else{g!==G&&(g=G={},t=0,m++);a=0;for(b in e)rc.call(e,b)&&(a++,h=e[b],k=g[b],b in g?(d=k!==k&&h!==h,d||k===h||(m++,g[b]=h)):(t++,g[b]=h,m++));if(t>a)for(b in m++,g)rc.call(e,b)||(t--,delete g[b])}else g!==e&&(g=e,m++);return m}}c.$stateful=!0;var d=this,e,g,h,l=1<b.length,m=0,n=k(a,c),q=[],G={},r=!0,t=0;return this.$watch(n,function(){r?(r=!1,b(e,e,d)):b(e,h,d);if(l)if(F(e))if(f(e)){h=
Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)rc.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,e,f,k,m,n,q,G=b,t,p=[],L,w;r("$digest");l.$$checkUrlChange();this===R&&null!==h&&(l.defer.cancel(h),z());g=null;do{q=!1;t=this;for(n=0;n<y.length;n++){try{w=y[n],k=w.fn,k(w.scope,w.locals)}catch(ma){d(ma)}g=null}y.length=0;a:do{if(n=t.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=n[n.$$digestWatchIndex])if(m=a.get,(e=m(t))!==(f=a.last)&&
!(a.eq?ia(e,f):lc(e)&&lc(f)))q=!0,g=a,a.last=a.eq?Ja(e,null):e,k=a.fn,k(e,f===u?e:f,t),5>G&&(L=4-G,p[L]||(p[L]=[]),p[L].push({msg:I(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:e,oldVal:f}));else if(a===g){q=!1;break a}}catch(ma){d(ma)}if(!(n=t.$$watchersCount&&t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(n=t.$$nextSibling);)t=t.$parent}while(t=n);if((q||y.length)&&!G--)throw R.$$phase=null,c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",
b,p);}while(q||y.length);for(R.$$phase=null;D<A.length;)try{A[D++]()}catch(ma){d(ma)}A.length=D=0;l.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===R&&l.$$applicationDestroyed();p(this,-this.$$watchersCount);for(var b in this.$$listenerCount)L(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&
(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=t;this.$on=this.$watch=this.$watchGroup=function(){return t};this.$$listeners={};this.$$nextSibling=null;n(this)}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){R.$$phase||y.length||l.defer(function(){y.length&&R.$digest()});y.push({scope:this,fn:k(a),locals:b})},$$postDigest:function(a){A.push(a)},
$apply:function(a){try{r("$apply");try{return this.$eval(a)}finally{R.$$phase=null}}catch(b){d(b)}finally{try{R.$digest()}catch(b){throw d(b),b;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&H.push(b);a=k(a);w()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,L(e,1,a))}},$emit:function(a,
b){var c=[],e,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=B([h],arguments,1),l,m;do{e=f.$$listeners[a]||c;h.currentScope=f;l=0;for(m=e.length;l<m;l++)if(e[l])try{e[l].apply(null,k)}catch(n){d(n)}else e.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,e=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=
!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return f;for(var g=B([f],arguments,1),h,k;c=e;){f.currentScope=c;e=c.$$listeners[a]||[];h=0;for(k=e.length;h<k;h++)if(e[h])try{e[h].apply(null,g)}catch(l){d(l)}else e.splice(h,1),h--,k--;if(!(e=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(e=c.$$nextSibling);)c=c.$parent}f.currentScope=null;return f}};var R=new q,y=R.$$asyncQueue=[],A=R.$$postDigestQueue=[],H=R.$$applyAsyncQueue=[],D=0;return R}]}function hd(){var a=
/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return E(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return E(a)?(b=a,this):b};this.$get=function(){return function(c,d){var e=d?b:a,f;f=dd(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function Nc(a){if("self"===a)return a;if(z(a)){if(-1<a.indexOf("***"))throw ld("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);a=df(a).replace(/\\\*\\\*/g,
".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+a+"$")}if(Q(a))return new RegExp("^"+a.source+"$");throw ld("imatcher",'Matchers may only be "self", string patterns or RegExp objects');}function jd(a){var b=[];E(a)&&e(a,function(a){b.push(Nc(a))});return b}function le(){this.SCE_CONTEXTS=Gc;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=jd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=jd(a));return b};this.$get=["$injector",function(c){function d(a,
b){return"self"===a?jf(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw ld("unsafe","Attempting to use an unsafe value in a safe context.");};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};h[Gc.HTML]=e(g);h[Gc.CSS]=e(g);h[Gc.URL]=e(g);h[Gc.JS]=
e(g);h[Gc.RESOURCE_URL]=e(h[Gc.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw ld("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||x(b)||""===b)return b;if("string"!==typeof b)throw ld("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)},getTrusted:function(c,e){if(null===e||x(e)||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof
g)return e.$$unwrapTrustedValue();if(c===Gc.RESOURCE_URL){var g=dd(e.toString()),k,l,m=!1;k=0;for(l=a.length;k<l;k++)if(d(a[k],g)){m=!0;break}if(m)for(k=0,l=b.length;k<l;k++)if(d(b[k],g)){m=!1;break}if(m)return e;throw ld("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString());}if(c===Gc.HTML)return f(e);throw ld("unsafe","Attempting to use an unsafe value in a safe context.");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}
function gf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Hc)throw ld("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=Ka(Gc);d.isEnabled=function(){return a};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;
d.valueOf=c.valueOf;a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=u);d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var f=d.parseAs,g=d.getTrusted,h=d.trustAs;e(Gc,function(a,b){var c=La(b);d[("parse_as_"+c).replace(wb,bc)]=function(b){return f(a,b)};d[("get_trusted_"+c).replace(wb,bc)]=function(b){return g(a,b)};d[("trust_as_"+c).replace(wb,bc)]=function(b){return h(a,b)}});return d}]}function me(){this.$get=["$window",
"$document",function(a,b){var c={},d=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=r((/android (\d+)/.exec(La((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h=g.body&&g.body.style,k=!1,l=!1;h&&(k=!!("transition"in h||"webkitTransition"in h),l=!!("animation"in h||"webkitAnimation"in h));return{history:!(!d||4>e||f),hasEvent:function(a){if("input"===
a&&Hc)return!1;if(x(c[a])){var b=g.createElement("div");c[a]="on"+a in b}return c[a]},csp:id(),transitions:k,animations:l,android:e}}]}function hf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,c,d,e,f){function g(h,k){g.totalPendingRequests++;if(!z(h)||x(c.get(h)))h=f.getTrustedResourceUrl(h);var m=d.defaults&&d.defaults.transformResponse;oa(m)?m=m.filter(function(a){return a!==bd}):m===bd&&(m=null);return d.get(h,
l({cache:c,transformResponse:m},a)).finally(function(){g.totalPendingRequests--}).then(function(a){c.put(h,a.data);return a.data},function(a){k||(a=wc("tpload","Failed to load template: {0} (HTTP status: {1} {2})",h,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=0;return g}]}function ne(){this.$get=["$rootScope","$browser","$location",function(a,b,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var d=[];e(a,function(a){var f=nc.element(a).data("$binding");
f&&e(f,function(e){c?(new RegExp("(^|\\s)"+df(b)+"(\\s|\\||$)")).test(e)&&d.push(a):-1!==e.indexOf(b)&&d.push(a)})});return d},findModels:function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=a.querySelectorAll("["+d[e]+"model"+(c?"=":"*=")+'"'+b+'"]');if(f.length)return f}},getLocation:function(){return c.url()},setLocation:function(b){b!==c.url()&&(c.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function If(){this.$get=["$rootScope",
"$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(h,k,l){I(h)||(l=k,k=h,h=t);var m=Mc.call(arguments,3),n=E(l)&&!l,q=(n?d:c).defer(),r=q.promise,p;p=b.defer(function(){try{q.resolve(h.apply(null,m))}catch(b){q.reject(b),e(b)}finally{delete g[r.$$timeoutId]}n||a.$apply()},k);r.$$timeoutId=p;g[p]=q;return r}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].promise.$$state.pur=!0,g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):
!1};return f}]}function dd(a){Hc&&($b.setAttribute("href",a),a=$b.href);$b.setAttribute("href",a);return{href:$b.href,protocol:$b.protocol?$b.protocol.replace(/:$/,""):"",host:$b.host,search:$b.search?$b.search.replace(/^\?/,""):"",hash:$b.hash?$b.hash.replace(/^#/,""):"",hostname:$b.hostname,port:$b.port,pathname:"/"===$b.pathname.charAt(0)?$b.pathname:"/"+$b.pathname}}function jf(a){a=z(a)?dd(a):a;return a.protocol===ee.protocol&&a.host===ee.host}function Ie(){this.$get=w(a)}function Je(a){function b(a){try{return decodeURIComponent(a)}catch(c){return a}}
var c=a[0]||{},d={},e="";return function(){var a,f,g,h,k;try{a=c.cookie||""}catch(l){a=""}if(a!==e)for(e=a,a=e.split("; "),d={},g=0;g<a.length;g++)f=a[g],h=f.indexOf("="),0<h&&(k=b(f.substring(0,h)),x(d[k])&&(d[k]=b(f.substring(h+1))));return d}}function oe(){this.$get=Je}function pe(a){function b(c,d){if(F(c)){var f={};e(c,function(a,c){f[c]=b(c,a)});return f}return a.factory(c+"Filter",d)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",
Ke);b("date",re);b("filter",pa);b("json",Le);b("limitTo",se);b("lowercase",Vf);b("number",Gb);b("orderBy",te);b("uppercase",Wf)}function pa(){return function(a,b,c,e){if(!f(a)){if(null==a)return a;throw d("filter")("notarray","Expected array but received: {0}",a);}e=e||"$";var g;switch(Pc(b)){case "function":break;case "boolean":case "null":case "number":case "string":g=!0;case "object":b=vd(b,c,e,g);break;default:return a}return Array.prototype.filter.call(a,b)}}function vd(a,b,c,d){var e=F(a)&&
c in a;!0===b?b=ia:I(b)||(b=function(a,b){if(x(a))return!1;if(null===a||null===b)return a===b;if(F(b)||F(a)&&!A(a))return!1;a=La(""+a);b=La(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!F(f)?Oc(f,a[c],b,c,!1):Oc(f,a,b,c,d)}}function Oc(a,b,c,d,e,f){var g=Pc(a),h=Pc(b);if("string"===h&&"!"===b.charAt(0))return!Oc(a,b.substring(1),c,d,e);if(oa(a))return a.some(function(a){return Oc(a,b,c,d,e)});switch(g){case "object":var k;if(e){for(k in a)if(k.charAt&&"$"!==k.charAt(0)&&Oc(a[k],b,
c,d,!0))return!0;return f?!1:Oc(a,b,c,d,!1)}if("object"===h){for(k in b)if(f=b[k],!I(f)&&!x(f)&&(g=k===d,!Oc(g?a:a[k],f,c,d,g,g)))return!1;return!0}return c(a,b);case "function":return!1;default:return c(a,b)}}function Pc(a){return null===a?"null":typeof a}function Ke(a){var b=a.NUMBER_FORMATS;return function(a,c,d){x(c)&&(c=b.CURRENCY_SYM);x(d)&&(d=b.PATTERNS[1].maxFrac);return null==a?a:qe(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Gb(a){var b=a.NUMBER_FORMATS;return function(a,
c){return null==a?a:qe(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function kf(a){var b=0,c,d,e,f,g;-1<(d=a.indexOf(Mf))&&(a=a.replace(Mf,""));0<(e=a.search(/e/i))?(0>d&&(d=e),d+=+a.slice(e+1),a=a.substring(0,e)):0>d&&(d=a.length);for(e=0;a.charAt(e)===tf;e++);if(e===(g=a.length))c=[0],d=1;else{for(g--;a.charAt(g)===tf;)g--;d-=e;c=[];for(f=0;e<=g;e++,f++)c[f]=+a.charAt(e)}d>Tf&&(c=c.splice(0,Tf-1),b=d-1,d=1);return{d:c,e:b,i:d}}function Zd(a,b,c,d){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(c,
f),d):+b;c=b+a.i;d=e[c];if(0<c){e.splice(Math.max(a.i,c));for(var g=c;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,c=b+1),e[0]=0,g=1;g<c;g++)e[g]=0;if(5<=d)if(0>c-1){for(d=0;d>c;d--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[c-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function qe(a,b,c,d,e){if(!z(a)&&!J(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k=
"\u221e";else{g=kf(h);Zd(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h,k.length):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&h.unshift(k.join(""));k=h.join(c);f.length&&(k+=d+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function wd(a,b,c,d){var e="";if(0>
a||d&&0>=a)d?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=tf+a;c&&(a=a.substr(a.length-b));return e+a}function ub(a,b,c,d,e){c=c||0;return function(f){f=f["get"+a]();if(0<c||f>-c)f+=c;0===f&&-12===c&&(f=12);return wd(f,b,d,e)}}function Hb(a,b,c){return function(d,e){var f=d["get"+a](),g=Vc((c?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Qc(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function $d(a){return function(b){var c=Qc(b.getFullYear());b=+new Date(b.getFullYear(),
b.getMonth(),b.getDate()+(4-b.getDay()))-+c;return wd(1+Math.round(b/6048E5),a)}}function xd(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function re(a){function b(a){var d;if(d=a.match(c)){a=new Date(0);var e=0,f=0,g=d[8]?a.setUTCFullYear:a.setFullYear,h=d[8]?a.setUTCHours:a.setHours;d[9]&&(e=r(d[9]+d[10]),f=r(d[9]+d[11]));g.call(a,r(d[1]),r(d[2])-1,r(d[3]));e=r(d[4]||0)-e;f=r(d[5]||0)-f;g=r(d[6]||0);d=Math.round(1E3*parseFloat("0."+(d[7]||0)));h.call(a,e,f,g,d)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;z(c)&&(c=Nf.test(c)?r(c):b(c));J(c)&&(c=new Date(c));if(!H(c)||!isFinite(c.getTime()))return c;for(;d;)(l=xc.exec(d))?(h=B(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=za(f,m),c=ga(c,f,!0));e(h,function(b){k=Uf[b];g+=k?k(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Le(){return function(a,b){x(b)&&(b=2);return V(a,b)}}function se(){return function(a,
b,c){b=Infinity===Math.abs(Number(b))?Number(b):r(b);if(lc(b))return a;J(a)&&(a=a.toString());if(!f(a))return a;c=!c||isNaN(c)?0:r(c);c=0>c?Math.max(0,a.length+c):c;return 0<=b?ae(a,c,c+b):0===c?ae(a,b,a.length):ae(a,Math.max(0,c+b),c)}}function ae(a,b,c){return z(a)?a.slice(b,c):Mc.call(a,b,c)}function te(a){function b(c){return c.map(function(b){var c=1,d=u;if(I(b))d=b;else if(z(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=
d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function c(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function e(a,b){var c=0,d=a.type,f=b.type;if(d===f){var f=a.value,g=b.value;"string"===d?(f=f.toLowerCase(),g=g.toLowerCase()):"object"===d&&(F(f)&&(f=a.index),F(g)&&(g=b.index));f!==g&&(c=f<g?-1:1)}else c=d<f?-1:1;return c}return function(a,g,h,k){if(null==a)return a;if(!f(a))throw d("orderBy")("notarray","Expected array but received: {0}",
a);oa(g)||(g=[g]);0===g.length&&(g=["+"]);var l=b(g),m=h?-1:1,n=I(k)?k:e;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:l.map(function(d){var e=d.get(a);d=typeof e;if(null===e)d="string",e="null";else if("object"===d)a:{if(I(e.valueOf)&&(e=e.valueOf(),c(e)))break a;A(e)&&(e=e.toString(),c(e))}return{value:e,type:d,index:b}})}});a.sort(function(a,b){for(var c=0,d=l.length;c<d;c++){var f=n(a.predicateValues[c],b.predicateValues[c]);
if(f)return f*l[c].descending*m}return(n(a.tieBreaker,b.tieBreaker)||e(a.tieBreaker,b.tieBreaker))*m});return a=a.map(function(a){return a.value})}}function Zb(a){I(a)&&(a={link:a});a.restrict=a.restrict||"AC";return w(a)}function oc(a,b,c,d,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(c);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=Ee;this.$$element=a;this.$$animate=d;be(this)}function be(a){a.$$classCache=
{};a.$$classCache[Cg]=!(a.$$classCache[Xe]=a.$$element.hasClass(Xe))}function ue(a){function b(a,c,d){d&&!a.$$classCache[c]?(a.$$animate.addClass(a.$$element,c),a.$$classCache[c]=!0):!d&&a.$$classCache[c]&&(a.$$animate.removeClass(a.$$element,c),a.$$classCache[c]=!1)}function c(a,d,e){d=d?"-"+Tb(d,"-"):"";b(a,Xe+d,!0===e);b(a,Cg+d,!1===e)}var d=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,f,g){x(f)?(this.$pending||(this.$pending={}),d(this.$pending,a,g)):(this.$pending&&e(this.$pending,
a,g),Me(this.$pending)&&(this.$pending=void 0));aa(f)?f?(e(this.$error,a,g),d(this.$$success,a,g)):(d(this.$error,a,g),e(this.$$success,a,g)):(e(this.$error,a,g),e(this.$$success,a,g));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,c(this,"",null)):(b(this,"ng-pending",!1),this.$valid=Me(this.$error),this.$invalid=!this.$valid,c(this,"",this.$valid));f=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;c(this,a,f);this.$$parentForm.$setValidity(a,
f,this)}}function Me(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function ec(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function vb(a,b,c,d,e,f){var g=La(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=Pa(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&
d.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",m)}b.on("change",l);if(Se[g]&&d.$$hasNativeValidators&&g===c.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,d=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&b.typeMismatch===
d||l(a)})}});d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function Md(a,b){return function(c,d){var f,g;if(H(c))return c;if(z(c)){'"'===c.charAt(0)&&'"'===c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(zg.test(c))return new Date(c);a.lastIndex=0;if(f=a.exec(c))return f.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,
ss:0,sss:0},e(f,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1E3*g.sss||0)}return NaN}}function ob(a,b,c,d){return function(e,f,g,h,k,l,m){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return E(a)&&!H(a)?c(a)||void 0:a}pc(e,f,g,h);vb(e,f,g,h,k,l);var r=h&&h.$options.getOption("timezone"),t;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=c(a,t),r&&(a=ga(a,r)),a});h.$formatters.push(function(a){if(a&&
!H(a))throw ie("datefmt","Expected `{0}` to be a date",a);if(n(a))return(t=a)&&r&&(t=ga(t,r,!0)),m("date")(a,d,r);t=null;return""});if(E(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!n(a)||x(p)||c(a)>=p};g.$observe("min",function(a){p=q(a);h.$validate()})}if(E(g.max)||g.ngMax){var L;h.$validators.max=function(a){return!n(a)||x(L)||c(a)<=L};g.$observe("max",function(a){L=q(a);h.$validate()})}}}function pc(a,b,c,d){(d.$$hasNativeValidators=F(b[0].validity))&&d.$parsers.push(function(a){var c=
b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function lf(a){a.$$parserName="number";a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(Xf.test(b))return parseFloat(b)});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!J(b))throw ie("numfmt","Expected `{0}` to be a number",b);b=b.toString()}return b})}function Nd(a){E(a)&&!J(a)&&(a=parseFloat(a));return lc(a)?void 0:a}function kd(a){var b=a.toString(),c=b.indexOf(".");return-1===c?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?
Number(a[1]):0:b.length-c-1}function yd(a,b,c){a=Number(a);var d=(a|0)!==a,e=(b|0)!==b,f=(c|0)!==c;if(d||e||f){var g=d?kd(a):0,h=e?kd(b):0,k=f?kd(c):0,g=Math.pow(10,Math.max(g,h,k));a*=g;b*=g;c*=g;d&&(a=Math.round(a));e&&(b=Math.round(b));f&&(c=Math.round(c))}return 0===(a-b)%c}function ve(a,b,c,d,e){if(E(d)){a=a(d);if(!a.constant)throw ie("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return a(b)}return e}function we(a,b){function c(a,b){if(!a||!a.length)return[];if(!b||
!b.length)return a;var d=[],e=0;a:for(;e<a.length;e++){for(var f=a[e],g=0;g<b.length;g++)if(f===b[g])continue a;d.push(f)}return d}function d(a){var b=a;oa(a)?b=a.map(d).join(" "):F(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" "));return b}function f(a){var b=a;if(oa(a))b=a.map(f);else if(F(a)){var c=!1,b=Object.keys(a).filter(function(b){b=a[b];!c&&x(b)&&(c=!0);return b});c&&b.push(void 0)}return b}a="ngClass"+a;var g;return["$parse",function(h){return{restrict:"AC",link:function(k,
l,m){function n(a,b){var c=[];e(a,function(a){if(0<b||z[a])z[a]=(z[a]||0)+b,z[a]===+(0<b)&&c.push(a)});return c.join(" ")}function q(a){if(a===b){var c=R,c=n(c&&c.split(" "),1);m.$addClass(c)}else c=R,c=n(c&&c.split(" "),-1),m.$removeClass(c);w=a}function r(a){a=d(a);a!==R&&t(a)}function t(a){if(w===b){var d=R&&R.split(" "),e=a&&a.split(" "),f=c(d,e),d=c(e,d),f=n(f,-1),d=n(d,1);m.$addClass(d);m.$removeClass(f)}R=a}var p=m[a].trim(),L=":"===p.charAt(0)&&":"===p.charAt(1),p=h(p,L?f:d),u=L?r:t,z=l.data("$classCounts"),
w=!0,R;z||(z=ua(),l.data("$classCounts",z));"ngClass"!==a&&(g||(g=h("$index",function(a){return a&1})),k.$watch(g,q));k.$watch(p,u,L)}}}]}function xe(a,b,c,d,e,f,g,h,k){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;
this.$name=k(c.name||"",!1)(a);this.$$parentForm=Ee;this.$options=Re;this.$$parsedNgModel=e(c.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$currentValidationRunId=0;Object.defineProperty(this,"$$scope",{value:a});this.$$attr=c;this.$$element=d;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=h;this.$$exceptionHandler=b;be(this);
mf(this)}function mf(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);if(b!==a.$modelValue&&(a.$modelValue===a.$modelValue||b===b)){a.$modelValue=a.$$rawModelValue=b;a.$$parserValid=void 0;for(var c=a.$formatters,d=c.length,e=b;d--;)e=c[d](e);a.$viewValue!==e&&(a.$$updateEmptyClasses(e),a.$viewValue=a.$$lastCommittedViewValue=e,a.$render(),a.$$runValidators(a.$modelValue,a.$viewValue,t))}return b})}function Gd(a){this.$$options=a}function od(a,b){e(b,function(b,c){E(a[c])||(a[c]=b)})}function Qb(a,
b){a.prop("selected",b);a.attr("selected",b)}var Rb={objectMaxDepth:5},bf=/^\/(.+)\/([a-z]*)$/,rc=Object.prototype.hasOwnProperty,La=function(a){return z(a)?a.toLowerCase():a},Vc=function(a){return z(a)?a.toUpperCase():a},Hc,Z,Hd,Mc=[].slice,ef=[].splice,ag=[].push,dc=Object.prototype.toString,Ff=Object.getPrototypeOf,mc=d("ng"),nc=a.angular||(a.angular={}),ff,cf=0;Hc=a.document.documentMode;var lc=Number.isNaN||function(a){return a!==a};t.$inject=[];u.$inject=[];var oa=Array.isArray,sd=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,
Pa=function(a){return z(a)?a.trim():a},df=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},id=function(){if(!E(id.rules)){var b=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(b){var c=b.getAttribute("ng-csp")||b.getAttribute("data-ng-csp");id.rules={noUnsafeEval:!c||-1!==c.indexOf("no-unsafe-eval"),noInlineStyle:!c||-1!==c.indexOf("no-inline-style")}}else{b=id;try{new Function(""),c=!1}catch(d){c=!0}b.rules={noUnsafeEval:c,
noInlineStyle:!1}}}return id.rules},td=function(){if(E(td.name_))return td.name_;var b,c,d=ud.length,e,f;for(c=0;c<d;++c)if(e=ud[c],b=a.document.querySelector("["+e.replace(":","\\:")+"jq]")){f=b.getAttribute(e+"jq");break}return td.name_=f},ea=/:/g,ud=["ng-","data-ng-","ng:","x-ng-"],Gf=function(b){var c=b.currentScript;if(!c)return!0;if(!(c instanceof a.HTMLScriptElement||c instanceof a.SVGScriptElement))return!1;c=c.attributes;return[c.getNamedItem("src"),c.getNamedItem("href"),c.getNamedItem("xlink:href")].every(function(a){if(!a)return!0;
if(!a.value)return!1;var c=b.createElement("a");c.href=a.value;if(b.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;default:return!1}})}(a.document),Yd=/[A-Z]/g,Hf=!1,Ld=3,bg={full:"1.6.6",major:1,minor:6,dot:6,codeName:"interdimensional-cable"};wa.expando="ng339";var Oe=wa.cache={},Eg=1;wa._data=function(a){return this.cache[a[this.expando]]||{}};var zd=/-([a-z])/g,qc=/^-ms-/,ze={mouseleave:"mouseout",mouseenter:"mouseover"},
Qe=d("jqLite"),Pe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,qf=/<|&#?\w+;/,hg=/<([\w:-]+)/,Kf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Tc={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Tc.optgroup=Tc.option;Tc.tbody=Tc.tfoot=Tc.colgroup=Tc.caption=Tc.thead;Tc.th=Tc.td;var ng=
a.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Ad=wa.prototype={ready:xa,toString:function(){var a=[];e(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?Z(this[a]):Z(this[this.length+a])},length:0,push:ag,sort:[].sort,splice:[].splice},Fc={};e("multiple selected checked disabled readOnly required open".split(" "),function(a){Fc[La(a)]=a});var Od={};e("input select option textarea button form details".split(" "),function(a){Od[a]=
!0});var mg={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};e({data:Nb,removeData:Ea,hasData:function(a){for(var b in Oe[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,c=a.length;b<c;b++)Ea(a[b])}},function(a,b){wa[b]=a});e({data:Nb,inheritedData:lb,scope:function(a){return Z.data(a,"$scope")||lb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Z.data(a,"$isolateScope")||Z.data(a,"$isolateScopeNoTemplate")},
controller:Cb,injector:function(a){return lb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:eb,css:function(a,b,c){b=Ub(b.replace(qc,"ms-"));if(E(c))a.style[b]=c;else return a.style[b]},attr:function(a,b,c){var d=a.nodeType;if(d!==Ld&&2!==d&&8!==d&&a.getAttribute){var d=La(b),e=Fc[d];if(E(c))null===c||!1===c&&e?a.removeAttribute(b):a.setAttribute(b,e?d:c);else return a=a.getAttribute(b),e&&null!==a&&(a=d),null===a?void 0:a}},prop:function(a,b,c){if(E(c))a[b]=c;else return a[b]},
text:function(){function a(b,c){if(x(c)){var d=b.nodeType;return 1===d||d===Ld?b.textContent:""}b.textContent=c}a.$dv="";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&"select"===N(a)){var c=[];e(a.options,function(a){a.selected&&c.push(a.value||a.text)});return c}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;O(a,!0);a.innerHTML=b},empty:Bc},function(a,b){wa.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Bc&&x(2===a.length&&a!==eb&&a!==Cb?b:c)){if(F(b)){for(d=
0;d<f;d++)if(a===Nb)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}d=a.$dv;f=x(d)?Math.min(f,1):f;for(e=0;e<f;e++){var g=a(this[e],b,c);d=d?d+g:g}return d}for(d=0;d<f;d++)a(this[d],b,c);return this}});e({removeData:Ea,on:function(a,b,c,d){if(E(d))throw Qe("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Vb(a)){d=Bb(a,!0);var e=d.events,f=d.handle;f||(f=d.handle=Ya(a,e));d=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=d.length,h=function(b,d,g){var h=
e[b];h||(h=e[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||g||a.addEventListener(b,f));h.push(c)};g--;)b=d[g],ze[b]?(h(ze[b],Za),h(b,void 0,!0)):h(b)}},off:hb,one:function(a,b,c){a=Z(a);a.on(b,function Aa(){a.off(b,c);a.off(b,Aa)});a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;O(a);e(new wa(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a);c=b})},children:function(a){var b=[];e(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||
a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(1===c||11===c){b=new wa(b);for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])}},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;e(new wa(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){var c=Z(b).eq(0).clone()[0],d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:Ob,detach:function(a){Ob(a,!0)},after:function(a,b){var c=a,d=a.parentNode;if(d){b=new wa(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];d.insertBefore(g,
c.nextSibling);c=g}}},addClass:ka,removeClass:Ac,toggleClass:function(a,b,c){b&&e(b.split(" "),function(b){var d=c;x(d)&&(d=!eb(a,b));(d?ka:Ac)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Ba,triggerHandler:function(a,b,c){var d,f,g=b.type||b,h=Bb(a);if(h=(h=h&&h.events)&&h[g])d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===
this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:t,type:g,target:a},b.type&&(d=l(d,b)),b=Ka(h),f=c?[d].concat(c):[d],e(b,function(b){d.isImmediatePropagationStopped()||b.apply(a,f)})}},function(a,b){wa.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;f<g;f++)x(e)?(e=a(this[f],b,c,d),E(e)&&(e=Z(e))):na(e,a(this[f],b,c,d));return E(e)?e:this}});
wa.prototype.bind=wa.prototype.on;wa.prototype.unbind=wa.prototype.off;var cg=Object.create(null);Wc.prototype={_idx:function(a){if(a===this._lastKey)return this._lastIndex;this._lastKey=a;return this._lastIndex=this._keys.indexOf(a)},_transformKey:function(a){return lc(a)?cg:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},set:function(a,b){a=this._transformKey(a);var c=this._idx(a);-1===c&&(c=this._lastIndex=this._keys.length);this._keys[c]=a;this._values[c]=
b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var Te=Wc,og=[function(){this.$get=[function(){return Te}]}],kg=/^([^(]+?)=>/,pg=/^[^(]*\(\s*([^)]*)\)/m,Sc=/,/,qg=/^\s*(_?)(\S+?)\1\s*$/,Of=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Fd=d("$injector");ic.$$annotate=function(a,b,c){var d;if("function"===typeof a){if(!(d=a.$inject)){d=[];if(a.length){if(b)throw z(c)&&c||(c=a.name||pd(a)),
Fd("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);b=Ra(a);e(b[1].split(Sc),function(a){a.replace(qg,function(a,b,c){d.push(c)})})}a.$inject=d}}else oa(a)?(b=a.length-1,Na(a[b],"fn"),d=a.slice(0,b)):Na(a,"fn",!0);return d};var Pf=d("$animate"),rg=function(){this.$get=t},vf=function(){var a=new Te,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,d){function f(a,b,c){var d=!1;b&&(b=z(b)?b.split(" "):oa(b)?b:[],e(b,function(b){b&&(d=!0,a[b]=c)}));return d}
function g(){e(b,function(b){var c=a.get(b);if(c){var d=Yc(b.attr("class")),f="",g="";e(c,function(a,b){a!==!!d[b]&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)});e(b,function(a){f&&ka(a,f);g&&Ac(a,g)});a.delete(b)}});b.length=0}return{enabled:t,on:t,off:t,pin:t,push:function(e,h,k,l){l&&l();k=k||{};k.from&&e.css(k.from);k.to&&e.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(e)||{},h=f(k,h,!0),l=f(k,l,!1),h||l)a.set(e,k),b.push(e),1===b.length&&d.$$postDigest(g);
e=new c;e.complete();return e}}}]},Kg=["$provide",function(a){var b=this,c=null,d=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw Pf("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e;a.factory(e,d)};this.customFilter=function(a){1===arguments.length&&(d=I(a)?a:null);return d};this.classNameFilter=function(a){if(1===arguments.length&&(c=a instanceof RegExp?
a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(c.toString()))throw c=null,Pf("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return c};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,
cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){d=d&&Z(d);e=e&&Z(e);d=d||e.parent();b(c,d,e);return a.push(c,"enter",Wb(f))},move:function(c,d,e,f){d=d&&Z(d);e=e&&Z(e);d=d||e.parent();b(c,d,e);return a.push(c,"move",Wb(f))},leave:function(b,c){return a.push(b,"leave",Wb(c),function(){b.remove()})},addClass:function(b,c,d){d=Wb(d);d.addClass=ha(d.addclass,c);return a.push(b,"addClass",d)},removeClass:function(b,c,d){d=Wb(d);d.removeClass=ha(d.removeClass,c);return a.push(b,"removeClass",
d)},setClass:function(b,c,d,e){e=Wb(e);e.addClass=ha(e.addClass,c);e.removeClass=ha(e.removeClass,d);return a.push(b,"setClass",e)},animate:function(b,c,d,e,f){f=Wb(f);f.from=f.from?l(f.from,c):c;f.to=f.to?l(f.to,d):d;f.tempClasses=ha(f.tempClasses,e||"ng-inline-animate");return a.push(b,"animate",f)}}}]}],sg=function(){this.$get=["$$rAF",function(a){function b(d){c.push(d);1<c.length||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;b(function(){a=!0});return function(c){a?
c():b(c)}}}]},tg=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,c,d,f){function g(a){this.setHost(a);var b=c();this._doneCallbacks=[];this._tick=function(a){d()?f(a,0,!1):b(a)};this._state=0}g.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};g.all=function(a,b){function c(e){f=f&&e;++d===a.length&&b(f)}var d=0,f=!0;e(a,function(a){a.done(c)})};g.prototype={setHost:function(a){this.host=
a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:t,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},
end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(e(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return g}]},wf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){a(function(){f.addClass&&
(b.addClass(f.addClass),f.addClass=null);f.removeClass&&(b.removeClass(f.removeClass),f.removeClass=null);f.to&&(b.css(f.to),f.to=null);g||h.complete();g=!0});return h}var f=d||{};f.$$prepared||(f=Ja(f));f.cleanupStyles&&(f.from=f.to=null);f.from&&(b.css(f.from),f.from=null);var g,h=new c;return{start:e,end:e}}}]},Jb=d("$compile"),xf=new function(){};Pb.$inject=["$provide","$$sanitizeUriProvider"];v.prototype.isFirstChange=function(){return this.previousValue===xf};var Qf=/^((?:x|data)[:\-_])/i,ug=
/[:\-_]+(.)/g,Rf=d("$controller"),Ue=/^(\S+)(\s+as\s+([\w$]+))?$/,yf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof Z&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},Rc="application/json",gc={"Content-Type":Rc+";charset=utf-8"},pb=/^\[|^\{(?!\{)/,Sf={"[":/]$/,"{":/}$/},Bd=/^\)]\}',?\n/,zf=d("$http"),md=nc.$interpolateMinErr=d("$interpolate");md.throwNoconcat=function(a){throw md("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",
a);};md.interr=function(a,b){return md("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var cb=function(){this.$get=function(){function a(b){var c=function(a){c.data=a;c.called=!0};c.id=b;return c}var b=nc.callbacks,c={};return{createCallback:function(d){d="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+d,f=a(d);c[e]=b[d]=f;return e},wasCalled:function(a){return c[a].called},getResponse:function(a){return c[a].data},removeCallback:function(a){delete b[c[a].id];delete c[a]}}}},jb=
/^([^?#]*)(\?([^#]*))?(#(.*))?$/,wg={http:80,https:443,ftp:21},Cd=d("$location"),Af=/^\s*[\\/]{2,}/,Ec={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:fd("$$absUrl"),url:function(a){if(x(a))return this.$$url;var b=jb.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:fd("$$protocol"),host:fd("$$host"),port:fd("$$port"),path:gd("$$path",function(a){a=null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),
search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(z(a)||J(a))a=a.toString(),this.$$search=Sb(a);else if(F(a))a=Ja(a,{}),e(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Cd("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:gd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=
!0;return this}};e([bb,ca,P],function(a){a.prototype=Object.create(Ec);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==P||!this.$$html5)throw Cd("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");this.$$state=x(b)?null:b;this.$$urlUpdatedByLocation=!0;return this}});var he=d("$parse"),Ed={}.constructor.prototype.valueOf,la=ua();e("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){la[a]=
!0});var xg={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},yc=function(a){this.options=a};yc.prototype={constructor:yc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,
text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),c=b+this.peek(2),d=la[b],e=la[c];la[a]||d||e?(a=e?c:d?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===
typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},
isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return 55296<=c&&56319>=c&&56320<=d&&57343>=d?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;b=
E(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw he("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=La(this.text.charAt(this.index));if("."===c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"===c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"===a.charAt(a.length-1))a+=c;else if(!this.isExpOperator(c)||d&&this.isNumber(d)||
"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<
this.text.length;){var f=this.text.charAt(this.index),d=d+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,c+=String.fromCharCode(parseInt(e,16))):c+=xg[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:d,constant:!0,value:c});return}c+=f}this.index++}this.throwError("Unterminated quote",b)}};var M=function(a,b){this.lexer=a;this.options=b};M.Program=
"Program";M.ExpressionStatement="ExpressionStatement";M.AssignmentExpression="AssignmentExpression";M.ConditionalExpression="ConditionalExpression";M.LogicalExpression="LogicalExpression";M.BinaryExpression="BinaryExpression";M.UnaryExpression="UnaryExpression";M.CallExpression="CallExpression";M.MemberExpression="MemberExpression";M.Identifier="Identifier";M.Literal="Literal";M.ArrayExpression="ArrayExpression";M.Property="Property";M.ObjectExpression="ObjectExpression";M.ThisExpression="ThisExpression";
M.LocalsExpression="LocalsExpression";M.NGValueParameter="NGValueParameter";M.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:M.Program,body:a}},expressionStatement:function(){return{type:M.ExpressionStatement,expression:this.filterChain()}},
filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Cc(a))throw he("lval","Trying to assign a value to a non l-value");a={type:M.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,c;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(c=this.expression(),{type:M.ConditionalExpression,
test:a,alternate:b,consequent:c}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:M.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:M.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:M.BinaryExpression,operator:b.text,left:a,right:this.relational()};
return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:M.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:M.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:M.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},
unary:function(){var a;return(a=this.expect("+","-","!"))?{type:M.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=Ja(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:M.Literal,value:this.options.literals[this.consume().text]}:
this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:M.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:M.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:M.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");
return a},filter:function(a){a=[a];for(var b={type:M.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:M.Identifier,name:a.text}},constant:function(){return{type:M.Literal,value:this.consume().value}},
arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:M.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:M.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?
(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");return{type:M.ObjectExpression,properties:a}},throwError:function(a,b){throw he("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index));
},consume:function(a){if(0===this.tokens.length)throw he("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw he("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===c||
f===d||f===e||!(b||c||d||e))return a}return!1},expect:function(a,b,c,d){return(a=this.peek(a,b,c,d))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:M.ThisExpression},$locals:{type:M.LocalsExpression}}};var Fa=2;Jd.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};Oa(a,b.$filter);var c="",d;this.stage="assign";if(d=Xd(a))this.state.computing="assign",c=this.nextId(),this.recurse(d,c),this.return_(c),
c="fn.assign="+this.generateFunction("assign","s,v,l");d=rd(a.body);b.stage="inputs";e(d,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var e=b.nextId();b.recurse(a,e);b.return_(e);b.state.inputs.push({name:d,isPure:a.isPure});a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+c+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue",
"ifDefined","plus",a))(this.$filter,Fb,Ud,Vd);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;e(b,function(b){a.push("var "+b.name+"="+c.generateFunction(b.name,"s"));b.isPure&&a.push(b.name,".isPure="+JSON.stringify(b.isPure)+";")});b.length&&a.push("fn.inputs=["+b.map(function(a){return a.name}).join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},
filterPrefix:function(){var a=[],b=this;e(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,d,f,g){var h,k,l=this,m,n,q;d=d||t;if(!g&&E(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,d,f,
!0));else switch(a.type){case M.Program:e(a.body,function(b,c){l.recurse(b.expression,void 0,void 0,function(a){k=a});c!==a.body.length-1?l.current().body.push(k,";"):l.return_(k)});break;case M.Literal:n=this.escape(a.value);this.assign(b,n);d(b||n);break;case M.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a});n=a.operator+"("+this.ifDefined(k,0)+")";this.assign(b,n);d(n);break;case M.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a});this.recurse(a.right,
void 0,void 0,function(a){k=a});n="+"===a.operator?this.plus(h,k):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(k,0):"("+h+")"+a.operator+"("+k+")";this.assign(b,n);d(n);break;case M.LogicalExpression:b=b||this.nextId();l.recurse(a.left,b);l.if_("&&"===a.operator?b:l.not(b),l.lazyRecurse(a.right,b));d(b);break;case M.ConditionalExpression:b=b||this.nextId();l.recurse(a.test,b);l.if_(b,l.lazyRecurse(a.alternate,b),l.lazyRecurse(a.consequent,b));d(b);break;case M.Identifier:b=b||this.nextId();
c&&(c.context="inputs"===l.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name);l.if_("inputs"===l.stage||l.not(l.getHasOwnProperty("l",a.name)),function(){l.if_("inputs"===l.stage||"s",function(){f&&1!==f&&l.if_(l.isNull(l.nonComputedMember("s",a.name)),l.lazyAssign(l.nonComputedMember("s",a.name),"{}"));l.assign(b,l.nonComputedMember("s",a.name))})},b&&l.lazyAssign(b,l.nonComputedMember("l",a.name)));d(b);break;case M.MemberExpression:h=c&&
(c.context=this.nextId())||this.nextId();b=b||this.nextId();l.recurse(a.object,h,void 0,function(){l.if_(l.notNull(h),function(){a.computed?(k=l.nextId(),l.recurse(a.property,k),l.getStringValue(k),f&&1!==f&&l.if_(l.not(l.computedMember(h,k)),l.lazyAssign(l.computedMember(h,k),"{}")),n=l.computedMember(h,k),l.assign(b,n),c&&(c.computed=!0,c.name=k)):(f&&1!==f&&l.if_(l.isNull(l.nonComputedMember(h,a.property.name)),l.lazyAssign(l.nonComputedMember(h,a.property.name),"{}")),n=l.nonComputedMember(h,
a.property.name),l.assign(b,n),c&&(c.computed=!1,c.name=a.property.name))},function(){l.assign(b,"undefined")});d(b)},!!f);break;case M.CallExpression:b=b||this.nextId();a.filter?(k=l.filter(a.callee.name),m=[],e(a.arguments,function(a){var b=l.nextId();l.recurse(a,b);m.push(b)}),n=k+"("+m.join(",")+")",l.assign(b,n),d(b)):(k=l.nextId(),h={},m=[],l.recurse(a.callee,k,h,function(){l.if_(l.notNull(k),function(){e(a.arguments,function(b){l.recurse(b,a.constant?void 0:l.nextId(),void 0,function(a){m.push(a)})});
n=h.name?l.member(h.context,h.name,h.computed)+"("+m.join(",")+")":k+"("+m.join(",")+")";l.assign(b,n)},function(){l.assign(b,"undefined")});d(b)}));break;case M.AssignmentExpression:k=this.nextId();h={};this.recurse(a.left,void 0,h,function(){l.if_(l.notNull(h.context),function(){l.recurse(a.right,k);n=l.member(h.context,h.name,h.computed)+a.operator+k;l.assign(b,n);d(b||n)})},1);break;case M.ArrayExpression:m=[];e(a.elements,function(b){l.recurse(b,a.constant?void 0:l.nextId(),void 0,function(a){m.push(a)})});
n="["+m.join(",")+"]";this.assign(b,n);d(b||n);break;case M.ObjectExpression:m=[];q=!1;e(a.properties,function(a){a.computed&&(q=!0)});q?(b=b||this.nextId(),this.assign(b,"{}"),e(a.properties,function(a){a.computed?(h=l.nextId(),l.recurse(a.key,h)):h=a.key.type===M.Identifier?a.key.name:""+a.key.value;k=l.nextId();l.recurse(a.value,k);l.assign(l.member(b,h,a.computed),k)})):(e(a.properties,function(b){l.recurse(b.value,a.constant?void 0:l.nextId(),void 0,function(a){m.push(l.escape(b.key.type===M.Identifier?
b.key.name:""+b.key.value)+":"+a)})}),n="{"+m.join(",")+"}",this.assign(b,n));d(b||n);break;case M.ThisExpression:this.assign(b,"s");d(b||"s");break;case M.LocalsExpression:this.assign(b,"l");d(b||"l");break;case M.NGValueParameter:this.assign(b,"v"),d(b||"v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return d[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||
(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(!0===a)b();else{var d=this.current().body;d.push("if(",a,"){");b();d.push("}");c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,
b){var c=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(c,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,
stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(z(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(J(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw he("esc","IMPOSSIBLE");},nextId:function(a,b){var c="v"+this.state.nextId++;a||this.current().vars.push(c+(b?"="+b:""));return c},current:function(){return this.state[this.state.computing]}};
Kd.prototype={compile:function(a){var b=this;Oa(a,b.$filter);var c,d;if(c=Xd(a))d=this.recurse(c);c=rd(a.body);var f;c&&(f=[],e(c,function(a,c){var d=b.recurse(a);d.isPure=a.isPure;a.input=d;f.push(d);a.watchId=c}));var g=[];e(a.body,function(a){g.push(b.recurse(a.expression))});a=0===a.body.length?t:1===a.body.length?g[0]:function(a,b){var c;e(g,function(d){c=d(a,b)});return c};d&&(a.assign=function(a,b,c){return d(a,c,b)});f&&(a.inputs=f);return a},recurse:function(a,b,c){var d,f,g=this,h;if(a.input)return this.inputs(a.input,
a.watchId);switch(a.type){case M.Literal:return this.value(a.value,b);case M.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case M.BinaryExpression:return d=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](d,f,b);case M.LogicalExpression:return d=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](d,f,b);case M.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),
b);case M.Identifier:return g.identifier(a.name,b,c);case M.MemberExpression:return d=this.recurse(a.object,!1,!!c),a.computed||(f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(d,f,b,c):this.nonComputedMember(d,f,b,c);case M.CallExpression:return h=[],e(a.arguments,function(a){h.push(g.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var g=[],k=0;k<h.length;++k)g.push(h[k](a,c,
d,e));a=f.apply(void 0,g,e);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,e){var g=f(a,c,d,e),k;if(null!=g.value){k=[];for(var l=0;l<h.length;++l)k.push(h[l](a,c,d,e));k=g.value.apply(g.context,k)}return b?{value:k}:k};case M.AssignmentExpression:return d=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,e,g){var h=d(a,c,e,g);a=f(a,c,e,g);h.context[h.name]=a;return b?{value:a}:a};case M.ArrayExpression:return h=[],e(a.elements,function(a){h.push(g.recurse(a))}),function(a,
c,d,e){for(var f=[],g=0;g<h.length;++g)f.push(h[g](a,c,d,e));return b?{value:f}:f};case M.ObjectExpression:return h=[],e(a.properties,function(a){a.computed?h.push({key:g.recurse(a.key),computed:!0,value:g.recurse(a.value)}):h.push({key:a.key.type===M.Identifier?a.key.name:""+a.key.value,computed:!1,value:g.recurse(a.value)})}),function(a,c,d,e){for(var f={},g=0;g<h.length;++g)h[g].computed?f[h[g].key(a,c,d,e)]=h[g].value(a,c,d,e):f[h[g].key]=h[g].value(a,c,d,e);return b?{value:f}:f};case M.ThisExpression:return function(a){return b?
{value:a}:a};case M.LocalsExpression:return function(a,c){return b?{value:c}:c};case M.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){c=a(c,d,e,f);c=E(c)?+c:0;return b?{value:c}:c}},"unary-":function(a,b){return function(c,d,e,f){c=a(c,d,e,f);c=E(c)?-c:-0;return b?{value:c}:c}},"unary!":function(a,b){return function(c,d,e,f){c=!a(c,d,e,f);return b?{value:c}:c}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g);d=b(d,
e,f,g);h=Vd(h,d);return c?{value:h}:h}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g);d=b(d,e,f,g);h=(E(h)?h:0)-(E(d)?d:0);return c?{value:h}:h}},"binary*":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)*b(d,e,f,g);return c?{value:d}:d}},"binary/":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)/b(d,e,f,g);return c?{value:d}:d}},"binary%":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)%b(d,e,f,g);return c?{value:d}:d}},"binary===":function(a,b,c){return function(d,
e,f,g){d=a(d,e,f,g)===b(d,e,f,g);return c?{value:d}:d}},"binary!==":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)!==b(d,e,f,g);return c?{value:d}:d}},"binary==":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)==b(d,e,f,g);return c?{value:d}:d}},"binary!=":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)!=b(d,e,f,g);return c?{value:d}:d}},"binary<":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)<b(d,e,f,g);return c?{value:d}:d}},"binary>":function(a,b,c){return function(d,e,
f,g){d=a(d,e,f,g)>b(d,e,f,g);return c?{value:d}:d}},"binary<=":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)<=b(d,e,f,g);return c?{value:d}:d}},"binary>=":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)>=b(d,e,f,g);return c?{value:d}:d}},"binary&&":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)&&b(d,e,f,g);return c?{value:d}:d}},"binary||":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)||b(d,e,f,g);return c?{value:d}:d}},"ternary?:":function(a,b,c,d){return function(e,f,
g,h){e=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c){return function(d,e,f,g){d=e&&a in e?e:d;c&&1!==c&&d&&null==d[a]&&(d[a]={});e=d?d[a]:void 0;return b?{context:d,name:a,value:e}:e}},computedMember:function(a,b,c,d){return function(e,f,g,h){var k=a(e,f,g,h),l,m;null!=k&&(l=b(e,f,g,h),l+="",d&&1!==d&&k&&!k[l]&&(k[l]={}),m=k[l]);return c?{context:k,name:l,value:m}:m}},nonComputedMember:function(a,
b,c,d){return function(e,f,g,h){e=a(e,f,g,h);d&&1!==d&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return c?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};jc.prototype={constructor:jc,parse:function(a){a=this.ast.ast(a);var b=this.astCompiler.compile(a);b.literal=0===a.body.length||1===a.body.length&&(a.body[0].expression.type===M.Literal||a.body[0].expression.type===M.ArrayExpression||a.body[0].expression.type===M.ObjectExpression);b.constant=
a.constant;return b}};var ld=d("$sce"),Gc={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},wb=/_([a-z])/g,wc=d("$compile"),$b=a.document.createElement("a"),ee=dd(a.location.href);Je.$inject=["$document"];pe.$inject=["$provide"];var Tf=22,Mf=".",tf="0";Ke.$inject=["$locale"];Gb.$inject=["$locale"];var Uf={yyyy:ub("FullYear",4,0,!1,!0),yy:ub("FullYear",2,0,!0,!0),y:ub("FullYear",1,0,!1,!0),MMMM:Hb("Month"),MMM:Hb("Month",!0),MM:ub("Month",2,1),M:ub("Month",1,1),LLLL:Hb("Month",!1,
!0),dd:ub("Date",2),d:ub("Date",1),HH:ub("Hours",2),H:ub("Hours",1),hh:ub("Hours",2,-12),h:ub("Hours",1,-12),mm:ub("Minutes",2),m:ub("Minutes",1),ss:ub("Seconds",2),s:ub("Seconds",1),sss:ub("Milliseconds",3),EEEE:Hb("Day"),EEE:Hb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,c){a=-1*c;return a=(0<=a?"+":"")+(wd(Math[0<a?"floor":"ceil"](a/60),2)+wd(Math.abs(a%60),2))},ww:$d(2),w:$d(1),G:xd,GG:xd,GGG:xd,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:
b.ERANAMES[1]}},xc=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Nf=/^-?\d+$/;re.$inject=["$locale"];var Vf=w(La),Wf=w(Vc);te.$inject=["$parse"];var fg=w({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===dc.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),De={};e(Fc,function(a,b){function c(a,
e,f){a.$watch(f[d],function(a){f.$set(b,!!a)})}if("multiple"!==a){var d=Db("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)});De[d]=function(){return{restrict:"A",priority:100,link:e}}}});e(mg,function(a,b){De[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"===d.ngPattern.charAt(0)&&(c=d.ngPattern.match(bf))){d.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(d[b],function(a){d.$set(b,a)})}}}});e(["src","srcset","href"],function(a){var b=
Db("ng-"+a);De[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===dc.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Hc&&f&&d.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Ee={$addControl:t,$$renameControl:function(a,b){a.$name=b},$removeControl:t,$setValidity:t,$setDirty:t,$setPristine:t,$setSubmitted:t};oc.$inject=["$element","$attrs","$scope","$animate","$interpolate"];oc.prototype=
{$rollbackViewValue:function(){e(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){e(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){C(a.$name,"input");this.$$controls.push(a);a.$name&&(this[a.$name]=a);a.$$parentForm=this},$$renameControl:function(a,b){var c=a.$name;this[c]===a&&delete this[c];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name];e(this.$pending,function(b,c){this.$setValidity(c,
null,a)},this);e(this.$error,function(b,c){this.$setValidity(c,null,a)},this);e(this.$$success,function(b,c){this.$setValidity(c,null,a)},this);qa(this.$$controls,a);a.$$parentForm=Ee},$setDirty:function(){this.$$animate.removeClass(this.$$element,Dd);this.$$animate.addClass(this.$$element,de);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Dd,de+" ng-submitted");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;e(this.$$controls,
function(a){a.$setPristine()})},$setUntouched:function(){e(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted");this.$submitted=!0;this.$$parentForm.$setSubmitted()}};ue({clazz:oc,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(qa(d,c),0===d.length&&delete a[b])}});var xb=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:
c(a).assign||t}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:oc,compile:function(c,e){c.addClass(Dd).addClass(Xe);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var k=function(b){a.$apply(function(){h.$commitViewValue();h.$setSubmitted()});b.preventDefault()};c[0].addEventListener("submit",k);c.on("$destroy",function(){b(function(){c[0].removeEventListener("submit",k)},0,!1)})}(g[1]||h.$$parentForm).$addControl(h);
var m=f?d(h.$name):t;f&&(m(a,h),e.$observe(f,function(b){h.$name!==b&&(m(a,void 0),h.$$parentForm.$$renameControl(h,b),m=d(h.$name),m(a,h))}));c.on("$destroy",function(){h.$$parentForm.$removeControl(h);m(a,void 0);l(h,Ee)})}}}}}]},Bf=xb(),yg=xb(!0),zg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Ae=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Va=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,
Xf=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,dg=/^(\d{4,})-(\d{2})-(\d{2})$/,Dc=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Fe=/^(\d{4,})-W(\d\d)$/,ge=/^(\d{4,})-(\d\d)$/,We=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Se=ua();e(["date","datetime-local","month","time","week"],function(a){Se[a]=!0});var Ia={text:function(a,b,c,d,e,f){vb(a,b,c,d,e,f);ec(d)},date:ob("date",dg,Md(dg,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",Dc,Md(Dc,"yyyy MM dd HH mm ss sss".split(" ")),
"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",We,Md(We,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Fe,function(a,b){if(H(a))return a;if(z(a)){Fe.lastIndex=0;var c=Fe.exec(a);if(c){var d=+c[1],e=+c[2],f=c=0,g=0,h=0,k=Qc(d),e=7*(e-1);b&&(c=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(d,0,k.getDate()+e,c,f,g,h)}}return NaN},"yyyy-Www"),month:ob("month",ge,Md(ge,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,c,d,e,f){pc(a,b,c,d);lf(d);vb(a,b,c,d,e,f);var g,
h;if(E(c.min)||c.ngMin)d.$validators.min=function(a){return d.$isEmpty(a)||x(g)||a>=g},c.$observe("min",function(a){g=Nd(a);d.$validate()});if(E(c.max)||c.ngMax)d.$validators.max=function(a){return d.$isEmpty(a)||x(h)||a<=h},c.$observe("max",function(a){h=Nd(a);d.$validate()});if(E(c.step)||c.ngStep){var k;d.$validators.step=function(a,b){return d.$isEmpty(b)||x(k)||yd(b,g||0,k)};c.$observe("step",function(a){k=Nd(a);d.$validate()})}},url:function(a,b,c,d,e,f){vb(a,b,c,d,e,f);ec(d);d.$$parserName=
"url";d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Ae.test(c)}},email:function(a,b,c,d,e,f){vb(a,b,c,d,e,f);ec(d);d.$$parserName="email";d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Va.test(c)}},radio:function(a,b,c,d){var e=!c.ngTrim||"false"!==Pa(c.ngTrim);x(c.name)&&b.attr("name",++cf);b.on("click",function(a){var f;b[0].checked&&(f=c.value,e&&(f=Pa(f)),d.$setViewValue(f,a&&a.type))});d.$render=function(){var a=c.value;e&&(a=Pa(a));b[0].checked=a===d.$viewValue};
c.$observe("value",d.$render)},range:function(a,b,c,d,e,f){function g(a,d){b.attr(a,c[a]);c.$observe(a,d)}function h(a){n=Nd(a);lc(d.$modelValue)||(m?(a=b.val(),n>a&&(a=n,b.val(a)),d.$setViewValue(a)):d.$validate())}function k(a){q=Nd(a);lc(d.$modelValue)||(m?(a=b.val(),q<a&&(b.val(q),a=q<n?n:q),d.$setViewValue(a)):d.$validate())}function l(a){r=Nd(a);lc(d.$modelValue)||(m&&d.$viewValue!==b.val()?d.$setViewValue(b.val()):d.$validate())}pc(a,b,c,d);lf(d);vb(a,b,c,d,e,f);var m=d.$$hasNativeValidators&&
"range"===b[0].type,n=m?0:void 0,q=m?100:void 0,r=m?1:void 0,t=b[0].validity;a=E(c.min);e=E(c.max);f=E(c.step);var p=d.$render;d.$render=m&&E(t.rangeUnderflow)&&E(t.rangeOverflow)?function(){p();d.$setViewValue(b.val())}:p;a&&(d.$validators.min=m?function(){return!0}:function(a,b){return d.$isEmpty(b)||x(n)||b>=n},g("min",h));e&&(d.$validators.max=m?function(){return!0}:function(a,b){return d.$isEmpty(b)||x(q)||b<=q},g("max",k));f&&(d.$validators.step=m?function(){return!t.stepMismatch}:function(a,
b){return d.$isEmpty(b)||x(r)||yd(b,n||0,r)},g("step",l))},checkbox:function(a,b,c,d,e,f,g,h){var k=ve(h,a,"ngTrueValue",c.ngTrueValue,!0),l=ve(h,a,"ngFalseValue",c.ngFalseValue,!1);b.on("click",function(a){d.$setViewValue(b[0].checked,a&&a.type)});d.$render=function(){b[0].checked=d.$viewValue};d.$isEmpty=function(a){return!1===a};d.$formatters.push(function(a){return ia(a,k)});d.$parsers.push(function(a){return a?k:l})},hidden:t,button:t,submit:t,reset:t,file:t},Ag=["$browser","$sniffer","$filter",
"$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Ia[La(g.type)]||Ia.text)(e,f,g,h[0],b,a,c,d)}}}}],eg=/^(true|false|\d+)$/,pf=function(){function a(b,c,d){var e=E(d)?d:9===Hc?"":null;b.prop("value",e);c.$set("value",d)}return{restrict:"A",priority:100,compile:function(b,c){return eg.test(c.ngValue)?function(b,c,d){b=b.$eval(d.ngValue);a(c,d,b)}:function(b,c,d){b.$watch(d.ngValue,function(b){a(c,d,b)})}}}},Lg=["$compile",function(a){return{restrict:"AC",
compile:function(b){a.$$addBindingClass(b);return function(b,c,d){a.$$addBindingInfo(c,d.ngBind);c=c[0];b.$watch(d.ngBind,function(a){c.textContent=hc(a)})}}}}],Ng=["$interpolate","$compile",function(a,b){return{compile:function(c){b.$$addBindingClass(c);return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];e.$observe("ngBindTemplate",function(a){d.textContent=x(a)?"":a})}}}}],Fg=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,
e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});c.$$addBindingClass(d);return function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml);b.$watch(g,function(){var c=f(b);d.html(a.getTrustedHtml(c)||"")})}}}}],Cf=w({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Pd=we("",!0),sf=we("Odd",0),ig=we("Even",1),uf=Zb({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Bg=[function(){return{restrict:"A",
scope:!0,controller:"@",priority:500}}],Yf={},rf={blur:!0,focus:!0};e("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Db("ng-"+a);Yf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b]);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};rf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var lg=["$animate","$compile",
function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,k,l;c.$watch(e.ngIf,function(c){c?k||g(function(c,f){k=f;c[c.length++]=b.$$createComment("end ngIf",e.ngIf);h={clone:c};a.enter(c,d.parent(),d)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=ac(h.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),h=null))})}}}],Ve=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,
terminal:!0,transclude:"element",controller:nc.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,k,l,m){var n=0,q,r,t,p=function(){r&&(r.remove(),r=null);q&&(q.$destroy(),q=null);t&&(c.leave(t).done(function(a){!1!==a&&(r=null)}),r=t,t=null)};d.$watch(f,function(f){var k=function(a){!1===a||!E(h)||h&&!d.$eval(h)||b()},r=++n;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&r===n){var b=d.$new();l.template=a;a=m(b,function(a){p();c.enter(a,null,e).done(k)});
q=b;t=a;q.$emit("$includeContentLoaded",f);d.$eval(g)}},function(){d.$$destroyed||r!==n||(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),l.template=null)})}}}}],ce=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){dc.call(d[0]).match(/SVG/)?(d.empty(),b(Ab(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),b(d.contents())(c))}}}],of=Zb({priority:450,compile:function(){return{pre:function(a,
b,c){a.$eval(c.ngInit)}}}}),Og=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,d){var f=c.ngList||", ",g="false"!==c.ngTrim,h=g?Pa(f):f;d.$parsers.push(function(a){if(!x(a)){var b=[];a&&e(a.split(h),function(a){a&&b.push(g?Pa(a):a)});return b}});d.$formatters.push(function(a){if(oa(a))return a.join(f)});d.$isEmpty=function(a){return!a||!a.length}}}},Xe="ng-valid",Cg="ng-invalid",Dd="ng-pristine",de="ng-dirty",ie=d("ngModel");xe.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");
xe.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);I(c)&&(c=a(b));return c};this.$$ngModelSet=function(a,c){I(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw ie("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,gb(this.$$element));
},$render:t,$isEmpty:function(a){return x(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,de);this.$$animate.addClass(this.$$element,Dd)},$setDirty:function(){this.$dirty=
!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Dd);this.$$animate.addClass(this.$$element,de);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;
this.$render()},$validate:function(){if(!lc(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,c=this.$valid,d=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||c===a||(f.$modelValue=a?b:void 0,f.$modelValue!==d&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,c){function d(){var c=!0;e(l.$validators,function(d,e){var f=Boolean(d(a,b));c=c&&f;g(e,f)});return c?!0:(e(l.$asyncValidators,function(a,b){g(b,null)}),
!1)}function f(){var c=[],d=!0;e(l.$asyncValidators,function(e,f){var h=e(a,b);if(!h||!I(h.then))throw ie("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",h);g(f,void 0);c.push(h.then(function(){g(f,!0)},function(){d=!1;g(f,!1)}))});c.length?l.$$q.all(c).then(function(){h(d)},t):h(!0)}function g(a,b){k===l.$$currentValidationRunId&&l.$setValidity(a,b)}function h(a){k===l.$$currentValidationRunId&&c(a)}this.$$currentValidationRunId++;var k=this.$$currentValidationRunId,
l=this;(function(){var a=l.$$parserName||"parse";if(x(l.$$parserValid))g(a,null);else return l.$$parserValid||(e(l.$validators,function(a,b){g(b,null)}),e(l.$asyncValidators,function(a,b){g(b,null)})),g(a,l.$$parserValid),l.$$parserValid;return!0})()?d()?f():h(!1):h(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,
this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=x(a)?void 0:!0)for(var c=0;c<this.$parsers.length;c++)if(a=this.$parsers[c](a),x(a)){this.$$parserValid=!1;break}lc(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var d=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==d&&b.$$writeModelToScope());this.$$runValidators(a,
this.$$lastCommittedViewValue,function(c){e||(b.$modelValue=c?a:void 0,b.$modelValue!==d&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);e(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");J(b[a])?
b=b[a]:J(b["default"])&&(b=b["default"]);this.$$timeout.cancel(this.$$pendingDebounce);var c=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){c.$commitViewValue()},b):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){c.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a)}};ue({clazz:xe,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var Pg=["$rootScope",function(a){return{restrict:"A",require:["ngModel",
"^?form","^?ngModelOptions"],controller:xe,priority:1,compile:function(b){b.addClass(Dd).addClass("ng-untouched").addClass(Xe);return{pre:function(a,b,c,d){var e=d[0];b=d[1]||e.$$parentForm;if(d=d[2])e.$options=d.$options;e.$$initGetterSetters();b.$addControl(e);c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)});a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){function f(){g.$setTouched()}var g=e[0];if(g.$options.getOption("updateOn"))c.on(g.$options.getOption("updateOn"),
function(a){g.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){g.$touched||(a.$$phase?b.$evalAsync(f):b.$apply(f))})}}}}}],Re,Qg=/(\s+|^)default(\s+|$)/;Gd.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;a=l({},a);e(a,function(c,d){"$inherit"===c?"*"===d?b=!0:(a[d]=this.$$options[d],"updateOn"===d&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===d&&(a.updateOnDefault=!1,a[d]=Pa(c.replace(Qg,function(){a.updateOnDefault=!0;return" "})))},
this);b&&(delete a["*"],od(a,this.$$options));od(a,Re.$$options);return new Gd(a)}};Re=new Gd({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Gg=function(){function a(b,c){this.$$attrs=b;this.$$scope=c}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Re,b=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(b)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},
bindToController:!0,controller:a}},Ib=Zb({terminal:!0,priority:1E3}),fc=d("ngOptions"),Ig=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Rg=["$compile","$document","$parse",function(b,c,d){function g(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function h(a){var b;
if(!m&&f(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var k=a.match(Ig);if(!k)throw fc("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,gb(b));var l=k[5]||k[7],m=k[6];a=/ as /.test(k[0])&&k[1];var n=k[9];b=d(k[2]?k[1]:l);var q=a&&d(a)||b,r=n&&d(n),t=n?function(a,b){return r(c,b)}:function(a){return nb(a)},p=function(a,b){return t(a,y(a,b))},L=d(k[2]||k[1]),u=d(k[3]||""),
z=d(k[4]||""),w=d(k[8]),R={},y=m?function(a,b){R[m]=b;R[l]=a;return R}:function(a){R[l]=a;return R};return{trackBy:n,getTrackByValue:p,getWatchables:d(w,function(a){var b=[];a=a||[];for(var d=h(a),e=d.length,f=0;f<e;f++){var g=a===d?f:d[f],l=a[g],g=y(l,g),l=t(l,g);b.push(l);if(k[2]||k[1])l=L(c,g),b.push(l);k[4]&&(g=z(c,g),b.push(g))}return b}),getOptions:function(){for(var a=[],b={},d=w(c)||[],f=h(d),g=f.length,k=0;k<g;k++){var l=d===f?k:f[k],m=y(d[l],l),r=q(c,m),l=t(r,m),R=L(c,m),A=u(c,m),m=z(c,
m),r=new e(l,r,R,A,m);a.push(r);b[l]=r}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[p(a)]},getViewValueFromOption:function(a){return n?Ja(a.viewValue):a.viewValue}}}}}var h=a.document.createElement("option"),k=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=t},post:function(a,d,f,l){function m(a){var b=(a=u.getOptionFromViewValue(a))&&a.element;b&&!b.selected&&(b.selected=
!0);return a}function n(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}var q=l[0],r=l[1],t=f.multiple;l=0;for(var p=d.children(),L=p.length;l<L;l++)if(""===p[l].value){q.hasEmptyOption=!0;q.emptyOption=p.eq(l);break}d.empty();l=!!q.emptyOption;Z(h.cloneNode(!1)).val("?");var u,z=g(f.ngOptions,d,a),w=c[0].createDocumentFragment();q.generateUnknownOptionValue=function(a){return"?"};t?(q.writeValue=function(a){if(u){var b=a&&a.map(m)||
[];u.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},q.readValue=function(){var a=d.val()||[],b=[];e(a,function(a){(a=u.selectValueMap[a])&&!a.disabled&&b.push(u.getViewValueFromOption(a))});return b},z.trackBy&&a.$watchCollection(function(){if(oa(r.$viewValue))return r.$viewValue.map(function(a){return z.getTrackByValue(a)})},function(){r.$render()})):(q.writeValue=function(a){if(u){var b=d[0].options[d[0].selectedIndex],c=u.getOptionFromViewValue(a);
b&&b.removeAttribute("selected");c?(d[0].value!==c.selectValue&&(q.removeUnknownOption(),d[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):q.selectUnknownOrEmptyOption(a)}},q.readValue=function(){var a=u.selectValueMap[d.val()];return a&&!a.disabled?(q.unselectEmptyOption(),q.removeUnknownOption(),u.getViewValueFromOption(a)):null},z.trackBy&&a.$watch(function(){return z.getTrackByValue(r.$viewValue)},function(){r.$render()}));l&&(b(q.emptyOption)(a),d.prepend(q.emptyOption),
8===q.emptyOption[0].nodeType?(q.hasEmptyOption=!1,q.registerOption=function(a,b){""===b.val()&&(q.hasEmptyOption=!0,q.emptyOption=b,q.emptyOption.removeClass("ng-scope"),r.$render(),b.on("$destroy",function(){var a=q.$isEmptyOptionSelected();q.hasEmptyOption=!1;q.emptyOption=void 0;a&&r.$render()}))}):q.emptyOption.removeClass("ng-scope"));a.$watchCollection(z.getWatchables,function(){var a=u&&q.readValue();if(u)for(var b=u.items.length-1;0<=b;b--){var c=u.items[b];E(c.group)?Ob(c.element.parentNode):
Ob(c.element)}u=z.getOptions();var e={};u.items.forEach(function(a){var b;if(E(a.group)){b=e[a.group];b||(b=k.cloneNode(!1),w.appendChild(b),b.label=null===a.group?"null":a.group,e[a.group]=b);var c=h.cloneNode(!1);b.appendChild(c);n(a,c)}else b=h.cloneNode(!1),w.appendChild(b),n(a,b)});d[0].appendChild(w);r.$render();r.$isEmpty(a)||(b=q.readValue(),(z.trackBy||t?ia(a,b):a===b)||(r.$setViewValue(b),r.$render()))})}}}}],gg=["$locale","$interpolate","$log",function(a,b,c){var d=/{}/g,f=/^when(Minus)?(.+)$/;
return{link:function(g,h,k){function l(a){h.text(a||"")}var m=k.count,n=k.$attr.when&&h.attr(k.$attr.when),q=k.offset||0,r=g.$eval(n)||{},p={},L=b.startSymbol(),u=b.endSymbol(),z=L+m+"-"+q+u,w=nc.noop,R;e(k,function(a,b){var c=f.exec(b);c&&(c=(c[1]?"-":"")+La(c[2]),r[c]=h.attr(k.$attr[b]))});e(r,function(a,c){p[c]=b(a.replace(d,z))});g.$watch(m,function(b){var d=parseFloat(b),e=lc(d);e||d in r||(d=a.pluralCat(d-q));d===R||e&&lc(R)||(w(),e=p[d],x(e)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+
d+"' in "+n),w=t,l()):w=g.$watch(e,l),R=d)})}}}],Jg=["$parse","$animate","$compile",function(a,b,c){var g=d("ngRepeat"),h=function(a,b,c,d,e,f,g){a[c]=d;e&&(a[e]=f);a.$index=b;a.$first=0===b;a.$last=b===g-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(d,k){var l=k.ngRepeat,m=c.$$createComment("end ngRepeat",l),n=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
if(!n)throw g("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",l);var q=n[1],r=n[2],t=n[3],p=n[4],n=q.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!n)throw g("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var L=n[3]||n[1],u=n[2];if(t&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(t)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(t)))throw g("badident",
"alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",t);var z,w,R,y,A={$id:nb};p?z=a(p):(R=function(a,b){return nb(b)},y=function(a){return a});return function(a,c,d,k,n){z&&(w=function(b,c,d){u&&(A[u]=b);A[L]=c;A.$index=d;return z(a,A)});var q=ua();a.$watchCollection(r,function(d){var k,r,p=c[0],z,A=ua(),H,F,x,D,Ta,v,J;t&&(a[t]=d);if(f(d))Ta=d,r=w||R;else for(J in r=w||y,Ta=[],d)rc.call(d,J)&&"$"!==J.charAt(0)&&Ta.push(J);H=Ta.length;J=Array(H);for(k=0;k<H;k++)if(F=
d===Ta?k:Ta[k],x=d[F],D=r(F,x,k),q[D])v=q[D],delete q[D],A[D]=v,J[k]=v;else{if(A[D])throw e(J,function(a){a&&a.scope&&(q[a.id]=a)}),g("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",l,D,x);J[k]={id:D,scope:void 0,clone:void 0};A[D]=!0}for(z in q){v=q[z];D=ac(v.clone);b.leave(D);if(D[0].parentNode)for(k=0,r=D.length;k<r;k++)D[k].$$NG_REMOVED=!0;v.scope.$destroy()}for(k=0;k<H;k++)if(F=d===Ta?
k:Ta[k],x=d[F],v=J[k],v.scope){z=p;do z=z.nextSibling;while(z&&z.$$NG_REMOVED);v.clone[0]!==z&&b.move(ac(v.clone),null,p);p=v.clone[v.clone.length-1];h(v.scope,k,L,x,u,F,H)}else n(function(a,c){v.scope=c;var d=m.cloneNode(!1);a[a.length++]=d;b.enter(a,null,p);p=d;v.clone=a;A[v.id]=v;h(v.scope,k,L,x,u,F,H)});q=A})}}}}],Zf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],
Ye=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],$f=Zb(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&e(c,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),Ge=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,f,g){var h=[],k=[],l=[],m=[],n=function(a,b){return function(c){!1!==
c&&a.splice(b,1)}};c.$watch(f.ngSwitch||f.on,function(c){for(var d,f;l.length;)a.cancel(l.pop());d=0;for(f=m.length;d<f;++d){var q=ac(k[d].clone);m[d].$destroy();(l[d]=a.leave(q)).done(n(l,d))}k.length=0;m.length=0;(h=g.cases["!"+c]||g.cases["?"])&&e(h,function(c){c.transclude(function(d,e){m.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");k.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Ze=Zb({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,
b,c,d,f){a=c.ngSwitchWhen.split(c.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});e(a,function(a){d.cases["!"+a]=d.cases["!"+a]||[];d.cases["!"+a].push({transclude:f,element:b})})}}),$e=Zb({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[];d.cases["?"].push({transclude:e,element:b})}}),Df=d("ngTransclude"),Ce=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var c=a(b.contents());
b.empty();return function(a,b,d,e,f){function g(){c(a,function(a){b.append(a)})}if(!f)throw Df("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",gb(b));d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");d=d.ngTransclude||d.ngTranscludeSlot;f(function(a,c){var d;if(d=a.length)a:{d=0;for(var e=a.length;d<e;d++){var f=a[d];if(f.nodeType!==Ld||f.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(g(),c.$destroy())},
null,d);d&&!f.isSlotFilled(d)&&g()}}}}],Sg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"===c.type&&a.put(c.id,b[0].text)}}}],Tg={$setViewValue:t,$render:t},Ug=["$element","$scope",function(b,c){function d(){h||(h=!0,c.$$postDigest(function(){h=!1;f.ngModelCtrl.$render()}))}function e(a){k||(k=!0,c.$$postDigest(function(){c.$$destroyed||(k=!1,f.ngModelCtrl.$setViewValue(f.readValue()),a&&f.ngModelCtrl.$render())}))}var f=this,g=new Te;f.selectValueMap=
{};f.ngModelCtrl=Tg;f.multiple=!1;f.unknownOption=Z(a.document.createElement("option"));f.hasEmptyOption=!1;f.emptyOption=void 0;f.renderUnknownOption=function(a){a=f.generateUnknownOptionValue(a);f.unknownOption.val(a);b.prepend(f.unknownOption);Qb(f.unknownOption,!0);b.val(a)};f.updateUnknownOption=function(a){a=f.generateUnknownOptionValue(a);f.unknownOption.val(a);Qb(f.unknownOption,!0);b.val(a)};f.generateUnknownOptionValue=function(a){return"? "+nb(a)+" ?"};f.removeUnknownOption=function(){f.unknownOption.parent()&&
f.unknownOption.remove()};f.selectEmptyOption=function(){f.emptyOption&&(b.val(""),Qb(f.emptyOption,!0))};f.unselectEmptyOption=function(){f.hasEmptyOption&&Qb(f.emptyOption,!1)};c.$on("$destroy",function(){f.renderUnknownOption=t});f.readValue=function(){var a=b.val(),a=a in f.selectValueMap?f.selectValueMap[a]:a;return f.hasOption(a)?a:null};f.writeValue=function(a){var c=b[0].options[b[0].selectedIndex];c&&Qb(Z(c),!1);f.hasOption(a)?(f.removeUnknownOption(),c=nb(a),b.val(c in f.selectValueMap?
c:a),Qb(Z(b[0].options[b[0].selectedIndex]),!0)):f.selectUnknownOrEmptyOption(a)};f.addOption=function(a,b){if(8!==b[0].nodeType){C(a,'"option value"');""===a&&(f.hasEmptyOption=!0,f.emptyOption=b);var c=g.get(a)||0;g.set(a,c+1);d()}};f.removeOption=function(a){var b=g.get(a);b&&(1===b?(g.delete(a),""===a&&(f.hasEmptyOption=!1,f.emptyOption=void 0)):g.set(a,b-1))};f.hasOption=function(a){return!!g.get(a)};f.$hasEmptyOption=function(){return f.hasEmptyOption};f.$isUnknownOptionSelected=function(){return b[0].options[0]===
f.unknownOption[0]};f.$isEmptyOptionSelected=function(){return f.hasEmptyOption&&b[0].options[b[0].selectedIndex]===f.emptyOption[0]};f.selectUnknownOrEmptyOption=function(a){null==a&&f.emptyOption?(f.removeUnknownOption(),f.selectEmptyOption()):f.unknownOption.parent().length?f.updateUnknownOption(a):f.renderUnknownOption(a)};var h=!1,k=!1;f.registerOption=function(a,b,c,g,h){if(c.$attr.ngValue){var k,l=NaN;c.$observe("value",function(a){var c,d=b.prop("selected");E(l)&&(f.removeOption(k),delete f.selectValueMap[l],
c=!0);l=nb(a);k=a;f.selectValueMap[l]=a;f.addOption(a,b);b.attr("value",l);c&&d&&e()})}else g?c.$observe("value",function(a){f.readValue();var c,d=b.prop("selected");E(k)&&(f.removeOption(k),c=!0);k=a;f.addOption(a,b);c&&d&&e()}):h?a.$watch(h,function(a,d){c.$set("value",a);var g=b.prop("selected");d!==a&&f.removeOption(d);f.addOption(a,b);d&&g&&e()}):f.addOption(c.value,b);c.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))f.multiple?e(!0):(f.ngModelCtrl.$setViewValue(null),f.ngModelCtrl.$render())});
b.on("$destroy",function(){var a=f.readValue(),b=c.value;f.removeOption(b);d();(f.multiple&&a&&-1!==a.indexOf(b)||a===b)&&e(!0)})}}],Vg=function(){return{restrict:"E",require:["select","?ngModel"],controller:Ug,priority:1,link:{pre:function(a,b,c,d){var f=d[0],g=d[1];if(g){if(f.ngModelCtrl=g,b.on("change",function(){f.removeUnknownOption();a.$apply(function(){g.$setViewValue(f.readValue())})}),c.multiple){f.multiple=!0;f.readValue=function(){var a=[];e(b.find("option"),function(b){b.selected&&!b.disabled&&
(b=b.value,a.push(b in f.selectValueMap?f.selectValueMap[b]:b))});return a};f.writeValue=function(a){e(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,b.value)||-1!==Array.prototype.indexOf.call(a,f.selectValueMap[b.value]));c!==b.selected&&Qb(Z(b),c)})};var h,k=NaN;a.$watch(function(){k!==g.$viewValue||ia(h,g.$viewValue)||(h=Ka(g.$viewValue),g.$render());k=g.$viewValue});g.$isEmpty=function(a){return!a||0===a.length}}}else f.registerOption=t},post:function(a,b,c,d){var e=
d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Wg=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){var d,e;E(c.ngValue)||(E(c.value)?d=a(c.value,!0):(e=a(b.text(),!0))||c.$set("value",b.text()));return function(a,b,c){var f=b.parent();(f=f.data("$selectController")||f.parent().data("$selectController"))&&f.registerOption(a,b,c,d,e)}}}}],af=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=
function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Be=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,e){if(e){var f,g=c.ngPattern||c.pattern;c.$observe("pattern",function(a){z(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,gb(b));f=a||void 0;e.$validate()});e.$validators.pattern=function(a,b){return e.$isEmpty(b)||x(f)||f.test(b)}}}}},
Lf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){a=r(a);e=lc(a)?-1:a;d.$validate()});d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},fe=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=r(a)||0;d.$validate()});d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};a.angular.bootstrap?a.console&&
console.log("WARNING: Tried to load angular more than once."):(ra(),sc(nc),nc.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var c=a.indexOf(".");return-1==c?0:a.length-c-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,
minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var d=a|0,e=c;void 0===e&&(e=Math.min(b(a),3));return 1==d&&0==e?"one":"other"}})}]),Z(function(){Da(a.document,W)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
(function(a,b){function c(a){var b=[];r(b,m).chars(a);return b.join("")}var d=b.$$minErr("$sanitize"),f,e,h,g,k,m,l,n,r;b.module("ngSanitize",[]).provider("$sanitize",function(){function c(a,b){var d={},e=a.split(","),f;for(f=0;f<e.length;f++)d[b?k(e[f]):e[f]]=!0;return d}function t(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c];b[e.name]=e.value}return b}function u(a){return a.replace(/&/g,"&amp;").replace(E,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(a-56320)+
65536)+";"}).replace(F,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(b){for(;b;){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,d=0,e=c.length;d<e;d++){var f=c[d],g=f.name.toLowerCase();if("xmlns:ns1"===g||0===g.lastIndexOf("ns1:",0))b.removeAttributeNode(f),d--,e--}(c=b.firstChild)&&w(c);b=A("nextSibling",b)}}function A(a,b){var c=b[a];if(c&&l.call(b,c))throw d("elclob","Failed to sanitize html because the element is clobbered: {0}",
b.outerHTML||b.outerText);return c}var x=!1;this.$get=["$$sanitizeUri",function(a){x&&e(Q,T);return function(b){var c=[];n(b,r(c,function(b,c){return!/^unsafe:/.test(a(b,c))}));return c.join("")}}];this.enableSvg=function(a){return g(a)?(x=a,this):x};f=b.bind;e=b.extend;h=b.forEach;g=b.isDefined;k=b.lowercase;m=b.noop;n=function(a,b){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);var c=aa(a);if(!c)return"";var e=5;do{if(0===e)throw d("uinput","Failed to sanitize html because the input is unstable");
e--;a=c.innerHTML;c=aa(a)}while(a!==c.innerHTML);for(e=c.firstChild;e;){switch(e.nodeType){case 1:b.start(e.nodeName.toLowerCase(),t(e.attributes));break;case 3:b.chars(e.textContent)}var f;if(!(f=e.firstChild)&&(1===e.nodeType&&b.end(e.nodeName.toLowerCase()),f=A("nextSibling",e),!f))for(;null==f;){e=A("parentNode",e);if(e===c)break;f=A("nextSibling",e);1===e.nodeType&&b.end(e.nodeName.toLowerCase())}e=f}for(;e=c.firstChild;)c.removeChild(e)};r=function(a,b){var c=!1,d=f(a,a.push);return{start:function(a,
e){a=k(a);!c&&I[a]&&(c=a);c||!0!==Q[a]||(d("<"),d(a),h(e,function(c,e){var f=k(e),g="img"===a&&"src"===f||"background"===f;!0!==K[f]||!0===D[f]&&!b(c,g)||(d(" "),d(e),d('="'),d(u(c)),d('"'))}),d(">"))},end:function(a){a=k(a);c||!0!==Q[a]||!0===y[a]||(d("</"),d(a),d(">"));a==c&&(c=!1)},chars:function(a){c||d(u(a))}}};l=a.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)};var E=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,F=/([^#-~ |!])/g,y=c("area,br,col,hr,img,wbr"),z=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
J=c("rp,rt"),H=e({},J,z),z=e({},z,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),J=e({},J,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),T=c("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),
I=c("script,style"),Q=e({},y,z,J,H),D=c("background,cite,href,longdesc,src,xlink:href"),H=c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),J=c("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),K=e({},D,J,H),aa=function(a,b){function c(b){b="<remove></remove>"+b;try{var d=(new a.DOMParser).parseFromString(b,"text/html").body;d.firstChild.remove();return d}catch(e){}}function e(a){g.innerHTML=a;b.documentMode&&w(g);return g}var f;if(b&&b.implementation)f=b.implementation.createHTMLDocument("inert");else throw d("noinert","Can't create an inert html document");var g=(f.documentElement||f.getDocumentElement()).querySelector("body");g.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';
return g.querySelector("svg")?(g.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',g.querySelector("svg img")?c:e):function(b){b="<remove></remove>"+b;try{b=encodeURI(b)}catch(c){return}var d=new a.XMLHttpRequest;d.responseType="document";d.open("GET","data:text/html;charset=utf-8,"+b,!1);d.send(null);b=d.response.body;b.firstChild.remove();return b}}(a,a.document)}).info({angularVersion:"1.6.6"});b.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
e=/^mailto:/i,f=b.$$minErr("linky"),g=b.isDefined,h=b.isFunction,k=b.isObject,l=b.isString;return function(b,m,n){function r(a){a&&D.push(c(a))}function T(a,b){var c,d=I(a);D.push("<a ");for(c in d)D.push(c+'="'+d[c]+'" ');!g(m)||"target"in d||D.push('target="',m,'" ');D.push('href="',a.replace(/"/g,"&quot;"),'">');r(b);D.push("</a>")}if(null==b||""===b)return b;if(!l(b))throw f("notstring","Expected string but received: {0}",b);for(var I=h(n)?n:k(n)?function(){return n}:function(){return{}},Q=b,
D=[],K,aa;b=Q.match(d);)K=b[0],b[2]||b[4]||(K=(b[3]?"http://":"mailto:")+K),aa=b.index,r(Q.substr(0,aa)),T(K,b[0].replace(e,"")),Q=Q.substring(aa+b[0].length);r(Q);return a(D.join(""))}}])})(window,window.angular);angular.module("genius",["ngSanitize"]).config(["$httpProvider",function(a){a.interceptors.push("OnsiteInterceptor");a.interceptors.push("RetryFailureInterceptor")}]);window.app=window.app||{};
$.extend(window.app,{set_up_tooltip_lyric_editor:$.noop,set_up_vidyard_id_container:$.noop,update_editorial_state:$.noop,set_desired_location_cookie:function(a){var b;try{b=window.top.location.href,b.length}catch(c){b=document.referrer,a&&a.fallback&&(b=a.fallback)}$.cookie("desired_location",b,{path:"/"})}});
angular.module("genius").run(["$templateCache",function(a){a.put("authentication_form.html","<div></div>\n");a.put("fact_track_simulator.html",'<div class="fact_track_card fact_track_card-{{ current_annotation.content_type }}_card fact_track_card--front" ng-click="ctrl.card_clicked()">\n  <div class="fact_track_card-album_image" ng-show="!variants.alt_mode && album.images.length && current_annotation.content_type === \'intro\'" ng-attr-style="background-image: url(\'{{ album.images[0].url }}\')"></div>\n  <div class="fact_track_card-headline" ng-switch="current_annotation.content_type" ng-hide="variants.alt_mode">\n    <span ng-switch-when="lyrics">Lyrics</span>\n    <span ng-switch-when="verified">Lyrics</span>\n    <span ng-switch-when="verified_annotation">\n      <span class="fact_track_card-headline-artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span> Exclusive\n    </span>\n    <span ng-switch-when="annotation">Behind the Lyrics</span>\n    <span ng-switch-when="iq">Track Fact</span>\n    <span ng-switch-when="credits">Credits</span>\n  </div>\n  <div class="fact_track_card-body fact_track_card-body--{{ current_annotation.content_type }}">\n    <div class="fact_track_card-alt_mode_verified_annotation" ng-show="variants.alt_mode && current_annotation.content_type == \'verified_annotation\'">\n      <div class="clipped_avatar clipped_avatar--medium" ng-attr-style="background-image: url(\'{{ ((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url }}\')"></div>\n      <span class="fact_track_card-alt_mode_artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span>\n      <div class="fact_track_card-connect_button">Connect</div>\n    </div>\n    <span class="fact_track_card-body-highlight" ng-bind-html="current_annotation.content | highlight_braced:{class_name:\'fact_track_card-emphasis\'}"></span>\n  </div>\n  <div class="fact_track_card-verified_headline" ng-show="!variants.alt_mode && current_annotation.content_type == \'verified_annotation\'">\n    <div class="clipped_avatar clipped_avatar--medium" ng-attr-style="background-image: url(\'{{ ((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url }}\')"></div>\n  </div>\n  <div class="fact_track_card-countdown_timer">\n    <div class="fact_track_card-countdown_timer-time_remaining" style="width:{{ (ctrl.annotation_percentage() * 100).toFixed(3) }}%"></div>\n  </div>\n  <div class="fact_track_card-view_lyrics" ng-hide="current_annotation.content_type == \'verified\' || variants.fullscreen || variants.alt_mode">Tap for More</div>\n</div>\n\n<div class="fact_track_controls">\n  <div class="fact_track_controls-annotation_index" ng-show="variants.fullscreen">{{ current_annotation_index + 1 }}/{{ annotations.length }}</div>\n  <div class="fact_track_controls-title" ng-hide="variants.fullscreen || variants.alt_mode">{{ spotify_song.metadata.name }}</div>\n  <div class="fact_track_controls-artist" ng-hide="variants.fullscreen || variants.alt_mode">{{ spotify_song.metadata.artists[0].name }}</div>\n\n  <div class="fact_track_controls-time_elapsed">{{ time | timestamp_for_display:{skip_millis:true} }}</div>\n  <div class="fact_track_controls-time_remaining">-{{ (duration | minusModulo:1000) - time | timestamp_for_display:{skip_millis:true} }}</div>\n\n  <div class="fact_track_controls-timeline" scale="0.46" scrubber scrub-percentage="scrub_percentage" scrubbed="ctrl.seek_to_percentage(percentage)">\n    <div class="fact_track_controls-timeline-bar"></div>\n    <div class="fact_track_controls-scrubber" style="left:{{ ((scrub_percentage || (time / duration)) * 100).toFixed(3) }}%;"><div class="fact_track_controls-scrubber-contents"></div></div>\n  </div>\n\n  <div class="fact_track_controls-back" ng-click="ctrl.seek_to(0)"></div>\n  <div class="fact_track_controls-play_pause fact_track_controls-play_pause--{{ playing ? \'playing\' : \'paused\'}}" ng-click="ctrl.toggle_play_pause()"></div>\n</div>\n');a.put("header_admin.html",
'<div\n  class="header-action"\n  ng-class="{\'header-action--active\': $ctrl.open_header_menus.admin_menu}"\n  ng-click="$ctrl.open_header_menus.admin_menu = !$ctrl.open_header_menus.admin_menu"\n  stop-propagation="click"\n>\n  <div\n    class="header-user_avatar"\n    clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n  ></div>\n  <div class="header-action-label">{{ $ctrl.user.iq | number:0 }} IQ</div>\n</div>\n\n<div\n  click-outside="$ctrl.open_header_menus.admin_menu = false"\n  class="feed_dropdown feed_dropdown--narrow_width"\n  ng-show="$ctrl.open_header_menus.admin_menu"\n  scroll-only-this-element=""\n>\n  <div class="feed_dropdown-header">\n    <span class="text_label">Account</span>\n  </div>\n\n  <a\n    ng-href="{{$ctrl.user.url}}"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Profile</a>\n\n  <a\n    href="/feedback/new"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Report a Problem</a>\n\n  <a\n    ng-click="$ctrl.logout()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Sign out</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_activity_stream_firehose\')"\n    href="/firehose"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Firehose</a>\n\n  <a\n    ng-if="$ctrl.can(\'manage_messages\')"\n    href="/messages/all"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >MsgSnoop</a>\n\n  <a\n    ng-if="$ctrl.can(\'impersonate\')"\n    ng-click="$ctrl.impersonate_user()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Impersonate Another User</a>\n  <modal-window ng-if="$ctrl.impersonating">\n    <p><b>Hang tight!</b> We\'re trying to log you in to the account you specified...</p>\n  </modal-window>\n\n  <a\n    ng-if="$ctrl.can(\'remove_asset\')"\n    ng-click="$ctrl.remove_asset()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Remove Asset</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_rate_limits\')"\n    href="/rate_limits"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Rate Limits</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_penalties\')"\n    href="/penalties"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Penalties</a>\n\n  <a\n    ng-if="$ctrl.can(\'search_user_aliases\')"\n    ng-click="$ctrl.search_user_aliases()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Search User Aliases</a>\n\n  <a\n    ng-if="$ctrl.can(\'manage_incoming_emails\')"\n    href="/incoming_emails/manage"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Manage Incoming Emails</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_probably_spam_songs\')"\n    href="/songs/probably_spam"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Probably Spam Songs</a>\n\n  <div ng-if="$ctrl.can(\'view_chartbeat\')">\n    <a\n      href="/chartbeat"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Chartbeat</a>\n\n    <a\n      href="/chartbeat?bigboard=1"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Chartbeat Top Pages</a>\n\n    <a\n      href="/chartbeat?ios=1"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View iOS Chartbeat</a>\n  </div>\n\n  <div ng-if="$ctrl.loading" class="local_overlay">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n');
a.put("header_menu_item.html",'<li class="nav_menu-item" click-outside="opened = false" ng-if="!url">\n  <a ng-click="opened = !opened" class="nav_menu-link nav_menu-link--has_dropdown" ng-class="{pressed: opened}">{{ name }}</a>\n  <div ng-transclude ng-show="opened"></div>\n</li>\n\n<li class="nav_menu-item" ng-if="url">\n  <a class="nav_menu-link" ng-href="{{ url }}">{{ name }}</a>\n</li>\n');a.put("inbox_icon.html",'<span class="header-action" ng-class="{\'header-action--active\': $ctrl.opened}">\n  <span class="header-action-icon header-action-icon--{{ $ctrl.inbox_name }}"></span>\n  <span class="header-action-label">{{ \'header.\' + $ctrl.inbox_name | i18n }}</span>\n  <span ng-if="$ctrl.unread_count" class="header-action-count numbered_indicator numbered_indicator--pink_filled">{{ $ctrl.unread_count | boundedCount:$ctrl.abbreviate_after }}</span>\n</span>\n');
a.put("notification_inbox.html",'<a\n  ng-href="/inboxes/{{$ctrl.inbox_name}}"\n  id="{{$ctrl.inbox_name}}_icon"\n  ng-click="$ctrl.toggle($event)"\n  stop-propagation="click"\n>\n  <inbox-icon\n    inbox-name="{{$ctrl.inbox_name}}"\n    sync-count-to-title="$ctrl.sync_count_to_title"\n    abbreviate-after="$ctrl.abbreviate_after"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    yields-api="$ctrl.unread_count_api = api"\n  ></inbox-icon>\n</a>\n\n<div\n  ng-if="$ctrl.open_inboxes[$ctrl.inbox_name]"\n  stop-propagation="click"\n  click-outside="$ctrl.toggle($event)"\n  class="feed_dropdown feed_dropdown--embed"\n>\n  <placeholder-spinner ng-if="$ctrl.loading" placeholder-classes="u-vertical_margins"></placeholder-spinner>\n  <iframe\n    ng-show="!$ctrl.loading"\n    auto-resize-iframe\n    ng-src="{{$ctrl.src}}"\n    frameborder="0"\n    width="100%"\n    on-iframe-load="$ctrl.loading = false"\n  ></iframe>\n</div>\n');
a.put("placeholder_spinner.html",'<div\n  class="{{ placeholderClasses }} placeholder"\n  ng-class="{\'placeholder-spinner--inline\': variants.inline}"\n>\n  <svg\n    class="{{ variants.inline? \'placeholder-spinner placeholder-spinner--inline\' : \'placeholder-spinner\' }}"\n    src="circle.svg"\n  ></svg>\n</div>\n');a.put("search_form.html",'<form\n  action="/search"\n  method="get"\n  class="global_search global_search--{{ style }}"\n  ng-class="{\'global_search--focused global_search--high_z_index\': focused}"\n  ng-click="focus()"\n>\n  <kb shortcut="/" action="focus()"></kb>\n\n  <input\n    autocomplete="false"\n    ng-model="search_text"\n    ng-disabled="submitting"\n    name="q"\n    type="text"\n    class="quick_search autocomplete search quick_search--{{ style }}"\n    placeholder="Search lyrics &amp; more"\n    quick-search\n  />\n\n  <div\n    ng-if="!focused"\n    ng-click="focus()"\n    stop-propagation="click"\n    class="global_search-submit_button"\n  >\n    <svg src="magnifying_glass.svg" class="global_search-search_icon"></svg>\n  </div>\n  <div\n    ng-if="focused"\n    ng-click="unfocus()"\n    stop-propagation="click"\n    class="global_search-submit_button global_search-submit_button--focused"\n  >\n    <svg\n      src="x.svg"\n      class="global_search-search_icon global_search-search_icon--close inline_icon inline_icon--down_4"\n    ></svg>\n  </div>\n</form>\n')}]);
angular.module("genius").component("activeReferent",{bindings:{referent:"<",on_navigate:"&onNavigate",on_close:"&onClose"},templateUrl:"active_referent.html",controller:["Cookies",function(a){this.$onInit=function(){var b=this;this.session_referent_open_count=Number(a.get("referent_open_count_for_interstitial")||0);this.increment_session_referent_open_count=function(){this.session_referent_open_count+=1;2>=this.session_referent_open_count&&a.put("referent_open_count_for_interstitial",this.session_referent_open_count,
{expires:.25})};this.should_show_interstitial=function(){return 2===b.session_referent_open_count}};this.$onChanges=function(a){a.referent&&a.referent.currentValue&&this.increment_session_referent_open_count()}}]});
angular.module("genius").component("adContainerWithCloseButton",{templateUrl:"ad_container_with_close_button.html",transclude:!0,controller:["$window","$element","$timeout",function(a,b,c){var d=this;a.googletag&&a.googletag.cmd.push(function(){a.googletag.pubads().addEventListener("slotRenderEnded",function(a){!a.isEmpty&&0<b.find("#"+a.slot.getSlotElementId()).length&&c(function(){return d.show_close_button=!0},1E4)})})}]});
angular.module("genius").component("adminTask",{bindings:{task:"<"},templateUrl:"admin_task.html",controller:["AdminTaskClient",function(a){var b=this;this.$onChanges=function(a){b.property_values=_.reduce(a.task.currentValue.task_properties,function(a,b){a[b.name]=b.default;return a},{})};this.is_url=function(a){return/^https?:\/\/\S+$/.test(a)};this.perform_task=function(){if(!b.task.confirmation||confirm(b.task.confirmation))b.validation_errors=null,b.success_message=null,b.tabular_data=null,b.saving=
!0,a.perform_task(b.task,b.property_values).then(function(a){b.success_message=a.admin_task_result.success_message;b.tabular_data=a.admin_task_result.tabular_data}).catch(function(a){b.validation_errors=a.response.validation_errors?a.response.validation_errors:{base:["Something unexpected went wrong"]}}).finally(function(){return b.saving=!1})}}]});
angular.module("genius").component("adminTasksPage",{templateUrl:"admin_tasks_page.html",controller:Object.assign(["$scope","AdminTaskClient",function(a,b){var c=this;this.no_task={name:"__default",label:"--Choose a task to run--"};this.$routerOnActivate=function(b){c.tasks=b.routeData.page_data.tasks;a.selected_task=c.no_task;c.select_tasks=[c.no_task].concat(_.sortBy(c.tasks.map(function(a){return{name:a.name,label:a.human_name}}),"label"))};a.$watch("selected_task",function(d){a.admin_task=null;
d.name!==c.no_task.name&&b.get(d.name).then(function(b){a.admin_task=b.admin_task})})}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(a,b,c){return c.by_router_instruction(a,b)}]})});angular.module("genius").component("adminUserInfo",{templateUrl:"admin_user_info.html",bindings:{user:"<"}});
angular.module("genius").component("adwordsAdForm",{templateUrl:"adwords_ad_form.html",bindings:{onSave:"&",onClose:"&",ad_group:"<adGroup"},controller:["AdwordsAdClient",function(a){var b=this;this.save=function(c){b.saving=!0;a.create(b.ad_group.id,c).then(function(){this.onSave();this.onClose()}).finally(function(){Reflect.deleteProperty(b,"saving")})}}]});
angular.module("genius").component("adwordsAdGroupForm",{templateUrl:"adwords_ad_group_form.html",bindings:{onSave:"&",onClose:"&",campaign:"<"},controller:["AdwordsAdGroupClient",function(a){var b=this;this.save=function(c){b.saving=!0;a.create(b.campaign.id,c).then(function(){b.onSave();b.onClose()}).finally(function(){Reflect.deleteProperty(b,"saving")})}}]});
angular.module("genius").component("adwordsAdGroupList",{templateUrl:"adwords_ad_group_list.html",bindings:{campaign:"<"},controller:["AdwordsAdGroupClient","AdwordsAdClient",function(a,b){var c=this;this.change_ad_status=function(a,c){b.update(a.id,{status:c}).then(function(b){_.assign(a,b)})};this.load_ad_groups=function(){c.loading=!0;a.all(c.campaign.id).then(function(a){c.ad_groups=a}).finally(function(){Reflect.deleteProperty(c,"loading")})};this.$onChanges=function(a){a.campaign&&c.load_ad_groups()}}]});
angular.module("genius").component("adwordsCampaignForm",{templateUrl:"adwords_campaign_form.html",bindings:{onSave:"&",onClose:"&"},controller:["AdwordsNetworkClient","AdwordsCampaignClient",function(a,b){var c=this;this.available_adwords_networks=[];this.save=function(a){c.saving=!0;return b.create(a).then(function(){this.onSave();this.onClose()}).finally(function(){Reflect.deleteProperty(c,"saving")})};a.all().then(function(a){c.available_adwords_networks=a})}]});
angular.module("genius").component("adwordsCampaignList",{templateUrl:"adwords_campaign_list.html",bindings:{onSelect:"&",selected_campaign:"<selectedCampaign"},controller:["AdwordsCampaignClient",function(a){var b=this;this.select=function(a){return b.onSelect({campaign:a})};this.$onInit=this.load_campaigns=function(){b.loading=!0;a.all().then(function(a){b.grouped_campaigns=_.values(_.groupBy(a,"network.id"))}).finally(function(){Reflect.deleteProperty(b,"loading")})}}]});
angular.module("genius").component("adwordsEditor",{templateUrl:"adwords_editor.html"});
angular.module("genius").component("albumAdminMenu",{templateUrl:"album_admin_menu.html",bindings:{album:"<",album_appearances:"<albumAppearances"},controller:["Session","Attempt","AlbumClient","currentFlashMessages","$window",function(a,b,c,d,f){var e=this;this.actions=["destroy","unlock","lock","super_lock","sort_songs"];var h=["sort_songs"];this.can_perform=function(b){return a.has_permission(b,e.album)};var g=function(a){c.change_lock_state(e.album.id,a).then(function(b){d.push({type:"notice",
message:"Successfully "+a+"ed album"});Object.assign(e.album,b)})},k={destroy:function(){c.delete(e.album.id).then(function(){d.push({type:"notice",message:"Successfully deleted album"});f.location.href="/"})},lock:function(){return g("lock")},super_lock:function(){return g("super_lock")},unlock:function(){return g("unlock")},sort_songs:function(){return e.show_sorted_modal=!0}};this.attempt_admin_action=function(a){if(_.includes(h,a))return k[a]();b.admin_action(k[a],I18n.lookup("album.action_confirmations."+
a)||I18n.t("album.action_confirmations.admin_default"))};this.$onChanges=function(){e.has_admin_items=_(e.actions).some(function(a){return e.can_perform(a)})};this.tracklist_markup=function(){var a="<b>"+("["+e.album.artist.name+"]("+e.album.artist.url+") - [*"+e.album.name+"*]("+e.album.url+")")+" Lyrics and Tracklist</b>\n\n",b=e.album_appearances.map(function(a){var b=a.song.featured_artists.map(function(a){return a.name}).join(", ");return(a.track_number||"?")+". ["+a.song.title+"]("+a.song.url+
")"+(b?" ft. "+b:"")}).join("\n");return a+b}}]});angular.module("genius").component("albumGrid",{templateUrl:"album_grid.html",bindings:{albums:"<",artist:"<",count:"<",variants:"<"},controller:["PagedDataFeed","ArtistClient",function(a,b){var c=this;this.$onChanges=function(d){d.artist&&(c.artist_album_scrollable_data=new a(_.partial(b.load_albums,c.artist.id),"albums"))}}]});
angular.module("genius").component("albumMetadataForm",{templateUrl:"album_metadata_form.html",bindings:{album_was:"<album",on_save:"&onSave",close:"&",yields_is_dirty:"&yieldsIsDirty"},controller:[function(){var a=this;this.$onInit=function(){a.album=angular.copy(a.album_was)};this.save=function(){a.on_save({album:a.album}).catch(function(b){a.error=b})}}]});
angular.module("genius").component("albumPage",{templateUrl:"album_page.html",controller:Object.assign(["VideoRegistry","mobile_device","Tracking","AlbumClient","Session","Attempt","Reversible","SmartRouting","$q","$location","$immediate",function(a,b,c,d,f,e,h,g,k,m,l){var n=this;this.has_permission=function(a){return f.has_permission(a,n.page_data.album)};this.user_signed_in=f.user_signed_in;this.attempt_close=e.close_form;this.show_report_abuse=f.has_feature("report_abuse");this.show_question_list=
function(){return n.has_permission("create_question")||n.page_data.pinned_questions.length||n.page_data.featured_question&&n.page_data.featured_question.length||n.page_data.pending_question_count};this.show_qa_section=function(){return n.show_question_list()||n.page_data.album_metadata_questions.length};this.is_released=function(){var a=n.page_data.album.release_date_components,b=new Date;return b.getFullYear()===a.year&&a.month?b.getMonth()+1===a.month&&a.day?b.getDate()>=a.day:b.getMonth()+1>=a.month:
b.getFullYear()>=a.year};this.close_form=function(){n.editing=!1;n.current_edit_panel=null};this.save=function(a){n.saving=!0;var b=h.modify(n.page_data.album,a);return d.update(n.page_data.album.id,a).then(function(a){Object.assign(n.page_data.album,a);n.close_form()}).catch(function(a){b();return k.reject(a)}).finally(function(){n.saving=!1})};this.$routerCanReuse=function(a){return"album"===a.routeData.data.type?"/"+a.urlPath===n.page_data.path:"album_cover_art"===a.routeData.data.type?Boolean(r(a.params.cover_art_id)):
!1};this.$routerOnReuse=function(a){n.focused_cover_art_id="album_cover_art"===a.routeData.data.type?parseInt(a.params.cover_art_id):null};this.$routerOnActivate=function(e){n.page_data=e.routeData.page_data;n.get_leaderboard_page=function(a){return d.load_leaderboard(n.page_data.album.id,a)};a.register_page(n.page_data.album,b?"mobile_album_page":"desktop_album_page");c.delayed_track("Album Page Load",{"Album ID":n.page_data.album.id});if(e.params.cover_art_id){var f=r(e.params.cover_art_id);f&&
l(function(){return g.navigate_to_absolute_url(f.url)})}};this.unfocus_cover_art=function(){return m.url(n.page_data.path)};var r=function(a){var b=parseInt(a);a=_.get(n,["page_data","album","cover_arts"],[]);return _.find(a,function(a){return a.id===b})};this.track_question_link=function(a,b){var d=b.id.split(":");c.track_link_click(a,"album:click_question_page",{related_question_slug:d[0],related_questionable_type:d[1],related_questionable_id:d[2]})}}],{$canActivate:["$nextInstruction","$prevInstruction",
"PageTransition",function(a,b,c){return c.by_router_instruction(a,b)}]})});
angular.module("genius").component("albumTracklistRow",{bindings:{album_appearance:"<albumAppearance",show_artist:"<showArtist"},templateUrl:"album_tracklist_row.html",controller:["Session",function(a){var b=this;this.has_credits=function(){return b.album_appearance.song.featured_artists.length||b.album_appearance.song.producer_artists.length||b.album_appearance.song.writer_artists.length};this.can=function(c){return a.has_permission(c,b.album_appearance.song)}}]});
(function(){var a=["to identify songs on the go","to get lyrics to the songs you play","to read lyrics offline"];angular.module("genius").component("androidBanner",{templateUrl:"android_banner.html",bindings:{page:"@"},controller:["Bowser","AppConfig",function(b,c){this.benefit=_.sample(a);this.is_android=b.android;this.play_store_url=c.play_store_url}]})})();
angular.module("genius").component("annotationEmbed",{bindings:{referent:"<",simple:"<"},templateUrl:"annotation_embed.html",controller:["ReferentHelper",function(a){var b=this;this.$onChanges=function(c){c.referent&&(b.display_mode=a.display_mode_by_classification(b.referent.classification))}}]});
angular.module("genius").component("annotationPreview",{bindings:{annotation_preview:"<annotationPreview",click_handler:"&clickHandler",dismissal_handler:"&dismissalHandler",reactivation_handler:"&reactivationHandler",is_dismissed:"<isDismissed"},templateUrl:"annotation_preview.html",controller:["$scope","Tracking",function(a,b){var c=this;a.$watch("$ctrl.annotation_preview",function(){c.annotation_preview&&(c.annotation_content_switch=!c.annotation_content_switch)});this.on_click=function(){b.track("Tap Annotation Teaser",
c.tracking_params());c.click_handler()};this.tracking_params=function(){return{"Annotation ID":_.get(c.annotation_preview,"id")}}}]});angular.module("genius").component("annotationShareMenu",{templateUrl:"annotation_share_menu.html",bindings:{annotation:"<",variants:"<"}});
angular.module("genius").component("answer",{bindings:{answer:"<",question:"<",yieldsApi:"&",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",variants:"<"},templateUrl:"answer.html",controller:["$scope","Reversible","AnswerClient","Session",function(a,b,c,d){var f=this;this.user_signed_in=d.user_signed_in;this.source_form_open=this.answer&&this.answer.answer_source;this.can=function(a,b){return d.has_permission(a,b)};this.show_contributors=function(){if(_.get(f,"answer.answer_source.source_name")){if(f.can("update_answer_source",
f.question))return f.question.contributors_count}else return f.question.contributors_count};this.answer_is_unwritten=function(){return!_.get(f,"answer.body.html")};this.question_is_archived=function(){return"archived"===f.question.state};this.question_is_pinned=function(){return"pinned"===f.question.state};this.start_editing=function(){f.answer||(f.answer={body:{}});f.answer._editing=_.defaults(f.answer._editing||{},{_form_active:!0,html:f.answer.body.html,markdown:f.answer.body.markdown})};this.cancel_editing=
function(){Reflect.deleteProperty(f.answer,"_editing")};this.finish_editing=function(){if(!f.disable_saving_with){f.disable_saving_with="Saving";f.errors=null;var a=b.modify(f.answer,{"_editing._form_active":!1});!f.source_form_open&&f.answer.answer_source&&(f.answer.answer_source=null);var d=c.save(f.answer,{question:f.question}).then(f.cancel_editing);f.on_pending_event({event:"UserCreateAnswer",result:d});d.catch(function(b){f.errors=b.errors;a()}).finally(function(){f.disable_saving_with=!1})}};
this.destroy=function(){if(!confirm("Are you sure?"))return!1;var a=f.answer;f.answer={body:{}};c.destroy(a,{question:f.question}).catch(function(){f.answer=a})};this.showing_contributors=!1;this.toggle_contributors=function(){f.showing_contributors=!f.showing_contributors};this.show_answer_form_by_default=function(){return f.can("add_answer",f.question)&&f.answer_is_unwritten()&&!f.question_is_archived()};this.show_answer_edit_form=function(){return _.get(f,"answer._editing._form_active")||f.show_answer_form_by_default()};
this.show_answer=function(){return!f.answer_is_unwritten()&&!_.get(f,"answer._editing._form_active")};this.show_blank_answer_message=function(){return f.answer_is_unwritten()&&!f.show_answer_form_by_default()&&!_.get(f,"answer._editing._form_active")};var e=this;this.yieldsApi({answerApi:{start_editing:function(){e.start_editing()},can_edit:function(){return e.can("edit",e.answer)},clear_answer:function(){e.destroy()},can_clear:function(){return e.can("destroy",e.answer)}}});d.user_signed_in&&(this.iq_api=
_.cloneDeep(this.question.current_user_metadata.iq_by_action),a.$watch("$ctrl.question.votes_total",function(a){f.iq_api.answer.primary.multiplier=_.max([a,1])}),a.$watch("$ctrl.answer._editing.pin_question",function(a){f.iq_api.answer.pin.applicable=a||"pinned"===f.question.state}),a.$watch("$ctrl.question.state",function(a){f.iq_api.answer.pin.applicable="pinned"===a||_.get(f.answer,"_editing.pin_question")}),this.yields_iq({iq_api:this.iq_api}))}]});
angular.module("genius").component("appleMatchEvaluationsPage",{templateUrl:"apple_match_evaluations_page.html",controller:Object.assign(["$sce","AppleMatchEvaluationsClient","$timeout","$document",function(a,b,c,d){var f=this;this.$routerOnActivate=function(b){f.evaluation=b.routeData.page_data;f.model={notes:f.evaluation.notes};f.song=f.evaluation.song;f.apple_embed_url=a.trustAsResourceUrl(f.evaluation.apple_embed_url);f.apple_albums=f.evaluation.apple_albums};this.submit=function(a){f.saving=
a;a=_.merge({state:a},f.model);b.submit(f.evaluation.id,a).then(function(a){c(function(){return d[0].location="apple_match_evaluations/new"},200)})};this.skip=function(){f.saving="skip";b.skip(f.evaluation.id).then(function(a){c(function(){return d[0].location="apple_match_evaluations/new"},200)})}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(a,b,c){return c.by_router_instruction(a,b)}]})});
angular.module("genius").component("appleMusicPlayer",{templateUrl:"apple_music_player.html",bindings:{url:"<",apple_music_id:"<appleMusicId",position_from_top:"<positionFromTop",on_in_apple_music_deal:"&onInAppleMusicDeal",yields_api:"&yieldsApi",on_play_state_change:"&onPlayStateChange"},controller:["AppConfig","$window","$sce","$element","$scope","Tracking","$timeout","Channel","LocalStorage","Session",function(a,b,c,d,f,e,h,g,k,m){var l=this,n=[{model:"iPhone 8",min_expanded_viewport_height_difference:75,
max_expanded_viewport_height_difference:85,toolbar_height:45},{model:"iPhone X",min_expanded_viewport_height_difference:113,max_expanded_viewport_height_difference:123,toolbar_height:84}];this.$onInit=function(){l.position_from_top&&(l.update_player_top_value(),b.addEventListener("resize",function(){return l.update_player_top_value()}));b.addEventListener("message",function(b){b.origin==="https://"+a.canonical_domain&&"in_apple_music_deal"===b.data&&f.$applyAsync(function(){l.in_apple_music_deal=
!0;l.on_in_apple_music_deal({in_apple_music_deal:!0});l.position_from_top&&h(function(){return l.update_player_top_value()},0)})});!l.apple_music_id&&k.safe_get_item("apple_musickit_authorized",!1)&&(l.dismissed=!0);k.safe_get_item("apple_music_player_dismissed",!1)&&m.user_signed_in&&(l.dismissed=!0)};this.$onChanges=function(a){a.url&&(l.src=c.trustAsUrl(l.url))};this.iframe_loaded=function(a){f.$applyAsync(function(){return l.loaded=!0});var b=g.build({window:a.contentWindow,origin:"*",scope:"com.genius.Genius"});
b.bind("player_play_pause",function(a,b){return f.$applyAsync(function(){return l.on_play_state_change({play_state:b})})});b.bind("player_auth",function(a,b){b&&!l.apple_music_id&&l.dismiss()});l.yields_api({api:{toggle_play:function(){l.dismissed=!1;b.notify({method:"header_play_pause",params:{}})}}});l.dismiss=function(){e.track("apple_player:player_dismissed",{provider:"apple",provider_id:l.apple_music_id});l.dismissed=!0;b.notify({method:"dismiss",params:{}})}};var r=window.innerHeight,q=function(a){var b=
_.find(n,function(b){return _.inRange(a,b.min_expanded_viewport_height_difference,b.max_expanded_viewport_height_difference+1)});return _.get(b,["toolbar_height"],0)};this.update_player_top_value=function(a){if(!l.position_from_top)return!1;a=a||_.get(d.get(0),["children",0,"clientHeight"])||91;var c=b.innerHeight,e=q(c-r),g=c-a-(0<e?e-16:0)+"px";l.top!==g&&f.$applyAsync(function(){return l.top=g})};this.on_resize=function(a){l.dismissed=185===a.width;l.dismissed?k.safe_set_item("apple_music_player_dismissed",
!0):k.safe_set_item("apple_music_player_dismissed",!1)}}]});
angular.module("genius").component("articleAdminBar",{bindings:{article:"<",video:"<"},templateUrl:"article_admin_bar.html",controller:["Session","Attempt","ArticleClient","currentFlashMessages","SmartRouting","$window",function(a,b,c,d,f,e){var h=this;this.current_user=a.current_user;this.can=function(b,c){return a.has_permission(b,c)};this.edit_article=function(){f.navigate_to_absolute_url(e.location.origin+"/articles/"+h.article.id+"/edit")};this.manage_articles=function(){f.navigate_to_absolute_url(e.location.origin+
"/articles")};this.delete=function(){b.admin_action(function(){c.delete(h.article.id).then(function(){d.push({type:"notice",message:"Successfully deleted article"});e.location.href="/"})},"Are you sure you want to delete this article?")}}]});angular.module("genius").component("articleAuthors",{bindings:{authors:"<"},templateUrl:"article_authors.html"});
angular.module("genius").component("articleContentActions",{templateUrl:"article_content_actions.html",bindings:{object:"<",type:"@",variants:"<"},controller:["$scope",function(a){var b=this;this.toggle_voters=function(){return b.showing_voters=!b.showing_voters};a.$on("vote_saved",function(b){a.$broadcast("update_voters")})}]});angular.module("genius").component("articleContributorBadge",{bindings:{contributor:"<object"},templateUrl:"article_contributor_badge.html"});
angular.module("genius").component("articleIndexArrangeable",{bindings:{articles:"<"},templateUrl:"article_index_arrangeable.html",controller:["ArticleClient","BeforeUnloadCheck","$scope",function(a,b,c){var d=this,f=["home_top_hero","home_mobile_desktop_first","home_promo_unit","home_desktop_second","home_desktop_third"],e=["home_video_hero"];this.$onInit=function(){d.slot_sections={top:{name:"Top Section",slots:f,error:null},video:{name:"Video Section",slots:e,error:null}};d.arrange_mode="locked";
d.dirty=!1};var h=function(){return d.dirty};b.add(h);c.$on("$destroy",function(){return b.remove(h)});var g=function(a){return _.find(d.slot_sections,function(b){return b.slots.includes(a)})},k=function(a){for(var b,c=d.article_for_slot(a),e=g(a).slots;c;)b=e,a=b.indexOf(a)+1,a===b.indexOf("home_promo_unit")&&a++,b=a=b[a]||null,a=d.article_for_slot(a),c.featured_slot=b,c=a,a=b};this.arrange_mode_locked=function(){return"locked"===d.arrange_mode};this.arrange_mode_active=function(){return"active"===
d.arrange_mode};this.arrange_mode_saving=function(){return"saving"===d.arrange_mode};var m=function(){d.error=null;d.slot_sections.video.error=null;d.slot_sections.top.error=null},l=function(a,b){m();return"home_video_hero"===b&&"video"!==a.article_type?(d.slot_sections.video.error="only video articles can be placed in this slot",!1):!0};this.place_article_into_slot=function(a,b){var c=d.articles.find(function(b){return b.id===a});if(l(c,b)){c.featured_slot=null;var e=d.article_for_slot(b);e&&e.id!==
c.id&&k(b);c.featured_slot=b;d.dirty=!0}};this.clear_slot=function(a){d.article_for_slot(a).featured_slot=null;d.dirty=!0};this.article_for_slot=function(a){return d.articles.find(function(b){return b.featured_slot&&b.featured_slot===a})};this.unfeatured_articles=function(){return d.articles.filter(function(a){return!a.featured_slot})};this.slot_holder_text=function(a,b){return"home_promo_unit"===b?"home promotional unit":"slot "+a+", "+g(b).name};this.enable_rearranging=function(){d.previous_arrangement=
_.cloneDeep(d.articles);d.arrange_mode="active"};this.cancel_rearrange=function(){m();d.articles=d.previous_arrangement;d.arrange_mode="locked";d.dirty=!1};var n=function(){return d.articles.reduce(function(a,b){b.featured_slot&&(a[b.id]=b.featured_slot);return a},{})},r=function(){for(var a=!1,b=0;b<f.length;b++){var c=f[b],c="home_promo_unit"===c||Boolean(d.article_for_slot(c));if(a&&c)return!0;c||(a=!0)}return!1};this.save_arrangement=function(){d.arrange_mode="saving";m();r()?(d.error="Saving cannot complete due to gaps in arrangement order",
d.arrange_mode="active"):a.update_featured_slots(n()).then(function(){d.arrange_mode="locked";d.dirty=!1}).catch(function(a){d.arrange_mode="active";d.error=a.message+": "+_.join(a.response.errors,", ")})}}]});
angular.module("genius").component("articleIndexItem",{bindings:{article:"<",unfeature:"&?",disableGoToArticle:"=",feature:"&?",featureVideo:"&?"},templateUrl:"article_index_item.html",controller:["Session","$window",function(a,b){var c=this;this.can=function(b){return a.has_permission(b,c.article)};this.goToArticle=function(){c.disableGoToArticle||(b.location.href=c.article.path)};this.isVideoArticle=function(){return"video"===c.article.article_type};this.displayFeatureButton=function(){return c.can("change_featured_slot")&&
c.feature};this.displayFeatureVideoButton=function(){return c.can("change_featured_slot")&&c.isVideoArticle()&&c.featureVideo};this.displayUnfeatureButton=function(){return c.can("change_featured_slot")&&c.article.featured_slot&&c.unfeature}}]});
angular.module("genius").component("articlePage",{templateUrl:"article_page.html",controller:Object.assign(["VideoRegistry","Tracking","MetaTagData","$sce",function(a,b,c,d){var f=this;this.$routerOnActivate=function(e){f.page_data=e.routeData.page_data;f.article_params=c.get("article_params");f.article_update_url=d.trustAsUrl("/articles/"+f.page_data.article.id);f.article_edit_url=d.trustAsUrl("/articles/"+f.page_data.article.id+"/edit_from_preview");f.authenticity_token=c.get("authenticity_token");
a.register_page(f.page_data.article,"desktop_article_page");b.delayed_track("Article Page View",{"Article ID":f.page_data.article.id,Title:f.page_data.article.title,Author:f.page_data.article.author.name,"Author ID":f.page_data.article.author.id,"Article Type":f.page_data.article.article_type,"Published At":(new Date(1E3*f.page_data.article.published_at)).toUTCString(),"Generic Sponsorship":f.page_data.article.generic_sponsorship});f.video=_(f.page_data.article.media).find(function(a){return"video"===
a.type||"video"===a._type})}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(a,b,c){return c.by_router_instruction(a,b)}]})});angular.module("genius").component("artistBadge",{bindings:{artist:"<"},templateUrl:"artist_badge.html"});
angular.module("genius").component("artistMetadataQuestions",{templateUrl:"artist_metadata_questions.html",bindings:{artist:"<",artist_metadata_questions:"<artistMetadataQuestions"},controller:["Tracking",function(a){this.track_question_link=function(b,c){var d=c.id.split(":");a.track_link_click(b,"artist:click_question_page",{related_question_slug:d[0],related_questionable_type:d[1],related_questionable_id:d[2]})}}]});
angular.module("genius").component("artistOpportunities",{bindings:{artist:"<"},templateUrl:"artist_opportunities.html",controller:["PagedDataFeed","ArtistClient",function(a,b){this.scrollable_data=new a(_.partial(b.contribution_opportunities,this.artist.id),"contribution_opportunities",{per_page:10})}]});
angular.module("genius").component("artistSongs",{templateUrl:"artist_songs.html",bindings:{artist:"<"},controller:["PagedDataFeed","SongClient","Session","$debounce",function(a,b,c,d){var f=this;this.search_text="";this.can=function(a,b){return c.has_permission(a,b)};var e=function(c){f.artist_song_infinite_scrollable_data=new a(_.partial(b.for_artist,f.artist.id),"songs",{sort:c})};this.sort_songs_by=function(a){f.sort_method!==a&&(f.search_text||e(a),f.sort_method=a)};this.search=function(){this.searching=
!0;this.search_debounced()};this.search_debounced=d(function(){if(f.search_text){f.artist_song_infinite_scrollable_data=new a(_.partial(b.search_with_artist,f.artist.id),"songs",{sort:f.sort_method,q:f.search_text});var c=f.artist_song_infinite_scrollable_data.next;f.artist_song_infinite_scrollable_data.next=function(){return c().then(function(a){f.searching=!1;return a})}}else e(f.sort_method)},500);this.sort_songs_by("popularity")}]});
angular.module("genius").component("artistSongsAndAlbums",{templateUrl:"artist_songs_and_albums.html",bindings:{artist:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",artist_has_more_songs:"<artistHasMoreSongs",open_all_songs_pane:"&openAllSongsPane"}});angular.module("genius").component("artistSongsModal",{templateUrl:"artist_songs_modal.html",bindings:{artist:"<",yields_open:"&yieldsOpen"},controller:[function(){var a=this;this.open=function(){return a.modal_open=!0};this.yields_open({open:this.open})}]});
angular.module("genius").component("artistTooltip",{bindings:{artist:"<"},templateUrl:"artist_tooltip.html",controller:["ArtistClient",function(a){var b=this;this.$onInit=function(){if(!b.artist.description){var c=b.artist;a.load(c.id).then(function(a){_.assign(c,a)})}}}]});
angular.module("genius").component("artistVerification",{templateUrl:"artist_verification.html",bindings:{user:"<",artist:"<",close:"&"},controller:["UserClient","AppConfig",function(a,b){var c=this;this.name=_.get(this.artist,"name");this.role=this.user.verification_role;this.user_verification_roles=b.user_verification_roles;this.updating=function(){return c.verifying||c.unverifying};this.verify=function(){c.updating()||(c.verifying=!0,c.errors=null,a.associate_with_artist(c.user.id,{name:c.name,
role:c.role}).then(function(a){_.assign(c.user,a.user);c.form.$setPristine();window.location.href=c.user.url}).catch(function(a){c.errors=a.errors;c.verifying=!1}))};this.unverify=function(){c.updating()||(c.unverifying=!0,c.errors=null,a.dissociate_from_artist(c.user.id).then(function(a){_.assign(c.user,a.user);c.form.$setPristine();window.location.href=c.user.url}).catch(function(a){c.errors=a.errors;c.unverifying=!1}))}}]});
angular.module("genius").component("audioSourceLabel",{templateUrl:"audio_source_label.html",bindings:{external_song:"<externalSong"}});
angular.module("genius").component("breadcrumbs",{templateUrl:"breadcrumbs.html",bindings:{order:"<"},controller:[function(){var a=this;this.rebuildHierarchy=function(){a.hierarchy=[{url:"/",title:"Home"}];a.order.forEach(function(b){"artist"===b._type?(a.hierarchy.push({url:"/artists-index/"+b.index_character,title:b.index_character.toUpperCase()}),a.hierarchy.push({url:b.url,title:b.name})):"album"===b._type?a.hierarchy.push({url:b.url,title:b.name}):"song"===b._type&&a.hierarchy.push({url:b.url,
title:b.title+(b.is_music?" Lyrics":"")})})};this.$onChanges=function(b){b.order&&a.rebuildHierarchy()}}]});
angular.module("genius").component("collapsibleContent",{templateUrl:"collapsible_content.html",transclude:!0,bindings:{maxCollapsedHeight:"<",minExpansionHeight:"<",text:"@",auto_expand:"<autoExpand"},controller:[function(){var a=this;this.expand=function(){Reflect.deleteProperty(this,"max_height")};this.content_height_changed=function(b){b>a.maxCollapsedHeight+a.minExpansionHeight&&(a.max_height=a.maxCollapsedHeight);a.auto_expand&&a.expand()}}]});
angular.module("genius").component("commentList",{bindings:{comments:"<",commentable:"<",intersperse_ads:"@intersperseAds",variants:"<"},templateUrl:"comment_list.html"});
angular.module("genius").component("comments",{bindings:{type:"@",commentable:"<",allow_reasons:"<allowReasons",prevent_compose:"<preventCompose",are_suggestions:"<areSuggestions",context_updated_at:"<contextUpdatedAt",intersperse_ads:"@intersperseAds",on_dirty:"&onDirty",on_clean:"&onClean",variants:"<"},templateUrl:"comments.html",controller:["CommentClient","Session","PagedDataFeed",function(a,b,c){var d=this,f=[],e=function(a){var b,c=_.groupBy(d.comments,"id");a=_.reject(a,function(a){return c[a.id]});
(b=d.comments).push.apply(b,a)},h=function(a){return _.remove(a,function(a,b){return 5>b&&(1>b||10<=a.votes_total)})},g=function(){d.scrollable_data.reset();d.comments=[];d.commentable.top_comment?e([d.commentable.top_comment]):(d._loading=!0,d.scrollable_data.next().then(function(a){e(h(a));f=a}).finally(function(){return d._loading=!1}));d.has_next=0<d.commentable.comment_count-d.comments.length?function(){return!_.isEmpty(f)||d.scrollable_data.has_next()}:function(){return!1}};this.$onChanges=
function(b){b.context_updated_at&&d.context_updated_at&&g();if(b.type||b.commentable)d.scrollable_data=new c(_.partial(a.load,d.type,d.commentable.id),"comments",{text_format:"html,markdown"}),0<d.commentable.comment_count?g():d.comments=[]};this.load_more=function(){_.isEmpty(f)?(d._loading=!0,d.scrollable_data.next().then(e).finally(function(){return d._loading=!1})):(e(f),f=[])};this.can_create_comment=function(){return b.has_permission("create_comment",d.commentable)&&!d.prevent_compose};this.visible_comments=
function(){return _.reject(d.comments,"_deleted")};this.save_comment=function(b){d.comments.unshift(b);return a.create(d.type,d.commentable.id,b).then(function(){d.commentable.comment_count+=1})}}]});
angular.module("genius").component("contactButton",{templateUrl:"contact_button.html",controller:["FeedbackClient",function(a){var b=this;this.submit=function(){b.sending=!0;a.post_feedback(b.feedback_body).then(function(){return b.success=!0}).finally(function(){return b.sending=!1})};this.close=function(){b.open_contact_form=!1;b.success=!1}}]});
angular.module("genius").component("contributionOpportunity",{bindings:{assignment:"<?",contribution_opportunity:"<contributionOpportunity",on_dismiss:"&onDismiss",source:"@"},templateUrl:"contribution_opportunity.html",controller:["ContributionOpportunityAssignmentClient","Tracking","Session","$timeout",function(a,b,c,d){var f=this;this.can=function(a){return c.has_permission(a,f.contribution_opportunity.target)};this.track=function(a,c){var d={action:a,contribution_opportunity_id:f.contribution_opportunity.id,
source:f.source};c?b.track_link_click(c,"Contribution Opportunity Action",d):b.track("Contribution Opportunity Action",d)};this.track_open=function(a){f.track("open",a)};this.on_pending_event=function(a,b){if(_.includes(f.contribution_opportunity.complete_on_events,a)){f.submitted=!0;var c=d(function(){f.optimistically_removed=!0},200);b.then(function(){f.track("complete")}).catch(function(){f.submitted=!1;f.optimistically_removed=!1;d.cancel(c)})}};this.dismiss=function(){a.update(f.assignment.id,
{dismissed:!0}).then(function(){f.track("dismiss");f.on_dismiss({assignment:f.assignment})})}}]});
angular.module("genius").component("coverArtForm",{templateUrl:"cover_art_form.html",bindings:{cover_artable:"<coverArtable",cover_arts:"<coverArts",type:"@",close:"&",yields_is_dirty:"&yieldsIsDirty"},controller:["CoverArtClient","Reversible","Session",function(a,b,c){var d=this;this.can=function(a,b){return c.has_permission(a,b)};this.visible_cover_arts=function(){return _.reject(d.cover_arts,"_deleted")};this.create=function(b){_.some(d.cover_arts,{image_url:b})?d.error={response:{errors:["Image already exists"]}}:
(d.error=null,d.autosaving=!0,d.cover_arts.push({image_url:b}),a.create(d.type,d.cover_artable.id,{image_url:b}).then(function(a){return Object.assign(d.cover_artable,a.cover_artable)}).catch(function(a){d.error=a;_.remove(d.cover_arts,{image_url:b})}).finally(function(){return d.autosaving=!1}))};this.update=function(c,e){if(_.some(d.cover_arts,{image_url:e}))d.error={response:{errors:["Image already exists"]}};else{d.error=null;d.autosaving=!0;var h=b.modify(c,{image_url:e});a.update(c.id,{image_url:e}).then(function(a){return Object.assign(d.cover_artable,
a.cover_artable)}).catch(function(a){d.error=a;h()}).finally(function(){return d.autosaving=!1})}};this.destroy=function(c){d.error=null;d.autosaving=!0;var e=b.modify(c,{_deleted:!0});a.destroy(c.id).then(function(a){return Object.assign(d.cover_artable,a.cover_artable)}).catch(function(a){d.error=a;e()}).finally(function(){return d.autosaving=!1})};this.cant_drop=function(a){var b=_.map(d.visible_cover_arts(),"id"),c=_.indexOf(b,d.cover_art_being_dragged.id);a=_.indexOf(b,a.id);return c===a||c===
a-1};this.move_before=function(b,c){d.error=null;d.saving=!0;var h=_.map(d.cover_arts,"id"),g=_.indexOf(h,c.id),h=b?_.indexOf(h,b.id):d.cover_arts.length-1;_.remove(d.cover_arts,{id:c.id});d.cover_arts.splice(h,0,c);a.move_between(c.id,{above_id:_.get(d.cover_arts[h-1],"id"),below_id:_.get(b,"id")}).then(function(a){return Object.assign(d.cover_artable,a.cover_artable)}).catch(function(a){d.error=a;_.remove(d.cover_arts,{id:c.id});d.cover_arts.splice(g,0,c)}).finally(function(){return d.saving=!1})}}]});
angular.module("genius").component("coverArtModal",{templateUrl:"cover_art_modal.html",bindings:{cover_artable:"<coverArtable",tiny_cover_arts:"<tinyCoverArts",focused_cover_art_id:"<focusedCoverArtId",type:"@",close:"&"},controller:["CoverArtClient","Tracking","Session","SmartRouting",function(a,b,c,d){var f=this;this.$onChanges=function(c){if(c.type||c.cover_artable)b.track("Cover Art View",{"Cover Artable Type":f.type,"Cover Artable ID":f.cover_artable.id,"Cover Art Count":f.tiny_cover_arts.length}),
f.full_cover_arts=null,a.index(f.type,f.cover_artable.id).then(function(a){return f.full_cover_arts=a})};this.cover_arts=function(){return f.full_cover_arts||f.tiny_cover_arts};this.focused_cover_art=function(){return _.find(f.cover_arts(),function(a){return a.id===f.focused_cover_art_id})};this.focused_cover_art_index=function(){return _.findIndex(f.cover_arts(),function(a){return a.id===f.focused_cover_art_id})};this.move_cover_art_focus=function(a){a=f.focused_cover_art_index()+a;a=_.get(f.cover_arts(),
[a,"url"]);d.navigate_to_absolute_url(a)};this.user_signed_in=c.user_signed_in}]});
angular.module("genius").component("deferCompile",{bindings:{timing_label:"@timingLabel",initial_content_key:"@useInitialContentWithKey",within_visibility_range:"@withinVisibilityRange",delay:"<"},transclude:!0,controller:["$element","$q","$timeout","$transclude","$window","application_bootstrap","initial_placeholder_content","on_within_visibility_range","performance_mark",function(a,b,c,d,f,e,h,g,k){var m=this;this.$onInit=function(){e.before(function(){var b=h.get(m.initial_content_key);b&&a.empty().append(b)});
var f=_.isFinite(m.delay)?c(m.delay):b.when(),r=m.timing_label||m.initial_content_key;e.after(function(){return f.then(function(){(m.within_visibility_range?g(a,l(m.within_visibility_range)):b.when()).then(function(){r&&k.create("defer_compile_start:"+r);a.empty().append(d());r&&k.create("defer_compile_end:"+r)})})})};var l=function(a){a=a.match(/^(\d+(?:\.\d+)?)(vh|px)$/)||[];var b=a[1];switch(a[2]){case "px":return parseFloat(b);case "vh":return parseFloat(b)/100*$(f).height();default:throw Error("within-visibility-range attribute must have units (either px or vh");
}}}]});angular.module("genius").component("deletedAnswer",{bindings:{answer:"<"},templateUrl:"deleted_answer.html"});
angular.module("genius").component("detailedSongSearch",{templateUrl:"detailed_song_search.html",bindings:{mode:"<",cancel:"&onCancel",select:"&onSelect",confirm:"&onConfirm"},controller:["$q","$scope","LookupClient","SongClient",function(a,b,c,d){var f=this;b.$watch("$ctrl.url",function(b){f.song_data=null;f.error=null;b&&c.lookup(b).then(function(b){f.autocompleted_song=null;if("song"!==b._type)return a.reject(Error("URL is for a non-song page"));f.song=b}).catch(function(a){f.error=a})});b.$watch("$ctrl.autocompleted_song.id",
function(a){f.url=null;f.song_data=null;f.error=null;a&&(f.song_data={id:f.autocompleted_song.id,title:f.autocompleted_song.title,artists:[f.autocompleted_song.primary_artist],albums:[]},d.load_song(a).then(function(a){f.song=a}))});b.$watch("$ctrl.song.id",function(a){a&&(f.song_data={id:f.song.id,title:f.song.title,artists:[f.song.primary_artist].concat(f.song.featured_artists),albums:f.song.albums},f.select({song:f.song}))});this.submit=function(){var b=this;this.saving=!0;a.when(this.confirm({song:this.song})).finally(function(){b.saving=
null})}}]});
angular.module("genius").component("dfpAd",{templateUrl:"dfp_ad.html",bindings:{ad_classes:"@adClasses",name:"@",instance_id:"@?instanceId",on_filled:"&onFilled",on_no_ad:"&onNoAd"},controller:["$element","$immediate","$scope","Ads","querystring","AdConfig","SessionConfig","classnames",function(a,b,c,d,f,e,h,g){var k=this,m;this.$onInit=function(){if(!h.show_ads)return k.creative_size=[0,0],k.no_ad=!0,k.on_no_ad();m=k.instance_id||k.name;k.creative_size=_.get(e.ad_placements[k.name],"placeholder_size")||[0,
0];d.id_for(k.name,m).then(function(a){return k.id=a}).then(function(){return b(function(){d.render(k.name,m).then(function(b){b.isEmpty?(k.no_ad=!0,k.on_no_ad({render_event:b})):(k.filled=!0,k.creative_size=b.size,k.on_filled({render_event:b,custom_values:f.parse(a.find("iframe").prop("contentWindow").customValues||"")}));c.$emit("layout_changed")})})})};this.$onDestroy=function(){d.dispose(k.name,m)};this.compiled_ad_unit_classes=function(){var a=c.$parent.$eval(k.ad_classes||"[]",{$width:k.creative_size[0],
$height:k.creative_size[1]});return g(a)}}]});
angular.module("genius").component("editArtistProfile",{templateUrl:"edit_artist_profile.html",bindings:{artist:"<",close:"&"},controller:["ArtistClient","$location","Session","only_changes",function(a,b,c,d){var f=this;this.$onChanges=function(a){a.artist&&(f.editable_artist=angular.copy(f.artist))};this.can=function(a){return c.has_permission(a,f.artist)};this.update_artist=function(){f.errors=null;f.saving||(f.saving=!0,a.update(f.artist.id,d(f.editable_artist,f.artist)).then(function(c){_.assign(f.artist,
c);f.close();f.errors=null;b.path(a.get_path(c));b.replace()}).catch(function(a){f.errors=a.data.response.errors}).finally(function(){f.saving=!1}))}}]});
angular.module("genius").component("editUserEmailPreferences",{templateUrl:"edit_user_email_preferences.html",bindings:{user:"<",close:"&"},controller:["UserClient",function(a){var b=this;this.editable_user=angular.copy(this.user);this.update_user=function(){b.saving||(b.saving=!0,Reflect.deleteProperty(b,"errors"),a.update(b.editable_user.id,{user:_.pick(b.editable_user,["preferences"])}).then(function(a){_.assign(b.user,a.user);b.close();Reflect.deleteProperty(b,"errors")}).catch(function(a){b.errors=
a.errors}).finally(function(){Reflect.deleteProperty(b,"saving")}))}}]});
angular.module("genius").component("editUserProfile",{templateUrl:"edit_user_profile.html",bindings:{user:"<",disable_image_edit:"<disableImageEdit",disable_user_bio_edit:"<disableUserBioEdit",close:"&"},controller:["UserClient","Session","$location","only_changes",function(a,b,c,d){var f=this;this.$onChanges=function(a){a.user&&(f.editable_user=angular.copy(f.user))};this.can=function(a){return b.has_permission(a,f.user)};this.update_user=function(){if(f.editable_user.password!==f.editable_user.confirm_password)f.errors=
["Passwords do not match"];else if(!f.saving){f.saving=!0;f.errors=null;var b=_.pick(f.editable_user,"login about_me email password photo_url custom_header_image_url".split(" "));b.about_me=b.about_me.markdown;a.update(f.editable_user.id,{user:d(b,f.user)}).then(function(b){_.assign(f.user,b.user);f.close();f.errors=null;c.path(a.get_path(b.user));c.replace()}).catch(function(a){f.errors=a.errors}).finally(function(){f.saving=!1})}}}]});
angular.module("genius").component("editableTracklist",{bindings:{album:"<",album_appearances:"<albumAppearances",editing:"<",on_update:"&onUpdate",close:"&"},templateUrl:"editable_tracklist.html",controller:["AlbumClient","$timeout","I18n",function(a,b,c){var d=this;this.$onInit=function(){d.error=null;var a=_.groupBy(d.album_appearances,"track_number"),b=_.max(_.compact(_.map(_.keys(a),function(a){return Number(a)})));d.numbered_slots=[];for(var c=1;c<=b;c++)if(a[c]){var f=a[c][0];d.numbered_slots.push({track_number:c,
song_id:f.song.id,title:f.song.title_with_featured})}else d.numbered_slots.push({track_number:c});d.unnumbered_slots=_.map(a.null,function(a){return{song_id:a.song.id,title:a.song.title_with_featured}})};this.remove_trailing_empty_slots=function(){var a=_.max(_.map(_.filter(d.numbered_slots,"song_id"),"track_number"))||0;d.numbered_slots=d.numbered_slots.slice(0,a)};this.make_unnumbered=function(a){Reflect.deleteProperty(a,"track_number");d.unnumbered_slots.push(a)};this.clear_slot=function(a){a.track_number?
d.numbered_slots[a.track_number-1]={track_number:a.track_number}:_.remove(d.unnumbered_slots,{song_id:a.song_id})};this.place_song_into_slot=function(a,b){var c=b.track_number;b.song_id&&(d.clear_slot(b),d.make_unnumbered(b));d.clear_slot(a);a.track_number=c;d.numbered_slots[c-1]=a;d.remove_trailing_empty_slots()};this.update_slot_number=function(a,b){if(""===b)d.clear_slot(a),d.make_unnumbered(a),d.remove_trailing_empty_slots();else{var c=_.toNumber(b);if(!(_.isNaN(c)||0>=c)){for(;c>d.numbered_slots.length;)d.numbered_slots.push({track_number:d.numbered_slots.length+
1});d.place_song_into_slot(a,d.numbered_slots[c-1])}}};var f;this.add_slot_after_delay=function(){f=b(function(){return d.numbered_slots.push({track_number:d.numbered_slots.length+1})},500)};this.cancel_add_slot=function(){b.cancel(f)};this.add_slot_and_fill=function(a){d.cancel_add_slot();var b={track_number:d.numbered_slots.length+1};d.numbered_slots.push(b);d.place_song_into_slot(a,b)};this.add_song=function(a){var b={song_id:a.id,title:a.title_with_featured};a.new&&(b.lyrics_state="incomplete");
d.unnumbered_slots.push(b)};this.create_result=function(a){return{id:_.uniqueId("new_"),title:a,title_with_featured:a,primary_artist:d.album.artist,new:!0}};this.toggle_unreleased=function(a){"incomplete"===a.lyrics_state&&confirm(c.t("song.lyrics_state.unreleased.confirm"))?a.lyrics_state="unreleased":a.lyrics_state="incomplete"};this.save=function(){d.saving=!0;d.error=null;var b=_.map(_.filter(d.numbered_slots.concat(d.unnumbered_slots),"song_id"),function(a){return _.pick(a,["track_number","song_id",
"title","lyrics_state"])});a.update_tracklist(d.album.id,b).then(function(a){d.on_update({album_appearances:a});d.close()}).catch(function(a){d.error=a.message+": "+_.join(a.response.errors,", ")}).finally(function(){d.saving=!1})}}]});
angular.module("genius").component("editableTracklistNumber",{bindings:{track_number:"<trackNumber",on_update:"&onUpdate"},templateUrl:"editable_tracklist_number.html",controller:function(){var a=this;this.$onChanges=function(b){b.track_number&&a.reset()};this.submit=function(){a.on_update({input:a.editable_track_number});a.reset()};this.reset=function(){a.editing=!1;a.editable_track_number=a.track_number}}});
angular.module("genius").component("emailConfirmationBanner",{templateUrl:"email_confirmation_banner.html",bindings:{url:"@"},controller:["$http",function(a){var b=this;this.success=this.loading=!1;this.request=function(){b.loading=!0;a.post(b.url).then(function(){b.loading=!1;b.success=!0}).catch(function(){b.loading=!1;b.error_message="Oops, something went wrong. Please refresh and try again!"})}}]});
angular.module("genius").component("embedlyEmbed",{templateUrl:"embedly_embed.html",bindings:{embed:"<"},controller:["$sce",function(a){var b=this;this.trusted_html=function(){return a.trustAsHtml(b.embed.html)}}]});
angular.module("genius").component("embedlyYoutube",{templateUrl:"embedly_youtube.html",bindings:{video_id:"@videoId",start:"@"},controller:["$scope","Tracking",function(a,b){var c=this;this.started=!1;a.$on("youtube.player.playing",function(){c.started||(b.track("Play embedded video",{properties:{"Video provider":"youtube"}}),c.started=!0)})}]});
angular.module("genius").component("expandableContainer",{templateUrl:"expandable_container.html",transclude:{expandable_container_title:"?expandableContainerTitle"},bindings:{start_expanded:"<startExpanded",start_initialized:"<startInitialized",title:"@",variants:"<",yields_api:"&yieldsApi"},controller:[function(){var a=this;this.$onInit=function(){this.expanded=this.start_expanded;this.yields_api({api:this.api})};this.$onChanges=function(a){a.start_expanded&&(this.expanded=this.start_expanded)};
this.toggle_expand=function(){a.expanded=!a.expanded};this.api=function(){return{expanded:function(){return a.expanded}}}}]});var PADDING_AMOUNT=3,EXPAND_AMOUNT=10;
angular.module("genius").component("expandableDiff",{bindings:{html:"<"},templateUrl:"expandable_diff.html",controller:function(){var a=this;this.$onInit=function(){a.expand_amount=EXPAND_AMOUNT};this.$onChanges=function(f){f.html&&(a.lines=_.split(a.html,"<br>"),b(),c(),d())};var b=function(){a.ranges=[];var b=[],c=null;a.lines.forEach(function(d,g){var k=d.match(/(<ins|<del|<\/ins>|<\/del>)/g)||[],m=(b.length||k.length)&&!_.startsWith(d,"</ins>")&&!_.startsWith(d,"</del>");m&&_.isNull(c)?c=g:m||
_.isNull(c)||(a.ranges.push({start:c,end:g}),c=null);k.forEach(function(a){"<ins"===a||"<del"===a?b.push(a):b.pop()})});_.isNull(c)||a.ranges.push({start:c,end:a.lines.length})},c=function(b){void 0===b&&(b=PADDING_AMOUNT);a.ranges.forEach(function(c){c.start=Math.max(c.start-b,0);c.end=Math.min(c.end+b,a.lines.length)})},d=function(){for(var b=0;b<a.ranges.length-1;)a.ranges[b].end>=a.ranges[b+1].start?(a.ranges[b].end=a.ranges[b+1].end,_.pullAt(a.ranges,b+1)):b++};this.expand_range_start=function(b,
c){void 0===c&&(c=EXPAND_AMOUNT);a.ranges[b].start=Math.max(a.ranges[b].start-c,0);d()};this.expand_range_end=function(b,c){void 0===c&&(c=EXPAND_AMOUNT);a.ranges[b].end=Math.min(a.ranges[b].end+c,a.lines.length);d()};this.render_lines=function(b,c){return _.join(_.slice(a.lines,b,c),"<br>")}}});
angular.module("genius").component("facebookShareButton",{templateUrl:"facebook_share_button.html",bindings:{url:"<",variants:"<"},controller:["Facebook","Tracking",function(a,b){var c=this;this.share_on_facebook=function(){b.track("Bagon Facebook Share");a.share(c.url)}}]});
angular.module("genius").component("hangInitialQuote",{templateUrl:"hang_initial_quote.html",bindings:{content:"<"},controller:function(){this.hang_initial_double_quote="\u201c"===this.content[0];this.hang_initial_single_quote="\u2018"===this.content[0]}});angular.module("genius").component("headerActions",{templateUrl:"header_actions.html",controller:["Session",function(a){var b=this;this.$onInit=function(){b.user_signed_in=a.user_signed_in;b.can=function(b){return a.has_permission(b,a.current_user)}}}]});
angular.module("genius").component("headerAdmin",{bindings:{open_header_menus:"<openHeaderMenus"},templateUrl:"header_admin.html",controller:["Session","UserClient","AssetClient","$window",function(a,b,c,d){var f=this;this.$onInit=function(){f.user=a.current_user;f.can=function(b){return a.has_permission(b,f.user)}};this.logout=function(){f.loading=!0;b.logout().then(function(){d.location.reload()})};this.impersonate_user=function(){var a=prompt("Enter the login of the user you want to sign in as");
""!==_.trim(a)&&(f.impersonating=!0,b.impersonate(a).then(function(){d.location.reload()}))};this.search_user_aliases=function(){var a=prompt("Find all users who've ever had this login");""!==_.trim(a)&&(d.location.href="/users/aliases?alias="+encodeURIComponent(a))};this.remove_asset=function(){var a=prompt("Enter the url to remove");""!==_.trim(a)&&c.remove(a)}}]});angular.module("genius").component("headerAuth",{templateUrl:"header_auth.html"});
angular.module("genius").component("headerWithCoverArt",{templateUrl:"header_with_cover_art.html",bindings:{type:"@",object:"<",header_image_url:"<headerImageUrl",cover_art_url:"<coverArtUrl",titleLabel:"<",artist:"<",can_edit:"<canEdit",on_edit:"&onEdit",verified_contributors:"<verifiedContributors",has_instagram_reels:"<hasInstagramReels",variants:"<",cover_arts:"<coverArts",focused_cover_art_id:"<focusedCoverArtId",close_cover_art_modal:"&onCloseCoverArtModal"},transclude:{metadata:"?metadata",
secondary:"?secondary"},controller:function(){var a=this;this.cover_art_cta_text=function(){var b=a.cover_arts.length,c=1<b,d=_.filter(a.cover_arts,"annotated").length;return d?b===d?b+" Annotated Cover"+(c?"s":""):b+" Cover"+(c?"s":"")+", "+d+" Annotated":b+" Cover"+(c?"s":"")}}});
angular.module("genius").component("hiddenFields",{bindings:{key:"@",value:"<"},templateUrl:"hidden_fields.html",controller:function(){_.isArray(this.value)?this.type="array":_.isObject(this.value)?this.type="object":this.type="constant"}});
angular.module("genius").component("imageUploadButton",{templateUrl:"image_upload_button.html",bindings:{default_image:"<defaultImage",on_file_picked:"&onFilePicked",allow_clear:"<allowClear",clear_confirm:"@clearConfirm",on_clear:"&onClear",allow_crop_to_square:"<allowCropToSquare",variants:"<"},controller:["Filepicker",function(a){var b=this,c=new a;this.pick_image_for_artist=function(a){a={container:"modal",services:["COMPUTER","URL","FACEBOOK","INSTAGRAM","IMAGE_SEARCH"],openTo:a};b.allow_crop_to_square&&
(a.services.unshift("CONVERT"),a.conversions=["crop"],a.cropRatio=1);var f={path:Math.random().toString(36).slice(2)};c.pick_and_store(a,f).then(function(a){b.on_file_picked({url:a})})}}]});
angular.module("genius").component("inbox",{bindings:{inbox_name:"@inboxName",opened:"<opened",clear_unread_count:"&clearUnreadCount"},templateUrl:"inbox.html",controller:["InboxClient","Tracking",function(a,b){var c=this,d,f,e;this.should_paginate=function(){return c.opened&&!e&&!c.done_loading};this.load_next_page=function(){e||(e=a.line_items(c.inbox_name,d).then(function(a){var b;(b=c.line_items).push.apply(b,a);e=null;a.length?d=a.timestamp_for_next_page:c.done_loading=!0;c.opened&&k(a)}))};
var h=function(){c.line_items=[];c.done_loading=!1;d=void 0;c.load_next_page()},g=function(){c.opened?f=Date.now():h()},k=function(b){a.mark_read(c.inbox_name,_(b).filter("unread").map("event_ids").value());c.clear_unread_count()};this.$onInit=function(){h();a.on_update(c.inbox_name,g)};this.$onChanges=function(a){if(a.opened){var d=a.opened.currentValue,e=a.opened.previousValue;!d||e&&!a.opened.isFirstChange()?e&&!d&&f&&f<Date.now()&&h():(k(c.line_items),b.track("Inbox Open",{inbox_name:c.inbox_name}))}}}]});
angular.module("genius").component("inboxContainer",{bindings:{inbox_name:"@inboxName",open_inboxes:"<openInboxes",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",use_messages_inbox:"<useMessagesInbox",use_iq_inbox:"<useIqInbox"},templateUrl:"inbox_container.html"});
angular.module("genius").component("inboxIcon",{bindings:{inbox_name:"@inboxName",opened:"<",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",yields_api:"&yieldsApi"},templateUrl:"inbox_icon.html",controller:["Session","TopBarIndicatorsLoader","WindowTitle","InboxClient",function(a,b,c,d){var f=this,e=function(a){f.unread_count=a;f.sync_count_to_title&&c.update_count(f.unread_count)};this.$onInit=function(){e(a.current_user["unread_"+f.inbox_name+"_count"]);b.listen_for(f.inbox_name,
e);d.on_update(f.inbox_name,b.refresh);f.yields_api({api:{decrement:function(a){e(f.unread_count-a)},clear:function(){e(0)}}})}}]});
angular.module("genius").component("inboxLineItemDetailDiscussion",{bindings:{discussion:"<object"},templateUrl:"inbox_line_item_detail_discussion.html",controller:["DiscussionClient","PagedDataFeed",function(a,b){var c=this;this.$onChanges=function(d){d.discussion&&(c.paged_data=new b(_.partial(a.forum_posts,c.discussion.id),"forum_posts",{per_page:3},2),c.forum_posts=_.clone(c.discussion.latest_posts),c.has_next=c.discussion.forum_post_count>c.forum_posts.length?c.paged_data.has_next:function(){return!1})};
this.load_more=function(){c.loading=!0;c.paged_data.next().then(function(a){var b;return(b=c.forum_posts).push.apply(b,a)}).finally(function(){return c.loading=!1})}}]});angular.module("genius").component("inboxLineItemDetailDiscussionHeader",{bindings:{discussion:"<"},templateUrl:"inbox_line_item_detail_discussion_header.html"});angular.module("genius").component("inboxLineItemDetailForumPost",{bindings:{forum_post:"<object"},templateUrl:"inbox_line_item_detail_forum_post.html"});
angular.module("genius").component("inboxLineItemDetailForumPostSingle",{bindings:{forum_post:"<forumPost"},templateUrl:"inbox_line_item_detail_forum_post_single.html"});angular.module("genius").component("inboxLineItemDetailLyricsDiff",{bindings:{before:"<",after:"<",state:"<"},templateUrl:"inbox_line_item_detail_lyrics_diff.html",controller:["LyricsEditProposal",function(a){var b=this;this.$onChanges=function(c){if(c.before||c.after)c=a.diff(b.before,b.after),b.diff_html=a.pretty_diff(c)}}]});
angular.module("genius").component("inboxLineItemDetailObject",{templateUrl:"inbox_line_item_detail_object.html",bindings:{object:"<",variants:"<"}});angular.module("genius").component("inboxLineItemMessage",{bindings:{template:"<",key:"<",params:"<",state:"<"},template:'<ng-include src="$ctrl.template"></ng-include>'});
angular.module("genius").component("iqInbox",{bindings:{opened:"<",clear_unread_count:"&clearUnreadCount"},templateUrl:"iq_inbox.html",controller:["Session","UserClient","Pusher","Tracking",function(a,b,c,d){var f=this;this.load=function(){b.contribution_opportunity_assignments(f.user.id).then(function(a){f.loaded=!0;var c=_.map(f.assignments,"id");a=_.reject(a.contribution_opportunity_assignments,function(a){return _.includes(c,a.id)});f.assignments=f.assignments.concat(a);f.opened&&(b.mark_contribution_opportunity_assignments_read(f.user.id),
f.clear_unread_count())})};this.remove=function(a){f.assignments=_.reject(f.assignments,{id:a.id});f.load()};this.dismiss_explanation=function(){f.show_explanation=!1;b.dismiss_contribution_opportunities_explanation(f.user.id)};this.$onInit=function(){f.assignments=[];f.user=a.current_user;f.show_explanation=!f.user.dismissed_contribution_opportunities_explanation;f.load();c.subscribe(a.current_user.pusher_channel,"contribution_opportunity_completion",function(a){_.find(f.assignments,function(b){return b.contribution_opportunity.id===
a})&&(f.load(),f.assignments=_.reject(f.assignments,function(b){return b.contribution_opportunity.id===a}))});c.subscribe(a.current_user.pusher_channel,"contribution_opportunities_refreshed",f.load)};this.$onChanges=function(a){if(a.opened){var b=a.opened.previousValue;!a.opened.currentValue||b&&!a.opened.isFirstChange()||(d.track("Inbox Open",{inbox_name:"iq_inbox"}),f.clear_unread_count())}}}]});
angular.module("genius").component("iqNotificationList",{templateUrl:"iq_notification_list.html",controller:["LocalStorage","PageVisibility","Session","Pusher","$timeout",function(a,b,c,d,f){this.user=c.current_user;this.notifications=[];this.line_item_count=0;var e=function(a){_.isEmpty(this.notifications)&&this.notifications.unshift(this.user);this.line_item_count++;f(function(){this.notifications.unshift(a);this.user.iq+=a.iq_gained;f(function(){_.pull(this.notifications,a);this.line_item_count--;
0===this.line_item_count&&this.notifications.pop()}.bind(this),5E3)}.bind(this),200)}.bind(this);d.subscribe(c.current_user.pusher_channel,"iq_increment",function(c){b.when_visible(function(){if(a.is_available()){var b=a.get_item("newest_event_id",0),d=_.max(c.event_ids);d>b&&(e(c),a.set_item("newest_event_id",d))}else e(c)})}.bind(this))}]});
angular.module("genius").component("leaderboardAd",{templateUrl:"leaderboard_ad.html",bindings:{name:"@"},controller:["$timeout","$window","$element","$scope","wait_until",function(a,b,c,d,f){var e=this,h,g,k,m,l;this.$onInit=function(){b.addEventListener("scroll",n);k=600<=b.innerHeight;e.empty=!0};var n=_.throttle(function(){return d.$applyAsync(function(){return r()})},50),r=function(){e.bounding_client_rect=h?h.getBoundingClientRect():{height:0,width:0};m=0<=c[0].getBoundingClientRect().top},
q=function(a){var b=a[1];return 1===a[0]&&1===b};this.on_filled=function(d){e.empty=q(d.size);e.has_banner_ad=!0;g=970===d.size[0];l="loading";h=c[0].querySelector(".dfp_unit--centered_billboard");f(function(){return 1<h.getBoundingClientRect().height}).then(function(){l="loaded";r();e.loaded_when_not_naturally_in_view=!m;a(function(){b.removeEventListener("scroll",n);l="viewability_complete"},3E3)}).catch(_.noop)};this.can_stick=function(){return g&&k&&"loaded"===l};this.should_stick=function(){return e.can_stick()&&
!m}}]});
angular.module("genius").component("lyricsEditProposal",{bindings:{edit_proposal:"<editProposal",editable:"<",accept_with:"&acceptWith"},templateUrl:"lyrics_edit_proposal.html",controller:["$scope","LyricsEditProposal","LyricsEditProposalClient","Session","$immediate","$q","Tracking",function(a,b,c,d,f,e,h){var g=this;this.$onChanges=function(a){a.editable&&l()};this.can=function(a){return d.has_permission(a,g.edit_proposal)};this.accept=function(){var a={editable:_.extend({},g.editable,{markdown:g.patched}),lyrics_edit_id:g.edit_proposal.id};
m("accepted",g.accept_with({params:a}),"accept_proposal")};this.reject=function(){m("rejected",c.reject(g.edit_proposal.id),"reject_proposal")};var k=function(a){g.error=null;g.moderated_state=a;return f(function(){return g.edit_proposal._moderated=!0})},m=function(a,b,c){a=k(a);return e.all([b,a]).then(function(){h.track("lyrics_edit_proposals:"+c,{lyrics_edit_id:g.edit_proposal.id})}).catch(function(a){g.error=a.message;g.edit_proposal._moderated=!1;g.moderated_state=null})},l=function(){var a=
b.make_patches(g.edit_proposal.diff),a=b.apply_patches(a,g.editable.markdown,{edit_format:g.edit_proposal.edit_format}),c=a.patched;_.some(a.success)?(g.patched=c,a=b.diff(g.editable.markdown,g.patched),g.diff_html=b.pretty_diff(a)):k("inapplicable")};a.$watch("$ctrl.editable.markdown",function(a){a&&l()})}]});
angular.module("genius").component("lyricsEditProposalForm",{bindings:{lyrics:"<",song:"<"},templateUrl:"lyrics_edit_proposal_form.html",controller:["LyricsEditProposal","LyricsEditProposalClient","Tracking","$window",function(a,b,c,d){var f=this;this.$onInit=function(){c.track("lyrics_edit_proposals:start_proposal",{properties:{edit_format:"markdown"}})};this.$onChanges=function(a){a.lyrics&&(f.editable={markdown:f.lyrics.body.plain,before:f.lyrics.body.plain})};this.propose=function(){f.saving||
(f.errors=null,f.editable.markdown===f.editable.before?f.proposed=!0:(f.saving=!0,b.create({song_id:f.song.id,version:f.lyrics.version,edited_lyrics:f.editable.markdown}).then(function(){f.proposed=!0;c.track("lyrics_edit_proposals:save_proposal",{properties:{edit_format:"plain_text"}})}).catch(function(a){f.errors=a.response.errors||[a.message]}).finally(function(){d.scrollTo(0,0);f.saving=!1})))};this.back=function(){f.proposed||c.track("lyrics_edit_proposals:cancel_proposal",{properties:{edit_format:"plain_text"}});
d.history.back()};this.toggle_preview=function(){f.previewing=!f.previewing;if(f.previewing){var b=a.diff(f.editable.before,f.editable.markdown);f.diff_html=a.pretty_diff(b)}}}]});
angular.module("genius").component("lyricsEditProposalModeration",{bindings:{song:"<",lyrics_html:"<lyricsHtml",on_lyrics_update:"&onLyricsUpdate"},templateUrl:"lyrics_edit_proposal_moderation.html",controller:["LyricsEditProposalClient","LyricsEditing","SongClient","Tracking","Pusher","Session",function(a,b,c,d,f,e){var h=this;this.$onInit=function(){h.load();f.subscribe(h.song.pusher_channel,"lyrics-edits-updated",function(a){a.updater_id!==e.current_user.id&&h.load()})};this.$onChanges=function(a){a.lyrics_html&&
(h.editable=b.prepare_lyrics_for_editing(h.lyrics_html))};this.show=function(){d.track("lyrics_edit_proposals:view_proposals");h.showing=!0};this.close=function(){h.showing=!1;_.some(h.lyrics_edit_proposals,"_moderated")&&h.load()};this.load=function(){a.pending({song_id:h.song.id}).then(function(a){return h.lyrics_edit_proposals=a})};this.accept=function(a){var d=a.lyrics_edit_id;a=b.convert_editable_for_saving(a.editable);return c.save_lyrics(h.song,a,{lyrics_edit_id:d}).then(function(a){h.on_lyrics_update({lyrics_data:a})})};
this.pending_count=function(){return(h.lyrics_edit_proposals||[]).filter(function(a){return!a._moderated}).length}}]});
angular.module("genius").component("lyricsExportPreview",{bindings:{song:"<"},templateUrl:"lyrics_export_preview.html",controller:["SongClient","Session",function(a,b){var c=this;this.can_perform=function(a){return b.has_permission(a,c.song)};this.should_show_modal=function(){return c._show_modal};this.show_modal=function(){c._show_modal=!0;a.preview_lyrics_for_export(c.song.id).then(function(a){return c.preview_lyrics_for_export=a})};this.hide_modal=function(){c._show_modal=!1;c.preview_lyrics_for_export=
null}}]});
angular.module("genius").component("lyricsSyncEditor",{bindings:{id:"<modelId",instructions_url:"@instructionsUrl",go_to_home:"&goToHome"},templateUrl:"lyrics_sync_editor.html",controller:["$scope","$q","$immediate","BeforeUnloadCheck","LyricsSynchronizationClient","AppleAudioPlayback","Session","MusicKit",function(a,b,c,d,f,e,h,g){var k=this;this.position=0;this.current_line_index=-1;this.is_editing_timestamp=!1;this.$onInit=function(){f.get(k.id).then(function(a){k.lyrics_synchronization=a;k.auto_advance=
!k.can("edit");k.sync_and_staff_approve=k.can("sync_and_staff_approve")})};var m=_.noop;a.$watch("$ctrl.lyrics_synchronization.external_song.id",function(a){m();if(a){var b=k.lyrics_synchronization.external_song;"apple"===b.provider&&g.load().then(function(a){a=a.getInstance;k.media_player=new e({instance:a(),external_song:b});m=k.media_player.$on("state",l)})}});this.start_or_advance=function(){if(!k.media_player.state.is_playing)return k.media_player.api.play();if(!(k.current_line_index>=k.lyrics_synchronization.lines.length-
1)){var a=k.current_line_index;k.current_line_index=k.lyrics_synchronization.next_visible_line_index_after_index(k.current_line_index);if(k.can("edit"))try{k.lyrics_synchronization.apply_timestamp_to_line_at_index(k.position,k.current_line_index)}catch(b){k.error=b,k.current_line_index=a}}};this.seek_to_index=function(a){var b=k.lyrics_synchronization.timestamp_for_line_at_index(a);(b||0===b)&&k.media_player.api.seek_to_position(b);k.auto_advance||(k.current_line_index=a)};this.seek_to_index_and_play=
function(a){k.seek_to_index(a)};this.can=function(a){return k.lyrics_synchronization&&h.has_permission(a,k.lyrics_synchronization)};this.in_order_validator_for_index=function(a){return function(b){return b||0===b?b>k.lyrics_synchronization.max_timestamp_before_index(a)&&b<k.lyrics_synchronization.min_timestamp_after_index(a):!0}};this.move_to_index_for_position=function(a){this.current_line_index=this.lyrics_synchronization.line_index_for_position(a)};this.current_line=function(){return k.lyrics_synchronization.lines[k.current_line_index]};
this.edit_line_lyrics_at_index=function(a){k.media_player.api.pause();k.lyrics_synchronization.lines[a]._editing_lyrics=k.can("edit")};this.after_edit_line_lyrics_at_index=function(a){k.lyrics_synchronization.lines[a]._editing_lyrics=!1;k.lyrics_synchronization.mark_dirty()};this.edit_line_timestamp_at_index=function(a){k.media_player.api.pause();k.lyrics_synchronization.lines[a]._editing_time=k.can("edit");k.is_editing_timestamp=!0};this.after_edit_line_timestamp_at_index=function(a){k.lyrics_synchronization.lines[a]._editing_time=
!1;k.lyrics_synchronization.mark_dirty();k.seek_to_index_and_play(a);k.is_editing_timestamp=!1};var l=function(a,b){k.position=b.position;k.auto_advance&&k.move_to_index_for_position(k.position)};this.last_action=b.when();var n=function(a,d){d=d||{};return function(){for(var e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];k.saving=!0;k.last_action=k.last_action.finally(function(){return Reflect.apply(a,k,e).then(function(a){d.retain_error||(k.error=null);k.lyrics_synchronization._dirty=null;_.assign(k.lyrics_synchronization,
_.omit(a,"lines"));a.lines&&k.lyrics_synchronization.lines?a.lines.forEach(function(a,b){_.assign(k.lyrics_synchronization.lines[b],a)},k):k.lyrics_synchronization.lines=a.lines}).catch(function(a){k.error=a;c(k.load.bind(k));return b.reject(a)}).finally(function(){k.saving=!1})});return k.last_action}};this.load=n(function(){return f.get(k.id)},{retain_error:!0});this.submit=n(function(a,b){return f.submit(a,k.lyrics_synchronization,b)});this.submit_sync=n(function(){return f.submit_sync(k.lyrics_synchronization,
{sync_and_staff_approve:k.sync_and_staff_approve})});this.update_state=n(function(a){return f.update_state(a,k.lyrics_synchronization)});this.save=n(function(){return f.save(k.lyrics_synchronization)});this.autosave=_.debounce(this.save,1E3);this.revert_action=n(function(a){return f.revert_action(a,k.lyrics_synchronization)});this.skip=n(function(a){return f.skip(a,k.lyrics_synchronization)});this.change_song=n(function(a){return f.change_song({song_id:a.id,lyrics_synchronization_id:k.id}).then(function(a){k.reassociating=
null;return a})});this.preview_with_song=function(a){return f.preview({song_id:a.id,external_song_id:_.get(k.lyrics_synchronization,"external_song.id")}).then(function(a){k.error=null;k.lyrics_synchronization=a}).catch(function(a){k.error=a;return k.error})};this.cancel_reassociation=function(){k.reassociating=!1;k.load()};var r=function(){return k.lyrics_synchronization._dirty};d.add(r);a.$on("$destroy",function(){d.remove(r);k.media_player.api.pause()});f.$on("edit",function(){k.error=null;k.can("edit")&&
(k.can("approve")||k.can("staff_approve"))&&k.autosave()})}]});
angular.module("genius").component("lyricsSyncHome",{bindings:{instructions_url:"@instructionsUrl"},templateUrl:"lyrics_sync_home.html",controller:["$rootScope","$location","$window","LyricsSynchronizationClient",function(a,b,c,d){var f=this;a.$on("$locationChangeStart",function(){f.id=null;f.tasks=null;f.checked_out=null;f.navigating=!0});a.$on("$locationChangeSuccess",function(){if("/lyrics_synchronizations/home"===b.path())f.load();else{f.id=parseInt(b.path().replace(/^\/lyrics_synchronizations\//,
""));if(!f.id)return b.path("/lyrics_synchronizations/home");f.navigating=null}});this.load=function(){var a=this;d.home().then(function(b){_.assign(a,b);a.navigating=null})};this.start=function(a){d.start(a).then(e)};this.check_out=function(a){d.submit("check_out",a).then(e)};this.check_in=function(a){d.submit("check_in",a).then(this.load.bind(this))};this.navigate_to=function(a){b.path("/lyrics_synchronizations/"+a)};var e=function(a){"pristine"===a.state&&c.open("/songs/"+a.song_id);b.path("/lyrics_synchronization/"+
a.id)}}]});
angular.module("genius").component("manageChartItem",{bindings:{type:"<",id:"<"},templateUrl:"manage_chart_item.html",controller:["ChartClient",function(a){var b=this;this.$onInit=function(){b.loading=!0;a.state(b.type,b.id).then(function(a){b.excluded=a.excluded;b.loading=!1})};this.toggle_excluded=function(){b.loading=!0;(b.excluded?a.unexclude(b.type,b.id).then(function(){return b.excluded=!1}):a.exclude(b.type,b.id).then(function(){return b.excluded=!0})).finally(function(){return b.loading=!1})}}]});
angular.module("genius").component("manageRoles",{templateUrl:"manage_roles.html",bindings:{user:"<"},controller:["Session","UserClient","Reversible","AppConfig",function(a,b,c,d){var f=this;this.user_authority_roles=d.user_authority_roles;this.can_toggle=function(b){return a.has_permission("toggle_"+b+"_status",f.user)};this.has_role=function(a){return _.includes(f.user.roles_for_display,a)};this.role_grant=function(a){return _.find(f.user.role_grants,function(b){return b.role===a})};this.errors=
{};this.grant=function(a,d){if(window.confirm(I18n.t(d?"role.actions.confirm_grant":"role.actions.confirm_remove",{role:a,login:f.user.login}))){f.errors={};var g,k;d?(g=f.user.roles_for_display.concat(a),k=b.add_role(f.user.id,a)):(g=_.without(f.user.roles_for_display,a),k=b.remove_role(f.user.id,a));var m=c.modify(f.user,{roles_for_display:g});k.then(function(a){_.assign(f.user,a.user)}).catch(function(b){m();f.errors[a]=b.errors})}}}]});
angular.module("genius").component("marqueeAd",{templateUrl:"marquee_ad.html",bindings:{name:"@"},controller:["Cookies","$scope","$element","AppConfig","$window","IntersectionObserver",function(a,b,c,d,f,e){var h=this,g=.4+.01,k=function(a){c.find(".celtra-ad-inline-host iframe")[0].contentWindow.postMessage(a,"*")};this.$onInit=function(){h.permanently_collapsed=!1;h.marquee_ready=!1};this.$onDestroy=function(){return h.observer&&h.observer.disconnect()};this.on_filled=function(a){h.creative_id=
a.creativeId;var b=function(a){if(a.origin==="https://"+d.canonical_domain)if("marqueeLoaded"===a.data)h.on_marquee_loaded();else if("marqueeReady"===a.data)h.on_marquee_ready()};f.addEventListener("message",b);return function(){return f.removeEventListener("message",b)}};this.on_marquee_loaded=function(){var b=Boolean(a.get("marquee_seen_"+h.creative_id));k({type:"userData",seen:b});b?h.permanently_collapsed=!0:m()};var m=function(){a.put("marquee_seen_"+h.creative_id,1,{expires:1});var c=_.debounce(function(){k({type:"permanentlyCollapse"});
b.$applyAsync(function(){return h.permanently_collapsed=!0})},1E3);h.observer=new e(function(a){a[0].isIntersecting?c.cancel():c()},{threshold:g});var d=document.querySelector(".marquee_ad");h.observer.observe(d)};this.on_marquee_ready=function(){h.marquee_ready=!0;b.$apply()}}]});
angular.module("genius").component("mediaPlayer",{templateUrl:"media_player.html",bindings:{media_sources:"<mediaSources",sticky_offset:"<stickyOffset",on_edit:"&onEdit",can_edit:"<canEdit"},controller:["Tracking","mobile_device",function(a,b){var c=this;this.$onInit=function(){c.media_player={}};this.$onChanges=function(a){if(a.media_sources){a=void 0;for(var b=0,e=["youtube","soundcloud"];b<e.length&&!(a=_.find(c.media_sources,{provider:e[b]}));b++);_.get(a,"url")!==_.get(c.media,"url")&&(c.played_once=
!1,c.media=a,a||(c.media_player={}))}};this.play=function(){c.played_once?c.media_player.api.playpause():(c.media_player.api.load_media(),"youtube"===c.media.provider&&b||c.media_player.api.playpause(),"youtube"===c.media.provider?a.track("Play featured video",{properties:{"Video provider":c.media.provider}}):a.track("Play audio",{properties:{"Audio provider":c.media.provider}}),c.played_once=!0)}}]});
angular.module("genius").component("mergeArtistForm",{templateUrl:"merge_artist_form.html",bindings:{artist:"<"},controller:["Session","ArtistClient",function(a,b){this.artist_name_to_merge_with="";this.can=function(b,d){return a.has_permission(b,d)};this.merge_artist=function(){this.show_warning?(delete this.errors,delete this.artist_merge_complete,this.saving||(this.saving=!0,b.merge(this.artist.id,this.artist_name_to_merge_with).then(function(){this.artist_merge_complete=!0}.bind(this)).catch(function(a){this.errors=
a.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))):this.show_warning=!0}.bind(this)}]});
angular.module("genius").component("messagesInbox",{bindings:{opened:"<",decrement_unread_count:"&decrementUnreadCount",embed:"<"},templateUrl:"messages_inbox.html",controller:["Attempt","InboxClient","Tracking","$window",function(a,b,c,d){var f=this;this.attempt_close=function(b){a.close_form(b,function(){f.composing=!1;f.on_modal_close()})};var e=function(){f.refresh_at=Date.now()};this.$onInit=function(){b.on_update("messages_inbox",e)};this.$onChanges=function(a){if(a.opened){var b=a.opened.previousValue;
!a.opened.currentValue||b&&!a.opened.isFirstChange()||c.track("Inbox Open",{inbox_name:"messages_inbox"})}};this.on_conversation_read=function(a){f.decrement_unread_count({decrement:a});f.embed&&d.parent.postMessage({type:"decrement_unread_messages_count",decrement:a},"*")};this.on_modal_open=function(){f.modal_open=!0;if(f.embed){var a=d.frameElement.parentElement;a.style.height=d.parent.innerHeight+"px";var b=a.offsetHeight;a.style.height="auto";f.modal_dimensions={top:a.scrollTop,height:Math.min(Math.max(a.offsetHeight,
800),b)-32,width:a.offsetWidth-32}}};this.on_modal_close=function(){return f.modal_open=!1}}]});angular.module("genius").component("miniAlbumCard",{bindings:{album:"<object",variants:"<"},templateUrl:"mini_album_card.html"});angular.module("genius").component("miniAnnotatableCard",{bindings:{object:"<",variants:"<"},templateUrl:"mini_annotatable_card.html"});angular.module("genius").component("miniArticleCard",{bindings:{article:"<object",variants:"<"},templateUrl:"mini_article_card.html"});
angular.module("genius").component("miniArtistCard",{bindings:{artist:"<object",variants:"<"},templateUrl:"mini_artist_card.html"});
angular.module("genius").component("miniSongCard",{bindings:{song:"<object",search_highlights:"<searchHighlights",artist:"<",number:"<",variants:"<"},templateUrl:"mini_song_card.html",controller:["string_to_symbol_array",function(a){var b=this,c=function(b){var c=b.value,e=[],h=0;b.ranges.forEach(function(b){var d;d=h;var m=b.start;d=a(c).slice(d,m).join("");var m=b.start,l=b.end,m="<span>"+a(c).slice(m,l).join("")+"</span>";e.push(d);e.push(m);h=b.end});b=c.split("").slice(h).join("");e.push(b);
return e.join("")};this.$onChanges=function(a){if(a.artist||a.song)b.non_primary_artist_present=b.artist&&b.artist.id!==b.song.primary_artist.id;a.search_highlights&&(a=_.keyBy(b.search_highlights,"property").lyrics)&&(b.excerpt_with_markup=c(a))}}]});angular.module("genius").component("miniUserCard",{bindings:{user:"<object",variants:"<"},templateUrl:"mini_user_card.html"});angular.module("genius").component("miniVideoCard",{templateUrl:"mini_video_card.html",bindings:{video:"<object"}});
angular.module("genius").component("missingMetadataForm",{templateUrl:"missing_metadata_form.html",bindings:{missing_params:"<missingParams",object:"<",type:"@",yields_api:"&yieldsApi",yields_iq:"&yieldsIq",on_pending_event:"&onPendingEvent",placeholder:"@",source:"@"},controller:["$scope","SongClient","Tracking","Reversible",function(a,b,c,d){var f=this,e=["autocomplete_artists","autocomplete_albums"],h=function(a,b){return e.includes(a)?{reset:function(){return f.changes[b]=[]},changes_count:function(){return f.changes[b].length}}:
{reset:function(){return f.changes[b]=null},changes_count:function(){return Number(!_.isEmpty(f.changes[b]))}}};this.$onInit=function(){f.params=_.map(f.missing_params,h);f.changes={};f.reset_changes();f.iq_api=_.cloneDeep(f.object.current_user_metadata.iq_by_action);f.yields_iq({iq_api:f.iq_api});a.$watch(function(){return _.sum(_.invokeMap(f.params,"changes_count"))},function(a){return f.iq_api.edit_metadata.primary.multiplier=_.max([a,1])});f.yields_api({api:{edit:function(){return f.show_full_form=
!0}}})};this.submit=function(){f.errors=[];f.saving=!0;var a=d.modify(f.object,f.changes),e;switch(f.type){case "song":e=b.update(f.object.id,f.changes),f.on_pending_event({event:"UserEditMetadataSong",result:e})}e.then(function(){c.track("Metadata Edit",{Source:f.source})}).catch(function(b){a();f.reset_changes();f.errors=b.errors}).finally(function(){f.saving=!1})};this.cancel=function(){f.reset_changes();f.show_full_form=!1;f.errors=[]};this.reset_changes=function(){_.invokeMap(f.params,"reset")}}]});
angular.module("genius").component("notificationInbox",{bindings:{inbox_name:"@inboxName",abbreviate_after:"@abbreviateAfter",sync_count_to_title:"<syncCountToTitle",open_inboxes:"<openInboxes"},templateUrl:"notification_inbox.html",controller:["$sce","Pusher","Session","$scope","$window","AppConfig","mobile_device",function(a,b,c,d,f,e,h){var g=this;this.$onInit=function(){g.src=a.trustAsResourceUrl("/inboxes/"+g.inbox_name+"?embed=true");b.subscribe(c.current_user.pusher_channel,"inbox-marked-read",
function(a){a.inbox===g.inbox_name&&"messages_inbox"!==g.inbox_name&&g.unread_count_api.clear()});f.addEventListener("message",function(a){a.origin==="https://"+e.canonical_domain&&"decrement_unread_messages_count"===_.get(a.data,"type")&&"messages_inbox"===g.inbox_name&&d.$applyAsync(function(){return g.unread_count_api.decrement(a.data.decrement)})})};this.toggle=function(a){h||(a.preventDefault(),g.open_inboxes[g.inbox_name]=!g.open_inboxes[g.inbox_name],g.open_inboxes[g.inbox_name]&&(g.loading=
!0))}}]});angular.module("genius").component("otherUsersWithIp",{templateUrl:"other_users_with_ip.html",bindings:{user:"<"},controller:["PagedDataFeed","UserClient",function(a,b){var c=this;this.$onChanges=function(d){d.user&&(c.infinite_scroll_data=new a(_.partial(b.other_users_with_ip,c.user.id),"other_users_with_ip"))}}]});
angular.module("genius").component("pageTransitionOverlay",{template:'\n    <div class="page_transition_overlay" ng-if="$ctrl.transitioning()"></div>\n  ',controller:["PageTransition",function(a){this.transitioning=function(){return a.transitioning}}]});
angular.module("genius").component("paginatedAccomplishments",{bindings:{user:"<"},templateUrl:"paginated_accomplishments.html",controller:["CursoredDataFeed","AccomplishmentClient","UserClient","Reversible","Session",function(a,b,c,d,f){var e=this;this.$onInit=function(){var a;Reflect.defineProperty(e,"visibility",{get:function(){return a},set:function(b){a=b;this.update_src()}});e.visibility="visible";e.filter_options=[{i18n_key:"manage_accomplishments.all",value:"all"},{i18n_key:"manage_accomplishments.visible",
value:"visible"},{i18n_key:"manage_accomplishments.hidden",value:"hidden"}]};this.can=function(a){return f.has_permission(a,e.user)};this.toggle_managing=function(){e.managing=!e.managing;e.visibility=e.managing?"all":"visible"};this.update_src=function(){e.scrollable_data=new a(_.partial(c.accomplishments,e.user.id),"accomplishments",{visibility:e.visibility,per_page:10})};this.toggle=function(a){var c=d.modify(a,{hidden:!a.hidden});b.update(a.id,{accomplishment:{hidden:a.hidden}}).then(function(b){_.assign(a,
b.accomplishment)}).catch(function(){c()})}}]});angular.module("genius").component("paginatedLeaderboard",{bindings:{source:"<",per_page:"<perPage",on_empty:"&onEmpty",extra_info:"@extraInfo"},templateUrl:"paginated_leaderboard.html",controller:["PagedDataFeed",function(a){var b=this;this.$onChanges=function(c){if(c.source||c.per_page)b.scrollable_data=new a(b.source,"leaderboard",{per_page:b.per_page})}}]});
angular.module("genius").component("profileAdminPane",{bindings:{user:"<",view_errors_link:"<viewErrorsLink"},templateUrl:"profile_admin_pane.html",controller:["Session",function(a){var b=this;this.$onInit=function(){b.managing_accomplishments=!1};this.$onChanges=function(a){a.user&&(b.can_moderate=b.can("toggle_penalty_status")||b.can("mark_spam")||b.can("mark_ham")||b.can("mass_delete_unreviewed_activity")||b.can("mass_delete_votes"))};this.can=function(c){return a.has_permission(c,b.user)}}]});
angular.module("genius").component("profileAllActivity",{templateUrl:"profile_all_activity.html",bindings:{user:"<",artist:"<"},controller:["UserClient","ArtistClient","PagedDataFeed","Session",function(a,b,c,d){var f=this;this.$onChanges=function(e){f.activity_types=[];d.has_permission("view_activity_stream",f.user)&&f.activity_types.push({activity_type:"user",label:f.user.name+"'s Activity",profile_activity_scrollable_data:new c(_.partial(a.activity_line_items,f.user.id),"line_items",{text_format:"html"})});
d.has_permission("view_activity_stream",f.artist)&&f.activity_types.push({activity_type:"artist",label:"Activity on "+f.artist.name+"'s songs",profile_activity_scrollable_data:new c(_.partial(b.activity_line_items,f.artist.id),"line_items",{text_format:"html"})});f.activity_type=f.activity_types[0]}}]});
angular.module("genius").component("profileAnnotation",{bindings:{annotation:"<",referent:"<",variants:"<"},templateUrl:"profile_annotation.html",controller:["$scope",function(a){a.$watchGroup(["$ctrl.annotation.community","$ctrl.annotation.cosigned_by"],function(){this.referent_display_mode=this.annotation.community&&0===this.annotation.cosigned_by.length?"default":"green"}.bind(this));a.$on("annotation_deleted",function(a,c,d){c===this.annotation&&d.then(function(){this.deleted=!0}.bind(this))}.bind(this))}]});
angular.module("genius").component("profileArtistDescriptionPreview",{templateUrl:"profile_artist_description_preview.html",bindings:{artist:"<",top_scholar:"<topScholar"}});
angular.module("genius").component("profileArtistPane",{bindings:{artist:"<"},templateUrl:"profile_artist_pane.html",controller:["Session","ArtistClient",function(a,b){var c=this;this.$onInit=function(){c.user_signed_in=a.user_signed_in;c.show_report_abuse=a.has_feature("report_abuse")};this.$onChanges=function(a){a.artist&&(c.twitter_url="https://twitter.com/"+c.artist.twitter_name,c.facebook_url="http://www.facebook.com/"+c.artist.facebook_name,c.instagram_url="http://instagram.com/"+c.artist.instagram_name)};
this.get_leaderboard_page=function(a){return b.load_leaderboard(c.artist.id,a)};this.can=function(b,c){return a.has_permission(b,c)};this.change_state=function(a){return c.state=a}}]});
angular.module("genius").component("profileContributionsAnnotations",{templateUrl:"profile_contributions_annotations.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onInit=function(){a.limit=1};this.$onChanges=function(b){b.contributions_group&&(a.annotations=a.contributions_group.contributions)}}});
angular.module("genius").component("profileContributionsAnswers",{templateUrl:"profile_contributions_answers.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onChanges=function(b){b.contributions_group&&(a.answers=a.contributions_group.contributions)}}});
angular.module("genius").component("profileContributionsArticles",{templateUrl:"profile_contributions_articles.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onChanges=function(b){b.contributions_group&&(a.article=a.contributions_group.contributions[0])}}});
angular.module("genius").component("profileContributionsComments",{templateUrl:"profile_contributions_comments.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onInit=function(){a.limit=1};this.$onChanges=function(b){b.contributions_group&&(a.comments=a.contributions_group.contributions,a.commentable=a.comments[0].commentable)}}});
angular.module("genius").component("profileContributionsGroup",{templateUrl:"profile_contributions_group.html",bindings:{user:"<",contributions_group:"<contributionsGroup"}});angular.module("genius").component("profileContributionsPyongs",{templateUrl:"profile_contributions_pyongs.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onChanges=function(b){b.contributions_group&&(a.pyong=a.contributions_group.contributions[0])}}});
angular.module("genius").component("profileContributionsQuestions",{templateUrl:"profile_contributions_questions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onChanges=function(b){b.contributions_group&&(a.questions=a.contributions_group.contributions)}}});
angular.module("genius").component("profileContributionsTranscriptions",{templateUrl:"profile_contributions_transcriptions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var a=this;this.$onChanges=function(b){b.contributions_group&&(a.song=a.contributions_group.contributions[0])}}});
angular.module("genius").component("profileFollowers",{bindings:{artist:"<",user:"<",follows:"<"},templateUrl:"profile_followers.html",controller:["PagedDataFeed","UserClient",function(a,b){var c=this;this.$onChanges=function(a){a.user&&(c.scrollable_data=c.get_scrollable_data())};this.get_scrollable_data=function(){if(c.user&&c.follows)return new a(_.partial(b.load_followed_users,c.user.id),"followed_users");if(c.user&&!c.follows)return new a(_.partial(b.load_followers_by_user,c.user.id),"followers");
if(!c.user)return new a(_.partial(b.load_followers_by_artist,c.artist.id),"followers")}}]});
angular.module("genius").component("profileIdentity",{templateUrl:"profile_identity.html",bindings:{artist:"<",user:"<"},controller:[function(){var a=this;this.alternate_name_limit=2;this.user_has_more_than_one_role=function(){return a.user&&1<a.user.roles_for_display.length};this.more_alternate_names_to_show=function(){return a.artist.alternate_names.length>a.alternate_name_limit};this.show_all_alternate_names=function(){a.alternate_name_limit=Infinity}}]});
var USER_ACTIVITY_FILTER_OPTIONS=[{i18n_key:"contribution_type.all_activity.name",filter:null,sort:[]},{i18n_key:"contribution_type.annotations.name",filter:"annotations",sort:[{i18n_key:"contribution_type.annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.annotations.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.pyongs.name",filter:"pyongs",sort:[]},{i18n_key:"contribution_type.transcriptions.name",filter:"transcriptions",sort:[{i18n_key:"contribution_type.transcriptions.sort.popularity",
value:"popularity"},{i18n_key:"contribution_type.transcriptions.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.comments.name",filter:"comments",sort:[]},{i18n_key:"contribution_type.questions_and_answers.name",filter:"questions_and_answers",sort:[]},{i18n_key:"contribution_type.articles.name",filter:"articles",sort:[{i18n_key:"contribution_type.articles.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.articles.sort.chronologically",value:"chronologically"}]},
{i18n_key:"contribution_type.unreviewed_annotations.name",filter:"unreviewed_annotations",sort:[{i18n_key:"contribution_type.unreviewed_annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.unreviewed_annotations.sort.chronologically",value:"chronologically"}]}];
angular.module("genius").component("profilePage",{templateUrl:"profile_page.html",bindings:{artist:"<",user:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",artist_metadata_questions:"<artistMetadataQuestions",top_scholar:"<topScholar",top_accomplishment:"<topAccomplishment",pinned_annotations:"<pinnedAnnotations",artist_has_more_songs:"<artistHasMoreSongs",show_artist_pane:"<showArtistPane",preloaded_user_activity:"<preloadedUserActivity",initial_next_user_activity_timestamp:"<initialNextUserActivityTimestamp",
$router:"<",current_user_metadata:"<currentUserMetadata"},controller:["CursoredDataFeed","UserClient","ArtistClient","$rootRouter","Session","ScrollPoint","Tracking","mobile_device","VideoRegistry","Attempt",function(a,b,c,d,f,e,h,g,k,m){var l=this;this.$onInit=function(){l.attempt_close=m.close_form;l.user_activity_sort_options_by_filter=USER_ACTIVITY_FILTER_OPTIONS;l.logged_in=f.user_signed_in;l.show_report_abuse=f.has_feature("report_abuse");l.user&&l.filter_activity_by(l.user_activity_sort_options_by_filter[0]);
var a={};l.artist?(a["Artist ID"]=l.artist.id,k.register_page(l.artist,g?"mobile_artist_page":"desktop_artist_page")):a["Profile User ID"]=l.user.id;h.delayed_track("Profile Page Load",a)};this.$onChanges=function(a){if(a.user||a.artist)l.community_artist=l.artist&&l.user&&!l.user.is_verified;a.user&&(l.can_message_user=l.can("send_message",l.user),l.can_view_activities_in_real_time=l.logged_in&&l.user,l.can_edit_artist_profile=l.can("edit_anything",l.artist),l.can_edit_user_profile=l.can("edit",
l.user),l.can_edit_profile=l.can_edit_artist_profile||l.can_edit_user_profile,l.can_view_admin_info=l.can("view_admin_info",l.user),l.can_view_roles=l.can("view_roles",l.user),l.can_verify=l.can("toggle_verification_status",l.user),l.can_moderate_user=l.can("toggle_penalty_status",l.user)||l.can("mark_spam",l.user)||l.can("mark_ham",l.user)||l.can("mass_delete_unreviewed_activity",l.user)||l.can("mass_delete_votes",l.user),l.can_view_tracked_errors=l.can("view_tracked_errors",l.user),l.user&&(l.bugsnag_link=
"https://app.bugsnag.com/genius/genius/errors?"+("filters[event.since][0]=all&filters[user.id][0][value]="+l.user.id+"&filters[user.id][0][type]=eq")))};this.scroll_to=e.scroll_to;this.can=function(a,b){return f.has_permission(a,b)};this.filter_activity_by=function(c,d){l.filter_by_contribution_type=c;c.filter?(l.filter_by_contribution_type_sort=d||c.sort[0],l.user_contributions_scrollable_data=new a(_.partial(b.load_contributions,l.user.id,c.filter),"contribution_groups",{text_format:"html,markdown",
sort:l.filter_by_contribution_type_sort&&l.filter_by_contribution_type_sort.value,per_page:8})):l.user_contributions_scrollable_data=new a(_.partial(b.load_contributions,l.user.id,!1),"contribution_groups",{text_format:"html,markdown",per_page:8},l.initial_next_user_activity_timestamp)};this.filter_activity_by_type=function(a){l.filter_activity_by(_.find(l.user_activity_sort_options_by_filter,{filter:a}));l.scroll_to("user_activity")};this.display_as_artist=function(){return!(!l.artist||l.user&&!l.user.is_verified)};
this.display_as_user=function(){return!l.display_as_artist()};this.header_url=function(){return l.display_as_artist()?l.artist.header_image_url:l.user.header_image_url};this.avatar_url=function(){return l.display_as_artist()?l.artist.image_url:l.user.avatar.medium.url};var n=function(a){l.display_as_artist()?d.navigate(["ArtistPage",{},a?"ProfileBioPage":"ProfilePage",{slug:c.get_slug(l.artist)}]):d.navigate([a?"UserBioPage":"UserPage",{slug:b.get_slug(l.user)}])};this.open_description=function(){n(!0)};
this.close_description=function(){n(!1)};this.change_state=function(a){return l.state=a};this.close_conversation_modal=function(){return l.show_conversation_modal=!1}}]});angular.module("genius").component("profileUserDescriptionPreview",{templateUrl:"profile_user_description_preview.html",bindings:{user:"<",top_accomplishment:"<topAccomplishment"}});
angular.module("genius").component("profileUserPane",{bindings:{user:"<",on_statistics_select:"&onStatisticsSelect"},templateUrl:"profile_user_pane.html",controller:["Tracking",function(a){var b=this;this.change_state=function(c){b.state=c;a.track("Profile Tab Open",{tab_name:c,display_as_artist:!1})}}]});
angular.module("genius").component("question",{bindings:{question:"<",variants:"<",move_question:"&?moveQuestion",featured:"<",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",yields_api:"&yieldsApi"},templateUrl:"question.html",controller:["Reversible","QuestionClient","Session",function(a,b,c){var d=this;this.$onInit=function(){d.yields_api({api:{answer:function(){d.answerApi.start_editing()},archive:d.archive}})};this.can=function(a,b){return c.has_permission(a,b)};this.is_pinned=function(){return"pinned"===
d.question.state};this.is_verified=function(){return d.question.answer&&d.question.answer.answer_source};this.archive=function(){if(!confirm("Are you sure?"))return!1;d.question._deleted=!0;var a=d.change_state("archive");d.on_pending_event({event:"UserArchiveQuestion",result:a});return a.catch(function(){Reflect.deleteProperty(d.question,"_deleted")})};this.pin=function(){var b=a.modify(d.question,{state:"pinned"});return d.change_state("pin").catch(b)};this.unpin=function(){var b=a.modify(d.question,
{state:"pending"});return d.change_state("unpin").catch(b)};this.change_state=function(a){return b.create_if_not_exists(d.question).then(function(){return b.change_state(d.question,a)})};this.start_editing=function(){d.question._editing=_.defaults(d.question._editing||{},{_form_visible:!0,body:d.question.body})};this.move=function(a){this.move_question({direction:a,question:this.question})};this.cancel_editing=function(){Reflect.deleteProperty(d.question,"_editing")};this.finish_editing=function(){if(!d.disable_saving_with){d.disable_saving_with=
"Saving";var c=a.modify(d.question,{"_editing._form_visible":!1});b.update(d.question,{question:d.question._editing}).then(d.cancel_editing.bind(d)).catch(c).finally(function(){d.disable_saving_with=!1})}}}]});
angular.module("genius").component("questionForm",{bindings:{questionable:"<",on_new_question:"&onNewQuestion"},templateUrl:"question_form.html",controller:["Session","$scope","QuestionClient",function(a,b,c){var d=this;this.user_signed_in=a.user_signed_in;var f=function(b){d.question={_new:!0,author:a.current_user,author_name:b&&b.author_name,author_email:b&&b.author_email,body:""}};this.save=function(){if(!d.saving){d.saving=!0;a.user_signed_in||(d.question.anonymous_user={name:d.question.name});
var e=d.question;f();b.question_form.$setPristine();c.create(d.questionable._type,d.questionable.id,e).then(function(){d.saving=!1;b.question_form.$setPristine();d.thank_you=!0;d.on_new_question({question:e});f(e);d.error={}}).catch(function(a){d.error=a;d.question=e;d.saving=!1})}}}]});
angular.module("genius").component("questionList",{bindings:{pinned_questions:"<pinnedQuestions",default_questions:"<defaultQuestions",featured_question:"<featuredQuestion",pending_question_count:"<pendingQuestionCount",variants:"<",questionable:"<"},templateUrl:"question_list.html",controller:["QuestionClient","PagedDataFeed","Session",function(a,b,c){var d=this,f={state:"pending"};this.$onChanges=function(e){if(e.default_questions||e.pinned_questions)d.questions=_([]).concat(d.default_questions,
d.pinned_questions).compact().value(),d.monetized_question_ids=d.pinned_questions.map(function(a,b){return{id:a.id,index:b}}).filter(function(a){a=a.index;return 0===a%2&&a<d.pinned_questions.length-1}).map(function(a){return a.id});e.featured_question&&d.featured_question&&"pinned"!==d.featured_question.state&&d.questions.push(d.featured_question);e.variants&&(d.variants&&d.variants.answered&&(f.answered=d.variants.answered),d.scrollable_data=new b(_.partial(a.index,d.questionable._type,d.questionable.id),
"questions",f));e.pending_question_count&&(d.has_next=d.pending_question_count?d.scrollable_data.has_next:function(){return!1});d.can_create_question=c.has_permission("create_question",d.questionable)};this.sorting_predicates=[function(a){return["default","pinned","pending","archived"].indexOf(a.state)},"pin_order"];this.move_question=function(b,c){var f;"up"===b?f=_(d.questions).filter(function(a){return a.pin_order&&a.pin_order<c.pin_order}).sortBy("pin_order").reverse().take(2).thru(function(a){return[a[1],
a[0]]}):"down"===b&&(f=_(d.questions).filter(function(a){return a.pin_order&&a.pin_order>c.pin_order}).sortBy("pin_order").take(2).thru(function(a){return[a[0],a[1]]}));f=d.move_question_between(c,f.get(0),f.get(1));a.move(c,b).catch(f)};this.move_question_between=function(a,b,c){var d;b&&c?d=(b.pin_order+c.pin_order)/2:c?d=c.pin_order/2:b&&(d=b.pin_order+1);var f=a.pin_order;a.pin_order=d;return function(){a.pin_order=f}};this.load_more=function(){d._loading=!0;d.scrollable_data.next().then(function(a){var b;
a=_.reject(a,d.is_featured_question,d);d.pending_question_count-=a.length;(b=d.questions).push.apply(b,a)}).finally(function(){d._loading=!1})};this.is_featured_question=function(a){return d.featured_question&&d.featured_question.id===a.id};this.is_monetized=function(a){return d.monetized_question_ids.includes(a.id)}}]});
angular.module("genius").component("reasonsToggle",{bindings:{reasonChanged:"&"},templateUrl:"reasons_toggle.html",controller:["AppConfig",function(a){this.comment_reasons=a.comment_reasons;this.comment_reasons_help_url=a.comment_reasons_help_url;this.selectedReason="";this.change_reason=function(a){this.selectedReason===a?delete this.selectedReason:this.selectedReason=a;this.reasonChanged({reason:this.selectedReason})}}]});
angular.module("genius").component("recentSignupsPage",{templateUrl:"recent_signups_page.html",controller:["UserClient","Attempt","TimestampedDataFeed","I18n",function(a,b,c,d){var f=function(b,c){c.marking_spam_state=!0;a.update_spam_state(c.user.id,{state:b}).then(function(){c.marked_spam_state=!0}.bind(this)).finally(function(){delete c.marking_spam_state})}.bind(this);this.mark=function(a,c){b.admin_action(function(){f(a,c)},d.t("mark_"+a+".confirm"))};this.filter_by_spam_state=function(b){this.filtering_spam_state!==
b&&(this.filtering_spam_state=b,this.recent_signups_scrollable_data=new c(_.partial(a.load_recent_signups,"unclassified_spam_state"===b?"":b),"user_spam_evaluations"))};this.filter_by_spam_state("unclassified_spam_state")}]});
angular.module("genius").component("recirculatedContent",{templateUrl:"recirculated_content.html",bindings:{song:"<",stories:"<",placement:"@"},controller:["VideoPlacement","Session",function(a,b){var c=this;this.$onChanges=function(b){b.song&&c.song&&(c.video_placement=new a(c.song,c.placement))};this.can=function(a,c){return b.has_permission(a,c)}}]});
angular.module("genius").component("relevantVideos",{bindings:{object:"<",placement:"@",container_classes:"@containerClasses",on_filled:"&onFilled",on_no_video:"&onNoVideo",variants:"<"},templateUrl:"relevant_videos.html",controller:["VideoPlacement","Session",function(a,b){var c=this;this.$onChanges=function(b){b.object&&(c.video_placement=new a(c.object,c.placement,function(a){return a.length?c.on_filled({videos:a}):c.on_no_video()}))};this.can=function(a,c){return b.has_permission(a,c)}}]});
angular.module("genius").component("reportAbuse",{templateUrl:"report_abuse.html",bindings:{type:"@",reportable:"<object",inline:"<",onClick:"&onClick",buttonClass:"@",buttonText:"@"},controllerAs:"ctrl",controller:["AppConfig","ReportAbuseClient","gRecaptcha","Session",function(a,b,c,d){var f=this;(this.loggedIn=d.user_signed_in)||c.initialize({key:a.recaptcha_v3_site_key});this.reasons=[{value:"Harmful or abusive content",label:"harmful"},{value:"Hate speech or discrimination",label:"discrimination"},
{value:"Misleading information",label:"misleading"},{value:"Suspicious or Spam",label:"suspicious"},{value:"Other",label:"other"}];this.submitForm=function(a){void 0===a&&(a=null);return new Promise(function(c){b.reportAsAbusive(f.type,f.reportable.id,f.reason,f.details,a).then(function(){f.show_form=!1;f.reported_abuse=!0}).catch(function(){f.has_error=!0}).finally(c)})};this.submit=function(){f.report_abuse_form.$invalid||(f.submitting=!0,f.loggedIn?f.submitForm().then(function(){f.submitting=!1}):
c.execute({action:"report_abuse"}).then(f.submitForm).then(function(){f.submitting=!1}).catch(function(){f.has_error=!0}))}}]});
(function(a){var b="artist user artist_songs artist_albums top_scholar top_accomplishment pinned_annotations artist_has_more_songs preloaded_user_activity initial_next_user_activity_timestamp current_user_metadata".split(" "),c=/(?:)/,d=/.*/,f=_.curry(function(a,b){return new RegExp(""+b.source+a.source)}),e=_.curry(function(a,b){return new RegExp("(?:"+b.source+a.source+")?")}),h=function(a){return new RegExp("("+a.source+")")},g=e(d),k=function(a){var b=a.path,d=a.query,d=void 0===d?g:d;a=a.hash;
a=void 0===a?g:a;return new RegExp(["^",(void 0===b?g:b)(c).source,d(/\?/).source,a(/#/).source,"$"].join(""))};a.module("genius").component("routablePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/song-stories",name:"SongStoryGalleryPage",component:"songStoryGalleryPage",data:{type:"song_story_gallery"}},{path:"/albums/:artist_slug/:album_slug",name:"AlbumPage",component:"albumPage",data:{type:"album",clientRoutableOn:["desktop"]}},{path:"/album_cover_arts/:cover_art_id",name:"AlbumPageCoverArtFocus",
component:"albumPage",data:{type:"album_cover_art",clientRoutableOn:["desktop"]}},{path:"/a/:article_slug",name:"ArticlePage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/a/preview/:preview_key",name:"ArticleExternalPreviewPage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/articles/:article_id/preview",name:"ArticlePreviewPage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/shows/:slug",
name:"VideoListPage",component:"videoListPage",data:{type:"video_list",clientRoutableOn:["desktop"]}},{path:"/shows/:slug/:page",name:"VideoListPage",component:"videoListPage",data:{type:"video_list",clientRoutableOn:["desktop"]}},{path:"/videos/:slug",name:"VideoPage",component:"videoPage",data:{type:"video",clientRoutableOn:["desktop"]}},{path:"/search",name:"SearchResultsPage",component:"searchResultsPage"},{path:"/artists/...",name:"ArtistPage",component:"routableProfilePage"},{regex:k({path:f(h(/[^/?]*-(?:annotated|lyrics)/)),
query:e(h(d))}),serializer:function(a){return{urlPath:a.slug}},name:"SongPage",component:"songPage",data:{type:"song"}},{path:"/admin_tasks",name:"AdminTasksPage",component:"adminTasksPage"},{path:"/apple_match_evaluations/:evaluation_id",name:"AppleMatchEvaluationsPage",component:"appleMatchEvaluationsPage"},{regex:k({path:f(h(/\d+/))}),serializer:function(a){return{urlPath:a.referent_id}},name:"SongReferentFocus",component:"songPage",data:{type:"referent"}},{path:"/:slug",name:"UserPage",component:"routedPage",
data:{includeFromCache:b,component:"profilePage",include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"UserBioPage",component:"routedPage",data:{includeFromCache:b,component:"profilePage",include:{show_artist_pane:!0}}},{path:"/users/...",name:"UserRouter",component:"routableUserPage"}]})})(window.angular);
(function(a){var b="artist user artist_songs artist_albums artist_metadata_questions top_scholar top_accomplishment pinned_annotations artist_has_more_songs preloaded_user_activity initial_next_user_activity_timestamp current_user_metadata".split(" ");a.module("genius").component("routableProfilePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/:slug",name:"ProfilePage",component:"routedPage",data:{component:"profilePage",includeFromCache:b,include:{show_artist_pane:!1}}},{path:"/:slug/bio",
name:"ProfileBioPage",component:"routedPage",data:{component:"profilePage",includeFromCache:b,include:{show_artist_pane:!0}}}]})})(angular);(function(a){a.module("genius").component("routableUserPage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/recent_signups",name:"RecentSignupsPage",component:"routedPage",data:{component:"recentSignupsPage"}}]})})(angular);
angular.module("genius").component("routedPage",{template:["$rootRouter",function(a){for(var b=function(a){return a.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase().replace(/_/g,"-")},c=a.currentInstruction;null!=c.child;)c=c.child;var c=c.component.routeData.data,d=b(c.component),f=a.currentInstruction.component.params;return"<"+d+" "+_(c.includeFromCache).map(function(a){return b(a)+'="$ctrl.preloadedData.'+a+'"'}).join(" ")+" "+_(c.includeFromUrlParams).map(function(a){return b(a)+'="'+f[a]+
'"'}).join(" ")+" "+_(c.include||{}).map(function(a,c){return b(c)+'="'+a+'"'}).join(" ")+' $router="$ctrl.$router"></'+d+">"}],bindings:{$router:"<"},controller:["PreloadCache",function(a){this.preloadedData=a;this.$routerCanReuse=function(){return!1}}]});angular.module("genius").component("searchResultItem",{bindings:{hit:"<"},templateUrl:"search_result_item.html"});angular.module("genius").component("searchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"search_result_items.html"});
angular.module("genius").component("searchResultPaginatedSection",{bindings:{section_type:"@sectionType",search_text:"@searchText",on_load_next:"&onLoadNext"},templateUrl:"search_result_paginated_section.html",controller:["PagedDataFeed","SearchClient",function(a,b){var c=this;this.$onChanges=function(d){if(d.section_type||d.search_text)c.infinite_scroll_data=new a(_.partial(b.section,c.section_type,c.search_text),"hits",{},1,c.on_load_next)}}]});
angular.module("genius").component("searchResultSection",{bindings:{section:"<",on_show_more:"&onShowMore",limit_to:"<limitTo",variants:"<"},templateUrl:"search_result_section.html"});
angular.module("genius").component("searchResults",{bindings:{sections:"<",search_text:"<searchText",scroll_container_selector:"@scrollContainerSelector",on_filter:"&onFilter",on_sections_change:"&onSectionsChange",on_load_next:"&onLoadNext",on_animation_end:"&onAnimationEnd"},templateUrl:"search_results.html",controller:["$element","$immediate",function(a,b){var c=this;this.$onChanges=function(a){if(a.sections)c.on_sections_change()};this.has_results=function(){return 0<_.flatMap(c.sections,"hits").length};
var d=a.find(this.scroll_container_selector);d.length||(d=$(a).closest(this.scroll_container_selector));var f=a.find(".global_search-search_results"),e=a.find(".global_search-search_results-sections"),h,g;this.save_scroll_and_scroll_top=function(){b(function(){var b=a.find(".global_search-search_results-show_more");h=d.scrollTop();g=f.height();f.css({minHeight:g});e.css({position:"absolute",top:-h});b.css({position:"relative",top:0});d.scrollTop(0)})};this.restore_scroll=function(){var b=a.find(".global_search-search_results-show_more"),
c=d.scrollTop();b.css({position:"absolute",top:h-c});e.css({position:"relative",top:0});d.scrollTop(h)};e.on("animationend",function(){c.on_animation_end()})}]});
angular.module("genius").component("searchResultsPage",{bindings:{$router:"<"},templateUrl:"search_results_page.html",controller:["mobile_device","SearchClient","Tracking",function(a,b,c){var d=this;this.$routerOnActivate=function(f){c.track("Search Standalone Page View");if(_.isEmpty(f.params.q))d.sections=[];else return d.q=decodeURIComponent(f.params.q),b.multi(d.q,{per_page:a?3:5}).then(function(a){d.sections=a;d.has_results=0<_.flatMap(d.sections,"hits").length})}}]});
angular.module("genius").component("selectDropdown",{templateUrl:"select_dropdown.html",require:{ngModel:"?ngModel"},bindings:{options:"<",on_select:"&onSelect",variants:"<",selection:"<"},controller:["$scope",function(a){a.$watch("$ctrl.options",function(){this.selected=this.options[0]}.bind(this));a.$watch("$ctrl.selected",function(a){this.ngModel&&this.ngModel.$setViewValue(a)}.bind(this));a.$watch("$ctrl.selection",function(a){a&&(this.selected=a)}.bind(this));this.is_clickable=function(){return 1<
this.options.length}}]});
angular.module("genius").component("solidarityBanner",{templateUrl:"solidarity_banner.html",controller:["Cookies","AppConfig",function(a,b){var c=this,d="solidarity_flag_"+b.solidarity_text+"_"+b.solidarity_url;this.solidarity_text=b.solidarity_text;this.solidarity_url=b.solidarity_url;this.is_link_external=(new URL(b.solidarity_url)).host!==b.canonical_domain;this.$onInit=function(){var f=a.get(d);b.solidarity_text&&!f&&(c.visible=!0)};this.hide=function(){c.visible=!1;a.put(d,Date.now(),{path:"/"})}}]});
angular.module("genius").component("songActivityStream",{bindings:{songId:"<"},templateUrl:"song_activity_stream.html",controllerAs:"ctrl",controller:Object.assign(["$scope","SongClient",function(a,b){var c=this,d,f;this.load_next_page=function(){f||(f=b.line_items(c.songId,d).then(function(b){var c,g=b.line_items;(c=a.line_items).push.apply(c,g);f=void 0;g.length?(d=b.next_page,d||(a.done_loading=!0)):a.done_loading=!0}))};this.should_paginate=function(){return!f&&!a.done_loading};a.line_items=[];
a.done_loading=!1;d=1;c.load_next_page()}])});angular.module("genius").component("songAlbum",{templateUrl:"song_album.html",bindings:{album:"<",tracks:"<",current_song:"<currentSong"},controller:["Session",function(a){var b=this;this.can=function(b,d){return a.has_permission(b,d)};this.is_current_song=function(a){return a.id===b.current_song.id};this.should_link_to_track=function(a){return b.can("view_song",a)&&!b.is_current_song(a.song)}}]});
angular.module("genius").component("songAlbums",{bindings:{song:"<",primary_album_tracks:"<primaryAlbumTracks"},templateUrl:"song_albums.html",controller:function(){var a=!1;this.primary_album=function(){return this.song.album};this.other_albums=function(){return this.primary_album()?_.reject(this.song.albums,{id:this.primary_album().id}):this.song.albums};this.hidden_album_count=function(){return a?0:Math.max(0,this.other_albums().length-2)};this.show_all=function(){a=!0}}});
angular.module("genius").component("songAttributionVisualization",{bindings:{id:"<"},templateUrl:"song_attribution_visualization.html",controller:["SongClient",function(a){var b=this,c="#FF574B #87A6FD #7FFA95 #FFA0E8 #80FDFB #FEF498 #E5A0AC #A0CDA8".split(" ");this.$onInit=function(){b.users={};b.user_colors={};a.attribution_visualization(b.id).then(function(a){b.words=a.words;b.change_times=_.uniq(b.words.map(function(a){return a.changed_at})).sort(function(a,b){return a-b});b.current_time_index=
b.change_times.length-1;a.users.forEach(function(a,d){b.users[a.id]=a;b.user_colors[a.id]=c[d]||"#CCCCCC"})});b.color=function(a){if(a.user_id)return b.user_colors[a.user_id]};b.words_to_show=function(){return b.words?b.words.filter(function(a){return a.changed_at<=b.change_times[b.current_time_index]}):[]};b.adjust_current_time_index=function(a){a=b.current_time_index+a;0>a||a>b.change_times.length-1||(b.current_time_index=a)}}}]});
var ACCEPTABLE_CONTRAST_VALUE=4.5,BLACK_HEX="#000000",WHITE_HEX="#ffffff";
angular.module("genius").component("songColorGradientPicker",{bindings:{song_art_primary_color:"=songArtPrimaryColor",song_art_secondary_color:"=songArtSecondaryColor",song_art_text_color:"=songArtTextColor",valid_song_art_contrast:"=validSongArtContrast",song_art_image_url:"<songArtImageUrl",errors:"<"},templateUrl:"song_color_gradient_picker.html",controller:["$scope",function(a){var b=this,c=function(a){a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return null===a?null:[a[1],a[2],a[3]].map(function(a){return parseInt(a,
16)})},d=function(a){a=a.map(function(a){a/=255;return.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)});return.2126*a[0]+.7152*a[1]+.0722*a[2]},f=function(a,b){if(!a||!b)return 1;var f=c(a),k=c(b),f=d(f),k=d(k);return f>k?_.round((f+.05)/(k+.05),2):_.round((k+.05)/(f+.05),2)};this.$onInit=function(){b.text_on_primary_contrast=f(b.song_art_primary_color,b.song_art_text_color);b.text_on_secondary_contrast=f(b.song_art_secondary_color,b.song_art_text_color);b.valid_song_art_contrast=b.text_on_primary_contrast>=
ACCEPTABLE_CONTRAST_VALUE&&b.text_on_secondary_contrast>=ACCEPTABLE_CONTRAST_VALUE};a.$watch("$ctrl.song_art_primary_color",function(a,c){if(a!==c){var d=f(a,BLACK_HEX)>=ACCEPTABLE_CONTRAST_VALUE?BLACK_HEX:WHITE_HEX;b.text_on_primary_contrast=f(a,d);b.song_art_text_color!==d&&(b.song_art_text_color=d,b.text_on_secondary_contrast=f(b.song_art_secondary_color,d),b.valid_song_art_contrast=b.text_on_primary_contrast>=ACCEPTABLE_CONTRAST_VALUE&&b.text_on_secondary_contrast>=ACCEPTABLE_CONTRAST_VALUE)}});
a.$watch("$ctrl.song_art_secondary_color",function(a){b.text_on_secondary_contrast=f(a,b.song_art_text_color);b.valid_song_art_contrast=b.text_on_primary_contrast>=ACCEPTABLE_CONTRAST_VALUE&&b.text_on_secondary_contrast>=ACCEPTABLE_CONTRAST_VALUE})}]});
angular.module("genius").component("songHeaderMediaPlayerControls",{templateUrl:"song_header_media_player_controls.html",bindings:{media_api:"<mediaApi",play_state:"<playState"},controller:function(){var a=this;this.$onInit=function(){return a.play_state="paused"}}});
angular.module("genius").component("songMetadataSongRelationshipsInput",{templateUrl:"song_metadata_song_relationships_input.html",bindings:{song_relationships:"<songRelationships",isDisabled:"<"},controller:function(){var a=this;this.$onChanges=function(b){b.song_relationships&&(a.visible_relationships=_.filter(a.song_relationships,function(a){return a.songs.length}))};this.available_relationships=function(){return _.difference(a.song_relationships,a.visible_relationships)};this.change_relationship_to=
function(b,c){c.songs=b.songs;b.songs=[];a.visible_relationships[a.visible_relationships.indexOf(b)]=c};this.remove_song_relationship=function(b){b.songs=[];a.visible_relationships=_.without(a.visible_relationships,b)};this.add_new_song_relationship=function(){var b=a.available_relationships();b.length&&a.visible_relationships.push(b[0])}}});
angular.module("genius").component("songMissingMetadata",{templateUrl:"song_missing_metadata.html",bindings:{song:"<",possible_missing_info:"<possibleMissingInfo"},controller:function(){var a=this;this.has_missing_info=function(){return _.some(a.possible_missing_info,a.missing_info)};this.missing_info=function(b){return _.isEmpty(a.song[b])&&_.includes(a.possible_missing_info,b)}}});
angular.module("genius").component("songPage",{templateUrl:"song_page.html",controller:Object.assign(["$document","$window","$scope","$location","$q","Tracking","Session","ReferentElementMap","ReferentRegistry","querystring","performance_mark","Bowser","mobile_device","$element",function(a,b,c,d,f,e,h,g,k,m,l,n,r,q){var t=this,u=function(a){return{slug:a[1],query:m.parse(a[2]||"")}},w=function(a,b){switch(a.routeData.data.type){case "song":return b.song(u(a.params));case "referent":return b.referent({referent_id:parseInt(a.params[1])});
default:throw Error("Unknown song page instruction type: "+a.routeData.data.type);}},A;this.$onInit=function(){t.lyrics_compiled=f.defer();t.is_ios=n.ios;t.show_report_abuse=h.has_feature("report_abuse");r&&b.addEventListener("scroll",_.throttle(function(){A||(A=q[0].querySelector(".song_story_header_cta"));if(A){var a=A.getBoundingClientRect();c.$apply(function(){return t.show_song_story_sticky_placement=0>a.top+a.height})}},100))};this.$routerCanReuse=function(a){return w(a,{song:function(a){a=
a.slug;var b;b=(b=_.get(t,"page_data.song.url"))?_.last(b.split("/")):void 0;return a===b},referent:function(a){return Boolean(k.peek(a.referent_id))}})};this.$routerOnActivate=function(a){t.page_data=a.routeData.page_data;Object.assign(c,t.page_data);w(a,{song:function(a){var c=parseInt(a.query.referent_id||_.get(d.hash().match(/^note-(\d+)$/),1));_.isFinite(c)?(e.set_annotation_opened_from_permalink(c),t.scroll_to_referent(c).then(function(){return d.url("/"+c)})):b.scrollTo(0,0)},referent:function(a){t.scroll_to_referent(a.referent_id).then(function(){return t.display_referent(a.referent_id)})}});
l.create_once("first_router_on_activate")};this.$routerOnReuse=function(a){w(a,{song:_.noop,referent:function(a){t.display_referent(a.referent_id)}})};this.$routerOnDeactivate=function(){e.reset_counters();k.clear()};this.scroll_to_referent=function(c,d){void 0===d&&(d=0);return t.lyrics_compiled.promise.then(function(){return f(function(e){var f=g.get(c),f=f.offset().top+f.height()/2-$(b).height()/2;a.find("html, body").animate({scrollTop:f},d).promise().then(e)})})};this.display_referent=function(a){e.track("Open Annotation",
{annotation_id:a});k.preload_around(a,10);c.highlighted_fragment_id=a;var d=k.get(a);f(function(c){var e=x(d);0>e.bottom||e.top>$(b).height()?t.scroll_to_referent(a,150).then(function(){return c(x(d))}):c(e)}).then(function(a){t.lyrics_positioning_target=a;c.current_referent=d})};this.display_description_annotation=function(a){(a=(void 0===a?{}:a).tracking_name)&&e.track(a);t.clear_current_referent();c.current_referent=t.page_data.song.description_annotation};this.clear_current_referent=function(){c.highlighted_fragment_id=
null;c.current_referent=null;d.url(t.page_data.song.path)};this.on_lyrics_compiled=function(){t.lyrics_compiled.resolve()};this.update_lyrics_selection_range=function(a){a?(t.clear_current_referent(),t.lyrics_selection_range=a,t.lyrics_positioning_target=a.getBoundingClientRect()):(t.lyrics_selection_range=null,c.current_referent?E():t.lyrics_positioning_target=null)};var x=function(a){if(a)return a.precomputed_client_rect||g.get(a.id).get(0).getBoundingClientRect()},E=function(){_.get(c.current_referent,
"is_description")||(t.lyrics_positioning_target=x(c.current_referent))};this.youtube_media=function(){return _.find(c.song.media,{provider:"youtube"})};this.track_youtube_play=function(){e.track("Song Page Youtube Embed Played")};c.$on("layout_changed",_.throttle(E,300))}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition","performance_mark",function(a,b,c,d){d.create_once("first_router_can_activate");return c.by_router_instruction(a,b)}]})});
angular.module("genius").component("songPageSidebarMultiPlacement",{templateUrl:"song_page_sidebar_multi_placement.html",bindings:{song:"<",show_song_story:"&showSongStory"},controller:function(){var a=this,b,c,d;this.video_did_fill=function(a){a=_.get(a,"0.relevance");b="high"===a||"medium"===a};this.no_video=function(){return c=!0};this.no_ad=function(){return d=!0};this.is_empty=function(){return!a.song.song_story&&c&&d};this.should_render_video_component=function(){return!a.song.song_story&&(b||
d)};this.should_show_ad=function(){return!a.song.song_story&&(!b||_.isUndefined(b))}}});angular.module("genius").component("songPreview",{templateUrl:"song_preview.html",bindings:{song:"<"}});angular.module("genius").component("songStoryCarousel",{bindings:{stories:"<"},templateUrl:"song_story_carousel.html"});angular.module("genius").component("songStoryFeaturedStoryPlacement",{bindings:{story:"<",label:"@",variants:"<"},templateUrl:"song_story_featured_story_placement.html"});
angular.module("genius").component("songStoryGalleryPage",{templateUrl:"song_story_gallery_page.html",controller:Object.assign(["Tracking","Session",function(a){var b=this;this.$routerOnActivate=function(c){b.page_data=c.routeData.page_data;a.track("song_stories:gallery_page_view")}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(a,b,c){return c.by_router_instruction(a,b)}]})});
angular.module("genius").component("songStoryLeadStoryPlacement",{bindings:{story:"<",show_story:"&showStory"},transclude:!0,templateUrl:"song_story_lead_story_placement.html"});
angular.module("genius").component("songStoryModal",{templateUrl:"song_story_modal.html",bindings:{story:"<story",song:"<",on_close:"&onClose"},controller:["$window","$scope","$sce","Session","AppConfig",function(a,b,c,d,f){var e=this;this.$onChanges=function(a){if(a.story||a.song)e.src=c.trustAsUrl(e.song?e.story.url+"#context=song:"+e.song.id:e.story.url),e.title=e.story.title};this.$onInit=function(){e.can=function(a,b){return d.has_permission(a,b)};a.addEventListener("message",function(a){a.origin===
"https://"+f.canonical_domain&&b.$apply(function(){e.title=a.data.title;e.title_url=a.data.url})})}}]});angular.module("genius").component("songStoryStickyPlacement",{bindings:{story:"<",show:"<",song_id:"<songId"},templateUrl:"song_story_sticky_placement.html"});
angular.module("genius").component("songTopVerifiedArtist",{bindings:{contributors:"<verifiedContributors",on_clicked_verified_annotator:"&onClickedVerifiedAnnotator",on_clicked_verified_answer:"&onClickedVerifiedAnswer"},templateUrl:"song_top_verified_artist.html",controller:function(){var a=this;this.$onChanges=function(b){b.contributors&&(b=_.sortBy(a.contributors,function(a){return a.contributions.length}),a.contributor=_.last(b))};this.on_clicked=function(b){_.includes(a.contributor.contributions,
"annotations")?(a.on_clicked_verified_annotator({user:a.contributor.user}),b.preventDefault()):_.includes(a.contributor.contributions,"answers")&&(a.on_clicked_verified_answer({artist:a.contributor.artist}),b.preventDefault())}}});
angular.module("genius").component("songVerifiedArtists",{bindings:{verified_contributors:"<verifiedContributors"},templateUrl:"song_verified_artists.html",controller:["$scope",function(a){a.$watch("$ctrl.verified_contributors",function(a){1===a.length&&(this.featured=!0);this.commentary_and_lyrics_by=_.filter(a,function(a){return _.includes(a.contributions,"lyrics")&&(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.commentary_by=_.filter(a,function(a){return!_.includes(a.contributions,
"lyrics")&&(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.lyrics_by=_.filter(a,function(a){return _.includes(a.contributions,"lyrics")&&!(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.lyrics_only=this.lyrics_by.length&&!(this.commentary_and_lyrics_by.length||this.commentary_by.length)}.bind(this))}]});
angular.module("genius").component("songVerifiedArtistsSection",{bindings:{contributors:"<",featured:"<",label:"@",lyrics_only:"<lyricsOnly"},templateUrl:"song_verified_artists_section.html"});
angular.module("genius").component("songVerifiedArtistsSectionSingle",{bindings:{contributor:"<",featured:"<",label:"@",variants:"<"},templateUrl:"song_verified_artists_section_single.html",controller:function(){var a=this;this.$onChanges=function(b){b.contributor&&(a.url=a.contributor.artist.url,a.image_url=a.contributor.artist.image_url,a.is_meme_verified=a.contributor.artist.is_meme_verified,a.name=a.contributor.artist.name)}}});
angular.module("genius").component("spamStatus",{templateUrl:"spam_status.html",bindings:{user:"<"},controller:["UserClient",function(a){var b=this;this.$onChanges=function(c){c.user&&a.spam_status(b.user.id).then(function(a){b.user_spam_evaluation=a.user_spam_evaluation})}}]});
angular.module("genius").component("squareItemAndIq",{bindings:{event_type:"@eventType",iq_params:"<iqParams",show_pill_initial:"<showPill",variants:"<"},templateUrl:"square_item_and_iq.html",transclude:!0,controller:["Iq","Session",function(a,b){var c=this;this.show_pill=function(){return b.user_signed_in?_.isUndefined(c.show_pill_initial)?!0:c.show_pill_initial:!1};this.iq=function(){return c.iq_params?_.sum(_.map(_.filter(c.iq_params,"applicable"),function(a){return a.multiplier*a.base})):a.for(c.event_type)}}]});
angular.module("genius").component("standaloneInbox",{templateUrl:"standalone_inbox.html",transclude:!0,bindings:{embed:"<"},controller:["$window",function(a){var b=this;this.$onChanges=function(c){c.embed&&(b.embed?(c=a.frameElement.parentElement,c.style.height=a.parent.innerHeight+"px",b.max_height=c.offsetHeight,c.style.height="auto"):b.max_height=0)}}]});
angular.module("genius").component("standaloneSearch",{templateUrl:"standalone_search.html",transclude:!0,controller:["$window","SearchClient","AppConfig",function(a,b,c){var d=this;this.$onInit=function(){var f=a.frameElement.parentElement;f.style.height=a.parent.innerHeight+"px";d.max_height=f.offsetHeight;f.style.height="auto";a.addEventListener("message",function(a){a.origin==="https://"+c.canonical_domain&&"standalone-search-query"===_.get(a.data,"type")&&(d.search_text=a.data.query,b.multi(d.search_text).then(function(a){d.sections=
a}))})}}]});angular.module("genius").component("statisticsPanel",{bindings:{user:"<",on_select:"&onSelect"},templateUrl:"statistics_panel.html"});angular.module("genius").component("statisticsPanelItem",{bindings:{label:"@",value:"<",icon:"@"},templateUrl:"statistics_panel_item.html"});
angular.module("genius").component("twitterShareButton",{templateUrl:"twitter_share_button.html",bindings:{url:"<",message:"<",variants:"<"},controller:["Twitter","Tracking",function(a,b){var c=this;this.share_on_twitter=function(){b.track("Bagon Twitter Share");a.share({url:c.url,message:c.message})}}]});angular.module("genius").component("userAttribution",{bindings:{object:"<",rank:"<"},templateUrl:"user_attribution.html"});
angular.module("genius").component("userIdentities",{templateUrl:"user_identities.html",bindings:{user:"<",editable:"<"},controller:["IdentityClient","Session",function(a,b){this.can=function(a){return b.has_permission(a,this.user)};this.can_edit=function(){return this.editable&&this.can("manage_identities")};this.saving_identity={};this.unlink_identity=function(b){this.saving_identity[b.provider]||(this.saving_identity[b.provider]=!0,delete this.errors,a.destroy(b.id).then(function(a){_.assign(this.user,
a.user);delete this.errors}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving_identity[b.provider]}.bind(this)))};this.identity_auth_path=function(a){return"/auth/"+a}}]});
angular.module("genius").component("userInfoWithActions",{bindings:{user:"<object",variants:"<"},templateUrl:"user_info_with_actions.html",controller:["$scope","Session","UserClient","Attempt",function(a,b,c,d){var f=this;this.attempt_close=d.close_form;this.user_signed_in=b.user_signed_in;this.current_user=b.current_user;a.$watch("$ctrl.user",function(a){if(!a.current_user_metadata){var b=this.user;c.load(b.id).then(function(a){_.assign(b,a)})}}.bind(this));this.close_conversation_modal=function(){return f.sending_message=
!1}}]});
angular.module("genius").component("userModeration",{templateUrl:"user_moderation.html",bindings:{user:"<"},controller:["Session","UserClient","Attempt","AppConfig",function(a,b,c,d){var f=this;this.can=function(b){return a.has_permission(b,f.user)};this.clear=function(){f.errors=null;f.messages=null};this.toggle_penalty_status=function(){f.updating||(f.clear(),f.updating=!0,(f.user.penalty_box_until?b.unpenalty_box(f.user.id):b.penalty_box(f.user.id)).then(function(a){_.assign(f.user,a.user)}).catch(function(a){f.errors=a.errors}).finally(function(){f.updating=
!1}))};this.update_spam_state=function(a){f.updating||c.admin_action(function(){f.clear();f.updating=!0;b.update_spam_state(f.user.id,{state:a}).then(function(a){_.assign(f.user,a.user);f.messages=["Done! (But it'll take a few minutes to finish)"]}).catch(function(a){f.errors=a.errors}).finally(function(){f.updating=!1})},I18n.t("mark_"+a+".confirm"))};this.mass_delete_unreviewed_activity=function(){f.updating||c.admin_action(function(){f.clear();f.updating=!0;b.mass_delete_unreviewed_activity(f.user.id).then(function(a){_.assign(f.user,
a.user);f.messages=["Done! (But it'll take a few minutes to finish)"]}).catch(function(a){f.errors=a.errors}).finally(function(){f.updating=!1})},I18n.t("mass_delete_unreviewed_activity.confirm"))};this.vote_types=d.user_vote_types_for_delete;this.mass_delete_votes=function(a){f.updating||c.admin_action(function(){f.clear();f.updating=!0;b.delete_votes(f.user.id,a).then(function(a){_.assign(f.user,a.user);f.messages=["Done! (But it'll take a few minutes to finish)"]}).catch(function(a){f.errors=a.errors}).finally(function(){f.updating=
!1})},I18n.t("mass_delete_votes."+a+".confirm"))}}]});angular.module("genius").component("verticalAlbumCard",{bindings:{album:"<object"},templateUrl:"vertical_album_card.html"});angular.module("genius").component("verticalSearchResultItem",{bindings:{hit:"<"},templateUrl:"vertical_search_result_item.html"});angular.module("genius").component("verticalSearchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"vertical_search_result_items.html"});
angular.module("genius").component("videoCarousel",{bindings:{object:"<",placement:"@",variants:"<",title:"@",active_video:"<activeVideo",on_load:"&onLoad",video_list:"<videoList"},templateUrl:"video_carousel.html",controller:["VideoPlacement","$templateCache",function(a,b){var c=this;this.$onChanges=function(d){d.object&&(c.video_placement=new a(c.object,c.placement,function(a){c.loaded=!0;c.on_load({videos:a})}));c.logo_name=function(){return c.video_list?c.video_list.slug+".svg":null};c.has_logo=
function(){return!!b.get(c.logo_name())};c.logo_variants=function(){var a;switch(c.logo_name()){case "news.svg":a=["medium"];break;case "bts.svg":a=["large"];break;case "for-the-record.svg":a=["large"];break;case "irl.svg":a=["medium"];break;default:a=["small"]}return _.map(a,function(a){return"video_carousel-video-card-logo--"+a}).join(" ")}}}]});
angular.module("genius").component("videoEditForm",{templateUrl:"video_edit_form.html",bindings:{video:"<object"},controller:["Session","VideoSourcesClient",function(a,b){var c=this;this.$onChanges=function(a){a.video&&(c.loaded=!1,b.index(c.video.id).then(function(a){c.video_sources=a;c.loaded=!0}))};this.add_video_source=function(){c.error=null;b.create(c.video.id,c.new_source).then(function(a){c.video_sources.push(a);c.new_source={}}).catch(function(a){c.error=a})};this.remove_video_source=function(a){c.error=
null;b.destroy(a.id).then(function(){_.remove(c.video_sources,a)}).catch(function(a){c.error=a})};this.has_permission=a.has_permission}]});
angular.module("genius").component("videoListEditForm",{templateUrl:"video_list_edit_form.html",bindings:{video_list:"<object",on_updated:"&onUpdated"},controller:["VideoListClient",function(a){var b=this;this.save=function(){Reflect.deleteProperty(b,"errors");a.update(b.editable_video_list.id,{title_image_url:b.editable_video_list.title_image_url,mobile_title_image_url:b.editable_video_list.mobile_title_image_url}).then(function(a){b.video_list=a;b.on_updated({video_list:b.video_list})}).catch(function(a){b.errors=
a.response.errors})};this.$onChanges=function(a){a.video_list&&(b.editable_video_list=_.cloneDeep(b.video_list))}}]});
angular.module("genius").component("videoListPage",{templateUrl:"video_list_page.html",controller:Object.assign(["Tracking","Session","PagedDataFeed","VideoListClient",function(a,b,c,d){var f=this;this.$routerOnActivate=function(b){f.page_data=b.routeData.page_data;a.track("Video List Page Load",{"Video List ID":f.page_data.video_list.id});f.scrollable_videos_data=new c(_.partial(d.videos,f.page_data.video_list.slug),"videos",{per_page:60},f.page_data.next_page)};this.can_perform=function(a){return b.has_permission(a,
f.page_data.video_list)}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(a,b,c){return c.by_router_instruction(a,b)}]})});
angular.module("genius").component("videoListVideo",{templateUrl:"video_list_video.html",bindings:{video:"<",video_list:"<videoList",position:"<",variants:"<"},controller:["Session",function(a){var b=this;this.$onChanges=function(a){a.video&&(b.tracking_data={"Page Type":"desktop_video_list_page",Placement:"list",Position:b.position,"Video ID":b.video.id,"Object Type":"video_list","Object ID":b.video_list.id})};this.has_permission=a.has_permission}]});
angular.module("genius").component("videoPage",{templateUrl:"video_page.html",controller:Object.assign(["Tracking","$interval","SmartRouting","Session","$location","VideoRegistry","ArticleClient","Attempt","currentFlashMessages","$window",function(a,b,c,d,f,e,h,g,k,m){var l=this,n;this.navigate_to_next_video=function(){c.navigate_to_absolute_url(l.next_video.url+"?utm_source=autoplay")};this.countdown_to_next_video=function(){l.next_video&&(l.seconds_until_next_video=5,n=b(function(){--l.seconds_until_next_video;
0===l.seconds_until_next_video&&(l.stop_countdown_to_next_video(),l.navigate_to_next_video())},1E3))};this.stop_countdown_to_next_video=function(){l.seconds_until_next_video=void 0;b.cancel(n)};this.delete_article=function(){g.admin_action(function(){h.delete(l.page_data.article.id).then(function(){k.push({type:"notice",message:"Successfully deleted article"});m.location.href=l.page_data.video.url})},"Are you sure you want to delete this article?")};this.$routerOnActivate=function(b){l.page_data=
b.routeData.page_data;e.register_page(l.page_data.video,"desktop_video_page");l.tracking_data={"Page Type":"desktop_video_page",Placement:"main",Position:1,"Video ID":l.page_data.video.id,"Object Type":"video","Object ID":l.page_data.video.id};a.track("Video Page Load",{"Video ID":l.page_data.video.id,Source:f.search().utm_source})};this.can=function(a){return d.has_permission(a,l.page_data.video)}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(a,b,c){return c.by_router_instruction(a,
b)}]})});angular.module("genius").component("videoRelevanceReason",{bindings:{video:"<"},templateUrl:"video_relevance_reason.html"});
angular.module("genius").component("videosModal",{bindings:{initial_video:"<initialVideo",build_tracking_data:"&buildTrackingData",on_close:"&onClose",object:"<"},templateUrl:"videos_modal.html",controller:["VideoRegistry",function(a){var b=this;this.$onInit=function(){b.players={};b.carousel_videos=a.videos_for(b.object);b.initial_video&&(_.remove(b.carousel_videos,b.initial_video),b.carousel_videos.unshift(b.initial_video))};this.$onChanges=function(a){a.initial_video&&b.initial_video&&(b.active_video=
b.initial_video)};this.select_video=function(a){if(a&&a!==b.active_video){var d=b.players[b.active_video.id];d&&d.pause();b.play_pct=0;b.active_video=a;b.video_can_play=!1}};this.next_video=function(){var a=_.findIndex(b.carousel_videos,function(a){return a.id===b.active_video.id});(a=b.carousel_videos[a+1])&&b.select_video(a)};this.update_progress=function(a,d){b.play_pct=Math.ceil(d?a/d*100:0)};this.add_video_api=function(a,d){return b.players[a]=d};this.tracking_data=function(a){return _.assign(b.build_tracking_data({video:a}),
{"Modal Position":_.indexOf(b.carousel_videos,a)+1})}}]});
angular.module("genius").component("webAnnotatorManager",{bindings:{web_page_id:"@webPageId"},templateUrl:"web_annotator_manager.html",controller:["WebAnnotatorClient",function(a){var b=this;this.$onInit=function(){b.errors=[];a.load_web_page(b.web_page_id).then(function(a){return b.web_page=a})};this.protect=function(c){a[(c?"protect":"unprotect")+"_web_page"](b.web_page_id).then(function(a){return b.web_page=a}).catch(b.on_error)};this.publish_drafts=function(){a.publish_web_page_drafts(b.web_page_id).then(function(a){return b.web_page=
a}).catch(b.on_error)}}]});angular.module("genius").component("webAnnotatorManagerErrors",{bindings:{yields_on_error:"&yieldsOnError"},templateUrl:"web_annotator_manager_errors.html",controller:["$timeout",function(a){var b=this;this.$onInit=function(){b.errors=[];b.yields_on_error({on_error:b.on_error})};this.on_error=function(c){b.errors.unshift(c);a(function(){return _.remove(b.errors,c)},5E3)}}]});
angular.module("genius").component("webAnnotatorRolesTable",{templateUrl:"web_annotator_roles_table.html",bindings:{header:"@",web_location_id:"<webLocationId",web_location_type:"@webLocationType"},controller:["WebAnnotatorClient",function(a){var b=this;this.$onInit=function(){b.errors=[];b.load()};this.load=function(){return a.load_user_roles(b.web_location_type+"s",b.web_location_id).then(function(a){return b.user_roles=a})};this.create=function(c){return a.create_user_role(b.web_location_type+
"s",b.web_location_id,c).then(b.load)}}]});angular.module("genius").component("youtubeSubscribeButton",{templateUrl:"youtube_subscribe_button.html",controller:["Google","$element",function(a,b){this.$postLink=function(){a.setup().then(function(){a.refresh_youtube_subscribe_in(b[0])})}}]});angular.module("genius").constant("AdConfig",window.AD_CONFIG);angular.module("genius").constant("AnalyticsConfig",window.ANALYTICS_CONFIG);angular.module("genius").constant("diff_match_patch",window.diff_match_patch);
angular.module("genius").constant("mobile_device",window.MOBILE_DEVICE);
angular.module("genius").controller("ArticleFormCtrl",["Filepicker","$element","$immediate",function(a,b,c){var d=this,f;this.$onInit=function(){d.snippets={Lyrics:{before:"<g-lyrics>",after:"</g-lyrics>"},"Outlined Title":{before:"<g-outlined-title>",after:"</g-outlined-title>"},Pullquote:{before:"<g-pullquote>\n  ",after:"\n  <cite>Attribution</cite>\n</g-pullquote>\n"},"Image With Caption":{before:'<g-image src="https://example.com/image.png">',after:"</g-image>",default_body:"\n  Caption\n"},
"Fullbleed Image With Caption":{before:'<g-fullbleed-image src="https://example.com/image.png">',after:"</g-fullbleed-image>",default_body:"\n  Caption\n"},List:{before:"<g-list>\n  <g-list-item>\n    <g-list-item-title>",after:'</g-list-item-title>\n    <g-list-item-media src=""></g-list-item-media>\n    <g-list-item-body></g-list-item-body>\n  </g-list-item>\n</g-list>'},Knotch:{before:"<g-knotch>",after:"</g-knotch>",default_body:"knotch_class_here"}};d.formatting={"Header (Primary)":{before:"# "},
"Header (Secondary)":{before:"## "},"Header (Tertiary)":{before:"### "},Link:{before:"[",after:"](url)"},Italic:{before:"*",after:"*"},Bold:{before:"**",after:"**"},Strikethrough:{before:"~~",after:"~~"},Superscript:{before:"<sup>",after:"</sup>"},Subscript:{before:"<sub>",after:"</sub>"},Small:{before:"<small>",after:"</small>"},Center:{before:"<center>",after:"</center>"},"Bulleted List":{before:"- ",each_line:!0},"Numbered List":{before:"1. ",each_line:!0},Blockquote:{before:"> "},"En Dash":{before:"--"},
"Em Dash":{before:"---"},"Horizontal Line":{before:"***"}};f=new a({services:"COMPUTER"})};this.pick_image=function(){return f.pick_and_store().then(function(a){d.insert_at_body_markdown_cursor({before:'<g-image src="'+a+'">',after:"</g-image>",default_body:"Caption"})})};this.preview=function(){d.previewing=!0;c(function(){var a=b.find("form.edit_article");a.find('input[name="_method"]').attr("value","post");a.submit()})}}]);
angular.module("genius").controller("CustomAppNotificationCtrl",["$scope","CustomAppNotificationClient",function(a,b){a.send_preview_notification=function(){b.send_preview_notification(a.notification).then(function(){alert("sent a preview notification to your devices, take a look")})}}]);
angular.module("genius").controller("DevCtrl",["$window","$scope","$http","AppConfig",function(a,b,c,d){b.search={query:""};b.saving=!1;b.build_scenario=function(){if(!b.saving){b.saving=!0;var e=b.current_scenario.traits.filter(function(a){return a.enabled}).map(function(a){return a.name});c.post(d.api_root_url+"/scenarios?id="+b.current_scenario.id,{scenario:{traits:e}}).then(function(c){a.location.href=c.data.url;b.saving=!1})}};b.configure_scenario=function(a){b.current_scenario=a};b.clear_scenario=
function(){b.current_scenario=void 0};var f=_.once(function(){c.get(d.api_root_url+"/scenarios").then(function(a){b.results=a.data.scenarios})});b.open_search=function(){f();b.open=!0};b.close_search=function(){b.open=!1}}]);
angular.module("genius").controller("FactTrackAnnotationEditCtrl",["$scope",function(a){a.set_timestamp_to_now=function(){a.annotation.timestamp_in_ms=a.ctrl.time};a.annotation_duration=function(){var b=a.annotations.indexOf(a.annotation),b=a.annotations[b+1];return(b?b.timestamp_in_ms:a.duration)-a.annotation.timestamp_in_ms}}]);
angular.module("genius").controller("FactTrackSongEditCtrl",["$scope","$debounce","SpotifyAnnotationClient","orderByFilter","ScrollPoint",function(a,b,c,d,f){a.scroll_to=f.scroll_to;a.song_id=$("[data-song-id]").attr("data-song-id");this.toggle_fullscreen=function(){this.alt_mode=!1;this.fullscreen=!this.fullscreen};this.toggle_alt_mode=function(){this.alt_mode=!this.alt_mode};a.remove_annotation=function(b){b=a.annotations.indexOf(b);a.annotations.splice(b,1)};a.add_annotation=function(){a.annotations.push({content_type:"iq",
timestamp_in_ms:this.time})}.bind(this);c.load_song(a.song_id).then(function(b){a.spotify_song=b.spotify_song;a.annotations=b.spotify_annotations;a.spotify_song.track_url&&(a.is_ready=!0);_.some(a.annotations,{content_type:"credits"})||(b=_.get(a.spotify_song,["metadata","duration_ms"],18E4),a.annotations.push({content_type:"credits",content:"Check out the full lyrics and annotations on Genius for contributors, sources, and even more knowledge.",timestamp_in_ms:b-3E3}));g()});var e=!1,h=function(){a.saving_disabled?
e=!0:(a.saving_disabled=!0,c.save_song(a.song_id,a.spotify_song,a.annotations).then(function(b){a.spotify_song.lock_version=b.spotify_song.lock_version;a.save_error=void 0}).catch(function(b){b=b.data;a.save_error=b.message||"Failed to save";a.conflicted="conflict"===b.error;$.facebox("<div><img src='https://images.genius.com/5f38d92d0b29722104abd09aa01b1585.200x200x4.gif'></div><br><h1>Something went wrong!</h1><h2>Consider copy/pasting your work somewhere else before reloading the page</h2>")}).finally(function(){a.saving_disabled=
!1;e&&(e=!1,h())}))},g=function(){a.$watch("annotations",function(){a.annotations=d(a.annotations,["timestamp_in_ms","id"])},!0);var c=b(h,1E3);a.$watchGroup(["annotations","spotify_song.note","spotify_song.finalized"],function(){c()},!0)}}]);
angular.module("genius").controller("HeaderCtrl",["$scope","GlobalRefs","Tracking","LibratoBeacon",function(a,b,c,d){this.$onInit=function(){if(this.cloudflare_error=Boolean(b.get_element("cloudflare_unavailable_alert").length))c.track("cloudflare_error.always_online_banner",{source:"bagon"}),d.count("cloudflare_error.always_online_banner",{source:"bagon"})};a.toggle_mobile_subnav_menu=function(){a.mobile_subnav_menu_open=!a.mobile_subnav_menu_open};a.close_mobile_subnav_menu=function(){a.mobile_subnav_menu_open=
!1}}]);
angular.module("genius").controller("SongCtrl",["$scope","$window","$q","$location","$immediate","ReferentRegistry","ReferentElementMap","ReferentClient","SongClient","Tracking","Session","currentFlashMessages","Reversible","Attempt","Pusher","I18n","ScrollPoint","only_changes","VideoRegistry","mobile_device","LibratoBeacon","WebVitals","ReactSongPageService","AppConfig",function(a,b,c,d,f,e,h,g,k,m,l,n,r,q,t,u,w,A,x,E,F,y,z,J){var H=this;a.$ctrl&&(a.$ctrl.song_ctrl=this);this.$onInit=function(){var a="bagon.song."+
(E?"mobile":"desktop"),c=Math.floor(100*Math.random())<J.ga_web_vitals_sampling_percentage,d=function(d){F.measure(d.name,d.value,{source:a});c&&b.ga("send","event",{eventCategory:"Web Vitals",eventAction:d.name,eventLabel:d.id,eventValue:Math.round("CLS"===d.name?1E3*d.delta:d.delta),nonInteraction:!0,transport:"beacon"})};y.getCLS(d);y.getFID(d);y.getLCP(d);y.getFCP(d);y.getTTFB(d)};a.attempt_close=q.close_form;a.transcriber_guide_url=J.transcriber_guide_url;a.$watch("song.id",function(b){b&&(x.register_page(a.song,
E?"mobile_song_page":"desktop_song_page"),m.delayed_track("Song Page Load",{}))});var T=d.search().from_question_email;T&&m.track("Question email question clicked",{question_id:T});a.user_signed_in=l.user_signed_in;h.clear();this.update_focused_referent_anchor=function(b){H.focused_fragement_element_id=$(b).data("fragment_element_id");b=Number($(b).data("id"));b=_.find(a.annotation_previews,{referent_id:b});a.annotation_preview=b;a.$digest()};this.is_active_element=function(a){return H.focused_fragement_element_id===
a};this.dismiss_annotation_preview=function(){a.annotation_preview_dismissed=!0;m.track("Dismiss Annotation Teaser")};this.reactivate_annotation_preview=function(){a.annotation_preview_dismissed=!1;m.track("Reactivate Annotation Teaser")};this.referent_has_preview=function(b){return!!_.find(a.annotation_previews,{referent_id:b})};this.highlight_preview_referent=function(b){return H.is_active_element(b)&&!a.annotation_preview_dismissed};this.show_preview_referent_indicator=function(b){return H.is_active_element(b)&&
a.annotation_preview_dismissed};e.register(a.song.description_annotation);a.preloaded_referents&&_.each(a.preloaded_referents,function(a){e.register(_.assign({fragments:[]},a))});f(function(){k.count_view(a.song.id);e.preload_from_start(5)},!1);a.sidebar={signing_up:!1};a.initial_sidebar_content_showing=function(){return!a.current_referent&&!a.$ctrl.lyrics_selection_range&&!a.sidebar.signing_up&&!a.$ctrl.creating_referent};a.delete_song=function(){k.delete(a.song.id).then(function(){n.push({type:"notice",
message:"Successfully deleted Song"});b.location.href="/"})};a.next_track=function(){var b=!1;return _.find(a.primary_album_tracks,function(c){if(b)return!0;b=c.song.id===a.song.id})};a.open_first_verified_annotation=function(a){m.track("Tap Verified Callout");var b=e.first(function(b){return"verified"===b.classification&&_.includes(b.verified_annotator_ids,a.id)});H.open_referent_by_id(b.id)};a.open_next_referent=function(a){m.track("Tap Next Verified");H.open_referent_by_id(a)};a.$watch("next_up_clicked",
function(a){a&&m.track("Next Song Tap")});this.update_url_for_open_referent=function(a){d.url()!=="/"+a&&d.url("/"+a)};var I=function(b,c){return k.perform_action(a.song.id,b,c).then(function(b){a.song=b}).catch(function(a){n.push({type:"error",message:a.message})})};a.can_perform=function(b){return l.has_permission(b,a.song)};var Q={hide:function(){H.hiding_prompt_visible=!0},destroy:function(){a.delete_song()},view_annotation_engagement_data:function(){a.toggle_engagement_data()},edit_spotify_annotations_for:function(){b.open("/songs/"+
a.song.id+"/edit-fact-track")},view_lyrics_synchronization:function(){b.open("/songs/"+a.song.id+"/lyrics_sync")}},D={view_annotation_engagement_data:!0,edit_spotify_annotations_for:!0,view_lyrics_synchronization:!0};a.attempt_admin_action=function(b,c){if(D[b])return a.perform_admin_action(b,c);q.admin_action(_.partial(a.perform_admin_action,b,c),u.lookup("song.action_confirmations."+b)||u.t("song.action_confirmations.admin_default"))};a.perform_admin_action=function(a,b){if(Q[a])return Q[a]();I(a,
b)};a.$on("editorial_action_count_changed",function(a,b){if(b.commentable.referent_id){var c=e.get(b.commentable.referent_id);if(c){var d=_.chain(c.annotations).filter(function(a){return!a.verified}).sumBy(function(a){return a.comment_count+a.proposed_edit_count});c.pending_editorial_actions_count=d}}});a.$on("annotation_deleted",function(b,c,d){a.$ctrl.lyrics_compiled.promise.then(function(){var b=e.get(c.referent_id);a.$ctrl.lyrics_interface.block_edit(!0);b._deleted=_(b.annotations).every(function(a){return a._deleted||
a.new});d.then(function(){b._deleted?a.$ctrl.lyrics_interface.remove_referent(c.referent_id):(Reflect.deleteProperty(b,"_deleted"),g.refresh(b))}).catch(function(){Reflect.deleteProperty(b,"_deleted")}).finally(function(){a.$ctrl.lyrics_interface.block_edit(!1)})})});a.$watch("current_referent._deleted",function(b){b&&a.$ctrl.clear_current_referent()});var K=_.once(function(){k.load_annotation_open_data(a.song.id).then(function(b){a.open_data=b})});a.toggle_engagement_data=function(){a.showing_annotation_engagement_data=
!a.showing_annotation_engagement_data;K()};a.set_current_hover_and_digest=function(b){a.hover_referent_id=b;a.$digest()};a.$on("referent_created",function(b,c){e.register(c);_.assign(a.song,c.annotatable.client_timestamps);H.update_url_for_open_referent(c.id)});this.save=function(b){H.saving=!0;var d=A(b,a.song,{except:["valid_song_art_contrast"]}),e=r.modify(a.song,b);return k.update(a.song.id,d).then(function(b){return angular.extend(a.song,b)}).catch(function(a){e();return c.reject(a)}).finally(function(){H.saving=
!1})};this.show_metadata_form=function(a,b){var c;H.show_metadata_form_sections=(c={},c[a]=!0,c);m.track("Song Page Open Edit Form",{section:a,keyboard_shortcut:!!b})};this.has_track_info=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.song;return _(b).filter(function(a){return _.isNumber(d[a])||_.some(d[a])}).some()};this.has_song_relationships=function(){return _(a.song.song_relationships).map(function(a){return a.songs}).flatten().some()};this.close=function(){H.show_metadata_form_sections=
!1};this.open_referent_by_id=function(a){d.path("/"+a)};this.featured_annotation_in_view=_.once(function(a){a&&m.track("Featured Annotation In View")});this.reload_song=function(){H.edit_blocked=!0;return k.load_song(a.song.id).then(function(b){H.edit_blocked=!1;_.assign(a.song,_.omit(b,"description","description_annotation"))})};this.is_apple_music_player_enabled=function(){return l.has_permission("view_apple_music_player",a.song)};this.should_load_apple_music_player=function(){return H.is_apple_music_player_enabled()&&
a.song.is_music&&(a.song.apple_music_id||E)};this.react_song_page_link=z.reactSongPageRedirect;l.user_signed_in&&t.subscribe(a.song.pusher_channel,"song-updated",function(b){a.song.updated_by_human_at<b.updated_by_human_at&&H.reload_song();a.song.lyrics_updated_at<b.lyrics_updated_at&&a.$ctrl.lyrics_interface.refresh_lyrics()});a.open_first_verified_answer=function(b){var c=_.find(a.pinned_questions,function(a){return _.get(a,"answer.answer_source.artist.id")===b.id});c?w.scroll_to("question_"+c.id):
w.scroll_to("questions")};f(function(){$(".song_media_controls").offset()&&(H.media_player_sticky_offset=-($(".song_body").offset().top-$(".song_media_controls").offset().top))})}]);
angular.module("genius").directive("addAnnotation",[function(){return{restrict:"E",templateUrl:"add_annotation.html",scope:{start_new_community_referent:"&startNewCommunityReferent",start_new_referent:"&startNewReferent",creating_referent:"<creatingReferent",can_add_community_annotation:"<canAddCommunityAnnotation",can_add_pinned_annotation:"<canAddPinnedAnnotation",annotation:"<",song:"<",enable_waiting_class:"<enableWaitingClass"},controllerAs:"ctrl",controller:["Session",function(a){this.user_signed_in=
a.user_signed_in}]}}]);angular.module("genius").directive("alwaysDirty",function(){return{restrict:"A",controller:["BeforeUnloadCheck",function(a){var b=function(){return!0};this.$onInit=function(){return a.add(b)};this.$onDestroy=function(){return a.remove(b)}}]}});
angular.module("genius").directive("ampIframeResizable",["Bindings","$window","AppConfig",function(a,b,c){var d=a.resolver({on_amp_iframe_resize:"&onAmpIframeResize"});return{restrict:"A",link:function(a,e,h){var g=d(a,h);b.addEventListener("message",function(b){b.origin==="https://"+c.canonical_domain&&b.source===e[0].contentWindow&&"amp"===b.data.sentinel&&"embed-size"===b.data.type&&(a.$applyAsync(function(){return g.on_amp_iframe_resize({width:b.data.width,height:b.data.height})}),b.data.height?
e.css("height",b.data.height+"px"):e.css("height",""),b.data.width?e.css("width",b.data.width+"px"):e.css("width",""))})}}}]);
angular.module("genius").directive("annotatableImage",["$document",function(a){return{templateUrl:"annotatable_image.html",restrict:"E",scope:{src:"@",song:"<",on_image_referent_creation_started:"&onImageReferentCreationStarted",on_image_referent_created:"&onImageReferentCreated",on_image_referent_creation_failed:"&onImageReferentCreationFailed",can_perform:"<canPerform",lyrics_anchorer:"<lyricsAnchorer"},controller:["$scope",function(b){var c=this;this.create_image_referent=function(d){var f=c.getImage(),
e=a[0].createRange();e.selectNodeContents(f);e.precomputed_client_rect=e.getBoundingClientRect();b.creating_image_referent=!0;b.on_image_referent_creation_started({selection_range:e});b.image_referent_creation_failed=!1;b.lyrics_anchorer.create_image_referent(f,e,d).then(function(a){b.creating_image_referent=!1;b.on_image_referent_created({referent:a,selection_range:e});b.image_referent_created=!0},function(a){b.creating_image_referent=!1;b.on_image_referent_creation_failed({error:a});b.image_referent_creation_failed=
!0})};this.set_current_hover_and_digest=function(a){b.hovering_over_image=a;b.$digest()}}],controllerAs:"ctrl",link:{pre:function(a,c,d,f){f.getImage=function(){return c.find("img")[0]}}}}}]);
angular.module("genius").directive("annotation",["Session","Reversible","AnnotationClient","ReferentRegistry","ReferentClient","$immediate","$q","Bowser","I18n","AppConfig",function(a,b,c,d,f,e,h,g,k,m){return{restrict:"E",templateUrl:"annotation.html",scope:{annotation:"=object",referent:"<referent",variants:"<",annotatable_title:"<annotatableTitle",on_seek_to_next_card:"&onSeekToNextCard",yields_api:"&yieldsApi",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",on_dirty:"&onDirty",on_clean:"&onClean",
focused_comments:"<focusedComments"},controllerAs:"ctrl",controller:["$scope","$filter",function(e,h){var r=this;this.hiding_comments=e.variants&&e.variants.hideComments;this.user_signed_in=a.user_signed_in;this.show_report_abuse=a.has_feature("report_abuse");this.is_android=g.android;this.truncation_length=600;this.content_is_truncated=_.get(e,"variants.truncate_content")&&e.annotation.body.html.length>this.truncation_length;this.unreviewed_annotation_tooltip_info_url=m.unreviewed_annotation_tooltip_info_url;
this.integrate_comment=function(a){e.start_editing({integration_body:a.body})};this.update_editorial_action_count=function(){e.annotation.proposed_edit_count=r.edits_to_show_count();e.$emit("editorial_action_count_changed",{commentable:e.annotation})};e.$watch("annotation.comment_count",this.update_editorial_action_count);this.comment_removed=function(){return b.modify(e.annotation,{comment_count:e.annotation.comment_count-1})};this.edits_to_show_count=function(){return e.annotation.edits?e.annotation.edits.filter(function(a){return!a._deleted&&
!a._merged}).length:e.annotation.proposed_edit_count};e.next_referent=function(a){d.first(function(b){return"verified"===b.classification&&_.includes(b.verified_annotator_ids,a.id)},{after_referent_id:e.annotation.referent_id})};this.seek_to_next_card=function(a){e.on_seek_to_next_card({referent_id:e.next_referent(a).id})};this.has_more_by_user=function(a){return!!e.next_referent(a)};e.finish_editing=function(){if(!e.disable_saving_with){e.disable_saving_with="Saving";var a;a=_.get(e,"annotation._editing.proposed_edit")?
c.propose_edit(e.annotation).then(function(a){e.annotation.edits=e.annotation.edits||[];e.annotation.edits.unshift(a);r.showing_edits=!0}):c.save(e.annotation,{referent:e.referent}).then(function(){f.refresh(e.referent)});var d=b.modify(e.annotation,{"_editing._form_visible":!e.annotation.referent_id});a.then(e.dismiss_editing).catch(d).finally(function(){e.disable_saving_with=null})}};e.cancel_editing=function(){e.dismiss_editing();Reflect.deleteProperty(e.referent,"temporary_classification");e.annotation.new&&
_.remove(e.referent.annotations,e.annotation);if(!e.referent.annotations.length){var a=c.safe_delete(e.annotation);e.$emit("annotation_deleted",e.annotation,a)}};e.dismiss_editing=function(){Reflect.deleteProperty(e.annotation,"_editing");e.$emit("layout_changed")};this.initialize_annotation_custom_preview=function(){e.annotation._editing._creating_custom_preview=!0};this.clear_annotation_custom_preview=function(){e.annotation._editing.custom_preview=null;e.annotation._editing._creating_custom_preview=
!1};this.show_annotation_custom_preview_form=function(){return e.annotation._editing.custom_preview||e.annotation._editing._creating_custom_preview};this.report_as_abusive=function(){r.reported_abuse=!0;return c.report_as_abusive(e.annotation.id).catch(function(){r.reported_abuse=!1})};this.should_show_comments=function(){return!e.rejecting&&!r.hiding_comments&&!e.annotation.new&&!e.annotation._editing&&(e.annotation.body.html||e.annotation.needs_exegesis)};this.annotation_is_unwritten=function(){return e.annotation.new||
e.annotation.needs_exegesis||!_.get(e,"annotation.body.html")};this.show_annotation_label=function(){if(!a.user_signed_in&&"needs_exegesis"===_.get(e,"referent.classification"))return!1;var b=_.get(e,"annotation._editing._form_visible"),b=e.annotation.being_created||b;return e.annotation.community&&!b&&!r.annotation_is_being_created_by_someone_else()};this.show_placeholder_annotation_label=function(){var a=_.get(e,"annotation._editing._form_visible");return e.annotation.being_created&&!a&&!r.annotation_is_being_created_by_someone_else()};
this.annotation_is_being_created_by_someone_else=function(){return e.annotation.being_created&&(!a.user_signed_in||a.current_user.id!==e.annotation.created_by.id)};this.annotation_title=function(){var a=e.variants&&e.variants.isDescription&&!e.variants.force_genius_annotation_title,b="pending"===e.annotation.state?"Unreviewed ":"",c="accepted"!==e.annotation.state||a?"":"Genius ",d=k.t(a?"sle.prependable_to_name":"annotation.singular_noun_capitalized",{type_name:h("modelHumanName")(e.referent.annotatable._type)}),
f=h("truncateToBoundary")(e.annotatable_title,100);return b+c+d+(a?" \u201c"+f+"\u201d":"")};this.handle_toggle_comments=function(){r.hiding_comments=!r.hiding_comments;r.user_signed_in||(r.prompt_auth=!r.prompt_auth)};this.is_authored_by_current_user=function(){return _(e.annotation.authors).some(function(b){return b.user.id===a.current_user.id})};e.yields_api({api:{reject:function(){e.begin_rejection()},accept:function(){e.accept()}}});_.has(e.annotation,"current_user_metadata.iq_by_action")&&e.yields_iq({iq_api:e.annotation.current_user_metadata.iq_by_action})}],
link:function(d){d.annotation_directive=d;d.can=function(b){return a.has_permission(b,d.annotation)};var f=function(){d.annotation.cosigned_by.push(a.current_user)},g=function(){_.remove(d.annotation.cosigned_by,function(b){return b.id===a.current_user.id})};d.toggle_cosign=function(a){a?f():g();d.saving_cosign=!0;c.toggle_cosign(d.annotation.id,a).then(function(a){_.assign(d.annotation,a.annotation);_.assign(d.referent,a.referent)}).catch(a?g:f).finally(function(){d.saving_cosign=!1})};d.showing_contributors=
!1;d.clear_votes=function(){d.showing_voters=!1;var a=b.modify(d,{"annotation.votes_total":0,"annotation.current_user_metadata.interactions.vote":void 0});c.clear_votes(d.annotation.id).catch(a)};d.toggle_voters=function(){d.showing_voters=!d.showing_voters};d.$on("images_loaded",function(){d.loaded=!0;d.$emit("layout_changed")});d.toggle_contributors=function(){d.showing_contributors=!d.showing_contributors};d.toggle_ellipsis_menu=function(){d.showing_ellipsis_menu=!d.showing_ellipsis_menu};d.start_editing=
function(a){a=a||{};d.annotation._editing=_.defaults(d.annotation._editing||{},{_form_visible:!0,_has_source:!!d.annotation.source,source:angular.copy(d.annotation.source||{}),proposed_edit:a.proposed_edit,html:d.annotation.body.html,markdown:d.annotation.body.markdown,_creating_custom_preview:!1,custom_preview:d.annotation.custom_preview});a.integration_body&&(d.annotation._editing.html=_.compact([d.annotation._editing.html,"PROPOSED SUGGESTION: "+a.integration_body.html]).join("<br>"),d.annotation._editing.markdown=
_.compact([d.annotation._editing.markdown,"PROPOSED SUGGESTION: "+a.integration_body.markdown]).join("\n\n"));d.annotation.verified&&(d.referent.temporary_classification="verified")};d.accept=function(){var a=c.accept(d.annotation,{referent:d.referent});d.on_pending_event({event:"UserAcceptAnnotation",result:a});a.then(function(){d.context_updated_at=Date.now()})};d.focus_comment_textarea=function(){d.$broadcast("focus_comment_textarea",d.annotation)};d.begin_rejection=function(){d.rejecting=!0;e(d.focus_comment_textarea)};
d.reject_with_comment=function(a){d.rejecting=!1;d.disable_saving_with="Saving";a=c.safe_reject(d.annotation,{comment:a,referent:d.referent});d.on_pending_event({event:"UserRejectAnnotation",result:a});a.then(function(){d.context_updated_at=Date.now()}).catch(function(){d.rejecting=!0;return h.reject()}).finally(function(){return d.disable_saving_with=null});d.$emit("annotation_deleted",d.annotation,a);return a};d.delete=function(){var a=c.safe_delete(d.annotation);d.$emit("annotation_deleted",d.annotation,
a)};d.toggle_pin_status=function(){if(!d.toggling_pin_status){d.toggling_pin_status=!0;var a=d.can("pin_to_profile")?"pin_to_profile":"unpin_from_profile";c[a](d.annotation.id).then(function(a){_.assign(d.annotation,a.annotation)}).finally(function(){d.toggling_pin_status=!1})}};d.$on("vote_submitted",function(a,b,c){"down"===c&&"annotation"===b&&d.focus_comment_textarea()});d.$on("vote_saved",function(a){d.$broadcast("update_voters")})}}}]);
angular.module("genius").directive("annotationEdit",["Session","AnnotationClient",function(a,b){return{restrict:"E",templateUrl:"annotation_edit.html",scope:{edit:"<object",before_html:"<beforeHtml",on_merge:"&onMerge",on_resolution:"&onResolution"},controllerAs:"ctrl",controller:["$scope",function(c){var d=this;this.can_moderate=a.has_permission("moderate",c.edit);this.merge=function(){d.working=!0;c.edit._merged=!0;b.merge_edit(c.edit.id).then(function(a){_.assign(c.edit,a);c.on_merge({edit:c.edit});
c.on_resolution()}).catch(function(){c.edit._merged=!1}).finally(function(){d.working=!1})};this.reject=function(){d.working=!0;c.edit._deleted=!0;b.reject_edit(c.edit.id).then(c.on_resolution).catch(function(){c.edit._deleted=!1}).finally(function(){d.working=!1})}}]}}]);
angular.module("genius").directive("annotationEdits",["AnnotationClient","ReferentClient","ReferentRegistry",function(a,b,c){return{scope:{annotation:"<object",context_updated_at:"<contextUpdatedAt",on_resolution:"&onResolution"},restrict:"E",templateUrl:"annotation_edits.html",controllerAs:"ctrl",controller:["$scope",function(d){var f=this;this.on_merge=function(a){_.assign(d.annotation,a.annotation_after);e()};var e=function(){f.loading_edits||(f.loading_edits=!0,a.proposed_edits(d.annotation.id).then(function(a){d.annotation.edits=
a}).finally(function(){Reflect.deleteProperty(f,"loading_edits")}))};d.$watch("annotation.edits.length",function(a,e){if(a||e){var f=c.peek(d.annotation.referent_id);b.refresh(f)}});d.$watch("context_updated_at",function(a){a&&e()});e()}]}}]);
angular.module("genius").directive("annotationFragment",["ReferentHelper","ReferentRegistry","ReferentElementMap","$compile","$templateCache","$location",function(a,b,c,d,f,e){return{restrict:"A",scope:!0,link:function(h,g,k){h.fragment_id=Number(h.$eval(k.annotationFragment));h.fragment_element_id=h.$id;h.image=h.$eval(k.image);g.data("fragment_element_id",h.fragment_element_id);var m=function(){h.referent.display_mode=a.display_mode_by_classification(h.referent.temporary_classification||h.referent.classification)};
h.$watch("referent.classification",m);h.$watch("referent.temporary_classification",m);h.referent=b.register({id:h.fragment_id,classification:h.classification,stub:!0,fragments:[],is_image:h.image,pending_editorial_actions_count:Number(k.pendingEditorialActionsCount)});c.has(h.referent.id)||c.set(h.referent.id,g);k.verifiedAnnotatorIds&&(h.referent.verified_annotator_ids=_.map(k.verifiedAnnotatorIds.split(" "),Number));h.referent.classification=k.classification;h.referent.fragments.push(g[0].innerText||
g.text());h.referent.fragment=_.uniq(h.referent.fragments).join("\n");h.referent.fragment_from_lyrics=h.referent.fragment;h.open=function(){c.set(h.fragment_id,g);e.url("/"+h.fragment_id)};h.$watch("referent.id",function(a){h.fragment_id=a||h.fragment_id});var l;h.$watch("referent._deleted",function(a){a&&!l?(l=(a=g.find("img")[0])?$("<annotatable-image>").attr({src:a.src,song:"song","on-image-referent-created":"lyrics_ctrl.on_image_referent_created(selection_range, referent);","on-image-referent-creation-failed":"lyrics_ctrl.on_image_referent_creation_failed(error)",
"on-image-referent-creation-started":"lyrics_ctrl.on_image_referent_creation_started(selection_range)","can-perform":"can_perform",lyrics_anchorer:"lyrics_ctrl.lyrics_anchorer"}):$("<span>").html(g.html()),g.before(l).detach(),d(l.parent())(h)):!a&&l&&(l.replaceWith(g),l=void 0)});h.$watch("referent.display_mode",function(a,b){g.removeClass("referent--"+b||"default");g.addClass("referent--"+a||"default")});h.$watchGroup(["highlighted_fragment_id","hover_referent_id"],function(){g.toggleClass("referent--highlighted",
h.highlighted_fragment_id===h.fragment_id||h.hover_referent_id===h.fragment_id)});h.$watchGroup(["showing_annotation_engagement_data","open_data"],function(){h.showing_annotation_engagement_data&&h.open_data?g.attr("data-annotation-views",h.open_data[h.fragment_id]?h.open_data[h.fragment_id]:"N/A"):g.removeAttr("data-annotation-views")});h.can_perform("see_editorial_indicators")&&d(f.get("referent_editorial_indicator.html"))(h).insertBefore(g)}}}]);
angular.module("genius").directive("annotationHistory",[function(){return{restrict:"E",templateUrl:"annotation_history.html",scope:{annotation:"<",onRevert:"&"},controllerAs:"ctrl",controller:["$scope","AnnotationClient","Session",function(a,b,c){this.can_revert=c.has_permission("edit",a.annotation);b.load_versions(a.annotation.id).then(function(b){a.versions=b});this.revert_to=function(c){a.reverting_to=c;b.revert_to_version(a.annotation.id,c).then(function(b){_.assign(a.annotation,b);a.onRevert()}).finally(function(){Reflect.deleteProperty(a,
"reverting_to")})}}]}}]);angular.module("genius").directive("annotationPlaceholder",[function(){return{restrict:"E",templateUrl:"annotation_placeholder.html",scope:{showCondition:"<",noLabel:"<",placeholder_title:"<placeholderTitle"}}}]);
angular.module("genius").directive("annotationSidebar",[function(){var a={verified:"add_pinned_annotation_to",community:"add_community_annotation_to"};return{templateUrl:"annotation_sidebar.html",controllerAs:"ctrl",scope:!0,link:function(a,c,d){a.$watch(d.referent,function(c){a.referent=c})},controller:["$scope","Session","ReferentHelper","Attempt",function(b,c,d,f){var e=this;this.user_signed_in=c.user_signed_in;this.can_create_referent_from_selection=function(){return!!b.$ctrl.lyrics_selection_range};
this.start_new_referent_annotation=function(a){var c=this;b.$ctrl.creating_referent=!0;b.$ctrl.lyrics_compiled.promise.then(function(){b.$ctrl.lyrics_interface.block_edit(!0);return b.$ctrl.lyrics_interface.anchorer.create_referent(b.$ctrl.lyrics_selection_range,a).then(function(a){b.$emit("referent_created",a);b.referent=a})}).then(function(){c.referent_creation_failed=!0}).finally(function(){b.$ctrl.creating_referent=!1;b.$ctrl.lyrics_interface.block_edit(!1)})};this.add_pinned_annotation=function(){var a=
d.create_verified_annotation_placeholder(b.referent);b.referent.annotations.unshift(a)};this.add_community_annotation=function(){var a=d.create_community_annotation_placeholder(b.referent);b.referent.annotations.push(a)};this.can_create_annotation_type_on_referent=function(d){return!b.referent||_.some(b.referent.annotations,"new")?!1:c.has_permission(a[d],b.referent)};this.can_create_community_annotation_on_referent=function(){return this.can_create_annotation_type_on_referent("community")&&!_.some(b.referent.annotations,
"needs_exegesis")};b.$watch("referent.id",function(a,b){a&&b&&a.id===b.id||(e.referent_creation_failed=!1)});this.close=function(){f.close_form(!e.annotation_dirty,function(){e.annotation_dirty=!1;b.$ctrl.clear_current_referent();b.sidebar.signing_up=!1})}}]}}]);
angular.module("genius").directive("applyAnnotationArrowClass",["$immediate","MutationObserver",function(a,b){return{restrict:"A",link:function(c,d){var f=new b(function(b){a(function(){for(var a=0;a<b.length;a++){var c=b[a];"style"===c.attributeName&&(c=c.target.getBoundingClientRect(),c=!!$(document.elementFromPoint(c.right+1,c.top-1)).closest(".annotation_sidebar_unit--verified").length,d.toggleClass("annotation_sidebar_arrow--verified",c))}},!0)});f.observe(d[0],{attributes:!0});c.$on("destroy",
f.disconnect.bind(f))}}}]);
angular.module("genius").directive("authenticationForm",["$window","AuthenticationClient","AbTest","AppConfig","$q","FingerprintJS",function(a,b,c,d,f,e){return{scope:{variants:"<?",on_cancel:"&onCancel",user_session:"=?userSession",include_sign_in:"<?signIn",include_social:"<?social",show_email_fields:"=?showEmail",header_text:"<headerText",preamble_text:"<preambleText",init_signing_in:"<signingIn"},templateUrl:"authentication_form.html",controllerAs:"ctrl",controller:["$scope",function(h){var g=
this;this.show_email_fields=h.show_email_fields;this.signing_in=h.init_signing_in;h.user_session=h.user_session||{};this.submit=function(){if(!g.saving){g.saving=!0;g.errors=null;var k=g.signing_in?"sign_in":"sign_up",m=f.resolve();g.signing_in||(m=f.when(e.load({endpoint:"https://fp.genius.com",apiKey:d.fingerprint_api_key})).then(function(a){return a.get()}).then(function(a){h.user_session.device_fingerprint=a.visitorId}).catch(function(){h.user_session.device_fingerprint="errored-bagon"}));m.then(function(){return b[k](h.user_session)}).then(function(b){c.clear();
"sign_up"===k&&"/"===a.location.pathname?a.location=b.user.url:a.location.reload()}).catch(function(a){g.errors=a.response.errors}).finally(function(){g.saving=!1})}};this.toggle_signup_signin=function(){g.show_email_fields=!0;g.signing_in=!g.signing_in;g.errors=null}}]}}]);angular.module("genius").directive("autoResizeIframe",function(){return{restrict:"A",link:function(a,b,c){var d;c.autoResizeIframe&&(d=a.$eval(c.autoResizeIframe));b.iFrameResize(d)}}});
angular.module("genius").directive("autocompleteTagsInput",["AlbumClient","ArtistClient","TagClient","SongClient",function(a,b,c,d){var f={album:{autocomplete:a.autocomplete,persistence_property:"name",display_property:"name_with_artist"},artist:{autocomplete:b.autocomplete,display_property:"name"},tag:{autocomplete:c.autocomplete,display_property:"name"},song:{autocomplete:d.autocomplete,persistence_property:"id",display_property:"full_title"}};return{restrict:"E",scope:{bindTo:"=",disabled:"<ngDisabled",
name:"@",inputClasses:"@",autocompleteModel:"@",autocompleteOptions:"<?",requireExisting:"<",excludeIf:"&"},templateUrl:"autocomplete_tags_input.html",link:{pre:function(a){var b=f[a.autocompleteModel];a.max_results=10;a.display_property=b.display_property;a.autocomplete=function(c){return b.autocomplete(c,a.autocompleteOptions).then(function(d){d=_.reject(d,function(b){return a.excludeIf({result:b})});if(a.requireExisting||_.some(d,function(b){return b[a.display_property].toLowerCase()===c.toLowerCase()}))return d;
var f={_new:!0};f[b.display_property]=c;b.persistence_property&&(f[b.persistence_property]=c);return d=_.take(d,a.max_results-1).concat(f)})}},post:function(a,b,c){a.placeholder=function(){return a.bindTo&&0===a.bindTo.length?c.placeholder:""}}}}}]);
angular.module("genius").directive("autocompleteWith",["ArtistClient","UserClient","CustomPerformanceRoleClient","SongClient","Bindings",function(a,b,c,d,f){var e={delay:250,scroll:!1,matchSubset:!1,max:20,minChars:4,dataType:"json",selectFirst:!1,resultsClass:"autocomplete-results"},h={user:b,customPerformanceRole:c,artist:a,song:d},g=f.resolver({on_select:"&?onSelect",create_result:"&?createResult",display_field:"@displayField",autocomplete_with:"@autocompleteWith"});return{restrict:"A",require:"?ngModel",
link:function(a,b,c,d){var f=g(a,c),q=f.display_field;c=h[f.autocomplete_with];var t={};q&&(d.$formatters.push(function(a){return a?_.get(a[0],q,""):""}),d.$parsers.push(function(a){t[a]=t[a]||_.set({},q,a);return t[a]}));var u=_.assign({},e,c.autocomplete_options),w=u.parse;u.parse=function(a,b){var c=w(a);_.each(c,function(a){t[a.data[0]]=a.value});if(f.create_result){var d=f.create_result({term:b});c.unshift({data:[b,d],result:d,value:d})}return c};b.autocomplete(c.autocomplete_api_endpoint,u).result(function(c,
e){_.isUndefined(f.on_select)?(d.$setViewValue(e[0]),d.$render()):(a.$apply(function(){return f.on_select({data:e[1]})}),b.val(""))})}}}]);
angular.module("genius").directive("brightcove",["$window","Ads","AppConfig","Bindings","Brightcove","Bowser","querystring","$q","Session","$timeout","mobile_device",function(a,b,c,d,f,e,h,g,k,m,l){var n=d.resolver({video:"<object",on_ready:"&onReady",can_play:"&canPlay",on_time_change:"&onTimeChange",on_finish:"&onFinish",yields_api:"&yieldsApi",player_name:"@playerName",tracking_data:"<trackingData",autoplays_on_page_load:"<autoplaysOnPageLoad"}),r=Date.now();return{restrict:"A",link:function(d,
t,u){var w=this,A=t[0];if(A.constructor!==a.HTMLVideoElement)throw Error("The 'brightcove' directive can only be used as an attribute on a <video> element");var x=n(d,u),E=f[x.player_name+"_player_id"];if(!E)throw Error("The 'brightcove' slot is not configured!");var F=g(function(a){return d.$on("$destroy",a)});d.player=f.load_api(E).then(function(a){var c=a.bc,g=a.videojs,n=function(){_.each(g.players,function(a){a&&a.pause()})};a=Object.assign({"Logged In":k.user_signed_in,"Mobile Site":l},x.tracking_data);
t.attr({"data-video-id":x.video.provider_id,"data-account":f.account_id,"data-player":E,"data-embed":"default","data-param-tracking-data":JSON.stringify(a),controls:!0});var r;r=/(?:^|\s)vjs-tech(?:\s|$)/.test(A.className)?g(A):c(A);r.play=_.wrap(r.play,function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];n();Reflect.apply(a,r,b);e.android&&(b=A.requestFullScreen||A.webkitRequestFullScreen||A.mozRequestFullScreen)&&Reflect.apply(b,A,[])});r.ima3&&(r.ima3.adMacroReplacement=_.wrap(r.ima3.adMacroReplacement,
function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return y(Reflect.apply(a,r.ima3,b))}));r.ready(function(){d.$apply(x.on_ready);x.yields_api({api:r});$(r.el_).find(".vjs-control").addClass("needsclick")});r.on("timeupdate",_.throttle(function(){var a=r.duration(),b=r.currentTime();d.$apply(function(){x.on_time_change({duration:a,current:b});if(a&&b>=a)x.on_finish()})}),250);t.on("canplay",function(){d.$apply(x.can_play);x.autoplays_on_page_load&&m(function(){return t.css("opacity",
1)},0)});F.then(function(){return r.dispose()});return r.ima3?(c=_.last(h.parse((new URL(r.ima3.settings.serverUrl)).search).iu.split("/")),b.ensure_targeting_for_placements([[c,c]]).then(function(a){w._ad_targeting=_.get(_.values(a),[0,"targeting"],{});return r})):r});var y=function(b){if(!window["Genius.ads"])return null;var d=w._ad_targeting;b=new URL(b);var e=h.parse(b.search.slice(1));_.assign(e,{url:a.location.href,description_url:x.video.article_url,hl:(a.navigator.language||"en").split("-")[0],
correlator:r});x.autoplays_on_page_load&&(e.vpa=1);var f={};x.video.dfp_kv.forEach(function(a){f[a.name]=a.values.join(",")});var g;g="null"===e.cust_params?{}:h.parse(e.cust_params||"");d=_.defaults({},d,f,g,{platform:"web",environment:c.env,campaign_id:h.parse(a.location.search.slice(1)).campaign});e.cust_params=h.stringify(d);b.search=h.stringify(e);return b.toString()}}}}]);
angular.module("genius").directive("classForBrowser",["Bowser","Bindings",function(a,b){var c=b.resolver({browsers_and_classes:"<classForBrowser"});return{restrict:"A",link:function(b,f,e){b=c(b,e);var h=!1;_.each(b.browsers_and_classes,function(b,c){_.has(a,c)&&(f.addClass(b),h=!0)});h||f.addClass(b.browsers_and_classes._default)}}}]);
angular.module("genius").directive("classForDuration",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){_.forIn(b.$eval(d.classForDuration),function(b,d){b&&(c.addClass(d),a(function(){c.removeClass(d)},b))})}}}]);
angular.module("genius").directive("clickOutside",["$document",function(a){return{restrict:"A",link:function(b,c,d){var f=d.hasOwnProperty("suppressClickOutsideIfHandled"),e=function(a){f&&a.originalEvent.defaultPrevented||document.body.contains(a.target)&&(c[0].contains(a.target)||b.$apply(function(){b.$eval(d.clickOutside,{$event:a})}))},h=c.closest("[click-outside-target]").length?c.closest("[click-outside-target]"):a;h.on("click",e);b.$on("$destroy",function(){h.off("click",e)})}}}]);
angular.module("genius").directive("clickToLoad",[function(){return{scope:{message:"@"},restrict:"E",transclude:!0,templateUrl:"click_to_load.html",link:function(a){a.load=function(){a.loading=!0}}}}]);
angular.module("genius").directive("clippedBackgroundImage",["$window","ImageTransform",function(a,b){return{link:function(c,d,f){c.$watch(f.clippedBackgroundImage,function(e){c.$applyAsync(function(){d.addClass("clipped_background_image");var c="",g=parseInt(f.clippedBackgroundImageWidthIncrement);_.isFinite(g)||(g=1);if(e){var c=a.devicePixelRatio||1,k=d.outerWidth(),k=Math.ceil(k/g)*g*c,m=d.outerHeight(),g=Math.ceil(m/g)*g*c,m=void 0;_.has(f,"clippedBackgroundImageFitHeight")&&k>g?(m=b.resize(e,
{height:g}),d.addClass("clipped_background_image--tiled_horizontally")):m=b.resize(e,{width:k,height:d.height()*c});c="url('"+m+"')"}d.css("background-image",c)})})}}}]);var REMOVED_STATES=["accepted","integrated","rejected","marked_spam","archived"];
angular.module("genius").directive("comment",["Session","CommentClient","Reversible",function(a,b,c){return{restrict:"E",templateUrl:"comment.html",scope:{comment:"<object",variants:"<"},require:"?^^annotation",controllerAs:"ctrl",controller:function(){},link:function(d,f,e,h){var g=function(a,b){void 0===b&&(b={});var e=h?h.comment_removed():void 0,f=c.modify(d.comment,Object.assign(b,{_deleted:!0}));a.catch(function(){e&&e();f()})};d.destroy=function(){g(b.destroy(d.comment.id),{deleted_at:(new Date).getTime()})};
d.integrate=function(){h.integrate_comment(d.comment);d.perform_action("integrate","integrated")};d.perform_action=function(a,c){g(b.change_state(d.comment.id,a),{state:c})};d.can_perform=function(b){return a.has_permission(b,d.comment)};d.toggle_voters=function(){d.showing_voters=!d.showing_voters};d.$on("vote_saved",function(a){d.$broadcast("update_voters")});d.is_removed=function(){return d.comment.deleted_at||_.includes(REMOVED_STATES,d.comment.state)}}}}]);
angular.module("genius").directive("commentForm",[function(){return{restrict:"E",templateUrl:"comment_form.html",scope:{commentable:"<",onSave:"&",allowReasons:"<",saveText:"@",savingText:"@",textareaPlaceholder:"@",showFullFormByDefault:"<",showReasonsByDefault:"<",on_dirty:"&onDirty",on_clean:"&onClean"},controllerAs:"ctrl",controller:["Session","$scope","Reversible",function(a,b,c){var d=this;this.user_signed_in=a.user_signed_in;this.show_full_form_by_default=b.showFullFormByDefault;this.show_reasons_by_default=
b.showReasonsByDefault;this.showing_full_form=this.show_full_form_by_default||!1;this.current_user=a.current_user;this.show_full_form=function(){return d.showing_full_form=!0};this.show_reasons_form=function(){return d.showing_full_form||d.show_reasons_by_default};var f=function(){b.comment={_new:!0,author:a.current_user,body:{}}};f();this.body_is_required=function(){return!b.comment.reason||b.comment.reason.requires_body};this.save=function(){if(!d.saving){a.user_signed_in||(b.comment.anonymous_user=
{name:b.comment.name});var e=b.comment,h=c.modify(d,{showing_full_form:!1,saving:!1});f();b.form.$setPristine();b.onSave({comment:e}).catch(function(){b.comment=e;h()})}};b.$watch("comment.body.markdown",function(a){if(_.isEmpty(a))b.on_clean();else b.on_dirty()})}],link:function(a,b){a.$on("focus_comment_textarea",function(c,d){d===a.commentable&&b.find('textarea[ng-model="comment.body.markdown"]').focus()})}}}]);
angular.module("genius").directive("commentsPlaceholder",[function(){return{restrict:"E",templateUrl:"comments_placeholder.html",scope:{}}}]);
angular.module("genius").directive("componentDateInput",function(){return{scope:{ngModel:"=",disabled:"<"},restrict:"E",templateUrl:"component_date_input.html",controllerAs:"ctrl",controller:[function(){_.assign(this,{years:_.range(1,(new Date).getFullYear()+2).reverse(),months:"January February March April May June July August September October November December".split(" ").map(function(a,b){return{name:a,number:b+1}}),days:_.range(1,32)})}]}});
angular.module("genius").directive("composeMessage",[function(){return{restrict:"E",scope:{recipient:"<",on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"compose_message.html",controller:["$scope","MessageClient","Session",function(a,b,c){var d=this,f;a.recipient&&(f=a.recipient.id);var e=function(){a.message={recipient_id:f,body:""};a.ctrl.form&&a.ctrl.form.$setPristine()};e();this.new_message=!a.message.recipient_id;this.current_user=c.current_user;this.markdown_preview_initialized=
this.showing_markdown_preview=!1;this.show_markdown_preview=function(){d.showing_markdown_preview=!0;d.markdown_preview_initialized=!0};this.hide_markdown_preview=function(){d.showing_markdown_preview=!1};this.send=function(){a.sending=!0;a.error=null;b.create(a.message).then(function(b){e();a.on_sent({message:b})}).catch(function(b){a.error=b}).finally(function(){a.sending=!1})}}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("confirm",["$window",function(a){return{priority:-1,restrict:"A",scope:{message:"@confirm"},link:function(b,c){c.on("click",function(c){b.message&&!a.confirm(b.message)&&(c.stopImmediatePropagation(),c.preventDefault())})}}}]);
angular.module("genius").directive("conversationMessages",[function(){return{templateUrl:"conversation_messages.html",scope:{conversation:"<",yields_is_dirty:"&yieldsIsDirty"},controller:["$scope","MessageClient","ConversationClient",function(a,b,c){var d=1,f;a.finished_paginating=!1;a.messages=[];this.message_sent=function(b){a.messages.push(b);a.conversation.latest_message=b;a.conversation.latest_message_preview=b.body_preview};this.should_paginate=function(){return!f&&!a.finished_paginating};this.load_next_page=
function(){f||(f=b.for_conversation(a.conversation.id,{page:d}).then(function(b){var h;(h=a.messages).unshift.apply(h,b.reverse());f=null;1===d&&c.mark_read(a.conversation.id);++d;a.finished_paginating=0===b.length}))};this.load_next_page()}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("conversationWithUser",["ConversationClient",function(a){return{restrict:"E",scope:{user:"<",yields_is_dirty:"&yieldsIsDirty"},template:'\n      <conversation-messages\n        conversation="conversation"\n        ng-if="conversation"\n        yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n      ></conversation-messages>\n    ',controller:["$scope",function(b){a.with_user(b.user.id).then(function(a){b.conversation=a})}]}}]);
angular.module("genius").directive("conversations",["ConversationClient","Attempt",function(a,b){return{restrict:"E",scope:{visible:"<",refresh_at:"<refreshAt",on_conversation_read:"&onConversationRead",on_modal_open:"&onModalOpen",on_modal_close:"&onModalClose",embed:"<",modal_dimensions:"<modalDimensions"},templateUrl:"conversations.html",controller:["$scope",function(c){var d=this;c.attempt_close=b.close_form;var f,e,h,g=function(){f=Date.now();c.conversations=[];d.all_pages_loaded=!1;e=1};g();
this.should_paginate=function(){return!!c.visible&&!d.all_pages_loaded&&!h};this.load_page=function(){h||(h=a.latest({page:e}).then(function(a){var b;(b=c.conversations).push.apply(b,a);d.all_pages_loaded=!a.length;++e;h=null}))};c.$watchGroup(["visible","refresh_at"],function(){!c.visible&&c.refresh_at&&c.refresh_at>f&&g()});this.open=function(a,b){b.preventDefault();c.open_conversation_id=a;var d=_.find(c.conversations,{id:a}),e=d.unread,f=d.unread_messages_count;d.unread=!1;d.unread_messages_count=
0;c.on_modal_open();if(e)c.on_conversation_read({conversation:d,unread_messages_count:f})};this.close=function(){c.on_modal_close();c.open_conversation_id=null}}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("copyToClipboard",["Clipboard","$timeout",function(a,b){var c=function(a,c){var e=a.text();a.text(c);b(function(){a.text(e)},750)};return{restrict:"A",link:function(b,f,e){var h=new a(f[0],{text:function(){return b.$eval(e.copyToClipboard)}});h.on("success",function(){e.textToShowAfterCopy&&c(f,e.textToShowAfterCopy)});h.on("error",f.remove);b.$on("$destroy",h.destroy.bind(h))}}}]);
angular.module("genius").directive("copyValueToScope",[function(){return{restrict:"A",link:{pre:function(a,b,c){b=a.$eval(c.copyValueToScope);a[b.key]=b.value}}}}]);angular.module("genius").directive("cosigns",function(){return{restrict:"E",templateUrl:"cosigns.html"}});angular.module("genius").directive("delayedHref",["$window","$immediate",function(a,b){return{restrict:"A",link:function(c,d,f){var e=f.delayedHref;d.on("click",function(c){c.preventDefault();b(function(){a.location.href=e},!1)})}}}]);
angular.module("genius").directive("delimitedKeys",function(){return{scope:{key:"@delimitedKeys"},restrict:"A",require:"ngModel",link:function(a,b,c,d){var f={};a.$watch(c.ngModel,function(b){b&&b.forEach(function(b){f[b[a.key]]=b})});d.$formatters.push(function(b){return _.map(b,a.key).join(", ")});d.$parsers.push(function(b){return b.split(/\s?,\s/).map(function(b){return f[b]||_.set({},a.key,b)})})}}});
angular.module("genius").directive("descriptionReferent",[function(){return{scope:{referent:"<object",variants:"<"},templateUrl:"description_annotation.html"}}]);angular.module("genius").directive("detectImageDiffs",["$immediate",function(a){return{link:function(b,c,d){a(function(){c.find("img").each(function(){var a=-1!==b.$eval(d.left).indexOf(this.src),c=-1!==b.$eval(d.right).indexOf(this.src);a&&!c&&this.classList.add("del");!a&&c&&this.classList.add("ins")})},!1)}}}]);
angular.module("genius").directive("dirtyable",["BeforeUnloadCheck",function(a){return{restrict:"A",require:"form",link:function(b,c,d,f){var e=function(){b.$apply(function(){return f.$commitViewValue()});return f.$dirty};b.$eval(d.yieldsIsDirty,{is_dirty:function(){f.$commitViewValue();return f.$dirty}});a.add(e);b.$on("$destroy",function(){return a.remove(e)})}}}]);
angular.module("genius").directive("displayUnlessCookie",["Cookies","DateTools",function(a,b){var c=function(c,f){a.put(c,1,{expires:b.days_to_ms(f),path:"/"})};return{transclude:!0,scope:{name:"@",expiresInDays:"<",setCookieOnDisplay:"<"},template:'<ng-transclude ng-if="!hidden"></ng-transclude>',link:function(b){b.hidden=a.get(b.name);b.setCookieOnDisplay&&!a.get(b.name)&&c(b.name,b.expiresInDays)},controller:["$scope",function(a){this.set_cookie_and_close=function(){c(a.name,a.expiresInDays);a.hidden=
!0}}]}}]);
(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(c){this.el=c;this.dragleave=b(this.dragleave,this);this.dragenter=b(this.dragenter,this);this.supportsEventConstructors()&&(this.second=this.first=!1,this.el.addEventListener("dragenter",this.dragenter,!1),this.el.addEventListener("dragleave",this.dragleave,!1))}a.prototype.dragenter=function(a){if(this.first)return this.second=!0;this.first=!0;return this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:!0,
cancelable:!0,detail:{dataTransfer:a.dataTransfer}}))};a.prototype.dragleave=function(a){this.second?this.second=!1:this.first&&(this.first=!1);if(!this.first&&!this.second)return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:!0,cancelable:!0,detail:{dataTransfer:a.dataTransfer}}))};a.prototype.removeListeners=function(){this.el.removeEventListener("dragenter",this.dragenter,!1);return this.el.removeEventListener("dragleave",this.dragleave,!1)};a.prototype.supportsEventConstructors=
function(){try{new CustomEvent("z")}catch(a){return!1}return!0};a.prototype.reset=function(){return this.second=this.first=!1};return a}();window.Dragster=a}).call(this);
angular.module("genius").directive("dragAndDrop",["Bindings",function(a){var b=a.resolver({data:"<dragAndDrop",draggable:"<",on_dragstart:"&onDragstart",on_dragend:"&onDragend",on_dragenter:"&onDragenter",on_dragleave:"&onDragleave",on_drop:"&?onDrop",cant_drop:"<cantDrop"});return{restrict:"A",link:function(a,d,f){var e=b(a,f);e.draggable&&(d.addClass("draggable_item"),d[0].addEventListener("dragstart",function(b){b.dataTransfer.setData("text",JSON.stringify(e.data));d.addClass("draggable_item--dragging");
a.$apply(e.on_dragstart)}),d[0].addEventListener("dragend",function(){d.removeClass("draggable_item--dragging");a.$apply(e.on_dragend)}));e.on_drop&&(new Dragster(d[0]),d[0].addEventListener("dragster:enter",function(){e.cant_drop||(d.addClass("droppable_item"),a.$apply(e.on_dragenter))}),d[0].addEventListener("dragster:leave",function(){e.cant_drop||(d.removeClass("droppable_item"),a.$apply(e.on_dragleave))}),d[0].addEventListener("dragover",function(a){a.preventDefault()}),d[0].addEventListener("drop",
function(b){b.stopPropagation();b.preventDefault();d.removeClass("droppable_item");if(!e.cant_drop){var f=JSON.parse(b.dataTransfer.getData("text"));a.$apply(function(){return e.on_drop({data:f})});return!1}}))}}}]);
angular.module("genius").directive("editableMarkdown",["$immediate","Filepicker","Autosize",function(a,b,c){return{restrict:"E",replace:!0,templateUrl:"editable_markdown.html",scope:{html:"=",markdown:"=",is_required:"<?isRequired",placeholder:"@"},controller:function(){var a=new b;this.pick_image=function(){a.pick_and_store().then(function(a){this.insert_at_markdown_cursor({before:a})}.bind(this))}},controllerAs:"ctrl",link:function(b,f){b.editable=b;b.resize_textarea=function(){b.$evalAsync(function(){var b=
f.find("textarea");c(b);a(b.focus.bind(b),!1)})}}}}]);
angular.module("genius").directive("embedly",["getScript","querystring","$compile",function(a,b,c){var d=/^https?:\/\//i,f=function(a){return a.find("a").filter(function(){return d.test($.trim($(this).text()))})},e=_.template('\n    <blockquote class="twitter-tweet">\n      <a href="<%- tweet_url %>"></a>\n    </blockquote>\n  '),h=_.template('\n    <blockquote\n      class="rg_standalone_container"\n      data-src="//'+CANONICAL_DOMAIN+'/annotations/<%- annotation_id %>/standalone_embed"\n    ></blockquote>\n  '),g=
_.template('\n    <embedly-embed\n      embed=":: <%- JSON.stringify(embed) %>"\n    ></embedly-embed>\n  '),k=_.template('\n    <embedly-youtube\n      video-id="<%- video_id %>"\n      start="<%- start %>"\n    ></embedly-youtube>\n  '),m=/^https?:\/\/tidal\.com\/(track|album|video)\/(\d+)$/,l=_.template('\n    <div class="tidal-embed" data-type="<%- type %>" data-id="<%- id %>"></div>\n  '),n=function(d,n){var u=$(d||".embedly:visible");f(u).each(function(){var d=$(this);if(app.youtubeURLre.test(this.href)){var f=
new URL(this.href),r=b.parse(f.search.slice(1)),q=b.parse(f.hash.slice(1)),q=r.t||q.t||0;/\d+m|\d+s|\d+m\d+s/.test(q)&&(q=_(q.match(/^(\d+m)?(\d+s)?$/)).slice(1,3).values().map(function(a){return a?parseInt(a):0}).thru(function(a){return 60*a[0]+a[1]}).value());f=r.v||f.pathname.slice(1);d.replaceWith(c(k({video_id:f,start:q}))(n))}else if(app.twitterURLre.test(this.href))d.replaceWith(e({tweet_url:this.href})),a("//platform.twitter.com/widgets.js",{cache:!0});else if(app.rgURLre.test(this.href)&&
this.href===d.text()&&!d.closest(".cont-annotations.act-standalone_embed").length)f=app.rgURLre.exec(this.href).pop(),d.replaceWith(h({annotation_id:f})),a("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",{cache:!0});else if(this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))d.embedly({addImageStyles:!1,className:"embedly_preview",secure:!0,query:{secure:"true"}});else if(m.test(this.href))f=this.href.match(m).slice(1),d.replaceWith(l({type:f[0][0],id:f[1]})),
a("//embed.tidal.com/tidal-embed.js",{cache:!0});else if(app.embedlyURLre.test(this.href))d.embedly({addImageStyles:!1,className:"embedly_preview",secure:!0,query:{luxe:!MOBILE_DEVICE,secure:"true"},display:function(a){var b=a.html;/soundcloud\.com/.test(b)?(a.html=b.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),a.height=165):("video"===a.type||"photo"!==a.type&&"rich"!==a.type)&&d.replaceWith(c(g({embed:a}))(n));a.display()}});else return;d.text("Loading embed...")});
r(d,n)},r=function(a,b){var d=$(a||".embedly_pro:visible");f(d).each(function(){if(app.embedlyURLre.test(this.href))return!0;var a=$(this);a.embedly({secure:!0,query:{secure:"true"},display:function(d){d.description&&_.trim(a.parent().text())===_.trim(a.text())?("Wikipedia"===d.provider_name&&(d.html=null),a.replaceWith(c(g({embed:d}))(b))):a.text(d.title)}});a.text("Loading embed...")})};return{restrict:"A",link:function(a,b,c){a.$watch(c.embedly||c.ngBindHtml,function(c){c&&n(b,a)})}}}]);
!function(a,b){function c(a){return function(){var b={method:a},c=Array.prototype.slice.call(arguments);/^get/.test(a)?(d.assert(0<c.length,"Get methods require a callback."),c.unshift(b)):(/^set/.test(a)&&(d.assert(0!==c.length,"Set methods require a value."),b.value=c[0]),c=[b]);this.send.apply(this,c)}}var d={DEBUG:!1,VERSION:"0.0.10",CONTEXT:"player.js"};d.POST_MESSAGE=!!a.postMessage;d.ENABLE_CONTEXT=!1;d.origin=function(b){return"//"===b.substr(0,2)&&(b=a.location.protocol+b),b.split("/").slice(0,
3).join("/")};d.addEvent=function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)};d.log=function(){d.log.history=d.log.history||[];d.log.history.push(arguments);a.console&&d.DEBUG&&a.console.log(Array.prototype.slice.call(arguments))};d.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};d.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)};d.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)};d.isNone=function(a){return null===a||void 0===a};d.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};d.indexOf=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(Array.prototype.IndexOf&&a.indexOf===Array.prototype.IndexOf)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1};d.assert=function(a,b){if(!a)throw b||"Player.js Assert Failed";};d.Keeper=function(){this.init()};d.Keeper.prototype.init=function(){this.data={}};d.Keeper.prototype.getUUID=
function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})};d.Keeper.prototype.has=function(a,b){if(!this.data.hasOwnProperty(a))return!1;if(d.isNone(b))return!0;for(var c=this.data[a],e=0;e<c.length;e++)if(c[e].id===b)return!0;return!1};d.Keeper.prototype.add=function(a,b,c,d,e){a={id:a,event:b,cb:c,ctx:d,one:e};this.has(b)?this.data[b].push(a):this.data[b]=[a]};d.Keeper.prototype.execute=function(a,b,c,
e){if(!this.has(a,b))return!1;for(var f=[],h=[],q=0;q<this.data[a].length;q++){var t=this.data[a][q];d.isNone(b)||!d.isNone(b)&&t.id===b?(h.push({cb:t.cb,ctx:t.ctx?t.ctx:e,data:c}),!1===t.one&&f.push(t)):f.push(t)}0===f.length?delete this.data[a]:this.data[a]=f;for(a=0;a<h.length;a++)b=h[a],b.cb.call(b.ctx,b.data)};d.Keeper.prototype.on=function(a,b,c,d){this.add(a,b,c,d,!1)};d.Keeper.prototype.one=function(a,b,c,d){this.add(a,b,c,d,!0)};d.Keeper.prototype.off=function(a,b){var c=[];if(!this.data.hasOwnProperty(a))return c;
for(var e=[],f=0;f<this.data[a].length;f++){var h=this.data[a][f];d.isNone(b)||h.cb===b?d.isNone(h.id)||c.push(h.id):e.push(h)}return 0===e.length?delete this.data[a]:this.data[a]=e,c};d.Player=function(a,b){return this instanceof d.Player?void this.init(a,b):new d.Player(a,b)};d.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"};d.EVENTS.all=function(){var a=[],b;for(b in d.EVENTS)d.has(d.EVENTS,b)&&d.isString(d.EVENTS[b])&&a.push(d.EVENTS[b]);
return a};d.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"};d.METHODS.all=function(){var a=[],b;for(b in d.METHODS)d.has(d.METHODS,b)&&d.isString(d.METHODS[b])&&a.push(d.METHODS[b]);return a};d.READIED=
[];d.Player.prototype.init=function(c){var e=this;d.isString(c)&&(c=b.getElementById(c));this.elem=c;this.origin=d.origin(c.src);this.keeper=new d.Keeper;this.isReady=!1;this.queue=[];this.events=d.EVENTS.all();this.methods=d.METHODS.all();d.POST_MESSAGE?d.addEvent(a,"message",function(a){e.receive(a)}):d.log("Post Message is not Available.");-1<d.indexOf(d.READIED,c.src)?e.loaded=!0:this.elem.onload=function(){e.loaded=!0}};d.Player.prototype.send=function(a,b,c){if(a.context=d.CONTEXT,a.version=
d.VERSION,b){var e=this.keeper.getUUID();a.listener=e;this.keeper.one(e,a.method,b,c)}return this.isReady||"ready"===a.value?(d.log("Player.send",a,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(a),this.origin),!0):(d.log("Player.queue",a),this.queue.push(a),!1)};d.Player.prototype.receive=function(a){if(d.log("Player.receive",a),a.origin!==this.origin)return!1;var b;try{b=JSON.parse(a.data)}catch(c){return!1}return d.ENABLE_CONTEXT&&b.context!==d.CONTEXT?!1:("ready"===
b.event&&b.value&&b.value.src===this.elem.src&&this.ready(b),void(this.keeper.has(b.event,b.listener)&&this.keeper.execute(b.event,b.listener,b.value,this)))};d.Player.prototype.ready=function(a){if(!0===this.isReady)return!1;a.value.events&&(this.events=a.value.events);a.value.methods&&(this.methods=a.value.methods);this.loaded=this.isReady=!0;for(var b=0;b<this.queue.length;b++){var c=this.queue[b];d.log("Player.dequeue",c);"ready"===a.event&&this.keeper.execute(c.event,c.listener,!0,this);this.send(c)}this.queue=
[]};d.Player.prototype.on=function(a,b,c){var d=this.keeper.getUUID();return"ready"===a?this.keeper.one(d,a,b,c):this.keeper.on(d,a,b,c),this.send({method:"addEventListener",value:a,listener:d}),!0};d.Player.prototype.off=function(a,b){var c=this.keeper.off(a,b);if(d.log("Player.off",c),0<c.length)for(var e in c)return this.send({method:"removeEventListener",value:a,listener:c[e]}),!0;return!1};d.Player.prototype.supports=function(a,b){d.assert(-1<d.indexOf(["method","event"],a),'evtOrMethod needs to be either "event" or "method" got '+
a);b=d.isArray(b)?b:[b];for(var c="event"===a?this.events:this.methods,e=0;e<b.length;e++)if(-1===d.indexOf(c,b[e]))return!1;return!0};for(var f=0,e=d.METHODS.all().length;e>f;f++){var h=d.METHODS.all()[f];d.Player.prototype.hasOwnProperty(h)||(d.Player.prototype[h]=c(h))}a.playerjs=d;d.addEvent(a,"message",function(a){var b;try{b=JSON.parse(a.data)}catch(c){return!1}return d.ENABLE_CONTEXT&&b.context!==d.CONTEXT?!1:void("ready"===b.event&&b.value&&b.value.src&&d.READIED.push(b.value.src))});d.Receiver=
function(a,b){this.init(a,b)};d.Receiver.prototype.init=function(c,e){var f=this;this.isReady=!1;this.origin=d.origin(b.referrer);this.methods={};this.supported={events:c?c:d.EVENTS.all(),methods:e?e:d.METHODS.all()};this.eventListeners={};(this.reject=!(a.self!==a.top&&d.POST_MESSAGE))||d.addEvent(a,"message",function(a){f.receive(a)})};d.Receiver.prototype.receive=function(b){if(b.origin!==this.origin)return!1;var c={};if(d.isObject(b.data))c=b.data;else try{c=a.JSON.parse(b.data)}catch(e){d.log("JSON Parse Error",
e)}if((d.log("Receiver.receive",b,c),!c.method)||d.ENABLE_CONTEXT&&c.context!==d.CONTEXT)return!1;if(-1===d.indexOf(d.METHODS.all(),c.method))return this.emit("error",{code:2,msg:'Invalid Method "'+c.method+'"'}),!1;b=d.isNone(c.listener)?null:c.listener;"addEventListener"===c.method?(this.eventListeners.hasOwnProperty(c.value)?-1===d.indexOf(this.eventListeners[c.value],b)&&this.eventListeners[c.value].push(b):this.eventListeners[c.value]=[b],"ready"===c.value&&this.isReady&&this.ready()):"removeEventListener"===
c.method?this.eventListeners.hasOwnProperty(c.value)&&(b=d.indexOf(this.eventListeners[c.value],b),-1<b&&this.eventListeners[c.value].splice(b,1),0===this.eventListeners[c.value].length&&delete this.eventListeners[c.value]):this.get(c.method,c.value,b)};d.Receiver.prototype.get=function(a,b,c){var d=this;if(!this.methods.hasOwnProperty(a))return this.emit("error",{code:3,msg:'Method Not Supported"'+a+'"'}),!1;var e=this.methods[a];"get"===a.substr(0,3)?e.call(this,function(b){d.send(a,b,c)}):e.call(this,
b)};d.Receiver.prototype.on=function(a,b){this.methods[a]=b};d.Receiver.prototype.send=function(b,c,e){if(d.log("Receiver.send",b,c,e),this.reject)return d.log("Receiver.send.reject",b,c,e),!1;b={context:d.CONTEXT,version:d.VERSION,event:b};d.isNone(c)||(b.value=c);d.isNone(e)||(b.listener=e);c=JSON.stringify(b);a.parent.postMessage(c,""===this.origin?"*":this.origin)};d.Receiver.prototype.emit=function(a,b){if(!this.eventListeners.hasOwnProperty(a))return!1;d.log("Instance.emit",a,b,this.eventListeners[a]);
for(var c=0;c<this.eventListeners[a].length;c++)this.send(a,b,this.eventListeners[a][c]);return!0};d.Receiver.prototype.ready=function(){d.log("Receiver.ready");this.isReady=!0;var b={src:a.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",b)||this.send("ready",b)};d.HTML5Adapter=function(a){return this instanceof d.HTML5Adapter?void this.init(a):new d.HTML5Adapter(a)};d.HTML5Adapter.prototype.init=function(a){d.assert(a,"playerjs.VideoJSReceiver requires a video element");
var b=this.receiver=new d.Receiver;a.addEventListener("playing",function(){b.emit("play")});a.addEventListener("pause",function(){b.emit("pause")});a.addEventListener("ended",function(){b.emit("ended")});a.addEventListener("timeupdate",function(){b.emit("timeupdate",{seconds:a.currentTime,duration:a.duration})});a.addEventListener("progress",function(){b.emit("buffered",{percent:a.buffered.length})});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getPaused",function(b){b(a.paused)});
b.on("getCurrentTime",function(b){b(a.currentTime)});b.on("setCurrentTime",function(b){a.currentTime=b});b.on("getDuration",function(b){b(a.duration)});b.on("getVolume",function(b){b(100*a.volume)});b.on("setVolume",function(b){a.volume=b/100});b.on("mute",function(){a.muted=!0});b.on("unmute",function(){a.muted=!1});b.on("getMuted",function(b){b(a.muted)});b.on("getLoop",function(b){b(a.loop)});b.on("setLoop",function(b){a.loop=b})};d.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};
d.JWPlayerAdapter=function(a){return this instanceof d.JWPlayerAdapter?void this.init(a):new d.JWPlayerAdapter(a)};d.JWPlayerAdapter.prototype.init=function(a){d.assert(a,"playerjs.JWPlayerAdapter requires a player object");var b=this.receiver=new d.Receiver;this.looped=!1;a.onPause(function(){b.emit("pause")});a.onPlay(function(){b.emit("play")});a.onTime(function(a){var c=a.position;a=a.duration;if(!c||!a)return!1;b.emit("timeupdate",{seconds:c,duration:a})});var c=this;a.onComplete(function(){!0===
c.looped?a.seek(0):b.emit("ended")});a.onError(function(){b.emit("error")});b.on("play",function(){a.play(!0)});b.on("pause",function(){a.pause(!0)});b.on("getPaused",function(b){b("PLAYING"!==a.getState())});b.on("getCurrentTime",function(b){b(a.getPosition())});b.on("setCurrentTime",function(b){a.seek(b)});b.on("getDuration",function(b){b(a.getDuration())});b.on("getVolume",function(b){b(a.getVolume())});b.on("setVolume",function(b){a.setVolume(b)});b.on("mute",function(){a.setMute(!0)});b.on("unmute",
function(){a.setMute(!1)});b.on("getMuted",function(b){b(!0===a.getMute())});b.on("getLoop",function(a){a(this.looped)},this);b.on("setLoop",function(a){this.looped=a},this)};d.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};d.MockAdapter=function(){return this instanceof d.MockAdapter?void this.init():new d.MockAdapter};d.MockAdapter.prototype.init=function(){var a={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){a.interval=
setInterval(function(){a.currentTime+=.25;a.timeupdate({seconds:a.currentTime,duration:a.duration})},250);a.playing=!0},pause:function(){clearInterval(a.interval);a.playing=!1}},b=this.receiver=new d.Receiver;b.on("play",function(){var b=this;a.play();this.emit("play");a.timeupdate=function(a){b.emit("timeupdate",a)}});b.on("pause",function(){a.pause();this.emit("pause")});b.on("getPaused",function(b){b(!a.playing)});b.on("getCurrentTime",function(b){b(a.currentTime)});b.on("setCurrentTime",function(b){a.currentTime=
b});b.on("getDuration",function(b){b(a.duration)});b.on("getVolume",function(b){b(a.volume)});b.on("setVolume",function(b){a.volume=b});b.on("mute",function(){a.mute=!0});b.on("unmute",function(){a.mute=!1});b.on("getMuted",function(b){b(a.mute)});b.on("getLoop",function(b){b(a.loop)});b.on("setLoop",function(b){a.loop=b})};d.MockAdapter.prototype.ready=function(){this.receiver.ready()};d.SublimeAdapter=function(a){return this instanceof d.SublimeAdapter?void this.init(a):new d.SublimeAdapter(a)};
d.SublimeAdapter.prototype.events=[d.EVENTS.READY,d.EVENTS.PLAY,d.EVENTS.PAUSE,d.EVENTS.ENDED,d.EVENTS.TIMEUPDATE,d.EVENTS.ERROR];d.SublimeAdapter.prototype.methods=[d.METHODS.PLAY,d.METHODS.PAUSE,d.METHODS.GETDURATION,d.METHODS.SETCURRENTTIME,d.METHODS.GETCURRENTTIME,d.METHODS.REMOVEEVENTLISTENER,d.METHODS.ADDEVENTLISTENER];d.SublimeAdapter.prototype.init=function(a){d.assert(a,"playerjs.SublimeAdapter requires a player object");var b=this.receiver=new d.Receiver(this.events,this.methods);a.on("pause",
function(){b.emit("pause")});a.on("play",function(){b.emit("play")});a.on("timeUpdate",function(a,c){var d=a.duration();if(!c||!d)return!1;b.emit("timeupdate",{seconds:c,duration:d})});a.on("end",function(){b.emit("ended")});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getCurrentTime",function(b){b(a.playbackTime())});b.on("setCurrentTime",function(b){a.seekTo(b)});b.on("getDuration",function(b){b(a.duration())})};d.SublimeAdapter.prototype.ready=function(){this.receiver.ready()};
d.VideoJSAdapter=function(a){return this instanceof d.VideoJSAdapter?void this.init(a):new d.VideoJSAdapter(a)};d.VideoJSAdapter.prototype.init=function(a){d.assert(a,"playerjs.VideoJSReceiver requires a player object");var b=this.receiver=new d.Receiver;a.on("pause",function(){b.emit("pause")});a.on("play",function(){b.emit("play")});a.on("timeupdate",function(){var c=a.currentTime(),d=a.duration();if(!c||!d)return!1;b.emit("timeupdate",{seconds:c,duration:d})});a.on("ended",function(){b.emit("ended")});
a.on("error",function(){b.emit("error")});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getPaused",function(b){b(a.paused())});b.on("getCurrentTime",function(b){b(a.currentTime())});b.on("setCurrentTime",function(b){a.currentTime(b)});b.on("getDuration",function(b){b(a.duration())});b.on("getVolume",function(b){b(100*a.volume())});b.on("setVolume",function(b){a.volume(b/100)});b.on("mute",function(){a.volume(0)});b.on("unmute",function(){a.volume(1)});b.on("getMuted",
function(b){b(0===a.volume())});b.on("getLoop",function(b){b(a.loop())});b.on("setLoop",function(b){a.loop(b)})};d.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document);
angular.module("genius").directive("embedlyPlayer",["$sce","$immediate","$q","Tracking","PlayerJS",function(a,b,c,d,f){return{restrict:"E",templateUrl:"embedly_player.html",transclude:!0,scope:{yieldsApi:"&",yieldsState:"&",media:"<",controls:"<?",playerClass:"@",preload:"<",allowFullScreen:"<?"},link:function(e,h){var g=function(){l.has_errored=!0},k,m,l,n=function(){var a=f.Player(h.find("iframe")[0]);a.on("ready",function(){a.setVolume(100);k.resolve(a);e.$apply(function(){l.is_loaded=!0;l.is_loading=
!1})});a.on("play",function(){d.track("play_song_media",{playing:!0,first_interaction:!1});e.$apply(function(){l.is_playing=!0})});a.on("pause",function(){e.$apply(function(){l.is_playing=!1})});a.on("ended",function(){e.$apply(function(){l.is_playing=!1})});a.on("timeupdate",_.throttle(function(a){e.$apply(function(){l.percentage=a.seconds/a.duration;l.time_remaining=1E3*(a.duration-a.seconds)})},1E3));a.on("error",function(){e.$apply(g)})};e.load_media=function(){l.is_loading||l.is_loaded||(d.track("play_song_media",
{playing:!1,first_interaction:!0}),l.is_loading=!0,e.is_initialized=!0,b(n,!1))};e.yieldsApi({api:{load_media:e.load_media,playpause:function(){l.is_playing?this.pause():this.play()},play:function(){m.then(function(a){a.play()})},pause:function(){m.then(function(a){a.pause()})},seek_to:function(a){m.then(function(b){b.getDuration(function(c){b.setCurrentTime(c*a)})})}}});var r={youtube:{youtube_controls:e.controls?2:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_rel:0,youtube_iv_load_policy:3,
youtube_start:e.media?e.media.start:void 0,youtube_fs:e.allowFullScreen?1:0}}[e.media?e.media.provider:void 0],q=function(a){var b=_.assign({},r,a);return c.resolve($.embedly.oembed(e.media.url,{query:b})).then(function(a){a=a[0];return"youtube"===e.media.provider&&!a.author_name||a.invalid||"error"===a.type||"link"===a.type?b.force?c.reject(Error("No embed found")):q({force:!0}):a})};e.$watch("state.is_playing",function(a){a&&(e.state.has_played=!0)});e.$watch("media.url",function(b){e.is_initialized=
!1;k=c.defer();m=k.promise;l=e.state={};e.yieldsState({state:l});b?(e.media_html=null,q().then(function(b){l.placeholder=b.thumbnail_url;l.is_ready=!0;e.media_html=a.trustAsHtml(b.html);e.preload&&e.load_media()}).catch(g)):l.is_ready=!0});e.$on("$destroy",function(){e.yieldsState({state:void 0})})}}}]);
angular.module("genius").directive("emptyCopyContent",["$immediate","$window","$document",function(a,b,c){return{link:function(d,f,e){f.on("copy",function(){var f=d.$eval(e.emptyCopyContent),g=b.getSelection();if(!g.toString()){var k=$("<div>").html(f).css({position:"absolute",height:0,width:0}).appendTo(c.prop("body"));g.removeAllRanges();f=c[0].createRange();f.selectNodeContents(k[0]);g.addRange(f);a(function(){k.remove()},!1)}})}}}]);
angular.module("genius").directive("expandableAccordionSection",[function(){return{restrict:"E",scope:{label:"@",expanded:"=",shortcut:"@"},templateUrl:"expandable_accordion_section.html",replace:!0,transclude:!0,link:function(a){a.expand_content=function(){a.expanded=!a.expanded}}}}]);
angular.module("genius").directive("expandableList",[function(){return{restrict:"E",scope:{collection:"<",template:"<",limit:"<",label:"@",variants:"<"},templateUrl:function(a,b){return b.template+".html"},controllerAs:"ctrl",controller:["$scope",function(a){this.more_to_show=function(){return a.collection.length>a.limit};this.show_more=function(){Reflect.deleteProperty(a,"limit")}}]}}]);
angular.module("genius").directive("exportsFormApi",["$immediate",function(a){return{restrct:"A",require:"form",link:function(b,c,d,f){b.$eval(d.exportsFormApi,{api:_.assign(f,{submit:function(){a(function(){f.$commitViewValue();c.triggerHandler("submit")},!1)}})})}}}]);
angular.module("genius").directive("factTrackSimulator",[function(){return{restrict:"E",templateUrl:"fact_track_simulator.html",scope:{annotations:"<",track_uuid:"<trackUuid",time:"=?",spotify_song:"<song",yields_api:"&yieldsApi",variants:"<",current_annotation_index:"=?currentAnnotationIndex",annotation_clicked:"&annotationClicked",autoplay:"<"},controllerAs:"ctrl",controller:["$scope","SpotifyPlayer","WebAudioPlayer",function(a,b,c){var d=a.spotify_song.track_url?"web_audio":"spotify",f="spotify:track:"+
a.track_uuid,e={};e.spotify=new b(function(b){"spotify"===d&&(a.time=b.position,a.playing=b.is_playing,a.track_uri=b.track_uri)});a.spotify_song.track_url&&(e.web_audio=new c(function(b){"web_audio"===d&&(a.time=b.position,a.playing=b.is_playing,a.duration=b.duration)}));this.annotation_percentage=function(){if(!a.current_annotation)return 0;var b=a.annotations[a.current_annotation_index+1],b=b?b.timestamp_in_ms:a.duration;return(b-a.time)/(b-a.current_annotation.timestamp_in_ms)};this.seek_to=function(a){e[d].seek(a)};
this.seek_to_percentage=function(b){e[d].seek(Math.round(b*a.duration))};this.toggle_play_pause=function(){a.playing?e[d].pause():"spotify"===d?e.spotify.play(f):e.web_audio.play(a.spotify_song.track_url)};this.card_clicked=function(){a.annotation_clicked({current_annotation:a.current_annotation})};a.time=0;a.duration=_.get(a.spotify_song,["metadata","duration_ms"],0);a.album=_.get(a.spotify_song,["metadata","album"],{});a.yields_api({api:{playback_type:function(){return e[d].playback_type},playback_label:function(){return e[d].playback_label},
set_playback_options:function(a){d=a.type},other_track_playing:function(){},use_current_track:function(){},pause:function(){a.playing&&e[d].pause()},seek_to:function(a,b){e[d].seek(a,b)},print_player_log:function(){e[d].print_log_entries()},download_player_log:function(){e[d].download_log_entries()}}});var h={content_type:"intro",timestamp_in_ms:0};a.$watch("time",function(){var b=a.annotations.filter(function(b){return b.timestamp_in_ms<=a.time});a.current_annotation_index=b.length-1;a.current_annotation=
a.annotations[a.current_annotation_index]||h})}]}}]);
angular.module("genius").directive("filepickerInput",["Filepicker",function(a){return{link:function(b,c,d){var f=new a({services:"COMPUTER"}),e=b.$eval(d.minWidth);c.on("click",function(){c.attr("value","");b.$eval(d.onFilepickerError,{error:null});b.$eval(d.onFilepickerProgress,{uploading:!0});f.pick_and_store().then(function(a){if(e){var f=new Image;f.onload=function(){f.width<e?b.$applyAsync(function(){return b.$eval(d.onFilepickerError,{error:"must be wider than "+e+"px"})}):c.attr("value",a)};
f.src=a}else c.attr("value",a)}).catch(function(a){101!==a.code&&b.$eval(d.onFilepickerError,{error:a.toString()})}).finally(function(){return b.$eval(d.onFilepickerProgress,{uploading:null})});return!1})}}}]);
angular.module("genius").directive("flashMessages",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"flash_messages.html",controllerAs:"ctrl",controller:["$scope","$sce","Cookies","currentFlashMessages",function(a,b,c,d){var f=c.getObject("flash")||{};_.each(f,function(a,c){d.push({message:b.trustAsHtml(a),type:c})});c.remove("flash",{path:"/"});a.flash_messages=d;this.close_message=function(b){_.pull(a.flash_messages,b)}}]}});
angular.module("genius").directive("focusOnChange",function(){return{restrict:"A",link:function(a,b,c){var d=!0;a.$watch(c.focusOnChange,function(){d?d=!1:b.focus()})}}});
angular.module("genius").directive("followButton",["FollowClient","Session","Tracking","Reversible",function(a,b,c,d){return{restrict:"E",scope:{onUnauthorized:"&",object:"<",type:"@",variants:"<",disabled:"<"},templateUrl:"follow_button.html",link:function(f){var e;f.user_signed_in=b.user_signed_in;f.$watch("object.current_user_metadata.interactions.following",function(a){f.following=!!a});f.label=function(){return f.hoverLabel||(f.following?"Following":"Follow")};f.toggle_following=function(){if(!b.user_signed_in)return f.onUnauthorized();
if(!e){e=!0;var h={};h["object.current_user_metadata.interactions.following"]=!f.following;h=d.modify(f,h);c.track(f.following?"Follow Button":"Unfollow Button");a.set_following(f.type,f.object.id,!f.following).catch(h).finally(function(){f.hoverLabel=null;e=!1})}};f.can_follow=function(){return b.has_permission("follow",f.object)}}}}]);
angular.module("genius").directive("globalErrorMessage",[function(){return{scope:{},templateUrl:"global_error_message.html",controllerAs:"ctrl",controller:["GlobalErrorBus","$sce",function(a,b){var c=this;a.$on("global_error",function(a,f){c.message_html=b.trustAsHtml(f)})}]}}]);
angular.module("genius").directive("globalMessage",["$compile","$templateCache","GlobalRefs",function(a,b,c){var d=b.get("global_message.html"),f=c.get_element("global_message");return{scope:!0,restrict:"E",transclude:!0,link:function(b,c,g,k,m){a(d)(b,function(a){f.append(a);b.$on("$destroy",function(){a.remove()})},{parentBoundTranscludeFn:m,futureParentElement:f})}}}]);
angular.module("genius").directive("handleIntraPageLinks",["ReferentRegistry","ModelRouter","$location",function(a,b,c){return{restrict:"A",link:function(d,f){f.on("click","a",function(){var e=$(this).attr("data-api_path");if(e&&(e=b.lookup(e))&&"referent"===e.type){var f=a.peek(e.id);if(f)return d.$apply(function(){return c.url("/"+f.id)}),!1}})}}}]);
angular.module("genius").directive("handleRoutableLinks",["LinkEvents","SmartRouting",function(a,b){return{restrict:"A",link:function(c,d){d.on("click","a",function(c){var d=$(c.target).closest("a"),h=d.attr("href");c.isDefaultPrevented()||a.should_open_in_new_window_or_tab(c,d[0])||!h||"#"===h||(c.preventDefault(),b.navigate_to_absolute_url(d[0].href))})}}}]);angular.module("genius").directive("headerMenuItem",[function(){return{restrict:"E",transclude:!0,scope:{name:"@",url:"@"},templateUrl:"header_menu_item.html"}}]);
angular.module("genius").directive("hideSongForm",[function(){return{restrict:"E",scope:{song:"<",on_close:"&onClose"},templateUrl:"hide_song_form.html",controllerAs:"ctrl",controller:["$scope","SongClient",function(a,b){this.save=function(c){var d=this;this.saving=!0;b.perform_action(a.song.id,"hide",{viewable_by_roles:c}).then(function(b){_.assign(a.song,b);a.error=null;a.on_close()}).catch(function(b){return a.error=b.message}).finally(function(){return d.saving=!1})}}]}}]);
angular.module("genius").directive("httpMethod",function(){return{restrict:"A",link:function(a,b,c){var d=!1,f=c.action||c.href,e=c.httpMethod.toUpperCase();b.click(function(){if(!d)return d=!0,$("<form>",{action:f,method:e}).append($("<input>",{type:"hidden",name:"authenticity_token",value:$.cookie("_csrf_token")})).appendTo($("body")).submit(),!1})}}});
angular.module("genius").directive("inboxLineItem",["Tracking",function(a){for(var b={},c=0,d=[{formation:["targets","actors"],strategies:"user_upvoted_annotation user_downvoted_annotation user_accepted_annotation user_created_annotation user_deleted_annotation user_pyonged_annotation user_pyonged_song user_pyonged_video user_pyonged_album user_pyonged_article user_upvoted_forum_post user_downvoted_forum_post user_upvoted_video user_downvoted_video user_hit_pageview_threshold_song user_created_cover_art user_edited_cover_art user_deleted_cover_art user_locked_album user_unlocked_album user_recognized_song user_upvoted_article user_downvoted_article user_moved_discussion user_followed_discussion user_followed_song user_followed_artist user_hid_song user_unhid_song user_cosigned_annotation user_verified_the_lyrics_of_song user_unverified_the_lyrics_of_song user_pinned_discussion user_unpinned_discussion user_deleted_discussion user_deleted_song user_created_song user_wrote_article user_locked_song user_unlocked_song user_followed_group user_followed_web_page user_marked_complete_song user_unmarked_complete_song user_marked_as_high_transcription_priority_song".split(" ")},{formation:["targets",
"context","actors"],strategies:"user_created_question user_archived_question user_edited_question user_pinned_question user_unpinned_question user_created_answer user_deleted_answer user_edited_answer user_upvoted_question user_downvoted_question user_upvoted_answer user_downvoted_answer".split(" ")},{formation:["targets","actions"],strategies:"user_edited_annotation user_proposed_an_edit_to_annotation user_added_a_suggestion_to_song user_marked_annotation user_commented_on_album user_commented_on_article user_commented_on_video user_replied_to_annotation".split(" ")},
{formation:["context","targets","actors"],strategies:"user_upvoted_comment user_downvoted_comment user_merged_annotation_edit user_rejected_annotation_edit user_integrated_comment user_archived_comment user_accepted_comment user_rejected_comment".split(" ")},{formation:["context","actors"],strategies:["user_invited_user"]},{formation:["user_acted_on_user"],strategies:"user_followed_user user_de_modded_user user_marked_as_spam_user user_made_an_editor_out_of_user user_made_a_moderator_out_of_user user_mediatored_user user_transcribered_user".split(" ")},
{formation:["context_commentable","context"],strategies:["user_mentioned_user","user_mentioned_group"]},{formation:["actors"],strategies:["user_created_identity","user_added_a_photo_user"]},{formation:["merged_artist","context","actors"],strategies:["user_merged_artist"]},{formation:["metadata_changes","targets","actors"],strategies:["user_edited_the_metadata_of_song","user_edited_the_metadata_of_artist","user_edited_the_metadata_of_album"]},{formation:["lyrics_diffs","targets","actors","lyrics_edit_acceptor"],
strategies:["user_edited_the_lyrics_of_song"]},{formation:["lyrics_diffs","context","actors"],strategies:["user_created_lyrics_edit","user_accepted_lyrics_edit","user_rejected_lyrics_edit"]},{formation:["lyrics_edit_archive_info","lyrics_diffs","context","actors"],strategies:["user_archived_lyrics_edit"]},{formation:["annotations_with_comments"],strategies:["user_added_a_suggestion_to_annotation"]},{formation:["annotations_with_rejection_comments"],strategies:["user_rejected_annotation"]},{formation:["targets"],
strategies:["user_posted_in_discussion"]}];c<d.length;c++)for(var f=d[c],e=0,h=f.strategies;e<h.length;e++)b[h[e]]=f.formation;var g={"user.Pyong.song":"inbox_line_items/pyong.html","user.Pyong.annotation":"inbox_line_items/pyong.html","user.Pyong.video":"inbox_line_items/pyong.html","user.Pyong.album":"inbox_line_items/pyong.html","user.Pyong.article":"inbox_line_items/pyong.html"};return{scope:{inbox_name:"<inboxName",line_item:"<object",eager_load_details:"<eagerLoadDetails",variants:"<"},templateUrl:"inbox_line_item.html",
controller:["$scope","querystring","InboxClient","AppConfig",function(c,d,e,f){var h=this;this.state={load_details:!1,show_details:!1};c.details_url="/activity_stream/show_details?"+d.stringify({id:c.line_item.event_ids});this.formation=b[c.line_item.strategy];c.$watch("ctrl.state.load_details",function(a,b){h.formation&&a&&!b&&e.get_line_item(c.inbox_name,c.line_item.event_ids.join(",")).then(function(a){h.line_item_detail=a})});c.$watch("eager_load_details",function(a){h.state.load_details=!(!h.state.load_details&&
!a)});this.message_components=c.line_item.message_components;this.message_template=g[this.message_components.key]||"inbox_line_items/generic.html";var q=_.once(function(){a.track("Line Item Open",{action_name:c.line_item.action_name,inbox_name:c.inbox_name,strategy_name:c.line_item.strategy,bagon:!0,iframe:!h.formation})});this.toggle_visible=function(){h.state.load_details=!0;h.state.show_details=!h.state.show_details;h.state.show_details&&q();h.state.show_details&&c.line_item.unread&&(c.line_item.unread=
!1,e.mark_read(c.inbox_name,[c.line_item.event_ids]))};this.truncate_line_item_event_count="user_posted_in_discussion"===c.line_item.strategy;this.max_line_item_event_count=f.max_line_item_event_count}],controllerAs:"ctrl"}}]);angular.module("genius").directive("inboxLineItemActionIcon",[function(){return{scope:{action_name:"<actionName"},templateUrl:"inbox_line_item_action_icon.html"}}]);
angular.module("genius").directive("inboxLineItemDetail",["Bindings","$compile","$templateCache","LyricsEditProposal",function(a,b,c,d){var f=a.resolver({detail:"<lineItemDetail"}),e=a.resolver({formation:"<"});return{restrict:"E",template:"",link:function(a,d,f){var m='\n        <div\n          class="inbox_line_item_detail"\n          ng-class="{\'inbox_line_item_detail--dark_background\': $ctrl.use_dark_background}"\n        >\n      ',l=0;for(f=e(a,f).formation;l<f.length;l++)var n=f[l],m=m+'<div class="inbox_line_item_detail-section">',
m=m+c.get("inbox_line_item_detail/"+n+".html"),m=m+"</div>";d.append(b(m+"</div>")(a))},controller:["$scope","$attrs","ReferentRegistry",function(a,b,c){var e=this;f(a,b).assign_to(this);a.$watch("$ctrl.detail",function(){e.detail.targets=_.map(e.detail.targets,function(a){return"referent"===a._type?(a.rejection_comments=_.map(a.annotations,"rejection_comment"),c.update_if_present(a)):a});e.use_dark_background=_.includes(["forum_post","discussion"],_.get(e.detail,"context._type"))||_.includes(["forum_post",
"discussion"],_.get(e.detail,"target._type"));e.lyrics_diffs=d.lyrics_diffs_for_line_item_detail(e.detail)})}],controllerAs:"$ctrl"}}]);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a:a(jQuery)})(function(a){function b(b){var d=b||window.event,f=e.call(arguments,1),k=0,t=0,u=0,w=0,A=0,x=0;b=a.event.fix(d);b.type="mousewheel";"detail"in d&&(u=-1*d.detail);"wheelDelta"in d&&(u=d.wheelDelta);"wheelDeltaY"in d&&(u=d.wheelDeltaY);"wheelDeltaX"in d&&(t=-1*d.wheelDeltaX);"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(t=-1*u,u=0);k=0===u?t:u;"deltaY"in d&&(k=u=-1*d.deltaY);"deltaX"in
d&&(t=d.deltaX,0===u&&(k=-1*t));if(0!==u||0!==t){1===d.deltaMode?(w=a.data(this,"mousewheel-line-height"),k*=w,u*=w,t*=w):2===d.deltaMode&&(w=a.data(this,"mousewheel-page-height"),k*=w,u*=w,t*=w);w=Math.max(Math.abs(u),Math.abs(t));if(!g||w<g)g=w,m.settings.adjustOldDeltas&&"mousewheel"===d.type&&0===w%120&&(g/=40);m.settings.adjustOldDeltas&&"mousewheel"===d.type&&0===w%120&&(k/=40,t/=40,u/=40);k=Math[1<=k?"floor":"ceil"](k/g);t=Math[1<=t?"floor":"ceil"](t/g);u=Math[1<=u?"floor":"ceil"](u/g);m.settings.normalizeOffset&&
this.getBoundingClientRect&&(d=this.getBoundingClientRect(),A=b.clientX-d.left,x=b.clientY-d.top);b.deltaX=t;b.deltaY=u;b.deltaFactor=g;b.offsetX=A;b.offsetY=x;b.deltaMode=0;f.unshift(b,k,t,u);h&&clearTimeout(h);h=setTimeout(c,200);return(a.event.dispatch||a.event.handle).apply(this,f)}}function c(){g=null}var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],e=Array.prototype.slice,
h,g;if(a.event.fixHooks)for(var k=d.length;k;)a.event.fixHooks[d[--k]]=a.event.mouseHooks;var m=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=f.length;c;)this.addEventListener(f[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",m.getLineHeight(this));a.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=f.length;c;)this.removeEventListener(f[--c],b,!1);else this.onmousewheel=
null;a.removeData(this,"mousewheel-line-height");a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){b=a(b);var c=b["offsetParent"in a.fn?"offsetParent":"parent"]();c.length||(c=a("body"));return parseInt(c.css("fontSize"),10)||parseInt(b.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})});
angular.module("genius").directive("infiniteScroll",["$window","$document","$immediate",function(a,b,c){return{link:function(d,f,e){var h=!1,g=e.infiniteScrollLoadTrigger||"scroll",k=$(a),m=document.createElement("div"),l;"intersection"===g&&(m.style.height="1px",f.append(m));"infiniteScrollDisabled"in e&&d.$watch(e.infiniteScrollDisabled,function(a){(h=a)||c(r,!1)});var n=function(){d.$apply(function(){d.$eval(e.infiniteScroll)})},r=function(a){if(!h){var c=b[0].documentElement.clientHeight;a&&(a=
a.target,a.getBoundingClientRect&&(c=a.getBoundingClientRect().top+a.offsetHeight));a=f[0].getBoundingClientRect().top+f[0].offsetHeight;c>=a&&n()}},q=function(a){a[0].isIntersecting&&n()};"intersection"===g?(l=new IntersectionObserver(q,{root:null,rootMargin:"100px",threshold:0}),l.observe(m),d.$on("$destroy",function(){return l.unobserve(m)})):(k.on("scroll",r),k.on("resize",r),f.parents().on("scroll",r),d.$on("$destroy",function(){f.parents().off("scroll",r);return k.off("scroll",r)}));e.yieldsOnLoadMore&&
d.$eval(e.yieldsOnLoadMore,{callback:function(){return c(r,!1)}})}}}]);
angular.module("genius").directive("insertableAtCursor",["$window",function(a){return{restrict:"A",link:function(b,c,d){b.$eval(d.insertableAtCursor,{insertFn:function(b){var d=b.before,h=void 0===d?"":d,d=b.after,g=void 0===d?"":d,d=b.default_body,k=void 0===d?"":d;b=b.each_line;var m=void 0===b?!1:b;_.toArray(c).forEach(function(b){var c=pageYOffset,d=b.selectionStart,e=b.selectionEnd,f=b.scrollTop,u=b.value.substring(d,e),u=u&&m?_.map(u.split("\n"),function(a){return h+a+g}).join("\n"):u?h+u+g:
h+k+g;b.value=b.value.substring(0,d)+u+b.value.substring(e,b.value.length);b.focus();b.selectionStart=d;b.selectionEnd=b.selectionStart+u.length;b.scrollTop=f;a.scrollTo(0,c);$(b).trigger("input")})}})}}}]);angular.module("genius").directive("kb",["$window",function(a){return{restrict:"E",link:function(b,c,d){var f=$(a),e=function(a){b.$apply(function(){return b.$eval(d.action,{$event:a})});return!1};f.bind("keydown",d.shortcut,e);b.$on("$destroy",function(){return f.unbind("keydown",e)})}}}]);
angular.module("genius").directive("keepInView",["$document","$window",function(a,b){return{link:function(c,d,f){var e=0;c.$watch(f.keepInView,function(c){if(c){var f=d[0].getBoundingClientRect();c=b.innerHeight;if(f.bottom>.95*c||f.top<.05*c)f=200>e-Date.now()?100:300,e=Date.now(),$(a.prop("body")).animate({scrollTop:$(d).offset().top-.05*c},f)}})}}}]);angular.module("genius").directive("leaderboard",[function(){return{restrict:"E",templateUrl:"leaderboard.html",scope:{leaderboard_rows:"<collection"}}}]);
angular.module("genius").directive("linksNavigableByArrowKeys",["$immediate","Mousetrap","Bindings",function(a,b,c){var d=c.resolver({yields_refresh:"&linksNavigableByArrowKeys"});return{restrict:"A",link:function(c,e,h){h=d(c,h);var g,k=null,m=function(b){void 0===b&&(b=!0);a(function(){g=e.find("a:visible");b&&(k=null)},!1)};m();h.yields_refresh({refresh:m});b.bindGlobal("down",function(){if(g.length&&!(k>=g.length-1))return _.isNull(k)?k=0:k++,g[k].focus(),!1});c.$on("$destroy",function(){return b.unbind("down")});
b.bindGlobal("up",function(){if(g.length&&!_.isNull(k)&&0!==k)return k--,g[k].focus(),!1});c.$on("$destroy",function(){return b.unbind("up")})}}}]);
angular.module("genius").directive("localReferentRouting",function(){return{controller:["$scope","$location","Tracking",function(a,b,c){a.$on("$locationChangeSuccess",function(){var d=Number(b.search().referent_id);if(!d){var f=b.hash().match(/^note-(\d+)$/);f&&(d=f[1])}f=b.path();d?(c.set_annotation_opened_from_permalink(d),a.song_ctrl.scroll_to_referent(d).then(function(){a.song_ctrl.update_url_for_open_referent(d);b.replace()})):f===a.song.path?a.current_referent=null:(f=Number(f.slice(1)),a.song_ctrl.display_referent(f))})}]}});
angular.module("genius").directive("lockScrollPositionOnIos",["$window","Bowser",function(a,b){return{link:function(c){if(b.ios){var d=$("body"),f=$(a).scrollTop();d.css("top",-f);c.$on("$destroy",function(){d.css("top","");$(a).scrollTop(f)})}}}}]);
angular.module("genius").directive("lyricSyncTimestampInput",["timestamp_for_displayFilter","parse_time_string","Mousetrap","$immediate",function(a,b,c,d){return{require:"ngModel",link:function(f,e,h,g){var k,m=new c(e[0],{stop_propagation:!0,prevent_default:!0});m.$bind("up",function(){l(b(g.$viewValue)-50)});m.$bind("down",function(){l(b(g.$viewValue)+50)});m.$bind("esc",function(){l(b(k));e.blur()});d(function(){k=g.$viewValue});var l=function(b){var c=g.$viewValue;b=a(Math.round(b),{always_millis:!0});
g.$setViewValue(b);g.$valid?g.$render():g.$setViewValue(c)};e.bind("keyup",function(){g.$commitViewValue();f.$apply()});g.$parsers.push(b);g.$formatters.push(function(b){if(b||0===b)return a(b,{always_millis:!0})});f.$watch(h.ngModel,function(b,c){_.isUndefined(b)&&!_.isUndefined(c)&&(""!==g.$viewValue?g.$setViewValue(a(c,{always_millis:!0})):g.$setViewValue(null),g.$commitViewValue())});"validators"in h&&_.assign(g.$validators,f.$eval(h.validators))}}}]);
angular.module("genius").directive("lyrics",["$q","$compile","SongClient","LyricsEditing","LyricsAnchorer","Lyrics","LyricsEditProposalClient","ReferentHelper","ReferentElementMap","ReferentRegistry","TextSelection","Tracking","Bindings","ScrollFocus","mobile_device","Session","StructuredText","LyricsEditProposal","ReactSongPageService",function(a,b,c,d,f,e,h,g,k,m,l,n,r,q,t,u,w,A,x){var E=r.resolver({yields_api:"&yieldsApi",on_selection_range_updated:"&onSelectionRangeUpdated",canonical_lyrics_html:"<canonicalLyricsHtml",
on_focused_referent_anchor_changed:"&onFocusedReferentAnchorChanged"});return{restrict:"E",templateUrl:"lyrics.html",controller:["$scope","AppConfig",function(b,e){var f=this;this.user_signed_in=u.user_signed_in;this.react_song_page_link=x.reactSongPageRedirect;this.transcriber_guide_url=e.transcriber_guide_url;this.set_editable=function(a){b.editable=a;f.editable_lyrics_stale=!1};this.build_correction=function(){var a,b,c=f.lyrics_anchorer.get_state();c.referent?(b=f.lyrics_anchorer.get_occurrence_in_container_among("[annotation-fragment="+
c.referent.id+"]",c.reference_element),a=c.reference_element,b={id:c.referent.id,occurrence:b}):(a=$("<span>").attr("class","line-correction"),b=f.lyrics_anchorer.calculate_referent_location(c.range),a.html(c.range.extractContents()),c.range.insertNode(a[0]));var c=a.html(),e=d.prepare_lyrics_for_editing(c),g=e.markdown;f.proposing_edit&&(e.markdown=(new w(g)).plain);return{anchor:a,rect:a.get(0).getBoundingClientRect(),referent:b,replacement:e,original:{html:c,markdown:g}}};this.should_show_full_lyrics_save_cancel_buttons=
function(){return(f.proposing_edit||f.editing)&&!f.correcting};this.should_show_full_lyrics_start_propose_button=function(){return f.correcting&&f.proposing_edit?!0:b.can_perform("propose_lyrics_edit")&&!f.editing&&!f.proposing_edit};this.should_show_full_lyrics_start_edit_button=function(){return f.correcting&&f.editing?!0:b.can_perform("edit_lyrics")&&!f.editing};this.should_show_edit_annotation_brackets_button=function(){return b.can_perform("edit_annotation_brackets")&&!f.proposing_edit&&!f.editing&&
!f.saving};this.should_show_lyrics_edit_form=function(){return f.editing&&!f.correcting};this.should_show_lyrics_edit_proposal_form=function(){return f.proposing_edit&&!f.correcting};this.should_show_lyrics_form_cancel_button=function(){return f.editing&&!f.saving&&!f.correcting};this.should_show_lyrics_sync_warning=function(){return b.can_perform("view_lyrics_synchronization")&&f.should_show_lyrics_edit_form()&&b.song.lyrics_marked_complete_by};this.start_editing=function(){f.set_editable(d.prepare_lyrics_for_editing(b.canonical_lyrics_html));
f.editing=!0;f.correcting?n.track("lyrics_edits:start_by_line_edit"):n.track("lyrics_edits:start_full_edit")};this.start_proposing_edit=function(){f.edit_blocked=!0;f.correcting?n.track("lyrics_edit_proposals:start_by_line_proposal",{properties:{edit_format:"plain_text"}}):n.track("lyrics_edit_proposals:start_proposal",{properties:{edit_format:"plain_text"}});h.lyrics_for_edit_proposal({song_id:b.song.id}).then(function(a){var b=a.body;a=a.version;f.proposing_edit=!0;f.lyrics_for_edit_proposal={version:a,
before:b.plain,markdown:b.plain,attr_hash:{}}}).finally(function(){f.edit_blocked=!1})};this.start_correcting=function(){f.correcting=!0;b.can_perform("propose_lyrics_edit")?(f.proposing_edit=!0,f.editing=!1,f.correction=f.build_correction(),f.start_proposing_edit()):(f.proposing_edit=!1,f.editing=!0,f.correction=f.build_correction(),f.start_editing())};this.cancel_edit_or_proposal=function(){f.editing&&f.correcting?n.track("lyrics_edits:cancel_by_line_edit"):f.editing&&!f.correcting?n.track("lyrics_edits:cancel_full_edit"):
f.proposing_edit&&f.correcting?n.track("lyrics_edit_proposals:cancel_by_line_proposal",{properties:{edit_format:"markdown"}}):f.proposing_edit&&!f.correcting&&n.track("lyrics_edit_proposals:cancel_proposal",{properties:{edit_format:"markdown"}});f.errors=null;f.editing=null;f.correcting=null;f.correction=null;f.proposing_edit=null;f.edit_blocked=!1;f.reset_lyrics_form()};this.reset_lyrics_form=function(){f.errors=null;f.lyrics_form.$rollbackViewValue();f.lyrics_form.$setPristine()};this.finish_editing=
function(){if(!f.saving){var a=d.validate_pseudo_markdown_lyrics(b.canonical_lyrics_html,(f.proposing_edit?f.lyrics_for_edit_proposal:b.editable).markdown,{is_music:b.song.is_music});if(a.length)f.errors=a;else return f.editing?f.saving="saving_edit":f.proposing_edit&&(f.saving="saving_proposal"),f.edit_blocked=!0,f.errors=null,(f.proposing_edit?f.save_edit_proposal():f.save_edit()).finally(function(){f.saving=!1})}};this.save_edit_proposal=function(){f.proposing_edit=!1;return f.lyrics_for_edit_proposal.markdown===
f.lyrics_for_edit_proposal.before?(f.cancel_edit_or_proposal(),a.when()):h.create({song_id:b.song.id,version:f.lyrics_for_edit_proposal.version,edited_lyrics:f.lyrics_for_edit_proposal.markdown}).then(function(){f.correcting?n.track("lyrics_edit_proposals:save_by_line_proposal",{properties:{edit_format:"markdown"}}):n.track("lyrics_edit_proposals:save_proposal",{properties:{edit_format:"markdown"}});f.lyrics_form.$setPristine();f.edit_proposal_submitted=!0;f.correction=null;f.correcting=null}).catch(function(a){f.errors=
a.response.errors||[a.message];f.proposing_edit=!0}).finally(function(){f.edit_blocked=!1})};this.save_edit=function(){f.editing=!1;var a=b.lyrics_section_html();b.lyrics_section_html(d.backfill_angular_link_properties(d.lyrics_pseudo_markdown_to_html__deprecated(b.editable.markdown,b.editable.attr_hash)));return c.save_lyrics(b.song,d.convert_editable_for_saving(b.editable)).then(function(a){n.track(f.correction?"lyrics_edits:save_by_line_edit":"lyrics_edits:save_full_edit");f.apply_lyrics_update(a);
f.editing=!1;f.edit_blocked=!1;f.correction=null;f.correcting=null;f.lyrics_form.$setPristine()}).catch(function(c){f.correction||(f.editing=!0);b.lyrics_section_html(a);409===c.meta.status?f.refresh_lyrics():(f.errors=c.response.errors,f.errors&&f.errors.length||(f.errors=[c.meta.message||"Unexpected error"]),f.edit_blocked=!1)})};this.refresh_lyrics=function(){f.edit_blocked=!0;return c.load_lyrics(b.song.id).then(function(a){f.edit_blocked=!1;f.apply_lyrics_update(a)})};this.remove_referent=function(a){b.canonical_lyrics_html=
d.lyrics_html_without_referent(b.canonical_lyrics_html,a)};this.on_image_referent_created=function(a,c){f.edit_blocked=!1;c.precomputed_client_rect=a.precomputed_client_rect;b.current_referent=c;b.$emit("referent_created",c)};this.on_image_referent_creation_failed=function(){f.edit_blocked=!1};this.on_image_referent_creation_started=function(){f.edit_blocked=!0};this.can_correct_line=function(){return f.has_block_level_markup()?!1:b.current_referent&&!b.current_referent.is_image||f.selection_range||
f.correction};this.submit_line_correction=function(a){f.edit_blocked=!0;f.errors=null;if(f.proposing_edit){var c=(new w(f.correction.original.markdown)).plain;a=A.diff(c,a);a=A.make_patches(a);a=A.apply_patches(a,f.correction.original.markdown,{edit_format:"plain_text"}).patched}f.correction.replacement={markdown:a,html:d.convert_editable_for_saving({markdown:a,attr_hash:{}})};f.set_editable(d.prepare_lyrics_with_correction(b.canonical_lyrics_html,f.correction));f.proposing_edit&&(f.lyrics_for_edit_proposal.markdown=
(new w(b.editable.markdown)).plain);return f.finish_editing()};this.has_block_level_markup=function(){return d.html_has_block_level_markup(b.canonical_lyrics_html)};this.apply_lyrics_update=function(a){_.assign(b.song,a.client_timestamps);f.update_lyrics_selection_safe(a.body.html);g(b.canonical_lyrics_html)!==g(a.body.html)&&(b.canonical_lyrics_html=a.body.html,f.editable_lyrics_stale=!0);return a};var g=function(a){return $("<div>").append($(a)).html()};b.$watch("lyrics_ctrl.correction",function(a,
b){b&&b.anchor.hasClass("line-correction")&&b.anchor.replaceWith(b.original.html)});b.$watch("current_referent",function(a){a&&(f.correcting=null,f.correction=null)});b.$watch("lyrics_data",function(a){a&&f.apply_lyrics_update(a)})}],controllerAs:"lyrics_ctrl",link:function(a,c,d,h){var n=E(a,d),r=c.find("section");h.lyrics_anchorer=new f({container:r,get_state:function(){var b=a.current_referent?k.get(a.current_referent.id):null;return{range:h.selection_range,referent:a.current_referent,reference_element:b}},
scope:a,song:a.song});h.update_selection_range=function(a){a!==this.selection_range&&(a&&!g.range_or_contents_intersects_links_or_contains_images(a)?this.selection_range=a:this.selection_range=null,n.on_selection_range_updated({range:this.selection_range}))};n.yields_api({api:{anchorer:h.lyrics_anchorer,remove_referent:h.remove_referent,refresh_lyrics:h.refresh_lyrics.bind(h),block_edit:function(a){h.edit_blocked=a}}});h.update_lyrics_selection_safe=function(b){l.restore_selection_if_clobbered(r[0],
function(){a.lyrics_section_html(b)})};var u={replace:function(){}};t&&(u=(new q([],{container:r.get(0)})).on("update",function(a){n.on_focused_referent_anchor_changed({referent_anchor:a})}));var w=function(b){r.empty();r.append(b);b=r.find("a[annotation-fragment]").toArray();b=_.chain(b).uniqBy(function(a){return $(a).data("id")}).filter(function(b){b=Number($(b).data("id"));return a.song_ctrl.referent_has_preview(b)}).value();u.replace(b);a.$emit("content_change")},A;a.lyrics_section_html=function(c){A&&
A.$destroy();if(c)k.clear(),m.reset_fragments(),A=a.$new(),w(b(e.prepare_for_display(c))(A)),a.$ctrl.on_lyrics_compiled();else return r.html()};a.canonical_lyrics_html=n.canonical_lyrics_html}}}]);
angular.module("genius").directive("lyricsSyncKeyboard",["Mousetrap",function(a){return{scope:{showing:"<"},restrict:"E",require:"^lyricsSyncEditor",templateUrl:"lyrics_sync_keyboard.html",link:function(b,c,d,f){b.definitions=[{key:"?",label:"?",description:"Show/Hide Keyboard Shortcuts",action:function(){f.showing_keyboard_shortcuts=!f.showing_keyboard_shortcuts}},{key:"space",label:"Space",description:"Advance Line Selection and Set to Current Time",action:function(){f.can("edit")&&f.can("sync")&&
f.start_or_advance()}},{key:"enter",label:"&#x23ce;",description:"Seek to Current Line",action:function(){f.seek_to_index(f.current_line_index)}},{key:"up",label:"&darr;, &uarr;",description:"Move Line Selection, Adjust Time While Editing",action:function(){if(0!==f.current_line_index){do--f.current_line_index;while(f.current_line()&&f.current_line().hidden)}}},{key:"down",action:function(){if(f.current_line_index!==f.lyrics_synchronization.lines.length-1){do++f.current_line_index;while(f.current_line()&&
f.current_line().hidden)}}},{key:"left",label:"&larr;, &rarr;",description:"Seek Forwards and Backwards",action:function(){f.media_player.api.seek_to_position(f.position-200)}},{key:"right",action:function(){f.media_player.api.seek_to_position(f.position+150)}},{key:"e",label:"e",description:"Pause And Edit Timestamp",action:function(){f.can("edit")&&(f.media_player.api.pause(),f.current_line()._editing_time=!0)}}];_.each(b.definitions,function(b){a.$bind(b.key,b.action,{prevent_default:!0,stop_propagation:!0})});
b.$on("$destroy",function(){_.each(b.definitions,function(b){a.unbind(b.key)})})}}}]);angular.module("genius").directive("markdownPreview",[function(){return{restrict:"E",scope:{markdown_content:"<markdownContent"},templateUrl:"markdown_preview.html",controller:["$scope","MarkdownPreviewClient",function(a,b){a.$watch("markdown_content",_.throttle(function(){b.create_preview(a.markdown_content).then(function(b){a.html_content=b})},500,{leading:!0,trailing:!0}))}]}}]);
angular.module("genius").directive("mediaControls",[function(){return{restrict:"E",scope:{media:"<mediaPlayer",hide_playpause:"<?hidePlaypause",variants:"<?"},templateUrl:"media_controls.html"}}]);angular.module("genius").directive("mentionable",["MentionClient",function(a){return{restrict:"A",link:function(b,c){c.atwho({at:"@",displayTpl:"<li>${name}</li>",insertTpl:"@${value}",searchKey:"name",callbacks:{remoteFilter:function(b,c){a.autocomplete(b).then(function(a){c(a)})},sorter:function(a,b){return b}}})}}}]);
angular.module("genius").directive("metadataCustomPerformanceRoleInput",[function(){return{restrict:"E",templateUrl:"metadata_custom_performance_role_input.html",scope:{role_field_placeholder:"@roleFieldPlaceholder",artist_field_placeholder:"@artistFieldPlaceholder",customPerformanceRoles:"<",isDisabled:"<",validation_errors:"<validationErrors"},controllerAs:"ctrl",controller:["$scope",function(a){this.remove_custom_performance=function(b){_.pull(a.customPerformanceRoles,b)};this.add_new_custom_performance=
function(){a.customPerformanceRoles.push({label:"",artists:[]})};this.errors_for_label=function(b){return _.get(a.validation_errors,"custom_performances:"+b.toLowerCase())}}]}}]);angular.module("genius").directive("metadataInputAndLabel",function(){return{restrict:"E",templateUrl:"metadata_input_and_label.html",replace:!0,transclude:!0,scope:{label:"@",errors:"<",full:"<",is_disabled:"<isDisabled"}}});
angular.module("genius").directive("modalWindow",["$compile","$document","$templateCache","Bowser",function(a,b,c,d){var f=c.get("modal_window.html");return{scope:{on_close:"&onClose",variants:"<",hidden:"<",media:"<",content_dimensions:"<contentDimensions"},transclude:!0,link:function(c,h,g,k,m){h=a(f);var l=b.prop("body");c.is_ios=d.ios;h(c,function(a){$(l).append(a);c.close=function(a){c.on_close({reason:a})};c.$on("$destroy",function(){return a.remove()})},{parentBoundTranscludeFn:m,futureParentElement:l})}}}]);
angular.module("genius").directive("mousetrapInput",function(){return{restrict:"A",link:function(a,b){b.addClass("mousetrap")}}});angular.module("genius").directive("mutuallyExclusiveSwitches",[function(){return{restrict:"E",scope:!0,link:function(a,b,c){var d=c.property;a[d]={};a.$watch(d,function(b,c){1>=_(b).values().compact().size()||_.forEach(b,function(b,f){var k=c[f];b&&!k&&(a[d]=_.pick(a[d],f))})},!0)}}}]);
angular.module("genius").directive("navigateOnClick",["$window",function(a){return{restrict:"A",link:function(b,c,d){c.on("click",function(){a.location.href=d.navigateOnClick})}}}]);angular.module("genius").directive("newConversation",[function(){return{scope:{on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"new_conversation.html",controller:["$scope","ConversationClient",function(a,b){this.did_send=function(c){b.get(c.conversation_id).then(function(b){a.conversation=b})}}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("ngAutofocus",["$immediate",function(a){return{restrict:"A",link:function(b,c,d){d.ngAutofocus?b.$watch(d.ngAutofocus,function(b){b&&a(c.focus.bind(c),!1)}):a(c.focus.bind(c),!1)}}}]);angular.module("genius").directive("ngBodyClass",[function(){var a=$("body");return{restrict:"A",link:function(b,c,d){b.$watch(d.ngBodyClass,function(b){for(var c in b)a.toggleClass(c,!!b[c])},!0);b.$on("$destroy",function(){for(var c in b.$eval(d.ngBodyClass))a.removeClass(c)})}}}]);
angular.module("genius").directive("ngClickDisabled",function(){return{priority:-2,restrict:"A",link:function(a,b,c){b.on("click",function(b){if(a.$eval(c.ngClickDisabled))return b.stopImmediatePropagation(),!1})}}});angular.module("genius").directive("odometer",["Odometer",function(a){return{restrict:"E",scope:{value:"<",options:"<"},link:function(b,c){var d=new a(_.merge({el:c[0],value:b.value},b.options));b.$watch("value",function(a){d.update(a)})}}}]);
angular.module("genius").directive("onHoverWithNoDigest",[function(){return{restrict:"A",link:function(a,b,c){b.hover(function(){a.$eval(c.onHoverWithNoDigest,{hover:!0})},function(){a.$eval(c.onHoverWithNoDigest,{hover:!1})})}}}]);angular.module("genius").directive("onIframeLoad",["Bindings",function(a){var b=a.resolver({on_iframe_load:"&onIframeLoad"});return{restrict:"A",link:function(a,d,f){var e=b(a,f);d.get(0).addEventListener("load",function(b){var d=b.target;a.$applyAsync(function(){return e.on_iframe_load({target:d})})})}}}]);
angular.module("genius").directive("onInnerHeightChange",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(function(){return b.innerHeight()},function(b){a.$eval(c.onInnerHeightChange,{height:b})})}}}]);angular.module("genius").directive("onLoad",[function(){return{restrict:"A",link:function(a,b,c){b.on("load",function(){a.$apply(function(){a.$eval(c.onLoad)})})}}}]);
angular.module("genius").directive("openLinksInNewWindow",[function(){return{restrict:"A",link:function(a,b){b.on("click","a:not([target])",function(a){a.target.target="_blank"})}}}]);angular.module("genius").directive("placeholderSpinner",[function(){return{restrict:"E",scope:{placeholderClasses:"@",variants:"<variants"},templateUrl:"placeholder_spinner.html"}}]);angular.module("genius").directive("placeholderText",[function(){return{restrict:"E",templateUrl:"placeholder_text.html"}}]);
angular.module("genius").directive("placeholderUserBadge",[function(){return{restrict:"E",scope:{size:"@"},templateUrl:"user_badge.html",link:function(a){a.user={name:"username",iq:"1738",avatar:{thumb:{url:""}}}}}}]);angular.module("genius").directive("playPauseButton",function(){return{restrict:"E",templateUrl:"play_pause_button.html",scope:{playing:"<",loading:"<"}}});
angular.module("genius").directive("positionBeside",["$window",function(a){var b=function(a,d,f){var e=a[0].getBoundingClientRect().left+a.width()/2,e=$(document.elementFromPoint(e,d));if(!e.length||a.is(e)||a.find(e).length)return d;d=e[0].getBoundingClientRect();return b(a,f?d.top-1:d.bottom+1,f)};return{restrict:"A",link:function(c,d,f){c.$watch(f.positionBeside,function(e){var h;var g=!!c.$eval(f.positionForMaximumVisibility);if(e){var k=d.offsetParent(),m=k[0].getBoundingClientRect(),l=d.height();
h=m.top;m=m.bottom;g&&(h=b(k,Math.max(h,0)),m=b(k,Math.min(m,a.innerHeight-1),!0));e=e.top+(e.height-l)/2;l=e+l-m;0<l&&(e-=l);h-=e;0<h&&(e+=h);h=e}else h=0;d.offset({top:h+$(a).scrollTop()})})}}}]);angular.module("genius").directive("preload",["PreloadCache",function(a){return{restrict:"E",priority:1E4,link:function(b,c){var d=JSON.parse(c.find("preload-content").attr("data-preload_data"));angular.forEach(d,function(c,d){a[d]=b[d]=c});c.remove()}}}]);
angular.module("genius").directive("preventDefaultClick",function(){return{priority:-1,restrict:"A",link:function(a,b){b.on("click",function(a){a.preventDefault();a.stopPropagation()})}}});angular.module("genius").directive("preventDefaultKeydown",function(){return{restrict:"A",link:function(a,b,c){var d=_.map(c.preventDefaultKeydown.split(" "),Number);b.on("keydown",function(a){_.includes(d,a.which)&&a.preventDefault()})}}});
var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])}return a},__awaiter=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(f,e){function h(a){try{k(d.next(a))}catch(b){e(b)}}function g(a){try{k(d["throw"](a))}catch(b){e(b)}}function k(a){a.done?f(a.value):(new c(function(b){b(a.value)})).then(h,g)}k((d=d.apply(a,b||[])).next())})},__generator=
this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;f;)try{if(e=1,h&&(g=c[0]&2?h["return"]:c[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,c[1])).done)return g;if(h=0,g)c=[c[0]&2,g.value];switch(c[0]){case 0:case 1:g=c;break;case 4:return f.label++,{value:c[1],done:!1};case 5:f.label++;h=c[1];c=[0];continue;case 7:c=f.ops.pop();f.trys.pop();continue;default:if(!(g=
f.trys,g=0<g.length&&g[g.length-1])&&(6===c[0]||2===c[0])){f=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3])){f.label=c[1];break}if(6===c[0]&&f.label<g[1]){f.label=g[1];g=c;break}if(g&&f.label<g[2]){f.label=g[2];f.ops.push(c);break}g[2]&&f.ops.pop();f.trys.pop();continue}c=b.call(a,f)}catch(d){c=[6,d],h=0}finally{e=g=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,k;return k={next:c(0),"throw":c(1),
"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k},PRIMIS_PLAYER_IDS={desktop:"110117",mobile:"110118"},load_primis_script=function(a,b){var c=document.createElement("script");c.async=!0;c.src="https://live.primis.tech/live/liveView.php?s="+b;a.appendChild(c)},primis_index=0;
angular.module("genius").directive("primisPlayer",["Ads","AdConfig","SessionConfig",function(a,b,c){return{restrict:"E",scope:{name:"@",container_classes:"@containerClasses"},templateUrl:"primis_player.html",link:function(d,f){var e=this;d.show_player=c.show_ads;d.$watch("$viewContentLoaded",function(){if(d.show_player){var a=f.find(".primis_player-player")[0];h(a)}});var h=function(c){return __awaiter(e,void 0,void 0,function(){var e,f,h;return __generator(this,function(n){switch(n.label){case 0:return null===
c?[3,2]:[4,a.get_base_targeting(d.name)];case 1:e=n.sent(),f=function(){var b=__assign({},e);primis_index++;a.get_async_targeting(d.name,primis_index).then(function(a){Object.assign(b,a)});return b},h=f(),window.getPrimisTargeting=function(){var a=h;h=f();return a},load_primis_script(c,PRIMIS_PLAYER_IDS[b.platform]),n.label=2;case 2:return[2]}})})}}}}]);
angular.module("genius").directive("proxiedImage",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$formatters.push(function(a){if(!a)return"";var b={};try{var c=new URL(a);c.hostname.match(/\.embed\.ly$/)&&_.each(c.search.substr(1).split("&"),function(a){a=a.split("=");b[decodeURIComponent(a[0])]=decodeURIComponent(a[1])});return b.url||a}catch(d){return a}})}}});
angular.module("genius").directive("pusher",["Pusher",function(a){return{scope:{channel:"@pusherChannel",event_name:"@pusherEventName",updateCallback:"&pusherUpdate",enabled:"="},link:function(b){var c=function(){a.subscribe(b.channel,b.event_name,function(a){b.updateCallback({value:a.value})})};void 0===b.enabled&&(b.enabled=!0);b.enabled&&c();b.$watch("enabled",function(a,b){a&&!b&&c()})}}}]);
angular.module("genius").directive("pyongButton",[function(){return{restrict:"E",scope:{pyongable:"<object",type:"@",onUnauthorized:"&",variants:"<"},templateUrl:function(a,b){return"forHeader"in b?"pyong_button_for_header.html":"pyong_button_square_button.html"},controllerAs:"ctrl",controller:["$scope","PyongClient","Session",function(a,b,c){var d=this,f=a.pyongable;this.pyonged=function(){return c.user_signed_in?f.current_user_metadata.interactions.pyong:!1};this.pyong=function(){if(!c.user_signed_in)return a.onUnauthorized();
d.pyonged()||(c.has_permission("create_pyong_with_note",c.current_user)?(d.show_pyong_form=!0,f.pyonged=d.clicked_pyong=!0,f.pyongs_count+=1,b.pyong(a.type,f.id).then(function(a){f.current_user_metadata.interactions.pyong=a.current_user_metadata.interactions.pyong;f.pyongs_count=a.pyongs_count}).catch(function(){--f.pyongs_count;f.pyonged=!1})):(f.pyonged=d.clicked_pyong=!0,f.pyongs_count+=1,f.current_user_metadata.interactions.pyong=!0))}}]}}]);
angular.module("genius").directive("pyongForm",["PyongClient",function(a){return{restrict:"E",scope:{id:"<",type:"<",onComplete:"&"},templateUrl:"pyong_form.html",link:function(b){b.submit=function(c){b.disabled=!0;a.finalizePyong(b.type,b.id,c).then(b.onComplete).finally(function(){return b.disabled=!1})}}}}]);$.browser={};
angular.module("genius").directive("quickSearch",["Tracking",function(a){return{restrict:"A",link:function(b,c){c.autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!1,resultsClass:"ac_results quick_search-results",formatResult:function(a){return a[1]?"Loading...":" "}}).result(function(b,c){c&&c[1]&&($("form.global_search :submit").attr("disabled","disabled"),a.track_with_timeout("Search Result Tap",function(){window.location.href=c[1]}))})}}}]);
angular.module("genius").directive("referentFragmentContainer",["ReferentHelper",function(a){return{templateUrl:"referent_fragment_container.html",restrict:"E",transclude:{referentHeader:"?referentHeader",referentFragment:"referentFragment"},scope:{referent:"<object",variants:"<"},link:function(b){b.$watch("referent.classification",function(c){b.referent.display_mode=a.display_mode_by_classification(c)})}}}]);
angular.module("genius").directive("releaseDate",[function(){return{templateUrl:"release_date.html",restrict:"E",scope:{date_components:"<dateComponents",variants:"<"}}}]);angular.module("genius").directive("removeClassOnAngularLoad",[function(){return{restrict:"A",link:function(a,b,c){b.removeClass(c.removeClassOnAngularLoad)}}}]);angular.module("genius").directive("roleIcon",[function(){return{scope:{role:"<",hasChecky:"<"},templateUrl:"role_icon.html"}}]);
angular.module("genius").directive("roleSelectionDialog",["AppConfig",function(a){return{restrict:"E",templateUrl:"role_selection_dialog.html",scope:{prompt:"@",save:"&",saving:"<",error:"<"},link:function(b){b.available_roles=a.available_roles;b.backing={};b.submit=function(){var a=_(b.backing).map(function(a,b){if(a)return b}).compact().value();b.save({selected_roles:a})}}}}]);
angular.module("genius").directive("scrollFromBottom",function(){return{restrict:"A",link:function(a,b){var c=new MutationObserver(function(){var a=b.prop("scrollHeight");b.scrollTop(b.scrollTop()+a-d);d=a}),d=b.prop("scrollHeight");c.observe(b[0],{childList:!0,subtree:!0});a.$on("$destroy",function(){c.disconnect()})}}});
angular.module("genius").directive("scrollOnlyThisElement",[function(){return{restrict:"A",link:function(a,b){b.on("mousewheel",function(a){a.preventDefault();var d=0>a.detail||0<a.wheelDelta?1:-1;b.scrollTop(b.scrollTop()+d*a.deltaFactor*a.deltaY)})}}}]);angular.module("genius").directive("scrollPoint",["ScrollPoint",function(a){return{restrict:"A",link:function(b,c,d){var f=d.scrollPoint;a.register(f,c);b.$on("$destroy",function(){a.unregister(f,c)})}}}]);
angular.module("genius").directive("scrollToBottomWhen",["$immediate",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.scrollToBottomWhen,function(b,d){b&&!d&&a(function(){c.scrollTop(c.prop("scrollHeight"))},!1)})}}}]);angular.module("genius").directive("scrollToTopOnChange",function(){return{restrict:"A",scope:{scrollToTopOnChange:"<"},link:function(a,b){a.$watch("scrollToTopOnChange",function(){b.scrollTop(0)})}}});
angular.module("genius").directive("scrollableData",["Bindings",function(a){var b=a.resolver({src:"<",preload:"&",empty_message:"@emptyMessage",scroll_mechanism:"@scrollMechanism",repeat_with:"@repeatWith",button_classes:"@buttonClasses",container_classes:"@containerClasses",item_classes:"@itemClasses",unique_by:"@uniqueBy",start_collapsed:"<startCollapsed",on_show_more:"&onShowMore",on_scroll_complete:"&onScrollComplete",on_empty:"&onEmpty"});return{restrict:"E",templateUrl:"scrollable_data.html",
transclude:{empty:"?empty",show_more:"?showMore"},scope:!0,controller:["$scope","$attrs",function(a,d){var f=this;b(a,d).assign_to(this);a.$watch("$scrollable_data_ctrl.src",function(){f.auto_reset&&f.src.reset();f.reset()});this.get_preloaded_data=function(){return f.preload()||[]};this.reset=function(){var a=f.get_preloaded_data();f.models=_.clone(a);f.current_loading_page=null;f.loading=!1;!f.has_next()||a.length||f.start_collapsed||f.load_next()};this.has_next=function(){return"undefined"===typeof f.src.next_page?
f.src.has_next():f.src.next_page>f.current_loading_page};this.load_next=function(){if(!f.loading&&f.has_next()){f.loading=!0;f.current_loading_page=f.src.next_page;f.on_show_more();var a=f.models;return f.src.next().then(function(b){a.push.apply(a,b)}).then(function(){f.unique_by&&(f.models=_.uniqBy(f.models,f.unique_by));f.loading=!1;if(0===f.models.length&&!f.has_next())f.on_empty();f.more_loaded_callback&&f.more_loaded_callback()})}};a.$watch("$scrollable_data_ctrl.src.has_next()",function(a){if(!a)f.on_scroll_complete()})}],
controllerAs:"$scrollable_data_ctrl"}}]);
angular.module("genius").directive("scrubber",["$document","$timeout",function(a,b){var c="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints;return{scope:{scrubPercentage:"=",scrubbed:"&",scale:"@"},link:function(d,f){var e=parseFloat(d.scale||"1"),h=function(a){var b=f.width()*e;a=Math.max(0,Math.min(b,a-f.offset().left));d.scrubbed({percentage:a/b})};f.on("click",function(a){h(a.pageX);return!1});var g=c?{start:"touchstart",end:"touchend",move:"touchmove"}:{start:"mousedown",
end:"mouseup",move:"mousemove"},k=function(a){if(a.pageX)return a.pageX;a=a.originalEvent;return"touchend"===a.type?a.changedTouches[0].pageX:a.touches[0].pageX};f.on(g.start,function(){var c=f.width()*e,l=function(a){var b=Math.max(0,Math.min(c,k(a)-f.offset().left));d.$apply(function(){d.scrubPercentage=b/c})};a.on(g.move,l);a.one(g.end,function(c){c.originalEvent.defaultPrevented||(h(k(c)),a.off(g.move,l),b(function(){Reflect.deleteProperty(d,"scrubPercentage")},500,!1))})})}}}]);
angular.module("genius").directive("searchForm",["Tracking","$location","SearchClient","$immediate","PageTransition",function(a,b,c,d,f){return{restrict:"E",templateUrl:"search_form.html",scope:{style:"@searchStyle"},link:function(e,h){var g=h.find("input.quick_search");e.unfocus=function(){e.focused&&(a.track("Search Cancel"),e.focused=!1,e.search_text="")};e.focus=function(){e.focused||(a.track("Search Page View"),e.focused=!0,g.focus())};f.on_client_transition_complete(function(){e.focused=!1;
e.search_text=""});Rx.Observable.$watch(e,"search_text").auditTime(500).switchMap(function(a){return a?Rx.Observable.fromPromise(c.multi(a)):Rx.Observable.of(null)}).subscribe(function(a){d(function(){return e.sections=a})});e.submit_form=function(){e.focused&&e.search_text&&h.find("form").submit()};"/gastly"===b.path()&&(e.search_text=b.search().q)}}}]);angular.module("genius").directive("selectAllOnClick",[function(){return{restrict:"A",link:function(a,b){b.on("click",function(a){a.target.select()})}}}]);
angular.module("genius").directive("setClassBeforeNavigate",["$immediate","LinkEvents","SmartRouting",function(a,b,c){return{restrict:"A",link:function(d,f,e){f.on("click",function(d){!b.should_open_in_new_window_or_tab(d,f)&&e.href&&(d.preventDefault(),f.addClass(e.setClassBeforeNavigate),a(function(){return c.navigate_to_absolute_url(e.href)}))})}}}]);
angular.module("genius").directive("setCookieAndCloseOnClick",[function(){return{require:"^displayUnlessCookie",link:function(a,b,c,d){b.on("click",function(){d.set_cookie_and_close();a.$apply()})}}}]);angular.module("genius").directive("setDesiredLocation",["$window","Cookies",function(a,b){return{restrict:"A",link:function(c,d,f){d.click(function(){b.put("desired_location",a.location.href,{path:"/"})})}}}]);
angular.module("genius").directive("shareButtons",["Session",function(a){return{scope:{song:"<"},templateUrl:"share_buttons.html",controllerAs:"ctrl",controller:[function(){this.show_report_abuse=a.has_feature("report_abuse")}]}}]);angular.module("genius").directive("showArrowAtOffset",[function(){return{restrict:"A",link:function(a,b){a.show_arrow_at_offset=function(a){return a>b.position().top}}}}]);
angular.module("genius").directive("showIfBrowser",["Bowser",function(a){return{restrict:"A",link:function(b,c,d){a[d.showIfBrowser]||c.hide()}}}]);
angular.module("genius").directive("simpleDatetimeInput",["$filter",function(a){return{restrict:"E",scope:{},require:"ngModel",templateUrl:"simple_datetime_input.html",controller:["$scope",function(a){a.datetime={};var c=(new Date).getFullYear();_.assign(a,{years:_.range(1900,c+100).reverse(),months:"January February March April May June July August September October November December".split(" ").map(function(a,b){return{name:a,number:b+1}}),days:_.range(1,32),hours:_.range(0,24),minutes:_.range(0,
60)})}],link:function(b,c,d,f){var e=a("cast_to_date");f.$render=function(){var a=e(f.$modelValue)||new Date;b.datetime={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),minute:a.getMinutes()}};f.$render();b.$watch(function(){if(b.datetime&&!_.some(b.datetime,function(a){return void 0===a}))return b.datetime.year+"/"+b.datetime.month+"/"+b.datetime.day+" "+b.datetime.hour+":"+b.datetime.minute},function(a){a&&f.$setViewValue(a)})}}}]);
angular.module("genius").directive("sizedSrc",["ImageTransform","$window",function(a,b){return{restrict:"A",scope:{sizedSrc:"<"},link:function(c,d){c.$watch("sizedSrc",function(c){d.css("width","100%");var e=d.width()*(b.devicePixelRatio||1);d.attr("src",a.resize(c,{width:e}))})}}}]);
angular.module("genius").directive("slideDown",["$immediate","Bindings",function(a,b){var c=b.resolver({no_slide_when:"<noSlideWhen",slide_down_callback:"&slideDownCallback"});return{restrict:"A",link:function(b,f,e){var h=c(b,e);h.no_slide_when||(f.hide(),a(function(){f.slideDown(200,function(){h.slide_down_callback()})},!1))}}}]);
angular.module("genius").directive("slideOverPane",[function(){return{restrict:"E",templateUrl:"slide_over_pane.html",transclude:!0,scope:{condition:"<",closeOn:"&",scrollToTopTrigger:"<"},controller:["$scope","Bowser",function(a,b){b.ios&&(a.is_ios=!0)}]}}]);angular.module("genius").directive("slideUpOn",["$immediate",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.slideUpOn,function(b){b&&a(function(){c.slideUp(200)},!1)})}}}]);
angular.module("genius").directive("songActivity",["SongClient",function(a){return{templateUrl:"song_activity.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope",function(b){var c=this,d=0,f=0;this.loading_iq_earners=this.loading_contributors=!0;this.load_contributors=function(){a.load_contributor_data(b.song.id).then(function(a){f+=a.iq_earners.length;b.contributors=a;b.has_more_iq_earners=f<a.iq_earners_total;d+=1}).finally(function(){b.ctrl.loading_contributors=!1;b.ctrl.loading_iq_earners=
!1})};this.load_more_iq_earners=function(){b.loading_contributors||(c.loading_iq_earners=!0,a.load_iq_earners(b.song.id,{page:d}).then(function(a){f+=a.iq_earners.length;b.contributors.iq_earners=_.uniqBy(b.contributors.iq_earners.concat(a.iq_earners),"user.id");b.has_more_iq_earners=f<a.iq_earners_total;d+=1}).finally(function(){b.ctrl.loading_iq_earners=!1}))};this.load_contributors()}]}}]);
angular.module("genius").directive("songAdminMenu",[function(){return{restrict:"E",templateUrl:"song_admin_menu.html",transclude:{additional_buttons:"?additionalButtons"},controller:["$scope",function(a){a.actions="publish unpublish hide unhide award_transcription_iq remove_transcription_iq reindex mark_as_hot unmark_as_hot view_annotation_engagement_data edit_spotify_annotations_for view_lyrics_synchronization destroy verify_lyrics unverify_lyrics disable_media enable_media hide_apple_player unhide_apple_player trigger_apple_match mark_lyrics_evaluation_as_complete mark_lyrics_evaluation_as_staff_approved unmark_lyrics_evaluation_as_complete mark_lyrics_evaluation_as_un_staff_approved".split(" ")}],
link:function(a){a.$watch("song.current_user_metadata",function(){a.has_admin_items=_(a.actions).some(function(b){return a.can_perform(b)})})}}}]);angular.module("genius").directive("songMetadata",[function(){return{templateUrl:"song_metadata.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope","Session",function(a,b){this.has_permission=function(c){return b.has_permission(c,a.song)}}]}}]);
angular.module("genius").directive("songMetadataForm",["$window","Session","TagClient","I18n",function(a,b,c,d){return{scope:{save:"&onSave",song_was:"<object",expanded_sections:"=expandedSections",yields_is_dirty:"&yieldsIsDirty"},restrict:"E",templateUrl:"song_metadata_form.html",controllerAs:"ctrl",controller:["Tracking","$scope","AppConfig",function(f,e,h){var g=this;this.apple_purposes=h.external_song_match_purposes;this.close=function(){!e.expanded_sections||g.song_form.$dirty&&!a.confirm(d.t("song.action_confirmations.dismiss_dirty"))||
(e.expanded_sections=null)};this.has_permission=function(a){return b.has_permission(a,e.song)};this.submit=function(){e.save({song:e.song}).then(function(){f.track("Metadata Edit",{Source:"Edit"});e.expanded_sections=null}).catch(function(a){g.error=a})};e.song=angular.copy(e.song_was);e.$watch("song_was.updated_by_human_at",function(a,b){a>b&&(g.editable_metadata_stale=!0)});e.available_primary_tags=[];c.primary().then(function(a){e.available_primary_tags=a.map(function(a){return a.id===e.song.primary_tag.id?
e.song.primary_tag:a})})}]}}]);angular.module("genius").directive("songMetadataPreview",[function(){return{templateUrl:"song_metadata_preview.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl"}}]);angular.module("genius").directive("songPrimaryAlbum",function(){return{restrict:"E",templateUrl:"song_primary_album.html",scope:{album:"<"}}});
angular.module("genius").directive("soundcloud",["$q","Tracking","getScript","Soundcloud",function(a,b,c,d){return{restrict:"E",templateUrl:"soundcloud.html",replace:!0,scope:{yieldsApi:"&",yieldsState:"&",soundcloud_src:"<soundcloudSrc"},link:function(f,e){f.$watch("soundcloud_src",function(h){if(h){var g=a.defer(),k=g.promise,m=function(a,b){a.attr("src",b)};a.all([d.player_url_for_src(f.soundcloud_src),c("https://w.soundcloud.com/player/api.js",{cache:!0})]).then(function(a){m(e,a[0].$$unwrapTrustedValue());
var b=SC.Widget(e[0]);b.bind(SC.Widget.Events.READY,function(){b.getDuration(function(a){a?(g.resolve(b),f.duration=a):l.has_errored=!0;f.$apply()})})});var l={};f.yieldsState({state:l});var n=function(a,b,c){a.bind(b,function(){f.$apply(c)})},r=_.once(function(){b.track("Soundcloud play")});k.then(function(a){l.is_loaded=!0;n(a,SC.Widget.Events.ERROR,function(){l.has_errored=!0});n(a,SC.Widget.Events.PAUSE,function(){l.is_loaded=!0;l.is_playing=!1});n(a,SC.Widget.Events.PLAY,function(){r();l.is_loaded=
!1;l.is_playing=!0});a.bind(SC.Widget.Events.PLAY_PROGRESS,_.throttle(function(a){f.$apply(function(){l.is_loaded=!0;l.percentage=a.relativePosition;l.time_remaining=f.duration-a.currentPosition})},100))});f.yieldsApi({api:{load_media:function(){},playpause:function(){k.then(function(a){l.is_playing?a.pause():a.play()})},pause:function(){k.then(function(a){a.pause()})},seek_to:function(a){l.percentage=a;k.then(function(b){b.seekTo(f.duration*a)})}}});k.then(function(a){d.oembed_url_for_src(h).then(a.load.bind(a))})}})}}}]);
angular.module("genius").directive("spotifyOnboarding",["AppConfig",function(a){return{link:function(b,c){b.app_store_url=a.app_store_url;b.jump_below_onboarding=function(){var a=c.position().top+c.outerHeight();$("html, body").animate({scrollTop:a},150)}}}}]);
angular.module("genius").directive("standaloneReferent",function(){return{templateUrl:"standalone_referent.html",restrict:"E",scope:{referent:"<object",variants:"<",yields_api:"&yieldsApi",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",focused_comments:"<focusedComments"},controller:["$scope","$window","$immediate",function(a,b,c){c(function(){b.parent.postMessage({sentinel:"amp",type:"embed-size",height:b.document.body.scrollHeight},"*")});this.disables_user_tooltips=_.get(a,"variants.disableTooltips")}]}});
angular.module("genius").directive("standardRichContent",function(){return{restrict:"E",scope:{html:"<",variants:"<"},templateUrl:"standard_rich_content.html",controller:["$element","$scope","$sce","Facebook",function(a,b,c,d){b.$watch("html",function(f){f?(b.trusted_html=c.trustAsHtml(f),b.$applyAsync(function(){return d.process_embeds(a[0])})):Reflect.deleteProperty(b,"trusted_html")})}]}});
angular.module("genius").directive("sticky",["Waypoint","$immediate","Bindings",function(a,b,c){var d=c.resolver({sticky:"<"});return{restrict:"A",link:function(c,e,h){var g=d(c,h),k=h.stickyClass,m;m="stickyUseParentAsWrapper"in h?!1:'<div class="'+(h.stickyWrapperClass||"sticky_wrapper")+'">';var l=!1;b(function(){var b="undefined"!==typeof g.sticky,d=new a.Sticky({element:e,wrapper:m,stuckClass:k,offset:function(){return h.stickyOffset||"0"},handler:function(){return l=!l},enabled:!b});b&&c.$watch(function(){return g.sticky},
function(){g.sticky?d.waypoint.enable():d.waypoint.disable()})},!1)}}}]);angular.module("genius").directive("stopPropagation",function(){return{restrict:"A",link:function(a,b,c){b.on(c.stopPropagation,function(a){a.stopPropagation()})}}});
angular.module("genius").directive("submitOnCmdEnter",function(){return{restrict:"A",require:"form",link:function(a,b,c,d){b.on("keydown",function(c){13===c.keyCode&&(c.metaKey||c.shiftKey)&&(a.$apply(function(){d.$commitViewValue()}),b.triggerHandler("submit"),c.preventDefault())})}}});
angular.module("genius").directive("svg",["Bowser","ShimInnerHtmlProp","$templateCache","$immediate",function(a,b,c,d){var f=function(b,f){var g=$(c.get(f));b.html(g[0].innerHTML);_.each(g[0].attributes,function(a){b[0].setAttribute(a.name,a.value)});var k=b.get(0).getAttribute("viewBox");(a.msie||a.msedge)&&k&&d(function(){var a=k.split(" ");3<a.length&&b.width(b.height()*(parseInt(a[2])/parseInt(a[3])))},!1)};return{link:function(a,c,d){b();"src"in d&&f(c,d.src);"ngSrc"in d&&a.$watch(d.ngSrc,function(a){a&&
f(c,a)})}}}]);
angular.module("genius").directive("tetherDrop",["$immediate","TetherDrop",function(a,b){return{restrict:"E",scope:{containerClasses:"@",position:"@",showOn:"@",visible:"<?",onClose:"&",yieldsApi:"&?"},transclude:"true",link:function(c,d,f,e,h){var g,k=new b({content:g||"",target:d.closest("[tether-drop-target]")[0],position:c.position||"right middle",openOn:c.showOn,remove:!0,loadContentOnDemand:!0,hoverOpenDelay:250,tetherOptions:{constraints:[{to:"window",attachment:"together element",pin:!0}],
classes:{element:c.containerClasses}}});k.once("open",function(){h(function(b){var c=$(k.content);c.hide();g=$("<div>").append(b)[0];c.append(g);a(function(){c.show();k.position()})})});k.on("close",c.onClose);"visible"in f&&c.$watch("!!visible",function(a){a?k.open():k.close()});c.$watch(function(){return k.position});c.$on("$destroy",function(){return k.destroy()});d={hide:k.close.bind(k),show:k.open.bind(k)};"yieldsApi"in f&&c.yieldsApi({tetherApi:d})}}}]);
angular.module("genius").component("textCorrector",{bindings:{text:"<",proposing_edit:"<proposingEdit",cancel:"&",submit:"&",yields_text_corrector:"&yieldsTextCorrector"},templateUrl:"text_corrector.html",controller:["$q","$window","I18n",function(a,b,c){this.submit_form=function(){this.saving=!0;return a.when(this.submit({corrected:this.text})).finally(function(){delete this.saving;this.correction_form.$setPristine()}.bind(this))};this.cancel_correction=function(){if(!this.is_dirty()||b.confirm(c.t("editing.dirty_unload_confirm_box")))this.correction_form.$rollbackViewValue(),
this.correction_form.$setPristine(),this.cancel()};this.yields_text_corrector({text_corrector:{cancel:this.cancel_correction.bind(this)}})}]});
angular.module("genius").directive("textSelectionChanged",["TextSelection",function(a){var b=function(a){for(a=a.commonAncestorContainer;a.nodeType!==Node.ELEMENT_NODE;)a=a.parentNode;return a};return{restrict:"A",scope:{textSelectionChanged:"&"},link:function(c,d){a.$on("selection",function(a,e){var h=e.ranges.filter(function(a){return d[0].contains(b(a))});c.textSelectionChanged({ranges:h})})}}}]);
angular.module("genius").directive("textarea",["Autosize","$immediate",function(a,b){return{restrict:"E",link:function(c,d,f){if(!("autosizeOff"in f)){var e=function(){a.update(d)},h=function(){a(d)};if("autosizeInitOnFocus"in f)d.on("focus",h);else b(h,!1);d.on("change",e);c.$watch(f.ngModel,function(a){a!==d.val()&&b(e,!1)});f.ngShow&&c.$watch(f.ngShow,function(a){a&&b(e,!1)})}}}}]);angular.module("genius").directive("timeAgo",[function(){return{restrict:"E",templateUrl:"time_ago.html",scope:{time:"<"}}}]);
angular.module("genius").directive("timestampInput",["timestamp_for_displayFilter",function(a){return{scope:{timestamp:"=ngModel",ngDisabled:"<"},template:'<input ng-model="string" ng-disabled="ngDisabled" type="text"/>',link:function(b,c){b.$watch("timestamp",function(c){b.string=a(c)});c.find("input").on("blur",function(){var a;(a=b.string)?(a=a.split(":"),a=Math.floor(1E3*(60*parseInt(a[0]||"0",10)+parseFloat(a[1]||"0")))):a=null;b.timestamp=a;b.$apply()})}}}]);
angular.module("genius").directive("tracking",["Tracking","Waypoint","$immediate",function(a,b,c){return{restrict:"A",link:function(d,f,e){var h=function(){a.track(e.trackingEvent,d.$eval(e.trackingOptions))};switch(e.tracking){case "scroll_into_view":c(function(){new b({element:f,handler:function(){h();this.destroy()},offset:"100%"})});break;default:f.bind(e.tracking,h)}}}}]);
angular.module("genius").directive("tracksLinkWithClass",["$document",function(a){return{restrict:"A",link:function(b,c,d){void 0!==window.mixpanel&&(c.addClass(d.tracksLinkWithClass),mixpanel.track_links("."+d.tracksLinkWithClass,d.withEventName||"clicked_"+d.tracksLinkWithClass,{"from url":a[0].location.href}))}}}]);
angular.module("genius").directive("transcludeInjectingLocalScope",function(){return{restrict:"E",link:function(a,b,c,d,f){if(!f)throw{message:"Illegal use of transcludeInjectingLocalScope directive in the template! No parent directive that requires a transclusion found.",element:b};var e=a.$new();f(e,function(a){b.empty();b.append(a);b.on("$destroy",function(){e.$destroy()})})}}});
angular.module("genius").directive("upwardsInfiniteScroll",["$throttle",function(a){return{restrict:"A",link:function(b,c,d){var f=d.upwardsInfiniteScroll,e=!1;d.infiniteScrollDisabled&&b.$watch(d.infiniteScrollDisabled,function(a){e=a;h()});var h=function(){e||c.scrollTop()<.1*c.height()&&b.$eval(f)};h();c.on("scroll",a(h,250,{leading:!1}))}}}]);
angular.module("genius").directive("userBadge",function(){return{restrict:"E",templateUrl:"user_badge.html",scope:{user:"<object",size:"@",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",sponsor:"<",variants:"<"},require:"^?standaloneAnnotation",link:function(a,b,c,d){a.disables_user_tooltips=d&&d.disables_user_tooltips;b=!_.includes(["small","x_small"],a.size);a.is_two_lines=b;a.user&&(a.avatar_url=b?a.user.avatar.small.url:a.user.avatar.thumb.url)}}});
angular.module("genius").directive("userBadgeAndTimestamp",function(){return{restrict:"E",templateUrl:"user_badge_and_timestamp.html",scope:{size:"@",user:"<",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",time:"<",sponsor:"<",variants:"<"}}});angular.module("genius").directive("userTooltip",function(){return{restrict:"E",templateUrl:"user_tooltip.html",scope:{user:"<"}}});
angular.module("genius").directive("voters",["VoteClient",function(a){return{restrict:"E",templateUrl:"voters.html",scope:{type:"@",object:"<"},link:function(b){b.load=function(){a.load_voters(b.type,b.object.id).then(function(a){b.loaded_voters=!0;b.voters=a;b.object.votes_total=a.votes_total})};b.$on("update_voters",function(a){b.loaded_voters=!1;b.load()});b.load()}}}]);
angular.module("genius").directive("voting",[function(){var a={down:-1,up:1};return{restrict:"E",templateUrl:"voting.html",scope:{voteTotalClicked:"&",voteable:"<object",type:"@",onUnauthorized:"&",variants:"<"},controllerAs:"ctrl",controller:["$scope","Session","Tracking","VoteClient","Reversible",function(b,c,d,f,e){var h=function(c,d){var h={votes_total:b.voteable.votes_total+((a[c]||0)-(a[d]||0))};b.voteable.has_voters||(h.has_voters=!0);var l=e.modify(b.voteable,h);f.submit_vote(b.type,b.voteable.id,
c).then(function(){b.$emit("vote_saved")}).catch(function(){l();b.voteable.current_user_metadata.interactions.vote=d})};this.submit_vote=function(a){var e=b.voteable.current_user_metadata.interactions.vote;a===e&&(a=void 0);if(!c.user_signed_in)return d.track("Logged out vote attempt"),b.onUnauthorized({vote:a});c.has_permission("vote",b.voteable)&&(b.voteable.current_user_metadata.interactions.vote=a,h(a,e),b.$emit("vote_submitted",b.type,a))}}]}}]);
angular.module("genius").directive("watchImagesLoaded",["$immediate","$q",function(a,b){return{restrict:"A",link:function(c,d,f){c.$watch(f.watchImagesLoaded||"ngBindHtml",function(e){e?a(function(){b(function(a){d.waitForImages(a)}).then(function(){c.$emit("images_loaded")})},!1):c.$emit("images_loaded")})}}}]);
angular.module("genius").directive("webAnnotatorRoleRow",[function(){return{templateUrl:"web_annotator_role_row.html",scope:{on_create:"&onCreate",on_error:"&onError",user_role:"<userRole"},bindToController:!0,controllerAs:"$ctrl",controller:["WebAnnotatorClient","$q",function(a,b){var c=this,d=function(){return _.pick(c.user_role,["user_login","role","page_moderator","auto_feature"])};this.$onInit=function(){this.editing=!this.user_role.id};this.create=function(){c.saving=!0;b.when(c.on_create({params:d()})).then(function(){c.user_role=
{auto_feature:!0}}).catch(function(a){c.on_error({error:a})}).finally(function(){c.saving=!1})};this.save=function(){c.saving=!0;a.update_user_role(c.user_role.id,d()).then(function(a){c.user_role=a;c.editing=!1}).catch(function(a){c.on_error({error:a})}).finally(function(){c.saving=!1})};this.destroy=function(){c.user_role._deleted=!0;a.destroy_user_role(c.user_role.id).catch(function(a){c.on_error({error:a});c.user_role._deleted=!1})}}]}}]);
angular.module("genius").directive("yieldsBoundingBoxHeight",["$immediate",function(a){return{restrict:"A",scope:{yieldsBoundingBoxHeight:"&"},link:function(b,c){a(function(){var a=c[0].getBoundingClientRect().height;b.yieldsBoundingBoxHeight({height:a})})}}}]);
angular.module("genius").directive("youtubePlayer",["$document","Youtube",function(a,b){var c=/http:\/\/www\.youtube\.com\/watch\?v=(.*)/i;return{restrict:"E",scope:{src:"<?",start:"<?",controls:"<?",fullscreen:"<?",yields_api:"&yieldsApi",yields_state:"&yieldsState",eager_load:"<?eagerLoad",autoplay:"<?",playsinline:"<?",on_playing:"&onPlaying"},link:function(d,f){d.state={};var e=a[0].createElement("div");f[0].appendChild(e);var h=new b(e,{controls:d.controls,fullscreen:d.fullscreen,playsinline:d.playsinline});
d.$watch("src",function(a){a=a.match(c)[1];h.cue_video_by_id(a,d.start||0);d.eager_load&&(h.api.load_media(),d.autoplay&&(h.api.mute(),h.api.playpause()));d.yields_api({api:h.api});d.yields_state({state:h.state})});h.state.$watch("is_playing",function(a){if(a)d.on_playing()})}}}]);angular.module("genius").factory("$debounce",["$timeout",function(a){return function(b,c){var d;return function(){a.cancel(d);d=a(b,c)}}}]);
angular.module("genius").factory("$immediate",["$timeout",function(a){return function(b,c){return a(b,0,c)}}]);angular.module("genius").factory("$throttle",["$rootScope",function(a){return function(b,c,d){return _.throttle(function(){var c=arguments;a.$apply(function(){b.apply(null,c)})},c,d)}}]);
angular.module("genius").factory("AbTest",["AbTestClient","LocalStorage","$q","AppConfig",function(a,b,c,d){return{get_variant_for:function(a){return this.get_ab_tests().then(function(b){return b[a]})},get_ab_tests:_.once(function(){var f=b.safe_get_item("ab_tests",null);return f&&_.every(d.ab_tests,function(a){return _.has(f,a)})?c.resolve(f):a.get().then(function(a){a=a.ab_tests;b.safe_set_item("ab_tests",a);return a})}),clear:function(){b.safe_remove_item("ab_tests")}}}]);
angular.module("genius").factory("AbTestClient",["ApiClient",function(a){return{get:function(){return a.get("/ab_tests")}}}]);angular.module("genius").factory("AccomplishmentClient",["ApiClient",function(a){return{update:function(b,c){return a.put("/accomplishments/:accomplishment_id",_.merge({accomplishment_id:b},c))}}}]);
angular.module("genius").factory("AdminTaskClient",["ApiClient",function(a){return{get:function(b){return a.get("/admin_tasks/"+b)},perform_task:function(b,c){return a.post("/admin_tasks/"+b.name+"/perform",{property_values:c})}}}]);
angular.module("genius").factory("Ads",["$location","$q","$window","ApiClient","application_bootstrap",function(a,b,c,d,f){c["Genius.ads"]=c["Genius.ads"]||[];var e=b(function(a){return c["Genius.ads"].push(a)});e.then(function(a){f.after(a.trigger_user_syncs.bind(a))});return{ensure_targeting_for_placements:function(a){return e.then(function(b){return b.ensure_targeting_for_placements(a)})},id_for:function(a,b){return e.then(function(c){return c.id_for(a,b)})},reset_for_new_page_view:function(a){var b=
a.targeting;return e.then(function(a){a.reset_for_new_page_view({targeting:b})})},render:function(c,f,k){return e.then(function(e){return b(function(b){e.render(c,f,k).then(function(e){a.search().log_ads&&d.post("/client_logs/gpt_slot_rendered/"+a.search().log_ads,Object.assign({name:c,instance:f,url:a.url(),hb_bidder:_.get(e.slot.getTargetingMap(),["hb_bidder",0]),hb_adid:_.get(e.slot.getTargetingMap(),["hb_adid",0])},e.slot.getResponseInformation()));b(e)})})})},dispose:function(a,c){return e.then(function(d){return b(function(b){d.dispose(a,
c).then(b)})})},get_base_targeting:function(a){return e.then(function(c){return b(function(b){b(c.get_base_targeting(a))})})},get_async_targeting:function(a,c){return e.then(function(d){return b(function(b){d.get_async_targeting(a,c).then(b)})})}}}]);
angular.module("genius").factory("AdwordsAdClient",["AppConfig","$http",function(a,b){return{all:function(c){return b.get(a.api_root_url+"/adwords_ads?adwords_ad_group_id="+c).then(function(a){return a.data.response.ads})},create:function(c,d){return b.post(a.api_root_url+"/adwords_ads",{ad:d,adwords_ad_group_id:c}).then(function(a){return a.data.response.ad})},update:function(c,d){return b.put(a.api_root_url+"/adwords_ads/"+c,{ad:d}).then(function(a){return a.data.response.ad})}}}]);
angular.module("genius").factory("AdwordsAdGroupClient",["AppConfig","$http",function(a,b){return{all:function(c){return b.get(a.api_root_url+"/adwords_ad_groups?adwords_campaign_id="+c).then(function(a){return a.data.response.ad_groups})},create:function(c,d){return b.post(a.api_root_url+"/adwords_ad_groups",{ad_group:d,adwords_campaign_id:c}).then(function(a){return a.data.response.ad_group})}}}]);
angular.module("genius").factory("AdwordsCampaignClient",["AppConfig","$http",function(a,b){return{all:function(){return b.get(a.api_root_url+"/adwords_campaigns").then(function(a){return a.data.response.campaigns})},create:function(c){return b.post(a.api_root_url+"/adwords_campaigns",{campaign:c}).then(function(a){return a.data.response.campaign})}}}]);angular.module("genius").factory("AdwordsNetworkClient",["$http","AppConfig",function(a,b){return{all:function(){return a.get(b.api_root_url+"/adwords_networks").then(function(a){return a.data.response.networks})}}}]);
angular.module("genius").factory("AlbumClient",["ApiClient",function(a){return{autocomplete:function(b,c){void 0===c&&(c={});return a.returning("albums").get("/albums/autocomplete",Object.assign({q:b},c))},load_leaderboard:function(b,c){return a.get("/albums/"+b+"/leaderboard",c)},update:function(b,c){return a.returning("album").put("/albums/"+b,{album:c,text_format:"html,markdown"})},update_tracklist:function(b,c){return a.returning("album_appearances").put("/albums/"+b+"/tracklist",{tracklist:c})},
delete:function(b){return a.delete("/albums/"+b)},change_lock_state:function(b,c){return a.returning("album").put("/albums/"+b+"/change_lock_state",{state_event:c})}}}]);
angular.module("genius").factory("AnnotationClient",["$q","ApiClient","Session","Reversible","Markdown",function(a,b,c,d,f){var e=function(a){return a.extend({params:{text_format:c.user_signed_in?"html,markdown":"html"}})},h=function(a,b){a._deleted=!0;return b.catch(function(){Reflect.deleteProperty(a,"_deleted")})},g=function(a,c){return b.use(e).returning("annotation_edit").post("/annotation_edits/:edit_id/:action",{edit_id:c,action:a})},k=function(a,c){return b.use(e).put("/annotations/:annotation_id",
_.merge(c,{annotation_id:a}))},m=function(a,c){return b.use(e).post("/referents/:referent_id/annotations",_.merge(c,{referent_id:a}))};return{save:function(b,c){var e={body:{markdown:b._editing.markdown},edit_note:b._editing.edit_note};b._editing._has_source&&(e.source=b._editing.source);b._editing.custom_preview!==b.custom_preview&&(e.custom_preview=b._editing.custom_preview);var g;g=b.id?k(b.id,{annotation:e}):m(c.referent.id,{annotation:e});var h=d.modify(b,{"body.html":f.to_html(b._editing.markdown),
new:!1,source:e.source});return g.then(function(a){_.assign(c.referent,a.referent);return _.assign(b,a.annotation)}).catch(function(){h();return a.reject()})},safe_delete:function(a){return h(a,this.delete(a.id))},delete:function(a){return b.delete("/annotations/:annotation_id",{annotation_id:a})},accept:function(f,g){var h=g.referent,k=d.modify(h,{classification:"unreviewed"===h.classification?"accepted":h.classification}),m=d.modify(f,{state:"accepted",accepted_by:c.current_user,"current_user_metadata.permissions":["edit"]});
return b.use(e).returning("annotation").post("/annotations/:annotation_id/accept",{annotation_id:f.id}).then(function(a){return _.assign(f,a)}).catch(function(){k();m();return a.reject()})},safe_reject:function(b,c){var e,f=c.comment,f=_.assign({},f,{body:f.body.markdown,reason:f.reason?f.reason.raw_name:void 0});e=0===b.comment_count?d.modify(b,{_deleted:!0}):d.modify(b,{needs_exegesis:!0});return this.reject(b.id,{comment:f}).then(function(a){a=a||{};_.assign(b,a.annotation||{_deleted:!0});_.assign(c.referent,
a.referent||{_deleted:!0})}).catch(function(){e();return a.reject()})},reject:function(a,c){return b.use(e).post("/annotations/:annotation_id/reject",_.merge(c,{annotation_id:a}))},pin_to_profile:function(a){return b.use(e).put("/annotations/:annotation_id/pin_to_profile",{annotation_id:a})},unpin_from_profile:function(a){return b.use(e).put("/annotations/:annotation_id/unpin_from_profile",{annotation_id:a})},toggle_cosign:function(a,c){return b.use(e).put("/annotations/:annotation_id/"+(c?"":"un")+
"cosign",{annotation_id:a})},clear_votes:function(a){return b.delete("/votes",{annotation_id:a})},report_as_abusive:function(a){return b.post("/annotations/:annotation_id/report_as_abusive",{annotation_id:a})},load_versions:function(a){return b.use(e).returning("versions").get("/annotations/:annotation_id/versions",{annotation_id:a})},revert_to_version:function(a,c){return b.use(e).returning("annotation").put("/annotations/:annotation_id/version",{annotation_id:a,version_id:c})},propose_edit:function(a){var c=
{body:{markdown:a._editing.markdown},edit_note:a._editing.edit_note};return b.use(e).returning("annotation_edit").post("/annotations/:annotation_id/edits",{annotation_id:a.id,annotation:c})},proposed_edits:function(a){return b.use(e).returning("annotation_edits").get("/annotations/:annotation_id/edits",{annotation_id:a})},merge_edit:function(a){return g("merge",a)},reject_edit:function(a){return g("reject",a)}}}]);
angular.module("genius").factory("AnswerClient",["$http","$q","AppConfig","Session","Reversible","Markdown",function(a,b,c,d,f,e){var h=function(a){var c=Error(a.data.meta.message);_.assign(c,_.pick(a,"status","statusText"));return b.reject(_.assign(c,a.data.response))},g=function(b,e){return a.put(c.api_root_url+"/answers/"+b,e,{params:{text_format:d.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response}).catch(function(a){return h(a)})},k=function(b,e){var f={text_format:d.user_signed_in?
"html,markdown":"html"};e=_.assign({},e,{question:_.pick(b,["body","questionable_id","questionable_type","default_key","state"])});return a.post(c.api_root_url+"/answers",e,{params:f}).then(function(a){return a.data.response}).catch(function(a){return h(a)})},m=function(b,e){return a.post(c.api_root_url+"/questions/"+b+"/answers",e,{params:{text_format:d.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response}).catch(function(a){return h(a)})};return{save:function(a,c){var h=
{body:{markdown:a._editing.markdown},pin_question:a._editing.pin_question};d.has_permission("update_answer_source",c.question)&&(h.answer_source=a.answer_source);var q;q=a.id?g(a.id,{answer:h}):c.question.id?m(c.question.id,{answer:h}):k(c.question,{answer:h});var t=f.modify(a,{"body.html":e.to_html(a._editing.markdown),new:!1}),u={};h.pin_question&&(u.state="pinned");var w=f.modify(c.question,u);return q.then(function(b){_.assign(c.question,_.omit(b.question,"answer"));return _.assign(a,b.answer)}).catch(function(a){t();
w();return b.reject(a)})},destroy:function(d,e){var g=d.id;if(!g)return b.reject(Error("Answer hasn't been saved yet."));var k=f.modify(e.question.current_user_metadata,{permissions:e.question.current_user_metadata.permissions.concat("add_answer")});return a.delete(c.api_root_url+"/answers/"+g).then(function(a){_.assign(e.question,_.omit(a.question,"answer"));return a.data.response}).catch(function(a){k();return h(a)})}}}]);
var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
angular.module("genius").factory("ApiClient",["$http","AppConfig","PromiseQueue","BeforeUnloadCheck",function(a,b,c,d){var f=new c;d.add(function(){return!f.is_empty()});var e=function(a){var b=_.isObject(a)&&_.isObject(a.data)&&_.has(a.data,"meta")&&_.has(a.data,"response");a=_.isObject(a)&&204===a.status&&""===a.data;return b||a},h=function(){return function(a){_.assign(this,a.data.response)}}(),g=function(a){function b(c,d){var e=a.call(this,c)||this;e.status=d.status;e.response=d.data;e.stack=
Error().stack;return e}__extends(b,a);Object.defineProperty(b.prototype,"name",{get:function(){return"ApiError"},enumerable:!0,configurable:!0});return b}(Error),k=function(a,b){return a.split("/").map(function(c){return c.replace(/^:(\w+)$/,function(c,d){if(_.has(b,d)&&null!=b[d]){var e=b[d];Reflect.deleteProperty(b,d);return e}throw Error("Missing param '"+d+"' for API path '"+a+"'");})}).join("/")},m=function(a){return function(c,d){void 0===d&&(d={});if(!_.startsWith(c,"/"))throw Error("Path must start with /");
d=_.clone(d);c=k(b.api_root_url+c,d);var e="get"===a||"delete"===a?{params:d}:{data:d};return this.extend({method:a,url:c}).merge(e).send()}};return function(){function b(a,c){this._config=a;this._transform=c}b.empty=function(){return new b({},_.identity)};b.prototype._update=function(a){a=_.assign({config:this._config,transform:this._transform},a);return new b(a.config,a.transform)};b.prototype._is_get=function(){return"get"===this._config.method};b.prototype.extend=function(a){return this._update({config:_.assign({},
this._config,a)})};b.prototype.merge=function(a){return this._update({config:_.merge({},this._config,a)})};b.prototype.use=function(a){return _.tap(a(this),function(a){if(!(a instanceof b))throw TypeError("Result of ApiRequest#use() must be an ApiRequest");})};b.prototype.set_param=function(a,b){var c;return this.merge({params:(c={},c[a]=b,c)})};b.prototype.transform=function(a){return this._update({transform:_.flow(this._transform,a)})};b.prototype.returning=function(a){return this.transform(_.property(a))};
b.prototype.send=function(){var b=this;return(this._is_get()?a(this._config):f.add(function(){return a(b._config)})).catch(function(a){if(_.isObject(a.data))if(e(a)){var b=new g(a.data.meta.message||a.statusText,a);a=_.assign(b,{response:a.data.response})}else a=new g(a.statusText,a);else a=new g(a.statusText,a);return Promise.reject(a)}).then(function(a){return e(a)?Promise.resolve(new h(a)):Promise.reject(new g("Invalid response",a))}).then(this._transform)};b.prototype.then=function(a,b){this._response=
this._response||this.send();return this._response.then(a,b)};Object.defineProperty(b.prototype,"get",{get:function(){return m("get")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"post",{get:function(){return m("post")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"put",{get:function(){return m("put")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"delete",{get:function(){return m("delete")},enumerable:!0,configurable:!0});return b}().empty()}]);
angular.module("genius").constant("AppConfig",window.APP_CONFIG);__awaiter=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(f,e){function h(a){try{k(d.next(a))}catch(b){e(b)}}function g(a){try{k(d["throw"](a))}catch(b){e(b)}}function k(a){a.done?f(a.value):(new c(function(b){b(a.value)})).then(h,g)}k((d=d.apply(a,b||[])).next())})};
__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;f;)try{if(e=1,h&&(g=c[0]&2?h["return"]:c[0]?h["throw"]||((g=h["return"])&&g.call(h),0):h.next)&&!(g=g.call(h,c[1])).done)return g;if(h=0,g)c=[c[0]&2,g.value];switch(c[0]){case 0:case 1:g=c;break;case 4:return f.label++,{value:c[1],done:!1};case 5:f.label++;h=c[1];c=[0];continue;case 7:c=f.ops.pop();f.trys.pop();continue;
default:if(!(g=f.trys,g=0<g.length&&g[g.length-1])&&(6===c[0]||2===c[0])){f=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3])){f.label=c[1];break}if(6===c[0]&&f.label<g[1]){f.label=g[1];g=c;break}if(g&&f.label<g[2]){f.label=g[2];f.ops.push(c);break}g[2]&&f.ops.pop();f.trys.pop();continue}c=b.call(a,f)}catch(d){c=[6,d],h=0}finally{e=g=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},e,h,g,k;return k={next:c(0),
"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};
angular.module("genius").factory("AppleAudioPlayback",["$interval","$rootScope",function(a,b){return function(){function c(c){var f=c.external_song,e=f.provider_id,f=f.duration_ms,h=this;this.instance=c.instance;this.apple_id=e;this.duration=f;this.type="apple_audio";this.label="Apple Music";this.userHasRequestedPlayback=!1;this.emitter=b.$new();a(function(){return h.emitter.$emit("state",h.state)},50);this.instance.addEventListener("playbackTimeDidChange",function(){return __awaiter(h,void 0,void 0,
function(){return __generator(this,function(a){switch(a.label){case 0:return this.instance.currentPlaybackTime!==this.instance.currentPlaybackDuration?[3,3]:[4,this.instance.pause()];case 1:return a.sent(),[4,this.instance.seekToTime(0)];case 2:a.sent(),a.label=3;case 3:return[2]}})})});this.instance.setQueue({song:this.apple_id}).then(function(){return h.preloadAudio()})}c.prototype.$on=function(a,b){return this.emitter.$on(a,b)};Object.defineProperty(c.prototype,"playing",{get:function(){return this.instance.isPlaying},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"position",{get:function(){return this._currentPlayer.audio?1E3*this._currentPlayer.audio.currentTime:0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"loading",{get:function(){return!(this.instance.nowPlayingItem&&this._currentPlayer.audio)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"state",{get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,
time_remaining:this.duration-this.position,is_loading:this.loading,is_playing:this.playing}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"api",{get:function(){var a=this;return{play:function(){a.userHasRequestedPlayback=!0;return a.instance.isAuthorized?a.instance.play():a.instance.authorize().then(a.instance.play)},pause:function(){return a.instance.pause()},playpause:function(){return a.playing?a.api.pause():a.api.play()},seek_to:function(b){return a.api.seek_to_position(a.duration*
b)},seek_to_position:function(b){return a.playing?a.instance.seekToTime(b/1E3):a.api.play().then(function(){return a.instance.seekToTime(b/1E3)})}}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"_currentPlayer",{get:function(){return this.instance._playbackController._mediaItemPlayback._currentPlayer},enumerable:!0,configurable:!0});c.prototype.preloadAudio=function(){var a=this;if(this.instance.isAuthorized)return this.instance.addEventListener("nowPlayingItemDidChange",function(){a.userHasRequestedPlayback||
a.instance.pause()},{once:!0}),this.instance.play().finally(function(){return a.cleanUpBuggyAutoplayPromise()})};c.prototype.cleanUpBuggyAutoplayPromise=function(){this._currentPlayer._deferredPlay&&this._currentPlayer._deferredPlay.resolve()};return c}()}]);angular.module("genius").factory("AppleMatchEvaluationsClient",["ApiClient",function(a){return{submit:function(b,c){return a.put("/apple_match_evaluations/"+b,{evaluation:c})},skip:function(b){return a.put("/apple_match_evaluations/"+b,{evaluation:{checked_out_at:null}})}}}]);
angular.module("genius").factory("application_bootstrap",["$q",function(a){var b=!1,c=a.defer(),d=[];return{before:function(a){b||a()},after:function(a){if(b)return a();d.push(c.promise.then(a))},done:function(){b=!0;c.resolve();return a.all(d)}}}]);
angular.module("genius").factory("ArticleClient",["$http","AppConfig","ApiClient",function(a,b,c){return{index:function(c){return a.get(b.api_root_url+"/articles",{params:c}).then(function(a){return a.data.response})},delete:function(a){return c.delete("/articles/"+a)},update_featured_slots:function(a){return c.put("/articles/featured_slots",{featured_articles:a})}}}]);
angular.module("genius").factory("ArtistClient",["$http","AppConfig","ApiClient",function(a,b,c){var d={autocomplete_api_endpoint:b.api_root_url+"/artists/autocomplete",autocomplete:function(b){return a.get(d.autocomplete_api_endpoint,{params:{q:b}}).then(function(a){return a.data.response.artists})},autocomplete_options:{minChars:2,parse:function(a){return _.map(a.response.artists,function(a){return{data:[a.name,a],value:a,result:a}})}},load:function(c){return a.get(b.api_root_url+"/artists/"+c).then(function(a){return a.data.response.artist})},
update:function(c,d){return a.put(b.api_root_url+"/artists/"+c,{artist:_.pick(d,"name alternate_names image_url header_image_url instagram_name twitter_name facebook_name translation_artist".split(" ")),text_format:"html,markdown"}).then(function(a){return a.data.response.artist})},load_albums:function(c,d){return a.get(b.api_root_url+"/artists/"+c+"/albums",{params:d}).then(function(a){return a.data.response})},load_leaderboard:function(c,d){return a.get(b.api_root_url+"/artists/"+c+"/leaderboard",
{params:d}).then(function(a){return a.data.response})},merge:function(c,d){return a.put(b.api_root_url+"/artists/"+c+"/merge",{target:{name:d}}).then(function(a){return a.data.response})},get_slug:function(a){return _(this.get_path(a).split("/")).last()},get_path:function(a){return(new URL(a.url)).pathname},activity_line_items:function(c,d){return a.get(b.api_root_url+"/artists/"+c+"/activity_stream/line_items",{params:d}).then(function(a){return a.data.response})},contribution_opportunities:function(a,
b){return c.get("/artists/:id/contribution_opportunities",_.merge(b,{id:a,text_format:"html,markdown"}))}};return d}]);angular.module("genius").factory("AssetClient",["$http",function(a){return{remove:function(b){return a.post("/assets/remove",{asset_url:b})}}}]);
angular.module("genius").factory("AsyncAnalytics",["$document","$q","$immediate","AnalyticsConfig","Librato","Tracking","wait_for_global",function(a,b,c,d,f,e,h){var g=function(a){return h("_sf_async_config").then(function(b){Object.assign(b,a.chartbeat);return h("pSUPERFLY")}).then(function(b){b.virtualPage(a.path,a.title)})},k=function(){return h("COMSCORE").then(function(a){a.beacon({c1:"2",c2:d.comscore_client_id})})},m=function(a){return h("ga").then(function(b){return b(function(){b("set","page",
a.path);b("set","dimension2",a.controller_and_action);b("set","dimension3",a.tracking_data["Primary Tag"]);b("set","dimension4",String(a.tracking_data["Music?"]));b("set","dimension5","true");b("send","pageview")})})},l=function(a){e.reset_counters();e.register({fast_navigating:!0});e.set_tacking_data(a.tracking_data.reduce(function(a,b){var c=b.key,d=b.value,e;return Object.assign(a,(e={},e[c]=d,e))},{}))},n=function(){return b.all({__qc:h("__qc"),_qevents:h("_qevents"),quantserve:h("quantserve")}).then(function(a){var b=
a._qevents,e=a.quantserve;a.__qc.qpixelsent=[];e();c(function(){return b.push({qacct:d.quantcast_account})})})};return{on_navigation:function(a){this.remove_social_metadata();if(!d.enabled)return b.when();var c=g(a),e=k(),h=m(a);f.set_page_type(a.page_type);c=[c,e,h,void 0,n()];d.mixpanel_enabled&&c.push(l(a));return b.all(c)},remove_social_metadata:_.once(function(){return _.filter(a.prop("head").querySelectorAll("meta"),function(a){return(a.getAttribute("property")||"").match(/^(og|fb|twitter):/)}).forEach(function(a){return a.remove()})})}}]);
angular.module("genius").factory("Attempt",["$window","I18n",function(a,b){return{close_form:function(c,d){c?d():a.confirm(b.t("editing.dirty_unload_confirm_box"))&&d()},admin_action:function(b,d){a.confirm(d)&&b()}}}]);
angular.module("genius").factory("AuthenticationClient",["ApiClient","signed_out_created_content",function(a,b){return{sign_in:function(b){return a.post("/sessions",{user:b})},sign_up:function(c){return a.post("/users",{user:c,signed_out_created_content:b.get()}).then(function(a){b.clear();return a})}}}]);
(function(a,b){if("function"===typeof define&&define.amd)define(["exports","module"],b);else if("undefined"!==typeof exports&&"undefined"!==typeof module)b(exports,module);else{var c={exports:{}};b(c.exports,c);a.autosize=c.exports}})(this,function(a,b){function c(a,b){function c(){var b=window.getComputedStyle(a,null);x=b.overflowY;"vertical"===b.resize?a.style.resize="none":"both"===b.resize&&(a.style.resize="horizontal");A="content-box"===b.boxSizing?-(parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)):
parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth);isNaN(A)&&(A=0);g()}function d(b){var c=a.style.width;a.style.width="0px";a.offsetWidth;a.style.width=c;x=b;w&&(a.style.overflowY=b);f()}function f(){var b=window.pageYOffset,c=document.body.scrollTop,d=a.style.height;a.style.height="auto";var e=a.scrollHeight+A;0===a.scrollHeight?a.style.height=d:(a.style.height=e+"px",E=a.clientWidth,document.documentElement.scrollTop=b,document.body.scrollTop=c)}function g(){var b=a.style.height;f();
window.getComputedStyle(a,null).height!==a.style.height?"visible"!==x&&d("visible"):"hidden"!==x&&d("hidden");b!==a.style.height&&(b=h("autosize:resized"),a.dispatchEvent(b))}var t=void 0===b?{}:b,u=t.setOverflowX,u=void 0===u?!0:u,t=t.setOverflowY,w=void 0===t?!0:t;if(a&&a.nodeName&&"TEXTAREA"===a.nodeName&&!e.has(a)){var A=null,x=null,E=a.clientWidth,F=function(){a.clientWidth!==E&&g()},y=function(b){window.removeEventListener("resize",F,!1);a.removeEventListener("input",g,!1);a.removeEventListener("keyup",
g,!1);a.removeEventListener("autosize:destroy",y,!1);a.removeEventListener("autosize:update",g,!1);e["delete"](a);Object.keys(b).forEach(function(c){a.style[c]=b[c]})}.bind(a,{height:a.style.height,resize:a.style.resize,overflowY:a.style.overflowY,overflowX:a.style.overflowX,wordWrap:a.style.wordWrap});a.addEventListener("autosize:destroy",y,!1);"onpropertychange"in a&&"oninput"in a&&a.addEventListener("keyup",g,!1);window.addEventListener("resize",F,!1);a.addEventListener("input",g,!1);a.addEventListener("autosize:update",
g,!1);e.add(a);u&&(a.style.overflowX="hidden",a.style.wordWrap="break-word");c()}}function d(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=h("autosize:destroy");a.dispatchEvent(b)}}function f(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=h("autosize:update");a.dispatchEvent(b)}}var e="function"===typeof Set?new Set:function(){var a=[];return{has:function(b){return Boolean(-1<a.indexOf(b))},add:function(b){a.push(b)},"delete":function(b){a.splice(a.indexOf(b),1)}}}(),h=function(a){return new Event(a)};
try{new Event("test")}catch(k){h=function(a){var b=document.createEvent("Event");b.initEvent(a,!0,!1);return b}}var g=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?(g=function(a){return a},g.destroy=function(a){return a},g.update=function(a){return a}):(g=function(a,b){a&&Array.prototype.forEach.call(a.length?a:[a],function(a){return c(a,b)});return a},g.destroy=function(a){a&&Array.prototype.forEach.call(a.length?a:[a],d);return a},g.update=function(a){a&&Array.prototype.forEach.call(a.length?
a:[a],f);return a});b.exports=g});angular.module("genius").factory("Autosize",["$window",function(a){return a.autosize}]);angular.module("genius").factory("BeforeUnloadCheck",["$window","I18n",function(a,b){var c=[];a.onbeforeunload=function(){if(_.some(c,function(a){return a()}))return b.t("editing.dirty_unload")};return{add:function(a){c.push(a)},remove:function(a){_.remove(c,function(b){return b===a})}}}]);
angular.module("genius").factory("Bindings",[function(){var a=function(a,c){var d=a[0];"?"===a[1]&&(d+="?");var f=a.slice(d.length)||c,d={"@":function(){return this.$attrs[f]},"<":function(){return this.$scope.$eval(this.$attrs[f])},"&":function(){var a=this;return function(b){return a.$scope.$eval(a.$attrs[f],b)}},"&?":function(){var a=this;return _.isUndefined(this.$attrs[f])?void 0:function(b){return a.$scope.$eval(a.$attrs[f],b)}}}[d];if(!d)throw Error("invalid attribute specification passed to Bindings service: '"+
a+"'");return d};return{resolver:function(b){var c=function(){function c(a,b){this.$scope=a;this.$attrs=b;this.assign_to(this)}c.prototype.assign_to=function(c){var d=this;_.each(b,function(b,g){Reflect.defineProperty(c,g,{get:a(b,g).bind(d)})})};return c}();return function(a,b){return new c(a,b)}}}}]);angular.module("genius").factory("Bowser",["$window",function(a){return a.bowser}]);
angular.module("genius").factory("BrandedChartClient",["ApiClient",function(a){return{songs:function(b){return a.returning("songs").get("/branded_charts/:id/songs",{id:b,text_format:"html"})}}}]);
angular.module("genius").factory("Brightcove",["$q","AppConfig","getScript","wait_for_global",function(a,b,c,d){var f=/brightcove_(.*)_web_player_id/,e=a.defer(),h=function(f){return e.promise.then(function(){return c("//players.brightcove.net/"+b.brightcove_account_id+"/"+f+"_default/index.min.js",{cache:!0})}).then(function(){return a.all({videojs:d("videojs"),bc:d("bc")})})},g={account_id:b.brightcove_account_id,load_api:function(a){e.resolve();return h(a)}};_(b).keys().map(function(a){return a.match(f)}).filter().each(function(a){g[a[1]+
"_player_id"]=b[a[0]]});return g}]);
var Channel=function(){function a(a,b,c,e){function f(b){for(var c=0;c<b.length;c++)if(b[c].win===a)return!0;return!1}var n=!1;if("*"===b)for(var r in d){if(d.hasOwnProperty(r)&&"*"!==r&&"object"===typeof d[r][c]&&(n=f(d[r][c])))break}else d["*"]&&d["*"][c]&&(n=f(d["*"][c])),!n&&d[b]&&d[b][c]&&(n=f(d[b][c]));if(n)throw"A channel is already bound to the same window which overlaps with origin '"+b+"' and has scope '"+c+"'";"object"!=typeof d[b]&&(d[b]={});"object"!=typeof d[b][c]&&(d[b][c]=[]);d[b][c].push({win:a,
handler:e})}function b(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var c=Math.floor(1000001*Math.random()),d={},f={},e=function(a){try{var b=JSON.parse(a.data);if("object"!==typeof b||null===b)throw"malformed";}catch(c){return}var e=a.source;a=a.origin;var m,l,n;"string"===typeof b.method&&(n=b.method.split("::"),2==n.length?(m=n[0],n=n[1]):n=b.method);"undefined"!==typeof b.id&&(l=b.id);if("string"===typeof n){l=!1;if(d[a]&&d[a][m])for(var r=0;r<d[a][m].length;r++)if(d[a][m][r].win===
e){d[a][m][r].handler(a,n,b);l=!0;break}if(!l&&d["*"]&&d["*"][m])for(r=0;r<d["*"][m].length;r++)if(d["*"][m][r].win===e){d["*"][m][r].handler(a,n,b);break}}else if("undefined"!=typeof l&&f[l])f[l](a,n,b)};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e);return{build:function(e){var g=function(a){if(e.debugOutput&&window.console&&window.console.log){try{"string"!==typeof a&&(a=JSON.stringify(a))}catch(b){}console.log("["+l+"] "+a)}};
if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof e)throw"Channel build invoked without a proper object argument";if(!e.window||!e.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===e.window)throw"target window is same as present window -- not allowed";var k=!1;if("string"===typeof e.origin){var m;
"*"===e.origin?k=!0:null!==(m=e.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(e.origin=m[0].toLowerCase(),k=!0)}if(!k)throw"Channel.build() called with an invalid origin";if("undefined"!==typeof e.scope){if("string"!==typeof e.scope)throw"scope, when specified, must be a string";if(1<e.scope.split("::").length)throw"scope may not contain double colons: '::'";}var l=function(){for(var a="",b=0;5>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*
Math.random()));return a}(),n={},r={},q={},t=!1,u=[],w=function(a,b,c){var d=!1,e=!1;return{origin:b,invoke:function(b,d){if(!q[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var e=!1,f=0;f<c.length;f++)if(b===c[f]){e=!0;break}if(!e)throw"request supports no such callback '"+b+"'";F({id:a,callback:b,params:d})},error:function(b,c){e=!0;if(!q[a])throw"error called for nonexistent message: "+a;delete q[a];F({id:a,error:b,message:c})},complete:function(b){e=!0;if(!q[a])throw"complete called for nonexistent message: "+
a;delete q[a];F({id:a,result:b})},delayReturn:function(a){"boolean"===typeof a&&(d=!0===a);return d},completed:function(){return e}}},A=function(a,b,c){return window.setTimeout(function(){if(r[a]){var d="timeout ("+b+"ms) exceeded on method '"+c+"'";(1,r[a].error)("timeout_error",d);delete r[a];delete f[a]}},b)},x=function(a,c,d){if("function"===typeof e.gotMessageObserver)try{e.gotMessageObserver(a,d)}catch(k){g("gotMessageObserver() raised an exception: "+k.toString())}if(d.id&&c){if(n[c]){var l=
w(d.id,a,d.callbacks?d.callbacks:[]);q[d.id]={};try{if(d.callbacks&&b(d.callbacks)&&0<d.callbacks.length)for(a=0;a<d.callbacks.length;a++){for(var m=d.callbacks[a],t=d.params,u=m.split("/"),y=0;y<u.length-1;y++){var A=u[y];"object"!==typeof t[A]&&(t[A]={});t=t[A]}t[u[u.length-1]]=function(){var a=m;return function(b){return l.invoke(a,b)}}()}var p=n[c](l,d.params);l.delayReturn()||l.completed()||l.complete(p)}catch(k){c="runtime_error";d=null;"string"===typeof k?d=k:"object"===typeof k&&(k&&b(k)&&
2==k.length?(c=k[0],d=k[1]):"string"===typeof k.error&&(c=k.error,k.message?"string"===typeof k.message?d=k.message:k=k.message:d=""));if(null===d)try{d=JSON.stringify(k),"undefined"==typeof d&&(d=k.toString())}catch(x){d=k.toString()}l.error(c,d)}}}else if(d.id&&d.callback)if(r[d.id]&&r[d.id].callbacks&&r[d.id].callbacks[d.callback])r[d.id].callbacks[d.callback](d.params);else g("ignoring invalid callback, id:"+d.id+" ("+d.callback+")");else if(d.id)r[d.id]?(d.error?(1,r[d.id].error)(d.error,d.message):
void 0!==d.result?(1,r[d.id].success)(d.result):(1,r[d.id].success)(),delete r[d.id],delete f[d.id]):g("ignoring invalid response: "+d.id);else if(c&&n[c])n[c]({origin:a},d.params)};a(e.window,e.origin,"string"===typeof e.scope?e.scope:"",x);var E=function(a){"string"===typeof e.scope&&e.scope.length&&(a=[e.scope,a].join("::"));return a},F=function(a,b){if(!a)throw"postMessage called with null message";g((t?"post  ":"queue ")+" message: "+JSON.stringify(a));if(b||t){if("function"===typeof e.postMessageObserver)try{e.postMessageObserver(e.origin,
a)}catch(c){g("postMessageObserver() raised an exception: "+c.toString())}e.window.postMessage(JSON.stringify(a),e.origin)}else u.push(a)},y={unbind:function(a){if(n[a]){if(!delete n[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!==typeof a)throw"'method' argument to bind must be string";if(!b||"function"!==typeof b)throw"callback missing from bind params";if(n[a])throw"method '"+a+"' is already bound!";n[a]=b;return this},call:function(a){if(!a)throw"missing arguments to call function";
if(!a.method||"string"!==typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!==typeof a.success)throw"'success' callback missing from call";var b={},d=[],e=[],g=function(a,c){if(0<=e.indexOf(c))throw"params cannot be a recursive data structure";e.push(c);if("object"===typeof c)for(var f in c)if(c.hasOwnProperty(f)){var h=a+(a.length?"/":"")+f;"function"===typeof c[f]?(b[h]=c[f],d.push(h),delete c[f]):"object"===typeof c[f]&&null!==c[f]&&g(h,c[f])}};g("",a.params);
var h={id:c,method:E(a.method),params:a.params};d.length&&(h.callbacks=d);a.timeout&&A(c,a.timeout,E(a.method));r[c]={callbacks:b,error:a.error,success:a.success};f[c]=x;c++;F(h)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to notify must be string";F({method:E(a.method),params:a.params})},destroy:function(){for(var a=e.window,b=e.origin,c="string"===typeof e.scope?e.scope:"",f=d[b][c],k=0;k<f.length;k++)f[k].win===
a&&f.splice(k,1);0===d[b][c].length&&delete d[b][c];window.removeEventListener?window.removeEventListener("message",x,!1):window.detachEvent&&window.detachEvent("onmessage",x);t=!1;n={};q={};r={};e.origin=null;u=[];g("channel destroyed");l=""}};y.bind("__ready",function(a,b){g("ready msg received");if(t)throw"received ready message while in ready state.  help!";l="ping"===b?l+"-R":l+"-L";y.unbind("__ready");t=!0;g("ready msg accepted.");for("ping"===b&&y.notify({method:"__ready",params:"pong"});u.length;)F(u.pop());
if("function"===typeof e.onReady)e.onReady(y)});setTimeout(function(){F({method:E("__ready"),params:"ping"},!0)},0);return y}}}();"undefined"!==typeof module&&(module.exports=Channel);angular.module("genius").value("Channel",window.Channel);
angular.module("genius").factory("ChartClient",["ApiClient",function(a){return{get:function(b,c){void 0===c&&(c={});return a.get("/:model/chart",_.assign({model:b},c))},state:function(b,c){return a.get("/:model/:id/charts/state",{model:b,id:c})},exclude:function(b,c){return a.put("/:model/:id/charts/exclude",{model:b,id:c})},unexclude:function(b,c){return a.put("/:model/:id/charts/unexclude",{model:b,id:c})}}}]);
(function(){function a(){for(var c=[],d=0;d<arguments.length;d++){var f=arguments[d];if(f){var e=typeof f;if("string"===e||"number"===e)c.push(f);else if(Array.isArray(f))c.push(a.apply(null,f));else if("object"===e)for(var h in f)b.call(f,h)&&f[h]&&c.push(h)}}return c.join(" ")}var b={}.hasOwnProperty;"undefined"!==typeof module&&module.exports?module.exports=a:"function"===typeof define&&"object"===typeof define.amd&&define.amd?define("classnames",[],function(){return a}):window.classNames=a})();
angular.module("genius").factory("classnames",["$window",function(a){return a.classNames}]);
(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Clipboard=a()})(function(){return function b(c,d,f){function e(g,m){if(!d[g]){if(!c[g]){var l="function"==typeof require&&require;if(!m&&l)return l(g,!0);if(h)return h(g,!0);l=Error("Cannot find module '"+g+"'");throw l.code="MODULE_NOT_FOUND",l;}l=d[g]=
{exports:{}};c[g][0].call(l.exports,function(b){var d=c[g][1][b];return e(d?d:b)},l,l.exports,b,c,d,f)}return d[g].exports}for(var h="function"==typeof require&&require,g=0;g<f.length;g++)e(f[g]);return e}({1:[function(b,c,d){"undefined"===typeof Element||Element.prototype.matches||(b=Element.prototype,b.matches=b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector);c.exports=function(b,c){for(;b&&9!==b.nodeType;){if("function"===typeof b.matches&&
b.matches(c))return b;b=b.parentNode}}},{}],2:[function(b,c,d){function f(b,c,d,f){return function(d){d.delegateTarget=e(d.target,c);d.delegateTarget&&f.call(b,d)}}var e=b("./closest");c.exports=function(b,c,d,e,l){var n=f.apply(this,arguments);b.addEventListener(d,n,l);return{destroy:function(){b.removeEventListener(d,n,l)}}}},{"./closest":1}],3:[function(b,c,d){d.node=function(b){return void 0!==b&&b instanceof HTMLElement&&1===b.nodeType};d.nodeList=function(b){var c=Object.prototype.toString.call(b);
return void 0!==b&&("[object NodeList]"===c||"[object HTMLCollection]"===c)&&"length"in b&&(0===b.length||d.node(b[0]))};d.string=function(b){return"string"===typeof b||b instanceof String};d.fn=function(b){return"[object Function]"===Object.prototype.toString.call(b)}},{}],4:[function(b,c,d){function f(b,c,d){b.addEventListener(c,d);return{destroy:function(){b.removeEventListener(c,d)}}}function e(b,c,d){Array.prototype.forEach.call(b,function(b){b.addEventListener(c,d)});return{destroy:function(){Array.prototype.forEach.call(b,
function(b){b.removeEventListener(c,d)})}}}var h=b("./is"),g=b("delegate");c.exports=function(b,c,d){if(!b&&!c&&!d)throw Error("Missing required arguments");if(!h.string(c))throw new TypeError("Second argument must be a String");if(!h.fn(d))throw new TypeError("Third argument must be a Function");if(h.node(b))return f(b,c,d);if(h.nodeList(b))return e(b,c,d);if(h.string(b))return g(document.body,b,c,d);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");
}},{"./is":3,delegate:2}],5:[function(b,c,d){c.exports=function(b){if("SELECT"===b.nodeName)b.focus(),b=b.value;else if("INPUT"===b.nodeName||"TEXTAREA"===b.nodeName){var c=b.hasAttribute("readonly");c||b.setAttribute("readonly","");b.select();b.setSelectionRange(0,b.value.length);c||b.removeAttribute("readonly");b=b.value}else{b.hasAttribute("contenteditable")&&b.focus();var c=window.getSelection(),d=document.createRange();d.selectNodeContents(b);c.removeAllRanges();c.addRange(d);b=c.toString()}return b}},
{}],6:[function(b,c,d){function f(){}f.prototype={on:function(b,c,d){var f=this.e||(this.e={});(f[b]||(f[b]=[])).push({fn:c,ctx:d});return this},once:function(b,c,d){function f(){m.off(b,f);c.apply(d,arguments)}var m=this;f._=c;return this.on(b,f,d)},emit:function(b){var c=[].slice.call(arguments,1),d=((this.e||(this.e={}))[b]||[]).slice(),f=0,m=d.length;for(f;f<m;f++)d[f].fn.apply(d[f].ctx,c);return this},off:function(b,c){var d=this.e||(this.e={}),f=d[b],m=[];if(f&&c)for(var l=0,n=f.length;l<n;l++)f[l].fn!==
c&&f[l].fn._!==c&&m.push(f[l]);m.length?d[b]=m:delete d[b];return this}};c.exports=f},{}],7:[function(b,c,d){(function(f,e){if("undefined"!==typeof d)e(c,b("select"));else{var h={exports:{}};e(h,f.select);f.clipboardAction=h.exports}})(this,function(b,c){var d=c&&c.__esModule?c:{default:c},g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},k=function(){function b(c,
d){for(var e=0;e<d.length;e++){var f=d[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,d,e){d&&b(c.prototype,d);e&&b(c,e);return c}}(),m=function(){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.resolveOptions(c);this.initSelection()}k(b,[{key:"resolveOptions",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=b.action;this.container=
b.container;this.emitter=b.emitter;this.target=b.target;this.text=b.text;this.trigger=b.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var b=this,c="rtl"==document.documentElement.getAttribute("dir");this.removeFake();this.fakeHandlerCallback=function(){return b.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");
this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[c?"right":"left"]="-9999px";this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=(0,d.default)(this.fakeElem);this.copyText()}},{key:"removeFake",
value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandlerCallback=this.fakeHandler=null);this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,d.default)(this.target);this.copyText()}},{key:"copyText",value:function(){var b=void 0;try{b=document.execCommand(this.action)}catch(c){b=!1}this.handleResult(b)}},{key:"handleResult",value:function(b){this.emitter.emit(b?
"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){this._action=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if("copy"!==this._action&&"cut"!==this._action)throw Error('Invalid "action" value, use either "copy" or "cut"');
},get:function(){return this._action}},{key:"target",set:function(b){if(void 0!==b)if(b&&"object"===("undefined"===typeof b?"undefined":g(b))&&1===b.nodeType){if("copy"===this.action&&b.hasAttribute("disabled"))throw Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(b.hasAttribute("readonly")||b.hasAttribute("disabled")))throw Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');
this._target=b}else throw Error('Invalid "target" value, use a valid Element');},get:function(){return this._target}}]);return b}();b.exports=m})},{select:5}],8:[function(b,c,d){(function(f,e){if("undefined"!==typeof d)e(c,b("./clipboard-action"),b("tiny-emitter"),b("good-listener"));else{var h={exports:{}};e(h,f.clipboardAction,f.tinyEmitter,f.goodListener);f.clipboard=h.exports}})(this,function(b,c,d,g){function k(b){return b&&b.__esModule?b:{default:b}}function m(b,c){if("function"!==typeof c&&
null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}function l(b,c){var d="data-clipboard-"+b;if(c.hasAttribute(d))return c.getAttribute(d)}var n=k(c);c=k(d);var r=k(g),q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&
"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},t=function(){function b(c,d){for(var e=0;e<d.length;e++){var f=d[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,d,e){d&&b(c.prototype,d);e&&b(c,e);return c}}();g=function(b){function c(b,d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var e;e=(c.__proto__||Object.getPrototypeOf(c)).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.resolveOptions(d);e.listenClick(b);return e}m(c,b);t(c,[{key:"resolveOptions",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof b.action?b.action:this.defaultAction;this.target="function"===typeof b.target?b.target:this.defaultTarget;this.text="function"===typeof b.text?b.text:this.defaultText;
this.container="object"===q(b.container)?b.container:document.body}},{key:"listenClick",value:function(b){var c=this;this.listener=(0,r.default)(b,"click",function(b){return c.onClick(b)})}},{key:"onClick",value:function(b){b=b.delegateTarget||b.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new n.default({action:this.action(b),target:this.target(b),text:this.text(b),container:this.container,trigger:b,emitter:this})}},{key:"defaultAction",value:function(b){return l("action",
b)}},{key:"defaultTarget",value:function(b){if(b=l("target",b))return document.querySelector(b)}},{key:"defaultText",value:function(b){return l("text",b)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],c=!!document.queryCommandSupported;("string"===typeof b?[b]:b).forEach(function(b){c=c&&!!document.queryCommandSupported(b)});
return c}}]);return c}(c.default);b.exports=g})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});angular.module("genius").factory("Clipboard",["$window",function(a){return a.Clipboard}]);
angular.module("genius").factory("CommentClient",["$http","$q","AppConfig","Markdown","signed_out_created_content",function(a,b,c,d,f){return{load:function(b,d,f){return a.get(c.api_root_url+"/"+b+"/"+d+"/comments",{params:f}).then(function(a){return a.data.response})},destroy:function(b){return a.delete(c.api_root_url+"/comments/"+b)},create:function(e,h,g){g._deleted=!1;var k=_.assign({},g,{body:g.body.markdown,reason:g.reason?g.reason.raw_name:void 0});g.body.html=d.to_html(k.body);return a.post(c.api_root_url+
"/"+e+"/"+h+"/comments?text_format=html",{comment:k}).then(function(a){_.assign(g,a.data.response.comment);f.add("comments",g.id);g.anonymous_author&&(g.anonymous_author.email=g.email);return g}).catch(function(){g._deleted=!0;return b.reject()})},change_state:function(b,d){return a.put(c.api_root_url+"/comments/"+b+"/change_state",{state_event:d})}}}]);
angular.module("genius").factory("ContributionOpportunityAssignmentClient",["ApiClient",function(a){return{update:function(b,c){return a.put("/contribution_opportunity_assignments/:id",{id:b,contribution_opportunity_assignment:c})}}}]);
angular.module("genius").factory("ConversationClient",["ApiClient",function(a){var b=a.set_param("text_format","html");return{latest:function(a){void 0===a&&(a={});return b.returning("conversations").get("/conversations",{page:a.page||1})},get:function(a){return b.returning("conversation").get("/conversations/:conversation_id",{conversation_id:a})},mark_read:function(a){return b.returning("conversation").post("/conversations/:conversation_id/mark_read",{conversation_id:a})},with_user:function(a){return b.returning("conversation").put("/conversations/with_user",
{user_id:a})}}}]);angular.module("genius").factory("Cookies",[function(){return{get:function(a){return $.cookie(a)},getObject:function(a){if(a=$.cookie(a))return JSON.parse(a)},getAll:function(){return $.cookie()},put:function(a,b,c){return $.cookie(a,b,c)},putObject:function(a,b,c){return $.cookie(a,JSON.stringify(b),c)},remove:function(a,b){return $.removeCookie(a,b)}}}]);
angular.module("genius").factory("CoverArtClient",["ApiClient","Session",function(a,b){return{index:function(c,d){var f={text_format:b.user_signed_in?"html,markdown":"html"};f[c+"_id"]=d;return a.returning("cover_arts").get("/cover_arts",f)},create:function(b,d,f){f={cover_art:f};f[b+"_id"]=d;return a.post("/cover_arts",f)},update:function(b,d){return a.put("/cover_arts/"+b,{cover_art:d})},destroy:function(b){return a.delete("/cover_arts/"+b)},move_between:function(b,d){return a.put("/cover_arts/"+
b+"/move_between",d)}}}]);
angular.module("genius").factory("CursoredDataFeed",[function(){return function(){return function(a,b,c,d,f){void 0===c&&(c={});void 0===d&&(d=void 0);void 0===f&&(f="next_cursor");var e=this;this.cursor_name=f;this.next_cursor=d;this.params=_.clone(c);this.next=function(){var c={};c[e.cursor_name]=e.next_cursor;return a(_.assign(c,e.params)).then(function(a){e.next_cursor=a[e.cursor_name];return a[b]})};this.has_next=function(){return e.next_cursor||"undefined"===typeof e.next_cursor};this.reset=
function(){e.next_cursor=d}}}()}]);angular.module("genius").factory("CustomAppNotificationClient",["$http",function(a){return{send_preview_notification:function(b){return a.post("/custom_app_notifications",{custom_app_notification:_.assign(b,{preview:!0})})}}}]);
angular.module("genius").factory("CustomPerformanceRoleClient",["$http","AppConfig",function(a,b){return{autocomplete_api_endpoint:b.api_root_url+"/custom_performance_roles/autocomplete",autocomplete:function(b){return a.get(this.autocomplete_api_endpoint,{params:{q:b}}).then(function(a){return a.data.response})},autocomplete_options:{minChars:2,parse:function(a){return _.map(a.response.custom_performance_roles,function(a){a=a.label;return{data:[a],value:a,result:a}})}}}}]);
angular.module("genius").factory("DateTools",[function(){return{days_to_ms:function(a){var b=new Date;b.setTime(b.getTime()+864E5*a);return b}}}]);angular.module("genius").factory("DiscussionClient",["ApiClient",function(a){return{forum_posts:function(b,c){void 0===c&&(c={});return a.get("/discussions/"+b+"/forum_posts",_.defaults(c,{text_format:"html"}))}}}]);
angular.module("genius").factory("EagerLoader",function(){var a=function(){this.data={};this.listeners={}};a.prototype={loaded:function(a,c){this.listeners[a]?this.listeners[a].forEach(function(a){a(c)}):this.data[a]=c},listen_for:function(a,c){this.listeners[a]=this.listeners[a]||[];this.listeners[a].push(c);this.data[a]&&(c(this.data[a]),delete this.data[a])}};return a});
angular.module("genius").factory("EventEmitter",["$rootScope",function(a){return function(){this.proxy_emitter=a.$new();this.emit=function(a,c){this.proxy_emitter.$emit(a,c)};this.on=function(a,c){this.proxy_emitter.$on(a,function(a,b){a.stopPropagation();a.preventDefault();c(b)});return this}}}]);
angular.module("genius").factory("Facebook",["AppConfig","$window","$q","getScript",function(a,b,c,d){var f=_.once(function(){var e=c.defer();b.fbAsyncInit=function(){b.FB.init({appId:a.facebook_app_id,version:"v"+a.facebook_opengraph_api_version});e.resolve(b.FB)};d("//connect.facebook.net/en_US/sdk.js",{cache:!0});return e.promise});$(f);return{share:function(a){f().then(function(b){b.ui({method:"share",href:a})})},process_embeds:function(a){f().then(function(b){b.XFBML.parse(a)})}}}]);
angular.module("genius").factory("FeedbackClient",["ApiClient",function(a){return{post_feedback:function(b){return a.post("/feedback",{feedback:{body:b}})}}}]);
angular.module("genius").factory("Filepicker",["$window","AppConfig","$q",function(a,b,c){var d=a.filepicker;d.setKey(b.filepicker_api_key);var f=["image/jpeg","image/png","image/gif"],e={policy:b.filepicker_policy,signature:b.filepicker_signature},h=["IMAGE_SEARCH","COMPUTER","URL"];return function(){function a(b){void 0===b&&(b={});this.allowed_mime_types=b.allowed_mime_types||f;this.services=b.services||h;this.open_to=b.open_to||"IMAGE_SEARCH"}a.prototype.allows_mime_type=function(a){return this.allowed_mime_types.includes((a||
"").toLowerCase())};a.prototype._store=function(a,b){var f=this,g=angular.extend(angular.copy(e),b);g.container=a.container;var h=c.defer();d.store(a,g,function(a){return h.resolve(f._construct_s3_url(a.key))},function(a){return h.reject(a)},function(a){return h.notify(a)});return h.promise};a.prototype._read_blob=function(a){var b=c.defer(),d=new FileReader;d.onloadend=function(){return b.resolve(d.result)};d.readAsBinaryString(a);return b.promise};a.prototype._construct_s3_url=function(a){return"https://s3.amazonaws.com/"+
b.filepicker_s3_image_bucket+"/"+encodeURIComponent(a)};a.prototype.store=function(a,b){var c=this;return a instanceof Blob?this._read_blob(a).then(function(a){return c._store(btoa(a),angular.extend(b,{base64decode:!0}))}):this._store(a,b)};a.prototype.pick=function(a){var b=c.defer();a=angular.extend(angular.copy(e),{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},a);d.pick(a,function(a){d.stat(a.url,angular.extend(angular.copy(e),{width:!0,height:!0}),function(c){return b.resolve({blob:a,
dimensions:c})})});return b.promise};a.prototype.pick_and_store=function(a,b){var f=this;void 0===b&&(b={});var g=c.defer(),h=angular.extend(e,{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},a);d.pickAndStore(h,b,function(a){return g.resolve(f._construct_s3_url(a[0].key))},function(a){return g.reject(a)});return g.promise};return a}()}]);angular.module("genius").factory("FingerprintJS",["$window",function(a){return a.FingerprintJS}]);
angular.module("genius").factory("FollowClient",["AppConfig","$http",function(a,b){return{set_following:function(c,d,f){return b.post(a.api_root_url+"/"+c+"s/"+d+"/"+(f?"follow":"unfollow")).then(function(a){return a.data.response})}}}]);angular.module("genius").factory("getScript",["$q",function(a){return function(b,c){return a.when($.ajax(_.assign({url:b,type:"GET",dataType:"script"},c)))}}]);angular.module("genius").factory("GlobalErrorBus",["$rootScope",function(a){return a.$new("isolate")}]);
angular.module("genius").factory("GlobalErrorInterceptor",["GlobalErrorBus","$q",function(a,b){return{responseError:function(c){if(429===c.status){var d=_.get(c,"data.response.message.html")||"<h1>You hit a rate limit!</h1>";a.$emit("global_error",d)}return b.reject(c)}}}]);angular.module("genius").factory("GlobalPageStateBus",["$rootScope",function(a){return a.$new("isolate")}]);
angular.module("genius").factory("GlobalRefs",["$window",function(a){var b={global_message:".global_messages",cloudflare_unavailable_alert:"#cf_alert_div"};return{get_element:function(c){return a.$(b[c])}}}]);angular.module("genius").factory("Google",["getScript","$window",function(a,b){return{setup:_.once(function(){return a("https://apis.google.com/js/platform.js",{cache:!0})}),refresh_youtube_subscribe_in:function(a){b.gapi.ytsubscribe.go(a)}}}]);
angular.module("genius").factory("HtmlConstants",["$window",function(a){a={top_level_block_containers:a.TOP_LEVEL_BLOCK_CONTAINERS,top_level_stand_alone_blocks:a.TOP_LEVEL_STANDALONE_BLOCKS};a.top_level_block_containers_regexp=new RegExp("</("+a.top_level_block_containers.join("|")+")>\\s*","gi");a.top_level_stand_alone_blocks_regexp=new RegExp("</("+a.top_level_stand_alone_blocks.join("|")+")>\\s*","gi");return a}]);angular.module("genius").factory("I18n",["$window",function(a){return a.I18n}]);
angular.module("genius").factory("IdentityClient",["$http","ApiClient","AppConfig","$q",function(a,b,c,d){return{destroy:function(b){return a.delete(c.api_root_url+"/identities/"+b,{},{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response}).catch(function(a){var b=Error(a.data.meta.message);_.assign(b,_.pick(a,"status","statusText"));return d.reject(_.assign(b,a.data.response))})},spotify_credentials:function(){return b.returning("credentials").get("/identities/spotify_credentials")}}}]);
angular.module("genius").factory("ImageTransform",["AppConfig","initial_image_urls",function(a,b){var c=new RegExp("^"+a.sizies_base_url),d=["images.genius.com","images.rapgenius.com"],f=/\.(\d+).(\d+).\d+\.\w*$/,e=_(b).toArray().filter(function(a){return c.test(a)}).map(function(a){var b=_.takeRight(a.split("/"),2),c=b[1],d=b[0].split("x").map(function(a){return Number(a)}),b=d[0],d=d[1];return{src:decodeURIComponent(c),width:b,height:d,url:a}}).sortBy(function(a){return a.width*a.height}).value(),
h=_.memoize(function(a){var b=g(a.original_url);b&&a.width&&!a.height&&(a.height=Math.round(a.width/b));b&&a.height&&!a.width&&(a.width=Math.round(a.height*b));var c=a.width/a.height;return _.find(e,function(b){var d=b.width,e=b.height;return b.src===a.original_url&&d>=a.width&&e>=a.height&&.05>Math.abs(d/e-c)})}),g=function(a){a=a.match(f)||[];var b=a[1],c=a[2];if(a[0])return Number(b)/Number(c)};return{resize:function(c,f){if(c){if(b.has(c))return c;var g=new URL(c);if(!_.includes(d,g.host))return c;
var g=parseInt(f.width||0),n=parseInt(f.height||0),r=h({original_url:c,width:g,height:n});if(r)return r.url;r=a.sizies_base_url+"/"+g+"x"+n+"/"+encodeURIComponent(c);e.push({src:c,width:g,height:n,url:r});return r}}}}]);
angular.module("genius").factory("InboxClient",["Session","Pusher","ApiClient",function(a,b,c){return{get_line_item:function(b,f){return c.get(b?"/inboxes/"+b+"/line_items/"+f:"/line_items/"+f,{text_format:a.user_signed_in?"html,markdown":"html"}).then(function(a){return a.line_item})},line_items:function(a,b){return c.get("/inboxes/:inbox_name/line_items",{text_format:"html",timestamp_for_next_page:b,inbox_name:a}).then(function(a){a.line_items.timestamp_for_next_page=a.timestamp_for_next_page;return a.line_items})},
mark_read:function(a,b){var e;if(b){e={};for(var h=0;h<b.length;h++)e[h+1]=b[h]}return c.post("/inboxes/:inbox_name/line_items/mark_read",{event_ids:e,inbox_name:a})},on_update:function(c,f){b.subscribe(a.current_user.pusher_channel,"new-"+c.replace(/_/g,"-")+"-event",f);b.subscribe(a.current_user.pusher_channel,"inbox-marked-read",function(a){a.inbox===c&&f()})}}}]);
angular.module("genius").factory("IntersectionObserver",[function(){function a(a,c){var d=c.shim,d=void 0===d?{}:d;this.observe=d.observe||_.noop;this.unobserve=d.unobserve||_.noop;this.disconnect=d.disconnect||_.noop}return"undefined"!==typeof window&&"IntersectionObserver"in window?window.IntersectionObserver:a}]);
angular.module("genius").factory("Iq",["PreloadCache","Session",function(a,b){var c=a.iq_by_event_type;return{for:function(a){var f=b.current_user.virtual_iq_event_type_map;f&&_.has(f,a)&&(a=f[a]);return _.has(c,a)?c[a]:0}}}]);angular.module("genius").factory("LeaderboardClient",["ApiClient",function(a){return{global:function(b){return a.get("/leaderboard",b)},for_tag:function(b,c){return a.get("/tags/:tag_id/leaderboard",_.assign({tag_id:b.id},c))}}}]);
angular.module("genius").factory("Librato",["$http","$q","AnalyticsConfig","SessionConfig",function(a,b,c,d){return{set_page_type:function(a){this.page_type=a},measure:function(f,e,h){(void 0===h?{log:!0}:h).log&&_.get(d,"log_client_metrics")&&console.log("LIBRATO METRIC: "+f+" = "+e);return _.get(c,"enabled")?a.post("https://"+c.librato_web_client_host+"/v1/metrics",{gauges:[{name:f,value:e,source:this.page_type+"_page"}]}):b.when()}}}]);
angular.module("genius").factory("LibratoBeacon",["$window","$document",function(a,b){var c=[],d="undefined"!==typeof a,f=_.debounce(function(){var a=_.mergeWith.apply(_,c.splice(0).concat([function(a,b){return(a||[]).concat(b)}]));navigator.sendBeacon?navigator.sendBeacon("https://librato-collector.genius.com/v1/metrics",new Blob([JSON.stringify(a)],{type:"application/json"})):fetch("https://librato-collector.genius.com/v1/metrics",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})},
2E3,{leading:!1,trailing:!0});d&&b[0].addEventListener("visibilitychange",function(){"hidden"===b[0].visibilityState&&f.flush()});return{measure:function(a,b,d){c.push({gauges:[{name:a,value:b,source:d.source}]});f()},count:function(a,b){c.push({counters:[{name:a,value:1,source:b.source}]});f()}}}]);
angular.module("genius").factory("LinkEvents",function(){return{should_open_in_new_window_or_tab:function(a,b){b=b||$(a.target).closest("a")[0];var c;(c=2===a.which||a.metaKey||a.ctrlKey||a.shiftKey||"_blank"===b.target)||(c=document.getElementsByTagName("base"),c=0<c.length&&"_parent"===c[0].target&&!b.target);return c}}});
angular.module("genius").factory("LocalStorage",["$window",function(a){return{is_available:function(){try{return a.localStorage.setItem("__storage_test__","__storage_test__"),a.localStorage.removeItem("__storage_test__"),!0}catch(b){return!1}},set_item:function(b,c){a.localStorage.setItem(b,JSON.stringify(c))},get_item:function(b){return JSON.parse(a.localStorage.getItem(b))},remove_item:a.localStorage.removeItem.bind(a.localStorage),safe_set_item:function(a,c){this.is_available()&&this.set_item(a,
c)},safe_get_item:function(a,c){return this.is_available()?this.get_item(a):c},safe_remove_item:function(a){this.is_available()&&this.remove_item(a)}}}]);angular.module("genius").factory("LookupClient",["$http","AppConfig",function(a,b){return{lookup:function(c){return a.get(b.api_root_url+"/lookup",{params:{url:c}}).then(function(a){return _(a.data.response).values().first()})}}}]);
angular.module("genius").factory("Lyrics",["mobile_device",function(a){var b=a?"75vh":"50vh",c=(a?["mobile_song_medium1","mobile_song_medium2","mobile_song_medium3"]:["desktop_song_inread","desktop_song_inread2","desktop_song_inread3"]).map(function(a){return'\n    <defer-compile\n      class="u-display_block"\n      timing-label="deferred-inread-ad-loaded-'+a+'"\n      within-visibility-range="'+b+'">\n      '+('\n    <span avoid-selection class="u-noselect">\n      <dfp-ad\n        name="'+a+'"\n        class="u-display_block"\n        ad-classes="{\'dfp_unit--in_read\': $height > 1, \'u-xx_large_top_margin\': $height > 0}"\n      ></dfp-ad>\n    </span>\n  ')+
"\n    </defer-compile>\n  "}),d=function(a,b,c,d){void 0===c&&(c=25);void 0===d&&(d="");var k=$("<div>").html(a.replace(/\s*\n/g,"")),m=k.find("br");b.forEach(function(a){m=_.drop(m,c);m=_.dropWhile(m,function(a){return"br"!==_.get(a,"previousSibling.nodeName","").toLowerCase()});var b=$(a),e=m.shift();e?$(e).before(b):d===a&&k.append(b)});return k.html()};return{prepare_for_display:function(a){return d(a,c,25).replace(/}}/g,"}\x3c!-- literal brace --\x3e}")}}}]);
angular.module("genius").factory("LyricsAnchorer",["$compile","ReferentLocator","ReferentRegistry","ReferentClient",function(a,b,c,d){return function(){function f(a){this.container=a.container;this.get_state=a.get_state;this.scope=a.scope;this.song=a.song}f.prototype.construct_referent=function(b,f,g){var k=this;void 0===f&&(f={});return d.create_referent({song:_.pick(this.song,["id","updated_by_human_at"]),referent:g,community:!!f.community}).then(function(d){_.assign(d.annotations[0],{new:!0,_editing:{_form_visible:!0}});
c.preload_insert(d);var f;f=d.id;f=$("<a>").attr("href","#").attr("class","referent").attr("ng-click","open()").attr("prevent-default-click","").attr("data-id","new").attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)").attr("annotation-fragment","'"+f+"'").attr("classification","new");f.html(b.extractContents());b.insertNode(f[0]);a(f)(k.scope);c.register(d);return d})};f.prototype.create_referent=function(a,b){return this.construct_referent(a,b,this.calculate_referent_location(a))};
f.prototype.create_image_referent=function(a,b,c){var d=a.src;return this.construct_referent(b,c,{image_url:d,occurrence:this.get_occurrence_in_container_among('img[src="'+d+'"]',a)})};f.prototype.calculate_referent_location=function(a){return b.calculate_referent_location(a,this.container[0])};f.prototype.get_occurrence_in_container_among=function(a,b){return this.container.find(a).index(b)+1};return f}()}]);
angular.module("genius").factory("LyricsEditProposal",["LyricsEditing","diff_match_patch","patch_structured_text","AppConfig",function(a,b,c,d){var f=new b;f.Match_Threshold=d.dmp_match_threshold;f.Patch_DeleteThreshold=d.dmp_match_threshold;return{diff:function(a,b){return f.diff_main(a,b)},apply_patches:function(a,b,d){a="plain_text"===(void 0===d?{}:d).edit_format?c(a,b,{dmp:f}):f.patch_apply(a,b);return{patched:a[0],success:a[1]}},make_patches:_.memoize(function(a){return f.patch_make(a)}),pretty_diff:_.memoize(function(a){a=
_.cloneDeep(a);f.diff_cleanupSemantic(a);return f.diff_prettyHtml(a).replace(/&para;/gm,"")}),lyrics_diffs_for_line_item_detail:function(b){var c=this;return"user_edited_the_lyrics_of_song"===b.strategy?_.map(b.metadata,function(b){return{before:a.prepare_lyrics_for_editing(b.before).markdown,after:a.prepare_lyrics_for_editing(b.after).markdown}}):"lyrics_edit"===b.targets[0]._type?_.map(b.targets,function(d){var f,m;switch(b.strategy){case "user_created_lyrics_edit":m=d.state;switch(d.state){case "pending":f=
d.current_lyrics_html;break;case "accepted":f=d.lyrics_before_accepted.html;break;case "rejected":case "inapplicable":f=d.lyrics_when_proposed.html}f=a.prepare_lyrics_for_editing(f).markdown;break;case "user_accepted_lyrics_edit":f=d.lyrics_before_accepted.plain;break;case "user_rejected_lyrics_edit":case "user_archived_lyrics_edit":f=d.lyrics_when_proposed.plain}var l=f,n=c.make_patches(d.diff);d=c.apply_patches(n,f,{edit_format:d.edit_format}).patched;l={before:l,after:d};m&&_.merge(l,{state:m});
return l}):null}}}]);
angular.module("genius").factory("LyricsEditProposalClient",["ApiClient",function(a){return{lyrics_for_edit_proposal:function(b){b=b.song_id;return a.transform(_.property("lyrics_for_edit_proposal")).get("/songs/:song_id/lyrics_for_edit_proposal",{song_id:b})},pending:function(b){b=b.song_id;return a.transform(_.property("lyrics_edits")).get("/songs/:song_id/lyrics_edits",{song_id:b})},create:function(b){var c=b.song_id,d=b.version;b=b.edited_lyrics;return a.transform(_.property("lyrics_edit")).post("/songs/:song_id/lyrics_edits",{song_id:c,
lyrics_edit:{edited_lyrics:b,before_version_number:d,edit_format:"plain_text"}})},reject:function(b){return a.post("/lyrics_edits/:id/reject",{id:b})}}}]);
(function(a){function b(a){var b=e.call(arguments,1);return function(){return a.apply(this,b.concat(e.call(arguments)))}}function c(a,b){return this.filter(":"+a+(b?"("+b+")":""))}function d(a,b,c,d){return(c=d[3]||m()[(b.nodeName||"").toLowerCase()]||"")?!!a(b.getAttribute(c)):!1}"$:nomunge";var f=window.location,e=Array.prototype.slice,h=f.href.match(/^((https?:\/\/.*?\/)?[^#]*)#?.*$/),g=h[1]+"#",k=h[2],m,l,n,r,q,t={};a.isUrlInternal=n=function(a){return!a||r(a)?void 0:q.test(a)?!0:/^(?:https?:)?\/\//i.test(a)?
!1:/^[a-z\d.-]+:/i.test(a)?void 0:!0};a.isUrlExternal=h=function(a){a=n(a);return"boolean"===typeof a?!a:a};a.isUrlFragment=r=function(b){var c=(b||"").match(/^([^#]?)([^#]*#).*$/);return!!c&&("#"===c[2]||0===b.indexOf(g)||("/"===c[1]?k+c[2]===g:!/^https?:\/\//i.test(b)&&0===a('<a href="'+b+'"/>')[0].href.indexOf(g)))};a.fn.urlInternal=b(c,"urlInternal");a.fn.urlExternal=b(c,"urlExternal");a.fn.urlFragment=b(c,"urlFragment");a.expr[":"].urlInternal=b(d,n);a.expr[":"].urlExternal=b(d,h);a.expr[":"].urlFragment=
b(d,r);a.elemUrlAttr||(a.elemUrlAttr=function(b){return a.extend(t,b)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"});m=a.elemUrlAttr;a.urlInternalHost=h=function(a){a=a?"(?:(?:"+Array.prototype.join.call(arguments,"|")+")\\.)?":"";var b=f.hostname.split(".");b.length>CANONICAL_DOMAIN_PARTS_LENGTH&&b.shift();var b=b.join("."),c=new RegExp("^"+a+"(.*)","i"),b="^(?:https?:)?//(?:(?:"+VALID_SUBDOMAINS.join("|")+").)?"+b.replace(c,a+"$1").replace(/\\?\./g,
"\\.")+(f.port?":"+f.port:"")+"/";return l(b)};a.urlInternalRegExp=l=function(a){a&&(q="string"===typeof a?new RegExp(a,"i"):a);return q};h("www")})(jQuery);
angular.module("genius").factory("LyricsEditing",["AppConfig","HtmlConstants","MarkdownHelpers","MarkdownPlaintextFinderRegex","ReferentRegistry","string_has_unmatched_parentheses","I18n",function(a,b,c,d,f,e,h){var g="p br b strong em i a".split(" "),k={lyrics_html_without_referent:function(a,b){var c=$("<div>").append($(a));c.find("[data-id='"+b+"']").each(function(a,b){var c=$(b),d=c.find("img")[0]||c.text();c.replaceWith(d)});return c.html()},prepare_lyrics_for_editing:function(a){return this.lyrics_html_to_pseudo_markdown__deprecated(this.clean_up_lyrics__deprecated(a))},
convert_editable_for_saving:function(a){return this.clean_up_lyrics__deprecated(this.lyrics_pseudo_markdown_to_html__deprecated(a.markdown,a.attr_hash))},prepare_lyrics_with_correction:function(a,b){if(b.referent.id){var c=$(a);$(c.find("[data-id='"+b.referent.id+"']")[b.referent.occurrence-1]).html(b.replacement.html);return this.prepare_lyrics_for_editing(c[0].outerHTML)}var e=-1,f=b.referent.occurrence_in_markdown,c=this.prepare_lyrics_for_editing(a),g=d(b.original.markdown);c.markdown=c.markdown.replace(g,
function(){++e;return e===f?b.replacement.markdown:b.original.markdown});return c},clean_up_lyrics__deprecated:function(a){return $.trim($("<div>").append(a).find("a").each(function(){var a=$(this);if(!a.attr("data-id")&&!a.data("real-link")&&!a.hasClass("referent"))throw a=Error("Error processing lyrics for editing: detected non-referent link ("+a[0].outerHTML+")"),a.human_readable_message="Your browser's copy of the lyrics is out of sync. Try reloading the page",a;a.html().match(/<br[\s\/]?>$/i)&&
(a.find("br:last").remove(),a.after("<br>"))}).end().find("#annotation_prompt").remove().end().html().replace(/<p( [^>]*)?>/gi,"").replace(/<\/p>\s*/gi,"\n\n").replace(b.top_level_block_containers_regexp,"$&\n\n").replace(b.top_level_stand_alone_blocks_regexp,"$&\n\n").replace(/\s*<br[\s\/]?>([ \t]*)\s*/gi,"\n$1"))},lyrics_html_to_pseudo_markdown__deprecated:function(a){var b={attr_hash:{}};a=$("<div>").append(a).find("a").each(function(){var a=$(this);a.find(".referent-vote_total").remove();var c=
a.attr("data-id");_.isUndefined(c)?a.data("real-link")?a.replaceWith("["+a.html()+"]("+a.attr("href")+")"):a.replaceWith(a.html()):(_.set(b.attr_hash,c,{"class":a.attr("class"),"data-editorial-state":a.attr("data-editorial-state")}),a.replaceWith("["+a.html()+"]("+c+")"))}).end().find("lyrics").removeAttr("ng-non-bindable").end();b.markdown=_.unescape(a.find("annotatable-image").each(function(){var a=$(this),b=a.attr("src");a.replaceWith($("<img>").attr("src",b))}).end().html());return b},markdown_has_block_level_markup:function(a){return Boolean($("<div>").append(a).find(["*"].concat(g.map(function(a){return":not("+
a+")"})).join("")).length)},html_has_block_level_markup:_.memoize(function(a){a=k.lyrics_html_to_pseudo_markdown__deprecated(a).markdown;return k.markdown_has_block_level_markup(a)}),lyrics_pseudo_markdown_to_html__deprecated:function(b,d){d||(d={});b=b.replace(/\n/gi,"<br>");var e=$("<div>").append(c.convert_markdown_anchors(b)).find("a").each(function(){var b=$(this);b.attr("href",$.trim(b.attr("href")));if(b.attr("href").match(/^\d+$/))b.attr("data-id",b.attr("href")).attr("href","/"+b.attr("data-id")).attr(_.get(d,
b.attr("data-id"),{}));else{var c=b.attr("href");void 0===c&&(c="");c=c.trim();"/"===c[0]||0===c.indexOf("http")||c.includes(a.canonical_domain)?b.attr("target",$.isUrlInternal(b.attr("href"))?"_self":"_blank").attr("data-real-link",!0):b.replaceWith("["+b.html()+"]("+b.attr("href")+")")}}).end().find("lyrics").attr("ng-non-bindable",!0).end().html();return c.unescape_special_characters_escaped_by_markdown_anchor_converter(e)},backfill_angular_link_properties:function(a){a=$("<div>").append(a).find("a[data-id]").each(function(){var a=
$(this),b=Number(a.attr("data-id")),c=f.peek(b);c&&(a.attr("annotation-fragment",b),a.attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)"),a.attr("ng-click","open()"),a.attr("prevent-default-click",""),a.attr("classification",c.classification),a.attr("image",c.is_image),a.attr("pending-editorial-actions-count",c.pending_editorial_actions_count))}).end();return $("<div>").append(a).html()},validate_pseudo_markdown_lyrics:function(a,b,c){c=c.is_music;var d=
void 0===c?!0:c;c=[];var f=$("<div>").append(b).text();e(f)&&c.push(h.t("lyrics.unmatched_parens_error"));d&&(a=this.html_has_block_level_markup(a),b=this.markdown_has_block_level_markup(b),a&&b?c.push(h.t("lyrics.didnt_remove_block_level_html_from_music_error")):!a&&b&&c.push(h.t("lyrics.added_block_level_html_to_music_error")));return c}};return k}]);
angular.module("genius").factory("LyricsSynchronizationClient",["$rootScope","$q","$http","AppConfig",function(a,b,c,d){var f=a.$new(),e=function(a){return _.isNumber(a)&&(a||0===a)},h=function(a,b){return _.compact([d.api_root_url,"lyrics_synchronizations",a,b]).join("/")},g=function(a){return new l(a.data.response.lyrics_synchronization)},k=function(a){var c=Error(a.data.meta.message);_.assign(c,_.pick(a,"status","statusText"));return b.reject(_.assign(c,a.data.response))},m=function(a){return function(){for(var b=
[],c=0;c<arguments.length;c++)b[c]=arguments[c];this._dirty=!0;return _.tap(Reflect.apply(a,this,b),function(){f.$emit("edit")})}},l=function(){function a(b){_.assign(this,b)}Object.defineProperty(a.prototype,"mark_dirty",{get:function(){return m(_.noop)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"apply_timestamp_to_line_at_index",{get:function(){return m(function(a,c){if(a<this.max_timestamp_before_index(c))throw Error("Can't set time to earlier than a previous line");this.lines[c].timestamp=
a;this.lines.slice(c).forEach(function(b){b.timestamp<a&&(b.timestamp=null)});return b.when(this.lines[c])})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"set_line_at_index_hidden",{get:function(){return m(function(a,b){_.assign(this.lines[a],{hidden:b,timestamp:null})})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"set_line_at_index_marked",{get:function(){return m(function(a,b){this.lines[a].fixed=!1;this.lines[a].marked=b})},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"set_line_at_index_fixed",{get:function(){return m(function(a){this.lines[a].marked=!1;this.lines[a].fixed=!0})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"add_line_at_index",{get:function(){return m(function(a,b){this.lines.splice(a,0,_.defaults(b||{},{added:!0,lyrics:"[Instrumental Break]",timestamp:null}))})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"remove_line_at_index",{get:function(){return m(function(a){this.lines.splice(a,
1)})},enumerable:!0,configurable:!0});a.prototype.max_timestamp_before_index=function(a){return _(this.lines.slice(0,a)).map("timestamp").max()||0};a.prototype.min_timestamp_after_index=function(a){return _(this.lines.slice(a+1)).map("timestamp").compact().min()||this.duration};a.prototype.timestamp_for_line_at_index=function(a){return-1===a?0:this.lines[a].timestamp};a.prototype.line_index_for_position=function(a){return _.findLastIndex(this.lines,function(b){return e(b.timestamp)&&b.timestamp<a})};
a.prototype.next_visible_line_index_after_index=function(a){return _.findIndex(this.lines,function(b,c){return c>a&&!b.hidden})};Object.defineProperty(a.prototype,"all_lines_timestamped",{get:function(){return _.every(this.lines,function(a){return a.hidden||e(a.timestamp)})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"all_timestamps_in_order",{get:function(){return _(this.lines).map("timestamp").compact().every(function(a,b,c){return 0===b||a>c[b-1]})},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"preview",{get:function(){return"preview"===this.state},enumerable:!0,configurable:!0});return a}();return{$on:f.$on.bind(f),get:function(a){return c.get(h(a)).then(g)},preview:function(a){return c.get(h("preview"),{params:a}).then(g).catch(k)},home:function(){return c.get(h("home")).then(function(a){a=a.data.response.lyrics_synchronization_home;a.checked_out=a.checked_out.map(function(a){return new l(a)});return a})},submit:function(a,d,e){return(d._dirty?this.save(d):
b.when(d)).then(function(b){return c.post(h(b.id,a),_.assign(e||{},_.pick(b,"lock_version"))).then(g,k)})},submit_sync:function(a,c){var d=c.sync_and_staff_approve;return _.some(a.lines,"marked")?b.reject(Error("Can't submit lyrics with lines still marked as incorrect")):this.submit("sync",a,{sync_and_staff_approve:d})},update_state:function(a,b){return c.put(h(b.id,"state"),{state:a}).then(g,k)},save:function(a){if(!a.all_timestamps_in_order)return b.reject(Error("Can't save lyrics with timestamps out of order"));
var d={lyrics_synchronization:a};return c.put(h(a.id),d).then(g,k)},revert_action:function(a,b){return c.post(h(b.id,"revert_action"),{action_id:a.id}).then(g,k)},skip:function(a,b){return c.post(h(b.id,"skip"),a).then(g,k)},change_song:function(a){return c.put(h(a.lyrics_synchronization_id,"song"),{song_id:a.song_id}).then(g,k)},start:function(a){return c.post(h("start"),{verb:a}).then(g,k)},set_finalized:function(a,b){return c[b?"put":"delete"](h(a)+"/finalized").then(g,k)}}}]);
angular.module("genius").factory("Markdown",["$window",function(a){var b=angular.element;return{to_html:function(c){if(!c)return c;var d=new a.Attacklab.showdown.converter;c=c.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(a){return"\n\n![]("+b.trim(a)+")"});c=d.makeHtml(c);return b("<div>").append(c).find("a").each(function(){var a=b(this);a.attr("href").match(/^\d+$/)&&a.attr("href","/"+a.attr("href"))}).end().html()}}}]);
angular.module("genius").factory("MarkdownHelpers",function(){var a=function(a,c,d,f,e,h,g,k){void 0===k&&(k="");a=f.toLowerCase();if(""===e)if(""===a&&d.toLowerCase().replace(/ ?\n/g," "),-1<c.search(/\(\s*\)$/m))e="";else return c;c='<a href="'+e+'"';""!==k&&(k=k.replace(/"/g,"&quot;"),c+=' title="'+k+'"');return c+(">"+d+"</a>")};return{unescape_special_characters_escaped_by_markdown_anchor_converter:function(a){return a.replace(/~E(\d+)E/,function(a,b){return String.fromCharCode(b)})},convert_markdown_anchors:function(b){return b.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
a)}}});angular.module("genius").factory("MarkdownPlaintextFinderRegex",[function(){return function(a){return new RegExp(a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gm")}}]);angular.module("genius").factory("MarkdownPreviewClient",["$http","AppConfig",function(a,b){return{create_preview:function(c){return a.post(b.api_root_url+"/markdown_preview",{markdown:c}).then(function(a){return a.data.response.html})}}}]);
angular.module("genius").factory("MentionClient",["$http","AppConfig",function(a,b){return{autocomplete:function(c){return a.get(b.api_root_url+"/mentions",{params:{q:c}}).then(function(a){return a.data.response.mentions})}}}]);
angular.module("genius").factory("MessageClient",["ApiClient",function(a){return{for_conversation:function(b,c){void 0===c&&(c={});return a.returning("messages").get("/conversations/:conversation_id/messages",{conversation_id:b,text_format:"html",page:c.page||1})},create:function(b){return a.returning("message").post("/messages",{message:b,text_format:"html"})}}}]);
angular.module("genius").factory("MetaTagData",["$document",function(a){var b={};return{get:function(c){if(_.has(b,c))return b[c];var d=a[0].head.querySelector("[itemprop="+c+"]");b[c]=d?JSON.parse(d.content):void 0;return b[c]}}}]);
angular.module("genius").factory("MixedDataFeed",["$q",function(a){return function(){return function(b){var c=this;this.scrollable_data_objects=b;this.reset=function(){_.each(c.scrollable_data_objects,function(a){a.src.reset()})};this.next=function(){return a.all(_.map(c.scrollable_data_objects,function(a){return a.src.next().then(function(b){return{type:a.type,models:b}})}))};this.has_next=function(){return _.some(c.scrollable_data_objects,function(a){return a.src.has_next()})}}}()}]);
angular.module("genius").factory("ModelRouter",function(){return{lookup:function(a){if(!_.isString(a))throw Error("URL must be a string");if(a=a.match(/^\/referents\/(\d+)$/))return{type:"referent",id:Number(a[1])}}}});
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.moment=b()})(this,function(){function a(){return Bc.apply(null,arguments)}function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function c(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function d(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function f(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function e(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);f(b,"toString")&&(a.toString=b.toString);f(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function h(a,b,c,d){return Tb(a,b,c,d,!0).utc()}function g(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1});return a._pf}function k(a){if(null==a._isValid){var b=g(a);a._isValid=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&
!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated;a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function m(a){var b=h(NaN);null!=a?e(g(b),a):g(b).userInvalidated=!0;return b}function l(a,b){var c,d,e;"undefined"!==typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject);"undefined"!==typeof b._i&&(a._i=b._i);"undefined"!==typeof b._f&&(a._f=b._f);"undefined"!==typeof b._l&&(a._l=b._l);"undefined"!==
typeof b._strict&&(a._strict=b._strict);"undefined"!==typeof b._tzm&&(a._tzm=b._tzm);"undefined"!==typeof b._isUTC&&(a._isUTC=b._isUTC);"undefined"!==typeof b._offset&&(a._offset=b._offset);"undefined"!==typeof b._pf&&(a._pf=g(b));"undefined"!==typeof b._locale&&(a._locale=b._locale);if(0<Ob.length)for(c in Ob)d=Ob[c],e=b[d],"undefined"!==typeof e&&(a[d]=e);return a}function n(b){l(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===rb&&(rb=!0,a.updateOffset(this),rb=!1)}function r(a){return a instanceof
n||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function t(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=q(a));return b}function u(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&t(a[g])!==t(b[g]))&&f++;return f+e}function w(){}function A(a){return a?a.toLowerCase().replace("_","-"):a}function x(a){var b=null;if(!xa[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=ib._abbr,require("./locale/"+
a),E(b)}catch(c){}return xa[a]}function E(a,b){var c;a&&(c="undefined"===typeof b?y(a):F(a,b))&&(ib=c);return ib._abbr}function F(a,b){if(null!==b)return b.abbr=a,xa[a]=xa[a]||new w,xa[a].set(b),E(a),xa[a];delete xa[a];return null}function y(a){var c;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return ib;if(!b(a)){if(c=x(a))return c;a=[a]}a:{c=0;for(var d,e,f,g;c<a.length;){g=A(a[c]).split("-");d=g.length;for(e=(e=A(a[c+1]))?e.split("-"):null;0<d;){if(f=x(g.slice(0,d).join("-"))){a=f;
break a}if(e&&e.length>=d&&u(g,e,!0)>=d-1)break;d--}c++}a=null}return a}function z(a,b){var c=a.toLowerCase();Ya[c]=Ya[c+"s"]=Ya[b]=a}function J(a){return"string"===typeof a?Ya[a]||Ya[a.toLowerCase()]:void 0}function H(a){var b={},c,d;for(d in a)f(a,d)&&(c=J(d))&&(b[c]=a[d]);return b}function T(b,c){return function(d){return null!=d?(this._d["set"+(this._isUTC?"UTC":"")+b](d),a.updateOffset(this,c),this):I(this,b)}}function I(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function Q(a,b){var c;if("object"===
typeof a)for(c in a)this.set(c,a[c]);else if(a=J(a),"function"===typeof this[a])return this[a](b);return this}function D(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function K(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(nb[a]=e);b&&(nb[b[0]]=function(){return D(e.apply(this,arguments),b[1],b[2])});c&&(nb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function aa(a){return a.match(/\[[\s\S]/)?
a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function p(a){var b=a.match(mb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=nb[b[c]]?nb[b[c]]:aa(b[c]);return function(e){var f="";for(c=0;c<d;c++)f+=b[c]instanceof Function?b[c].call(e,a):b[c];return f}}function Y(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ba(b,a.localeData());Ha[b]=Ha[b]||p(b);return Ha[b](a)}function ba(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Za.lastIndex=0;0<=d&&Za.test(a);)a=a.replace(Za,c),Za.lastIndex=
0,--d;return a}function N(a,b,c){v[a]="function"===typeof b&&"[object Function]"===Object.prototype.toString.call(b)?b:function(a){return a&&c?c:b}}function qa(a,b){return f(v,a)?v[a](b._strict,b._locale):new RegExp(Ja(a))}function Ja(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function fa(a,b){var c,d=b;"string"===typeof a&&(a=[a]);"number"===typeof b&&(d=function(a,c){c[b]=t(a)});for(c=
0;c<a.length;c++)Db[a[c]]=d}function ia(a,b){fa(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function B(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function ja(a,b){var c;if("string"===typeof b&&(b=a.localeData().monthsParse(b),"number"!==typeof b))return a;c=Math.min(a.date(),B(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function zb(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):I(this,"Month")}function V(a){var b;(b=a._a)&&-2===g(a).overflow&&(b=
0>b[da]||11<b[da]?da:1>b[$a]||b[$a]>B(b[Ma],b[da])?$a:0>b[sa]||24<b[sa]||24===b[sa]&&(0!==b[Sa]||0!==b[uc]||0!==b[ab])?sa:0>b[Sa]||59<b[Sa]?Sa:0>b[uc]||59<b[uc]?uc:0>b[ab]||999<b[ab]?ab:-1,g(a)._overflowDayOfYear&&(b<Ma||b>$a)&&(b=$a),g(a).overflow=b);return a}function Ua(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function za(a,b){var c=!0;return e(function(){c&&(Ua(a+"\n"+Error().stack),c=!1);return b.apply(this,arguments)},
b)}function ga(a){var b,c,d=a._i,e=ad.exec(d);if(e){g(a).iso=!0;b=0;for(c=ed.length;b<c;b++)if(ed[b][1].exec(d)){a._f=ed[b][0];break}b=0;for(c=bd.length;b<c;b++)if(bd[b][1].exec(d)){a._f+=(e[6]||" ")+bd[b][0];break}d.match($c)&&(a._f+="Z");Da(a)}else a._isValid=!1}function gb(b){var c=je.exec(b._i);null!==c?b._d=new Date(+c[1]):(ga(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}function Ca(a,b,c,d,e,f,g){b=new Date(a,b,c,d,e,f,g);1970>a&&b.setFullYear(a);return b}function Sb(a){var b=
new Date(Date.UTC.apply(null,arguments));1970>a&&b.setUTCFullYear(a);return b}function kb(a){return 0===a%4&&0!==a%100||0===a%400}function Xa(a,b,c){b=c-b;c-=a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=ra(a).add(c,"d");return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function Ga(a,b,c){return null!=a?a:null!=b?b:c}function qb(a){var b,c,d=[],e;if(!a._d){e=new Date;e=a._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(a._w&&null==a._a[$a]&&null==
a._a[da]){var f,h,k;f=a._w;null!=f.GG||null!=f.W||null!=f.E?(k=1,b=4,c=Ga(f.GG,a._a[Ma],Xa(ra(),1,4).year),h=Ga(f.W,1),f=Ga(f.E,1)):(k=a._locale._week.dow,b=a._locale._week.doy,c=Ga(f.gg,a._a[Ma],Xa(ra(),k,b).year),h=Ga(f.w,1),null!=f.d?(f=f.d,f<k&&++h):f=null!=f.e?f.e+k:k);b=6+k-b;var l=Sb(c,0,1+b).getUTCDay();l<k&&(l+=7);k=1+b+7*(h-1)-l+(null!=f?1*f:k);b=0<k?c:c-1;c=0<k?k:(kb(c-1)?366:365)+k;a._a[Ma]=b;a._dayOfYear=c}a._dayOfYear&&(c=Ga(a._a[Ma],e[Ma]),a._dayOfYear>(kb(c)?366:365)&&(g(a)._overflowDayOfYear=
!0),c=Sb(c,0,a._dayOfYear),a._a[da]=c.getUTCMonth(),a._a[$a]=c.getUTCDate());for(c=0;3>c&&null==a._a[c];++c)a._a[c]=d[c]=e[c];for(;7>c;c++)a._a[c]=d[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[sa]&&0===a._a[Sa]&&0===a._a[uc]&&0===a._a[ab]&&(a._nextDay=!0,a._a[sa]=0);a._d=(a._useUTC?Sb:Ca).apply(null,d);null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[sa]=24)}}function Da(b){if(b._f===a.ISO_8601)ga(b);else{b._a=[];g(b).empty=!0;var c=""+b._i,d,e,h,k,l,m=c.length,n=0;
h=ba(b._f,b._locale).match(mb)||[];for(d=0;d<h.length;d++){k=h[d];if(e=(c.match(qa(k,b))||[])[0])l=c.substr(0,c.indexOf(e)),0<l.length&&g(b).unusedInput.push(l),c=c.slice(c.indexOf(e)+e.length),n+=e.length;if(nb[k]){if(e?g(b).empty=!1:g(b).unusedTokens.push(k),l=b,null!=e&&f(Db,k))Db[k](e,l._a,l,k)}else b._strict&&!e&&g(b).unusedTokens.push(k)}g(b).charsLeftOver=m-n;0<c.length&&g(b).unusedInput.push(c);!0===g(b).bigHour&&12>=b._a[sa]&&0<b._a[sa]&&(g(b).bigHour=void 0);c=b._a;d=sa;m=b._locale;h=b._a[sa];
n=b._meridiem;null!=n&&(null!=m.meridiemHour?h=m.meridiemHour(h,n):null!=m.isPM&&((m=m.isPM(n))&&12>h&&(h+=12),m||12!==h||(h=0)));c[d]=h;qb(b);V(b)}}function W(a){if(!a._d){var b=H(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond];qb(a)}}function Kb(a){var d=a._i,f=a._f;a._locale=a._locale||y(a._l);if(null===d||void 0===f&&""===d)return m({nullInput:!0});"string"===typeof d&&(a._i=d=a._locale.preparse(d));if(r(d))return new n(V(d));if(b(f)){var h,q,p;if(0===a._f.length)g(a).invalidFormat=
!0,a._d=new Date(NaN);else{for(d=0;d<a._f.length;d++)if(f=0,h=l({},a),null!=a._useUTC&&(h._useUTC=a._useUTC),h._f=a._f[d],Da(h),k(h)&&(f+=g(h).charsLeftOver,f+=10*g(h).unusedTokens.length,g(h).score=f,null==p||f<p))p=f,q=h;e(a,q||h)}}else f?Da(a):c(d)?a._d=d:db(a);return a}function db(e){var f=e._i;void 0===f?e._d=new Date:c(f)?e._d=new Date(+f):"string"===typeof f?gb(e):b(f)?(e._a=d(f.slice(0),function(a){return parseInt(a,10)}),qb(e)):"object"===typeof f?W(e):"number"===typeof f?e._d=new Date(f):
a.createFromInputFallback(e)}function Tb(a,b,c,d,e){var f={};"boolean"===typeof c&&(d=c,c=void 0);f._isAMomentObject=!0;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;a=new n(V(Kb(f)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ra(a,b,c,d){return Tb(a,b,c,d,!1)}function Lb(a,c){var d,e;1===c.length&&b(c[0])&&(c=c[0]);if(!c.length)return ra();d=c[0];for(e=1;e<c.length;++e)if(!c[e].isValid()||c[e][a](d))d=c[e];return d}function Na(a){a=H(a);var b=a.year||0,c=a.quarter||0,
d=a.month||0,e=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=y();this._bubble()}function C(a){return a instanceof Na}function Qa(a,b){K(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+D(~~(a/60),2)+b+D(~~a%60,2)})}function ac(a){a=(a||"").match($c)||[];a=((a[a.length-1]||[])+"").match(ke)||["-",0,0];var b=+(60*a[1])+t(a[2]);return"+"===a[0]?
b:-b}function ua(b,d){var e,f;return d._isUTC?(e=d.clone(),f=(r(b)||c(b)?+b:+ra(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):ra(b).local()}function hc(){return this._isUTC&&0===this._offset}function Mb(a,b){var c=a,d=null;C(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:"number"===typeof a?(c={},b?c[b]=a:c.milliseconds=a):(d=He.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:t(d[$a])*c,h:t(d[sa])*c,m:t(d[Sa])*c,s:t(d[uc])*c,ms:t(d[ab])*c}):(d=vc.exec(a))?(c="-"===d[1]?-1:1,c={y:Ka(d[2],c),M:Ka(d[3],
c),d:Ka(d[4],c),h:Ka(d[5],c),m:Ka(d[6],c),s:Ka(d[7],c),w:Ka(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=ra(c.from),c=ra(c.to),c=ua(c,d),d.isBefore(c)?c=Uc(d,c):(c=Uc(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c,c={},c.ms=d.milliseconds,c.M=d.months);c=new Na(c);C(a)&&f(a,"_locale")&&(c._locale=a._locale);return c}function Ka(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Uc(a,b){var c={milliseconds:0,months:0};c.months=b.month()-
a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function zc(a,b){return function(c,d){var e;null===d||isNaN(+d)||(Ic[b]||(Ua("moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),Ic[b]=!0),e=c,c=d,d=e);e=Mb("string"===typeof c?+c:c,d);sc(this,e,a);return this}}function sc(b,c,d,e){var f=c._milliseconds,g=c._days;c=c._months;e=null==e?!0:e;f&&b._d.setTime(+b._d+f*d);g&&
(f=I(b,"Date")+g*d,b._d["set"+(b._isUTC?"UTC":"")+"Date"](f));c&&ja(b,I(b,"Month")+c*d);e&&a.updateOffset(b,g||c)}function bc(){var a=this.clone().utc();return 0<a.year()&&9999>=a.year()?"function"===typeof Date.prototype.toISOString?this.toDate().toISOString():Y(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Ub(a){if(void 0===a)return this._locale._abbr;a=y(a);null!=a&&(this._locale=a);return this}function Vb(){return this._locale}function Ab(a,b){K(0,[a,a.length],
0,b)}function wa(a,b,c){return Xa(ra([a,11,31+b-c]),b,c).week}function Ba(a,b){K(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function O(a,b){return b._meridiemParse}function hb(a,b){b[ab]=t(1E3*("0."+a))}function Ea(a){return a}function Bb(a,b,c,d){var e=y();b=h().set(d,b);return e[c](b,a)}function Nb(a,b,c,d,e){"number"===typeof a&&(b=a,a=void 0);a=a||"";if(null!=b)return Bb(a,b,c,e);var f=[];for(b=0;b<d;b++)f[b]=Bb(a,b,c,e);return f}function eb(a,b,c,d){b=
Mb(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Ac(a){return 0>a?Math.floor(a):Math.ceil(a)}function ka(a){return function(){return this.as(a)}}function na(a){return function(){return this._data[a]}}function Cb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function lb(){var a=cc(this._milliseconds)/1E3,b=cc(this._days),c=cc(this._months),d,e,f;d=q(a/60);e=q(d/60);a%=60;d%=60;f=q(c/12);var c=c%12,g=this.asSeconds();return g?(0>g?"-":
"")+"P"+(f?f+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(e||d||a?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(a?a+"S":""):"P0D"}var Bc,Ob=a.momentProperties=[],rb=!1,xa={},ib,Ya={},mb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Za=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ha={},nb={},Wc=/\d/,Ra=/\d\d/,pd=/\d{3}/,ic=/\d{4}/,Xc=/[+-]?\d{6}/,ha=/\d\d?/,Yc=/\d{1,3}/,Wb=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,
sb=/\d+/,tc=/[+-]?\d+/,$c=/Z|[+-]\d\d:?\d\d/gi,Pb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,v={},Db={},Ma=0,da=1,$a=2,sa=3,Sa=4,uc=5,ab=6;K("M",["MM",2],"Mo",function(){return this.month()+1});K("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});K("MMMM",0,0,function(a){return this.localeData().months(this,a)});z("month","M");N("M",ha);N("MM",ha,Ra);N("MMM",Pb);N("MMMM",Pb);fa(["M","MM"],function(a,b){b[da]=
t(a)-1});fa(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[da]=d:g(c).invalidMonth=a});var Ic={};a.suppressDeprecationWarnings=!1;var ad=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ed=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],bd=[["HH:mm:ss.SSSS",
/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],je=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=za("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});K(0,["YY",2],0,function(){return this.year()%100});K(0,["YYYY",4],0,"year");K(0,["YYYYY",5],0,
"year");K(0,["YYYYYY",6,!0],0,"year");z("year","y");N("Y",tc);N("YY",ha,Ra);N("YYYY",Wb,ic);N("YYYYY",Zc,Xc);N("YYYYYY",Zc,Xc);fa(["YYYYY","YYYYYY"],Ma);fa("YYYY",function(b,c){c[Ma]=2===b.length?a.parseTwoDigitYear(b):t(b)});fa("YY",function(b,c){c[Ma]=a.parseTwoDigitYear(b)});a.parseTwoDigitYear=function(a){return t(a)+(68<t(a)?1900:2E3)};var qd=T("FullYear",!1);K("w",["ww",2],"wo","week");K("W",["WW",2],"Wo","isoWeek");z("week","w");z("isoWeek","W");N("w",ha);N("ww",ha,Ra);N("W",ha);N("WW",ha,
Ra);ia(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=t(a)});K("DDD",["DDDD",3],"DDDo","dayOfYear");z("dayOfYear","DDD");N("DDD",Yc);N("DDDD",pd);fa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=t(a)});a.ISO_8601=function(){};var Xb=za("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=ra.apply(null,arguments);return a<this?this:a}),Ef=za("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",
function(){var a=ra.apply(null,arguments);return a>this?this:a});Qa("Z",":");Qa("ZZ","");N("Z",$c);N("ZZ",$c);fa(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ac(a)});var ke=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var He=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,vc=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Mb.fn=Na.prototype;var Qd=zc(1,"add"),cd=zc(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
var Eb=za("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});K(0,["gg",2],0,function(){return this.weekYear()%100});K(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ab("gggg","weekYear");Ab("ggggg","weekYear");Ab("GGGG","isoWeekYear");Ab("GGGGG","isoWeekYear");z("weekYear","gg");z("isoWeekYear","GG");N("G",tc);N("g",tc);N("GG",ha,
Ra);N("gg",ha,Ra);N("GGGG",Wb,ic);N("gggg",Wb,ic);N("GGGGG",Zc,Xc);N("ggggg",Zc,Xc);ia(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=t(a)});ia(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)});K("Q",0,0,"quarter");z("quarter","Q");N("Q",Wc);fa("Q",function(a,b){b[da]=3*(t(a)-1)});K("D",["DD",2],"Do","date");z("date","D");N("D",ha);N("DD",ha,Ra);N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});fa(["D","DD"],$a);fa("Do",function(a,b){b[$a]=t(a.match(ha)[0],
10)});var Rd=T("Date",!0);K("d",0,"do","day");K("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});K("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});K("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});K("e",0,0,"weekday");K("E",0,0,"isoWeekday");z("day","d");z("weekday","e");z("isoWeekday","E");N("d",ha);N("e",ha);N("E",ha);N("dd",Pb);N("ddd",Pb);N("dddd",Pb);ia(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=
d:g(c).invalidWeekday=a});ia(["d","e","E"],function(a,b,c,d){b[d]=t(a)});K("H",["HH",2],0,"hour");K("h",["hh",2],0,function(){return this.hours()%12||12});Ba("a",!0);Ba("A",!1);z("hour","h");N("a",O);N("A",O);N("H",ha);N("h",ha);N("HH",ha,Ra);N("hh",ha,Ra);fa(["H","HH"],sa);fa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});fa(["h","hh"],function(a,b,c){b[sa]=t(a);g(c).bigHour=!0});var Sd=T("Hours",!0);K("m",["mm",2],0,"minute");z("minute","m");N("m",ha);N("mm",ha,Ra);fa(["m",
"mm"],Sa);var Id=T("Minutes",!1);K("s",["ss",2],0,"second");z("second","s");N("s",ha);N("ss",ha,Ra);fa(["s","ss"],uc);var Yb=T("Seconds",!1);K("S",0,0,function(){return~~(this.millisecond()/100)});K(0,["SS",2],0,function(){return~~(this.millisecond()/10)});K(0,["SSS",3],0,"millisecond");K(0,["SSSS",4],0,function(){return 10*this.millisecond()});K(0,["SSSSS",5],0,function(){return 100*this.millisecond()});K(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});K(0,["SSSSSSS",7],0,function(){return 1E4*
this.millisecond()});K(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});K(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});z("millisecond","ms");N("S",Yc,Wc);N("SS",Yc,Ra);N("SSS",Yc,pd);var tb;for(tb="SSSS";9>=tb.length;tb+="S")N(tb,sb);for(tb="S";9>=tb.length;tb+="S")fa(tb,hb);var Jc=T("Milliseconds",!1);K("z",0,0,"zoneAbbr");K("zz",0,0,"zoneName");var P=n.prototype;P.add=Qd;P.calendar=function(a,b){var c=a||ra(),d=ua(c,this).startOf("day"),d=this.diff(d,"days",!0),d=
-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(b&&b[d]||this.localeData().calendar(d,this,ra(c)))};P.clone=function(){return new n(this)};P.diff=function(a,b,c){a=ua(a,this);var d=6E4*(a.utcOffset()-this.utcOffset());b=J(b);if("year"===b||"month"===b||"quarter"===b){var d=12*(a.year()-this.year())+(a.month()-this.month()),e=this.clone().add(d,"months"),f;0>a-e?(f=this.clone().add(d-1,"months"),a=(a-e)/(e-f)):(f=this.clone().add(d+
1,"months"),a=(a-e)/(f-e));a=-(d+a);"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-d)/864E5:"week"===b?(a-d)/6048E5:a;return c?a:q(a)};P.endOf=function(a){a=J(a);return void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};P.format=function(b){b=Y(this,b||a.defaultFormat);return this.localeData().postformat(b)};P.from=function(a,b){return this.isValid()?Mb({to:this,from:a}).locale(this.locale()).humanize(!b):
this.localeData().invalidDate()};P.fromNow=function(a){return this.from(ra(),a)};P.to=function(a,b){return this.isValid()?Mb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};P.toNow=function(a){return this.to(ra(),a)};P.get=Q;P.invalidAt=function(){return g(this).overflow};P.isAfter=function(a,b){b=J("undefined"!==typeof b?b:"millisecond");return"millisecond"===b?(a=r(a)?a:ra(a),+this>+a):(r(a)?+a:+ra(a))<+this.clone().startOf(b)};P.isBefore=function(a,b){var c;
b=J("undefined"!==typeof b?b:"millisecond");if("millisecond"===b)return a=r(a)?a:ra(a),+this<+a;c=r(a)?+a:+ra(a);return+this.clone().endOf(b)<c};P.isBetween=function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)};P.isSame=function(a,b){var c;b=J(b||"millisecond");if("millisecond"===b)return a=r(a)?a:ra(a),+this===+a;c=+ra(a);return+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b)};P.isValid=function(){return k(this)};P.lang=Eb;P.locale=Ub;P.localeData=Vb;P.max=Ef;P.min=Xb;P.parsingFlags=
function(){return e({},g(this))};P.set=Q;P.startOf=function(a){a=J(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};P.subtract=cd;P.toArray=function(){return[this.year(),this.month(),this.date(),
this.hour(),this.minute(),this.second(),this.millisecond()]};P.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};P.toDate=function(){return this._offset?new Date(+this):this._d};P.toISOString=bc;P.toJSON=bc;P.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};P.unix=function(){return Math.floor(+this/1E3)};P.valueOf=function(){return+this._d-
6E4*(this._offset||0)};P.year=qd;P.isLeapYear=function(){return kb(this.year())};P.weekYear=function(a){var b=Xa(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")};P.isoWeekYear=function(a){var b=Xa(this,1,4).year;return null==a?b:this.add(a-b,"y")};P.quarter=P.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};P.month=zb;P.daysInMonth=function(){return B(this.year(),this.month())};P.week=P.weeks=
function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};P.isoWeek=P.isoWeeks=function(a){var b=Xa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};P.weeksInYear=function(){var a=this.localeData()._week;return wa(this.year(),a.dow,a.doy)};P.isoWeeksInYear=function(){return wa(this.year(),1,4)};P.date=Rd;P.day=P.days=function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),
a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};P.weekday=function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};P.isoWeekday=function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)};P.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};P.hour=P.hours=Sd;P.minute=P.minutes=Id;P.second=P.seconds=Yb;P.millisecond=P.milliseconds=
Jc;P.utcOffset=function(b,c){var d=this._offset||0,e;return null!=b?("string"===typeof b&&(b=ac(b)),16>Math.abs(b)&&(b*=60),!this._isUTC&&c&&(e=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=b,this._isUTC=!0,null!=e&&this.add(e,"m"),d!==b&&(!c||this._changeInProgress?sc(this,Mb(b-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};P.utc=function(a){return this.utcOffset(0,
a)};P.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};P.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(ac(this._i));return this};P.hasAlignedHourOffset=function(a){a=a?ra(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};P.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};
P.isDSTShifted=function(){if("undefined"!==typeof this._isDSTShifted)return this._isDSTShifted;var a={};l(a,this);a=Kb(a);if(a._a){var b=a._isUTC?h(a._a):ra(a._a);this._isDSTShifted=this.isValid()&&0<u(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted};P.isLocal=function(){return!this._isUTC};P.isUtcOffset=function(){return this._isUTC};P.isUtc=hc;P.isUTC=hc;P.zoneAbbr=function(){return this._isUTC?"UTC":""};P.zoneName=function(){return this._isUTC?"Coordinated Universal Time":
""};P.dates=za("dates accessor is deprecated. Use date instead.",Rd);P.months=za("months accessor is deprecated. Use month instead",zb);P.years=za("years accessor is deprecated. Use year instead",qd);P.zone=za("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var ca=w.prototype;ca._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",
nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};ca.calendar=function(a,b,c){a=this._calendar[a];return"function"===typeof a?a.call(b,c):a};ca._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};ca.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});
return this._longDateFormat[a]};ca._invalidDate="Invalid date";ca.invalidDate=function(){return this._invalidDate};ca._ordinal="%d";ca.ordinal=function(a){return this._ordinal.replace("%d",a)};ca._ordinalParse=/\d{1,2}/;ca.preparse=Ea;ca.postformat=Ea;ca._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};ca.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];
return"function"===typeof e?e(a,b,c,d):e.replace(/%d/i,a)};ca.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)};ca.set=function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};ca.months=function(a){return this._months[a.month()]};ca._months="January February March April May June July August September October November December".split(" ");
ca.monthsShort=function(a){return this._monthsShort[a.month()]};ca._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");ca.monthsParse=function(a,b,c){var d,e;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=h([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$",
"i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};ca.week=function(a){return Xa(a,this._week.dow,this._week.doy).week};ca._week={dow:0,doy:6};ca.firstDayOfYear=function(){return this._week.doy};ca.firstDayOfWeek=function(){return this._week.dow};ca.weekdays=function(a){return this._weekdays[a.day()]};
ca._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");ca.weekdaysMin=function(a){return this._weekdaysMin[a.day()]};ca._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");ca.weekdaysShort=function(a){return this._weekdaysShort[a.day()]};ca._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");ca.weekdaysParse=function(a){var b,c;this._weekdaysParse=this._weekdaysParse||[];for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ra([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,
"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b};ca.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};ca._meridiemParse=/[ap]\.?m?\.?/i;ca.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=za("moment.lang is deprecated. Use moment.locale instead.",
E);a.langData=za("moment.langData is deprecated. Use moment.localeData instead.",y);var bb=Math.abs,fd=ka("ms"),gd=ka("s"),Kc=ka("m"),Td=ka("h"),Fb=ka("d"),Ud=ka("w"),Vd=ka("M"),Wd=ka("y"),Oa=na("milliseconds"),rd=na("seconds"),Cc=na("minutes"),Xd=na("hours"),Jd=na("days"),Kd=na("months"),jc=na("years"),Lc=Math.round,kc={s:45,m:45,h:22,d:26,M:11},cc=Math.abs,va=Na.prototype;va.abs=function(){var a=this._data;this._milliseconds=bb(this._milliseconds);this._days=bb(this._days);this._months=bb(this._months);
a.milliseconds=bb(a.milliseconds);a.seconds=bb(a.seconds);a.minutes=bb(a.minutes);a.hours=bb(a.hours);a.months=bb(a.months);a.years=bb(a.years);return this};va.add=function(a,b){return eb(this,a,b,1)};va.subtract=function(a,b){return eb(this,a,b,-1)};va.as=function(a){var b,c=this._milliseconds;a=J(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+
c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};va.asMilliseconds=fd;va.asSeconds=gd;va.asMinutes=Kc;va.asHours=Td;va.asDays=Fb;va.asWeeks=Ud;va.asMonths=Vd;va.asYears=Wd;va.valueOf=function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*t(this._months/12)};va._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,
d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Ac(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=q(a/1E3);d.seconds=a%60;a=q(a/60);d.minutes=a%60;a=q(a/60);d.hours=a%24;b+=q(a/24);a=q(4800*b/146097);c+=a;b-=Ac(146097*a/4800);a=q(c/12);d.days=b;d.months=c%12;d.years=a;return this};va.get=function(a){a=J(a);return this[a+"s"]()};va.milliseconds=Oa;va.seconds=rd;va.minutes=Cc;va.hours=Xd;va.days=Jd;va.weeks=function(){return q(this.days()/7)};va.months=Kd;va.years=jc;va.humanize=function(a){var b=
this.localeData(),c;c=!a;var d=Mb(this).abs(),e=Lc(d.as("s")),f=Lc(d.as("m")),g=Lc(d.as("h")),h=Lc(d.as("d")),k=Lc(d.as("M")),d=Lc(d.as("y")),e=e<kc.s&&["s",e]||1===f&&["m"]||f<kc.m&&["mm",f]||1===g&&["h"]||g<kc.h&&["hh",g]||1===h&&["d"]||h<kc.d&&["dd",h]||1===k&&["M"]||k<kc.M&&["MM",k]||1===d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Cb.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};va.toISOString=lb;va.toString=lb;va.toJSON=lb;va.locale=Ub;va.localeData=Vb;va.toIsoString=
za("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lb);va.lang=Eb;K("X",0,0,"unix");K("x",0,0,"valueOf");N("x",tc);N("X",/[+-]?\d+(\.\d{1,3})?/);fa("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});fa("x",function(a,b,c){c._d=new Date(t(a))});a.version="2.10.6";Bc=ra;a.fn=P;a.min=function(){var a=[].slice.call(arguments,0);return Lb("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return Lb("isAfter",a)};a.utc=h;a.unix=function(a){return ra(1E3*
a)};a.months=function(a,b){return Nb(a,b,"months",12,"month")};a.isDate=c;a.locale=E;a.invalid=m;a.duration=Mb;a.isMoment=r;a.weekdays=function(a,b){return Nb(a,b,"weekdays",7,"day")};a.parseZone=function(){return ra.apply(null,arguments).parseZone()};a.localeData=y;a.isDuration=C;a.monthsShort=function(a,b){return Nb(a,b,"monthsShort",12,"month")};a.weekdaysMin=function(a,b){return Nb(a,b,"weekdaysMin",7,"day")};a.defineLocale=F;a.weekdaysShort=function(a,b){return Nb(a,b,"weekdaysShort",7,"day")};
a.normalizeUnits=J;a.relativeTimeThreshold=function(a,b){if(void 0===kc[a])return!1;if(void 0===b)return kc[a];kc[a]=b;return!0};return a});angular.module("genius").factory("moment",["$window",function(a){return a.moment}]);
(function(a,b,c){function d(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function f(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return l[a.which]?l[a.which]:n[a.which]?n[a.which]:String.fromCharCode(a.which).toLowerCase()}function e(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function h(a){return"shift"==a||"ctrl"==a||"alt"==a||
"meta"==a}function g(a,b){var c,d,e,f=[];c=a;"+"===c?c=["+"]:(c=c.replace(/\+{2}/g,"+plus"),c=c.split("+"));for(e=0;e<c.length;++e)d=c[e],q[d]&&(d=q[d]),b&&"keypress"!=b&&r[d]&&(d=r[d],f.push("shift")),h(d)&&f.push(d);c=d;e=b;if(!e){if(!t){t={};for(var g in l)95<g&&112>g||l.hasOwnProperty(g)&&(t[l[g]]=g)}e=t[c]?"keydown":"keypress"}"keypress"==e&&f.length&&(e="keydown");return{key:d,modifiers:f,action:e}}function k(a,c){return null===a||a===b?!1:a===c?!0:k(a.parentNode,c)}function m(a){function c(a){a=
a||{};var b=!1,d;for(d in J)a[d]?b=!0:J[d]=0;b||(Q=!1)}function k(a,b,c,d,e,f){var g,l,m=[],n=c.type;if(!t._callbacks[a])return[];"keyup"==n&&h(a)&&(b=[a]);for(g=0;g<t._callbacks[a].length;++g)if(l=t._callbacks[a][g],(d||!l.seq||J[l.seq]==l.level)&&n==l.action){var q;(q="keypress"==n&&!c.metaKey&&!c.ctrlKey)||(q=l.modifiers,q=b.sort().join(",")===q.sort().join(","));q&&(q=d&&l.seq==d&&l.level==f,(!d&&l.combo==e||q)&&t._callbacks[a].splice(g,1),m.push(l))}return m}function l(a,b,c,d){t.stopCallback(b,
b.target||b.srcElement,c,d)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function n(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=f(a);b&&("keyup"==a.type&&T===b?T=!1:t.handleKey(b,e(a),a))}function q(a,b,d,e){function h(b){return function(){Q=b;++J[a];clearTimeout(H);H=setTimeout(c,1E3)}}function k(b){l(d,b,a);"keyup"!==e&&(T=f(b));setTimeout(c,10)}for(var m=J[a]=0;m<b.length;++m){var n=m+1===b.length?k:h(e||
g(b[m+1]).action);r(b[m],n,e,a,m)}}function r(a,b,c,d,e){t._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?q(a,f,b,c):(c=g(a,c),t._callbacks[c.key]=t._callbacks[c.key]||[],k(c.key,c.modifiers,{type:c.action},d,a,e),t._callbacks[c.key][d?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:d,level:e,combo:a}))}var t=this;a=a||b;if(!(t instanceof m))return new m(a);t.target=a;t._callbacks={};t._directMap={};var J={},H,T=!1,I=!1,Q=!1;t._handleKey=function(a,
b,d){var e=k(a,b,d),f;b={};var g=0,m=!1;for(f=0;f<e.length;++f)e[f].seq&&(g=Math.max(g,e[f].level));for(f=0;f<e.length;++f)e[f].seq?e[f].level==g&&(m=!0,b[e[f].seq]=1,l(e[f].callback,d,e[f].combo,e[f].seq)):m||l(e[f].callback,d,e[f].combo);e="keypress"==d.type&&I;d.type!=Q||h(a)||e||c(b);I=m&&"keydown"==d.type};t._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)r(a[d],b,c)};d(a,"keypress",n);d(a,"keydown",n);d(a,"keyup",n)}var l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",
20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},q={option:"alt",command:"meta","return":"enter",
escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},t;for(c=1;20>c;++c)l[111+c]="f"+c;for(c=0;9>=c;++c)l[c+96]=c;m.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};m.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};m.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};m.prototype.reset=function(){this._callbacks={};this._directMap=
{};return this};m.prototype.stopCallback=function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")||k(b,this.target)?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};m.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};m.init=function(){var a=m(b),c;for(c in a)"_"!==c.charAt(0)&&(m[c]=function(b){return function(){return a[b].apply(a,arguments)}}(c))};m.init();a.Mousetrap=m;"undefined"!==typeof module&&module.exports&&(module.exports=
m);"function"===typeof define&&define.amd&&define(function(){return m})})(window,document);(function(a){var b={},c=a.prototype.stopCallback;a.prototype.stopCallback=function(a,f,e,h){return this.paused?!0:b[e]||b[h]?!1:c.call(this,a,f,e)};a.prototype.bindGlobal=function(a,c,e){this.bind(a,c,e);if(a instanceof Array)for(c=0;c<a.length;c++)b[a[c]]=!0;else b[a]=!0};a.init()})(Mousetrap);
angular.module("genius").factory("Mousetrap",["$window","$rootScope",function(a,b){var c=function(a,c){c=c||{};return function(d){c.prevent_default&&d.preventDefault();c.stop_propagation&&d.stopPropagation();b.$apply(function(){a.call(this,d)}.bind(this))}},d=function(b,c){this.default_options=c||{};this.mousetrap=new a.Mousetrap(b)};d.prototype.bind=function(a,b){this.mousetrap.bind(a,b)};d.prototype.$bind=function(a,b,d){d=_.assign({},this.default_options,d);this.bind(a,c(b,d))};return _.assign(d,
{$bind:function(a,b,d){this.bind(a,c(b,d))},bind:a.Mousetrap.bind.bind(a.Mousetrap),unbind:a.Mousetrap.unbind.bind(a.Mousetrap),trigger:a.Mousetrap.trigger.bind(a.Mousetrap),bindGlobal:a.Mousetrap.bindGlobal.bind(a.Mousetrap)})}]);
loadjs=function(){function a(a,b){a=a.push?a:[a];var c=[],d=a.length,e=d,f,g,h;for(f=function(a,d){d.length&&c.push(a);e--;e||b(c)};d--;)g=a[d],(h=k[g])?f(g,h):(g=m[g]=m[g]||[],g.push(f))}function b(a,b){if(a){var c=m[a];k[a]=b;if(c)for(;c.length;)c[0](a,b),c.splice(0,1)}}function c(a,b){a.call&&(a={success:a});b.length?(a.error||h)(b):(a.success||h)(a)}function d(a,b,c,e){var f=document,g=c.async,k=(c.numRetries||0)+1,m=c.before||h,x=a.replace(/^(css|img)!/,""),E,F;e=e||0;/(^css!|\.css$)/.test(a)?
(E=!0,F=f.createElement("link"),F.rel="stylesheet",F.href=x):/(^img!|\.(png|gif|jpg|svg)$)/.test(a)?(F=f.createElement("img"),F.src=x):(F=f.createElement("script"),F.src=a,F.async=void 0===g?!0:g);F.onload=F.onerror=F.onbeforeload=function(f){var g=f.type[0];if(E&&"hideFocus"in F)try{F.sheet.cssText.length||(g="e")}catch(h){g="e"}if("e"==g&&(e+=1,e<k))return d(a,b,c,e);b(a,g,f.defaultPrevented)};!1!==m(a,F)&&f.head.appendChild(F)}function f(a,b,c){a=a.push?a:[a];var e=a.length,f=e,g=[],h,k;h=function(a,
c,d){"e"==c&&g.push(a);if("b"==c)if(d)g.push(a);else return;e--;e||b(g)};for(k=0;k<f;k++)d(a[k],h,c)}function e(a,d,e){var h,k;d&&d.trim&&(h=d);k=(h?e:d)||{};if(h){if(h in g)throw"LoadJS";g[h]=!0}f(a,function(a){c(k,a);b(h,a)},k)}var h=function(){},g={},k={},m={};e.ready=function(b,d){a(b,function(a){c(d,a)});return e};e.done=function(a){b(a,[])};e.reset=function(){g={};k={};m={}};e.isDefined=function(a){return a in g};return e}();
angular.module("genius").factory("MusicKit",["$q","$window",function(a,b){var c=a.defer();document.addEventListener("musickitloaded",c.resolve);b.loadjs(["https://js-cdn.music.apple.com/musickit/v3/musickit.js"],{async:!0,error:function(){c.reject(Error("MusicKit failed to load"))}});return{load:function(){return c.promise.then(function(){var a=window.MusicKit;return a.configure({developerToken:window.MUSICKIT_TOKEN,debug:!0,app:{name:"Genius"},suppressErrorDialog:!0,features:["equivalencies"]}).then(function(){return a})})}}}]);
angular.module("genius").factory("MutationObserver",["$window",function(a){return a.MutationObserver}]);angular.module("genius").factory("NewRelic",["$window","$rootScope","Session",function(a,b,c){var d=a.newrelic,f=function(a){var c=0,f=b.$watch(function(){c+=1;c===a&&(d.finished(),d.addPageAction("secondApply"),f())})};return{init:function(a){d&&(d.setCustomAttribute("signedIn",c.user_signed_in),a&&d.setPageViewName(a,"resource.path"),f(2))}}}]);
(function(){var a,b,c,d,f,e,h,g,k,m,l,n,r,q,t,u,w,A,x,E=[].slice;a=/^\(?([^)]*)\)?(?:(.)(d+))?$/;b=1E3/30;r=document.createElement("div").style;f=null!=r.transition||null!=r.webkitTransition||null!=r.mozTransition||null!=r.oTransition;l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;h=function(a){var b;b=document.createElement("div");
b.innerHTML=a;return b.children[0]};m=function(a,b){return a.className=a.className.replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")};e=function(a,b){m(a,b);return a.className+=" "+b};q=function(a,b){var c;if(null!=document.createEvent)return c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c)};k=function(){var a,b;return null!=(a=null!=(b=window.performance)?"function"===typeof b.now?b.now():void 0:void 0)?a:+new Date};n=function(a,b){null==b&&(b=0);if(!b)return Math.round(a);
a*=Math.pow(10,b);a=Math.floor(a+.5);return a/Math.pow(10,b)};t=function(a){return 0>a?Math.ceil(a):Math.floor(a)};g=function(a){return a-n(a)};u=!1;(r=function(){var a,b,c,d,e;if(!u&&null!=window.jQuery){u=!0;d=["html","text"];e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(function(a){var b;b=window.jQuery.fn[a];return window.jQuery.fn[a]=function(a){var c;return null==a||null==(null!=(c=this[0])?c.odometer:void 0)?b.apply(this,arguments):this[0].odometer.update(a)}}(a));return e}})();setTimeout(r,
0);d=function(){function d(a){var c,e,f,g,h,k,l,m=this;this.options=a;this.el=this.options.el;if(null!=this.el.odometer)return this.el.odometer;this.el.odometer=this;h=d.options;for(c in h)a=h[c],null==this.options[c]&&(this.options[c]=a);null==(c=this.options).duration&&(c.duration=2E3);this.MAX_VALUES=this.options.duration/b/2|0;this.resetFormat();this.value=this.cleanValue(null!=(k=this.options.value)?k:"");this.renderInside();this.render();try{for(l=["innerHTML","innerText","textContent"],f=0,
g=l.length;f<g;f++)e=l[f],null!=this.el[e]&&function(a){return Object.defineProperty(m.el,a,{get:function(){var b;return"innerHTML"===a?m.inside.outerHTML:null!=(b=m.inside.innerText)?b:m.inside.textContent},set:function(a){return m.update(a)}})}(e)}catch(n){this.watchForMutations()}this}d.prototype.renderInside=function(){this.inside=document.createElement("div");this.inside.className="odometer-inside";this.el.innerHTML="";return this.el.appendChild(this.inside)};d.prototype.watchForMutations=function(){var a=
this;if(null!=c)try{return null==this.observer&&(this.observer=new c(function(b){b=a.el.innerText;a.renderInside();a.render(a.value);return a.update(b)})),this.watchMutations=!0,this.startWatchingMutations()}catch(b){}};d.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})};d.prototype.stopWatchingMutations=function(){var a;return null!=(a=this.observer)?a.disconnect():void 0};d.prototype.cleanValue=function(a){var b;"string"===typeof a&&
(a=a.replace(null!=(b=this.format.radix)?b:".","<radix>"),a=a.replace(/[.,]/g,""),a=a.replace("<radix>","."),a=parseFloat(a,10)||0);return n(a,this.format.precision)};d.prototype.bindTransitionEnd=function(){var a,b,c,d,e,f,g=this;if(!this.transitionEndBound){this.transitionEndBound=!0;b=!1;e=["transitionend","webkitTransitionEnd","oTransitionEnd","otransitionend","MSTransitionEnd"];f=[];c=0;for(d=e.length;c<d;c++)a=e[c],f.push(this.el.addEventListener(a,function(){if(b)return!0;b=!0;setTimeout(function(){g.render();
b=!1;return q(g.el,"odometerdone")},0);return!0},!1));return f}};d.prototype.resetFormat=function(){var b,c,d;(b=null!=(d=this.options.format)?d:"(,ddd).dd")||(b="d");b=a.exec(b);if(!b)throw Error("Odometer: Unparsable digit format");c=b.slice(1,4);d=c[0];b=c[1];c=c[2];return this.format={repeating:d,radix:b,precision:(null!=c?c.length:void 0)||0}};d.prototype.render=function(a){var b,c,d,e,g,h,k;null==a&&(a=this.value);this.stopWatchingMutations();this.resetFormat();this.inside.innerHTML="";g=this.options.theme;
b=this.el.className.split(" ");e=[];h=0;for(k=b.length;h<k;h++)c=b[h],c.length&&((d=/^odometer-theme-(.+)$/.exec(c))?g=d[1]:/^odometer(-|$)/.test(c)||e.push(c));e.push("odometer");f||e.push("odometer-no-transitions");g?e.push("odometer-theme-"+g):e.push("odometer-auto-theme");this.el.className=e.join(" ");this.ribbons={};this.formatDigits(a);return this.startWatchingMutations()};d.prototype.formatDigits=function(a){var b,c,d,e;this.digits=[];if(this.options.formatFunction)for(a=this.options.formatFunction(a),
e=a.split("").reverse(),c=0,d=e.length;c<d;c++)b=e[c],b.match(/0-9/)?(a=this.renderDigit(),a.querySelector(".odometer-value").innerHTML=b,this.digits.push(a),this.insertDigit(a)):this.addSpacer(b);else for(b=!this.format.precision||!g(a)||!1,e=a.toString().split("").reverse(),c=0,d=e.length;c<d;c++)a=e[c],"."===a&&(b=!0),this.addDigit(a,b)};d.prototype.update=function(a){var b,c=this;a=this.cleanValue(a);if(b=a-this.value)return m(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),
0<b?e(this.el,"odometer-animating-up"):e(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(a),this.startWatchingMutations(),setTimeout(function(){c.el.offsetHeight;return e(c.el,"odometer-animating")},0),this.value=a};d.prototype.renderDigit=function(){return h('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')};
d.prototype.insertDigit=function(a,b){return null!=b?this.inside.insertBefore(a,b):this.inside.children.length?this.inside.insertBefore(a,this.inside.children[0]):this.inside.appendChild(a)};d.prototype.addSpacer=function(a,b,c){var d;d=h('<span class="odometer-formatting-mark"></span>');d.innerHTML=a;c&&e(d,c);return this.insertDigit(d,b)};d.prototype.addDigit=function(a,b){var c,d;null==b&&(b=!0);if("-"===a)return this.addSpacer(a,null,"odometer-negation-mark");if("."===a)return this.addSpacer(null!=
(c=this.format.radix)?c:".",null,"odometer-radix-mark");if(b)for(d=!1;;){if(!this.format.repeating.length){if(d)throw Error("Bad odometer format without digits");this.resetFormat();d=!0}c=this.format.repeating[this.format.repeating.length-1];this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1);if("d"===c)break;this.addSpacer(c)}c=this.renderDigit();c.querySelector(".odometer-value").innerHTML=a;this.digits.push(c);return this.insertDigit(c)};d.prototype.animate=
function(a){return f&&"count"!==this.options.animation?this.animateSlide(a):this.animateCount(a)};d.prototype.animateCount=function(a){var b,c,d,e,f,g=this;if(c=+a-this.value)return e=d=k(),b=this.value,(f=function(){var h;if(k()-e>g.options.duration)g.value=a,g.render(),q(g.el,"odometerdone");else return h=k()-d,50<h&&(d=k(),h/=g.options.duration,h*=c,b+=h,g.render(Math.round(b))),null!=l?l(f):setTimeout(f,50)})()};d.prototype.getDigitCount=function(){var a,b,c,d,e;c=1<=arguments.length?E.call(arguments,
0):[];a=d=0;for(e=c.length;d<e;a=++d)b=c[a],c[a]=Math.abs(b);a=Math.max.apply(Math,c);return Math.ceil(Math.log(a+1)/Math.log(10))};d.prototype.getFractionalDigitCount=function(){var a,b,c,d,e,f;d=1<=arguments.length?E.call(arguments,0):[];b=/^\-?\d*\.(\d*?)0*$/;a=e=0;for(f=d.length;e<f;a=++e)c=d[a],d[a]=c.toString(),c=b.exec(d[a]),d[a]=null==c?0:c[1].length;return Math.max.apply(Math,d)};d.prototype.resetDigits=function(){this.digits=[];this.ribbons=[];this.inside.innerHTML="";return this.resetFormat()};
d.prototype.animateSlide=function(a){var b,c,d,f,g,h,k,l,m,n,q,r,u,w,x,A;q=this.value;if(l=this.getFractionalDigitCount(q,a))a*=Math.pow(10,l),q*=Math.pow(10,l);if(d=a-q){this.bindTransitionEnd();f=this.getDigitCount(q,a);g=[];for(h=w=b=0;0<=f?w<f:w>f;h=0<=f?++w:--w){r=t(q/Math.pow(10,f-h-1));k=t(a/Math.pow(10,f-h-1));h=k-r;if(Math.abs(h)>this.MAX_VALUES){m=[];n=h/(this.MAX_VALUES+this.MAX_VALUES*b*.5);for(c=r;0<h&&c<k||0>h&&c>k;)m.push(Math.round(c)),c+=n;m[m.length-1]!==k&&m.push(k);b++}else m=
function(){A=[];for(var a=r;r<=k?a<=k:a>=k;r<=k?a++:a--)A.push(a);return A}.apply(this);h=n=0;for(x=m.length;n<x;h=++n)c=m[h],m[h]=Math.abs(c%10);g.push(m)}this.resetDigits();n=g.reverse();h=f=0;for(g=n.length;f<g;h=++f)for(m=n[h],this.digits[h]||this.addDigit(" ",h>=l),null==(u=this.ribbons)[h]&&(u[h]=this.digits[h].querySelector(".odometer-ribbon-inner")),this.ribbons[h].innerHTML="",0>d&&(m=m.reverse()),a=w=0,q=m.length;w<q;a=++w)c=m[a],b=document.createElement("div"),b.className="odometer-value",
b.innerHTML=c,this.ribbons[h].appendChild(b),a===m.length-1&&e(b,"odometer-last-value"),0===a&&e(b,"odometer-first-value");0>r&&this.addDigit("-");d=this.inside.querySelector(".odometer-radix-mark");null!=d&&d.parent.removeChild(d);if(l)return this.addSpacer(this.format.radix,this.digits[l-1],"odometer-radix-mark")}};return d}();d.options=null!=(A=window.odometerOptions)?A:{};setTimeout(function(){var a,b,c,e,f;if(window.odometerOptions){e=window.odometerOptions;f=[];for(a in e)b=e[a],f.push(null!=
(c=d.options)[a]?(c=d.options)[a]:c[a]=b);return f}},0);d.init=function(){var a,b,c,e,f,g;if(null!=document.querySelectorAll){b=document.querySelectorAll(d.options.selector||".odometer");g=[];c=0;for(e=b.length;c<e;c++)a=b[c],g.push(a.odometer=new d({el:a,value:null!=(f=a.innerText)?f:a.textContent}));return g}};null!=(null!=(x=document.documentElement)?x.doScroll:void 0)&&null!=document.createEventObject?(w=document.onreadystatechange,document.onreadystatechange=function(){"complete"===document.readyState&&
!1!==d.options.auto&&d.init();return null!=w?w.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==d.options.auto)return d.init()},!1);"function"===typeof define&&define.amd?define(["jquery"],function(){return d}):"undefined"!==typeof exports&&null!==exports?module.exports=d:window.Odometer=d}).call(this);angular.module("genius").factory("Odometer",["$window",function(a){return a.Odometer}]);
angular.module("genius").factory("on_within_visibility_range",["$q","$window",function(a,b){var c=0,d=$(b).height(),f=[],e=function(){c=Math.max(c,$(b).scrollTop());f=_.tap([],function(a){f.forEach(function(b){b.element.offset().top-b.range<c+d?b.resolve():a.push(b)})})};$(b).on("scroll",_.throttle(e,100));$(b).on("resize",function(){d=$(b).height()});return function(b,c){void 0===c&&(c=0);return _.tap(a(function(a){return f.push({resolve:a,range:c,element:$(b)})}),e)}}]);
angular.module("genius").factory("only_changes",[function(){return function(a,b,c){c=(void 0===c?{}:c).except;var d=void 0===c?[]:c;return _.omitBy(a,function(a,c){return!d.includes(c)&&b[c]===a})}}]);
angular.module("genius").factory("OnsiteInterceptor",function(){return{request:function(a){var b;b=a.url;var c=document.createElement("a");c.href=b;b=c.hostname;b&&b!==window.location.hostname||(a.headers["X-Requested-With"]="XMLHttpRequest","GET"!==a.method&&(a.headers["X-CSRF-Token"]=$.cookie("_csrf_token")));return a}}});
angular.module("genius").factory("PageDataClient",["MetaTagData","ApiClient",function(a,b){return{load:function(a,d){return b.transform(_.property("page_data")).get("/page_data/:type",{type:a,page_path:d})},preloaded:function(){return a.get("page_data")}}}]);
angular.module("genius").factory("PageTransition",["$document","$exceptionHandler","$location","$rootScope","Ads","AsyncAnalytics","cfpLoadingBar","PageDataClient",function(a,b,c,d,f,e,h,g){var k=!1,m=d.$new(!0);return{by_router_instruction:function(d,n){_.isUndefined(n)&&b(Error("must pass $prevInstruction as second argument to by_router_instruction"));if(_.isNull(n)&&g.preloaded())return Object.assign(d.routeData,{page_data:g.preloaded()}),!0;k=!0;h.start();return g.load(d.routeData.data.type,c.path()).then(function(b){k=
!1;h.complete();Object.assign(d.routeData,{page_data:b});if(b.dfp_kv){for(var c={},g=0,n=b.dfp_kv;g<n.length;g++){var w=n[g];c[w.name]=w.values}f.reset_for_new_page_view({targeting:c})}a.prop("title",b.title);a.scrollTop(0);e.on_navigation(b);m.$broadcast("client_transition_complete");return!0}).catch(function(b){a.prop("location").reload();return Promise.reject(b)})},on_client_transition_complete:function(a){m.$on("client_transition_complete",a)},get transitioning(){return k}}}]);
angular.module("genius").factory("PageVisibility",["$document","$rootScope",function(a,b){var c,d;_.isUndefined(a[0].hidden)?_.isUndefined(a[0].mozHidden)?_.isUndefined(a[0].msHidden)?_.isUndefined(a[0].webkitHidden)||(c="webkitHidden",d="webkitvisibilitychange"):(c="msHidden",d="msvisibilitychange"):(c="mozHidden",d="mozvisibilitychange"):(c="hidden",d="visibilitychange");var f=!_.isUndefined(c),e=[];f&&a[0].addEventListener(d,function(){if(!_.isEmpty(e)){for(;_.some(e);)e.shift()();b.$apply()}});
return{is_visible:function(){return!a[0][c]},is_hidden:function(){return a[0][c]},when_visible:function(b,d){b=d?b.bind(d):b;f&&a[0][c]?e.push(b):b()}}}]);
angular.module("genius").factory("PagedDataFeed",[function(){return function(){return function(a,b,c,d,f){void 0===c&&(c={});void 0===d&&(d=1);void 0===f&&(f=_.noop);var e=this;this.next_page=d;this.params=_.clone(c);this.next=function(){return a(_.assign({page:e.next_page},e.params)).then(function(a){e.next_page=a.next_page;e.total_entries=a.total_entries;f(a[b]);return a[b]})};this.has_next=function(){return e.next_page};this.reset=function(){e.next_page=1}}}()}]);
angular.module("genius").factory("parse_time_string",function(){return function(a){if(!a)return null;var b=a.split(/\D/);if(1===b.length)return parseInt(b[0]);a=b[0]?parseInt(b[0]):0;var c=b[1]?parseInt(b[1]):0,b=b[2]?parseInt((b[2]+"000").slice(0,3)):0;return 6E4*a+1E3*c+b}});
angular.module("genius").factory("patch_structured_text",["StructuredText","diff_match_patch",function(a,b){var c=b.DIFF_DELETE,d=b.DIFF_INSERT,f=b.DIFF_EQUAL;return function(e,h,g){g=(void 0===g?{}:g).dmp;if(0===e.length)return[h,[]];g=g||new b;e=g.patch_deepCopy(e);g.patch_splitMax(e);var k=g.patch_addPadding(e);h=new a(k+h+k);for(var m=0,l=[],n=0;n<e.length;n++){var r=e[n].start2+m,q=g.diff_text1(e[n].diffs),t=void 0,u=-1;if(q.length>g.Match_MaxBits){if(t=g.match_main(h.plain,q.substring(0,g.Match_MaxBits),
r),-1!==t&&(u=g.match_main(h.plain,q.substring(q.length-g.Match_MaxBits),r+q.length-g.Match_MaxBits),-1===u||t>=u))t=-1}else t=g.match_main(h.plain,q,r);if(-1===t)l[n]=!1,m-=e[n].length2-e[n].length1;else if(l[n]=!0,m=t-r,r=void 0,r=-1===u?h.plain.substring(t,t+q.length):h.plain.substring(t,u+g.Match_MaxBits),u=g.diff_main(q,r,!1),q.length>g.Match_MaxBits&&g.diff_levenshtein(u)/q.length>g.Patch_DeleteThreshold)l[n]=!1;else{g.diff_cleanupSemanticLossless(u);for(var q=0,r=void 0,w=0,A=e[n].diffs;w<
A.length;w++){var x=A[w],E=x[0],x=x[1];E!==f&&(r=g.diff_xIndex(u,q));E===d?h=h.insert_at(t+r,x):E===c&&(h=h.remove_range(t+r,t+g.diff_xIndex(u,q+x.length)));E!==c&&(q+=x.length)}}}return[h.structured.substring(k.length,h.structured.length-k.length),l]}}]);angular.module("genius").factory("performance_mark",["$window",function(a){var b=function(b){_.get(a,"performance.mark")&&a.performance.mark(b)};return{create:b,create_once:_.memoize(b)}}]);
angular.module("genius").factory("PlayerJS",["$window",function(a){return a.playerjs}]);
angular.module("genius").factory("Preloader",["$q",function(a){var b=function(a){this.bulk_load_function=a};b.prototype={cache:{},insert:function(b,d){this.cache[b]=a.when(d)},load:function(a){this.bulk_load([a]);return this.cache[a]},filter_unloaded:function(a){var b=this.cache;return a.filter(function(a){return!b[a]})},bulk_load:function(a){var b=this.cache;a=this.filter_unloaded(a);var f=a.length?this.bulk_load_function(a):void 0;a.forEach(function(a){b[a]=f.then(function(b){return b[a]})})}};
return b}]);
angular.module("genius").factory("PromiseQueue",["$q",function(a){return function(){function b(a){void 0===a&&(a={});var b=this;this.pending_count=0;this.queue=(new Rx.Subject).do(function(){return b.pending_count++}).concatMap(function(b){var d=b.f;b=b.deferred;b.resolve(d());d=Rx.Observable.fromPromise(b.promise);a.fail_fast||(d=d.catch(function(a){return Rx.Observable.of(a)}));return d});this.queue.subscribe(function(){return b.pending_count--},_.noop)}b.prototype.is_empty=function(){return 0===this.pending_count};
b.prototype.add=function(b){var d=a.defer();this.queue.next({f:b,deferred:d});return d.promise};return b}()}]);angular.module("genius").factory("Pusher",["$window","$rootScope","AppConfig",function(a,b,c){var d={},f,e=function(){f||(f=new a.Pusher(c.pusher_app_key));return f};return{pusher:e,subscribe:function(a,c,f){d[a]||(d[a]={},e().subscribe(a).bind_all(function(c,e){var f=d[a][c];f&&b.$applyAsync(function(){f.forEach(function(a){a(e)})})}));d[a][c]=d[a][c]||[];d[a][c].push(f)}}}]);
angular.module("genius").factory("PyongClient",["AppConfig","$http",function(a,b){var c=function(c,f,e,h){void 0===h&&(h={});h[f+"_id"]=e;return b.post(a.api_root_url+c,h).then(function(a){return a.data.response[f]})};return{pyong:function(a,b){return c("/pyongs",a,b,{note_may_follow:!0})},finalizePyong:function(a,b,e){return c("/pyongs/finalize",a,b,{pyong_note:e})}}}]);
(function(a){if("function"===typeof require&&"object"===typeof exports&&"object"===typeof module){try{var b=require("jquery")}catch(d){}module.exports=a(b)}else if("function"===typeof define&&define.amd)define(["jquery"],function(b){return a(b)});else{var c;try{c=(0,eval)("this")}catch(d){c=window}c.deparam=a(c.jQuery)}})(function(a){var b=function(a,b){var f={},e={"true":!0,"false":!1,"null":null};a.replace(/\+/g," ").split("&").forEach(function(a){var c=a.split("=");a=decodeURIComponent(c[0]);var k=
f,m=0,l=a.split("]["),n=l.length-1;/\[/.test(l[0])&&/\]$/.test(l[n])?(l[n]=l[n].replace(/\]$/,""),l=l.shift().split("[").concat(l),n=l.length-1):n=0;if(2===c.length)if(c=decodeURIComponent(c[1]),b&&(c=c&&!isNaN(c)&&+c+""===c?+c:"undefined"===c?void 0:void 0!==e[c]?e[c]:c),n)for(;m<=n;m++)a=""===l[m]?k.length:l[m],k=k[a]=m<n?k[a]||(l[m+1]&&isNaN(l[m+1])?{}:[]):c;else"[object Array]"===Object.prototype.toString.call(f[a])?f[a].push(c):{}.hasOwnProperty.call(f,a)?f[a]=[f[a],c]:f[a]=c;else a&&(f[a]=b?
void 0:"")});return f};a&&(a.prototype.deparam=a.deparam=b);return b});angular.module("genius").factory("querystring",[function(){return{stringify:function(a){return $.param(a)},parse:function(a){return $.deparam(a)}}}]);
angular.module("genius").factory("QuestionClient",["$http","$q","AppConfig","Reversible","ApiClient","Session",function(a,b,c,d,f,e){return{index:function(a,b,c){c.text_format=e.user_signed_in?"html,markdown":"html";c[a+"_id"]=b;return f.get("/questions",c)},create_if_not_exists:function(a){return a.id?b.resolve(a):this.create(a.questionable_type,a.questionable_id,a)},create:function(d,e,f){var m={question:_.assign({},f,{body:f.body}),text_format:"plain"};m[d+"_id"]=e;return a.post(c.api_root_url+
"/questions",m).then(function(a){_.assign(f,a.data.response.question);return f}).catch(function(a){return b.reject(_.set(a.data.response,"message",a.data.meta.message))})},update:function(e,f){var k=d.modify(e,f.question);return a.put(c.api_root_url+"/questions/"+e.id,f,{params:{text_format:"html,markdown"}}).then(function(a){_.assign(e,a.data.response.question)}).catch(function(a){k();return b.reject(Error(a.data.meta.message))})},move:function(d,e){return a.put(c.api_root_url+"/questions/"+d.id+
"/move",{direction:e},{params:{text_format:"html,markdown"}}).then(function(a){_.assign(d,a.data.response.question)}).catch(function(a){return b.reject(Error(a.data.meta.message))})},change_state:function(d,e){return a.put(c.api_root_url+"/questions/"+d.id+"/change_state",{state_event:e},{params:{text_format:"html,markdown"}}).then(function(a){_.assign(d,a.data.response.question)}).catch(function(a){return b.reject(Error(a.data.meta.message))})}}}]);
angular.module("genius").factory("ReactSongPageService",[function(){return{reactSongPageRedirect:_.tap(new URL(window.location),function(a){a.search=_.tap(new URLSearchParams(a.search),function(a){a.delete("bagon");a.append("react",1)}).toString()}).toString()}}]);
angular.module("genius").factory("ReferentClient",["$http","AppConfig","Session","querystring",function(a,b,c,d){return{refresh:function(a){return this.get(a.id).then(function(b){_.assign(a,_.omit(b,"annotations"));_.each(a.annotations,function(a){_.each(b.annotations,function(b){b.id===a.id&&_.assign(a,b)})});return a})},get:function(d){return a.get(b.api_root_url+"/referents/"+d,{params:{text_format:c.user_signed_in?"html,markdown,plain":"html,plain"}}).then(function(a){return a.data.response.referent})},
bulk_load:function(f){f=d.stringify({text_format:c.user_signed_in?"html,markdown,plain":"html,plain",ids:f});return a.get(b.api_root_url+"/referents/multi?"+f).then(function(a){return a.data.response.referents})},create_referent:function(c){var e=d.stringify({text_format:"html"});return a.post(b.api_root_url+"/songs/"+c.song.id+"/referents?"+e,c).then(function(a){return a.data.response.referent})}}}]);angular.module("genius").factory("ReferentElementMap",function(){return new Map});
angular.module("genius").factory("ReferentHelper",["Session",function(a){var b=function(b){return{_editing:{_form_visible:!0},new:!0,referent_id:b.id,body:{markdown:"",html:""},authors:[{user:a.current_user,pinned_role:b.current_user_metadata.relationships.pinned_role}],created_at:parseInt(Date.now()/1E3),needs_exegesis:0===b.annotations.length}};return{display_mode_by_classification:function(b){return _.includes(["verified","cosigned"],b)?"green":"unreviewed"===b&&a.has_permission("see_unreviewed_referents",
a.current_user)?"red":"yellow"},create_verified_annotation_placeholder:function(a){return _.assign(b(a),{verified:!0})},create_community_annotation_placeholder:function(a){return _.assign(b(a),{id:a.id})},range_or_contents_intersects_links_or_contains_images:function(a){var b=a.cloneContents();return b.querySelectorAll("img").length?!0:!!(b.querySelectorAll("a").length||$(a.startContainer).closest("a").length||$(a.endContainer).closest("a").length)}}}]);
angular.module("genius").factory("ReferentLocator",["$document","AppConfig","string_to_symbol_array","LyricsEditing","MarkdownPlaintextFinderRegex",function(a,b,c,d,f){var e=b.annotator_context_length,h=function(b){var c=a[0].createRange();c.selectNodeContents(b);return c};return{calculate_referent_location:function(a,b){var m;m=h(b);m.setEnd(a.startContainer,a.startOffset);m=m.cloneContents();$(m).find("[avoid-selection]").remove();m=h(m).toString().replace(/\s+/g,"");var l=c(m);m=l.slice(-e);var n;
n=h(b);n.setStart(a.endContainer,a.endOffset);n=n.toString().replace(/\s+/g,"");var r=c(n).slice(0,e);m=m.join("");n=a.toString();var r=r.join(""),l=l.length,q;q=h(b);q.setEnd(a.startContainer,a.startOffset);q=$(q.cloneContents().children).html();q=d.prepare_lyrics_for_editing(q);var t=f(a.toString());q=(q.markdown.match(t)||[]).length;return{previous_context:m,text:n,next_context:r,total_offset:l,occurrence_in_markdown:q}},calculate_image_location:function(a,b){return{image_url:b.src,occurrence:$(a).find('img[src="'+
b.src+'"]').index(b)+1}}}}]);
angular.module("genius").factory("ReferentRegistry",["Preloader","ReferentClient",function(a,b){var c=new a(function(a){return b.bulk_load(a)}),d={referents:{},referent_ids:[]},f=function(a){var b=d.referents[a.id];Reflect.deleteProperty(b,"stub");Object.assign(b,a)};return{get:function(a){var b=this.peek(a);b&&b.stub&&c.load(a).then(f);return b},peek:function(a){return d.referents[a]},first:function(a,b){var c=d.referent_ids.indexOf((void 0===b?{}:b).after_referent_id),f=_.find(d.referent_ids,function(b,
f){return f>c&&a(d.referents[b])});return d.referents[f]},register:function(a){if(d.referents[a.id])return d.referents[a.id];d.referents[a.id]=a;d.referent_ids.push(a.id);return a},bulk_preload:function(a){c.bulk_load(a)},preload_insert:function(a){c.insert(a.id,a)},preload_from_start:function(a){this.preload_around(d.referent_ids[0],a)},preload_around:function(a,b){var f=d.referent_ids.indexOf(a),k=_(d.referent_ids).sortBy(function(a){return Math.abs(_.indexOf(d.referent_ids,a)-f)}).value(),k=c.filter_unloaded(k).slice(0,
b);c.bulk_load(k)},update_if_present:function(a){var b=this.peek(a.id);return b?(b.stub&&Object.assign(b,a),b):a},clear:function(){Object.assign(d,{referents:{},referent_ids:[]})},reset_fragments:function(){_.each(d.referents,function(a){a.fragments=[]})}}}]);angular.module("genius").factory("ReportAbuseClient",["ApiClient",function(a){return{reportAsAbusive:function(b,c,d,f,e){void 0===e&&(e=null);return a.post("/:type/:id/report_as_abusive",{type:b,id:c,reason:d,details:f,recaptcha_token:e})}}}]);
angular.module("genius").factory("RetryFailureInterceptor",["$injector","$q",function(a,b){return{responseError:function(c){var d=c.config;return d.retries&&0<d.retries?(--d.retries,a.get("$http")(d)):b.reject(c)}}}]);
angular.module("genius").factory("Reversible",["$parse",function(a){return{modify:function(b,c){var d,f={},e={};for(d in c)f[d]=a(d),_.has(b,d)&&(e[d]=f[d](b)),f[d].assign(b,c[d]);return function(){for(d in c)_.has(e,d)?f[d].assign(b,e[d]):d.split(".").reduce(function(a,b,c,d){if(a)return c===d.length-1?Reflect.deleteProperty(a,b):a[b]},b)}}}}]);
__extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();
angular.module("genius").factory("ScrollFocus",["$window","EventEmitter",function(a,b){var c=a.JSONStore,d=function(){function a(){this.elements=[]}a.prototype.clear=function(){_.invokeMap(this.elements,"remove")};a.prototype.draw_area=function(a,b){this.draw({position:"absolute",backgroundColor:"rgba(255, 0, 0, 0.1)",border:"1px solid red",width:"100%",top:a,height:b-a})};a.prototype.draw_line=function(a){this.draw({position:"absolute",border:"1px solid blue",width:"100%",height:1,top:a})};a.prototype.draw=
function(a){a=$("<div>").css(a).appendTo("body");this.elements.push(a)};return a}();return function(b){function e(c,e){var k=b.call(this)||this;k.elements=c;k.options=_.defaults({},e,{update_ms:10,topmost_offset:.25,bottommost_offset:.6,zone_radius:.1,container:$(a.document.body),scroll_frame:a});k.debug=new d;var m=null;k.scroll_handler=_.throttle(function(){k._draw_debug();var a=k._focused_element();a!==m&&(k.emit("update",a),m=a)},k.options.update_ms);$(k.options.scroll_frame).on("scroll",k.scroll_handler);
return k}__extends(e,b);e.prototype.replace=function(a){this.elements=a};e.prototype.destroy=function(){$(this.options.scroll_frame).off("scroll",this.scroll_handler)};e.prototype._focused_element=function(){for(var a=this._trigger_top(),b=this._element_zones(),c=0;c<b.length;c++){var d=b[c];if(d.top<a&&d.bottom>a)return this.elements[c]}return null};e.prototype._trigger_top=function(){var a=$(this.options.scroll_frame).height(),b=$(this.options.container),b=b.offset().top+b.height()-a,b=Math.min(1,
$(this.options.scroll_frame).scrollTop()/b);return(this.options.topmost_offset+b*(this.options.bottommost_offset-this.options.topmost_offset))*a};e.prototype._element_zones=function(){var a=$(this.options.scroll_frame).height(),b=this.options.zone_radius*a,c=this.options.container.getBoundingClientRect(),a=_.map(this.elements,function(a){a=a.getBoundingClientRect();return{top:Math.max(c.top,a.top-b),bottom:Math.min(c.bottom,a.bottom+b)}});_.eachCons(a,2,function(a,b){if(a.bottom>b.top){var c=a.bottom-
b.top;a.bottom-=c/2;b.top+=c/2}});return a};e.prototype._draw_debug=function(){var a=this;if(c.get_object("scroll_focus_debug")){var b=$(this.options.scroll_frame).scrollTop();this.debug.clear();this.debug.draw_line(b+this._trigger_top());_.each(this._element_zones(),function(c){a.debug.draw_area(b+c.top,b+c.bottom)})}};return e}(b)}]);
angular.module("genius").factory("ScrollPoint",["$window",function(a){var b={},c={};b.register=function(a,f){b.has_point(a)&&c[a].push(f);c[a]=[f]};b.unregister=function(a,f){b.has_point(a)&&(c[a]=_.without(c[a],f),c[a].length||delete c[a])};b.scroll_to=function(d){a.requestAnimationFrame(function(){b.has_point(d)&&$("html, body").animate({scrollTop:c[d][0].offset().top})})};b.has_point=function(a){return!!c[a]};return b}]);
angular.module("genius").factory("SearchClient",["ApiClient",function(a){return{multi:function(b,c){return a.returning("sections").get("/search/multi",_.assign({q:b},c))},section:function(b,c,d){return a.transform(function(a){return{hits:a.sections[0].hits,next_page:a.next_page}}).get("/search/:section",_.assign({q:c,section:b},d))}}}]);
angular.module("genius").factory("Session",["SessionConfig",function(a){return Object.create(Object.prototype,{has_permission:{value:function(a,c){return _.includes(_.get(c,"current_user_metadata.permissions"),a)}},has_feature:{value:function(b){return _.includes(a.features,b)}},user_signed_in:{get:function(){return!!this.current_user}},current_user:{get:function(){return a.current_user},set:function(b){a.current_user=b}}})}]);angular.module("genius").factory("SessionConfig",["$window",function(a){return a.SESSION_CONFIG}]);
angular.module("genius").factory("ShimInnerHtmlProp",["$window",function(a){return _.once(function(){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");_.isUndefined(b.innerHTML)&&a.GeniusShimInnerHtml()})}]);
angular.module("genius").factory("signed_out_created_content",["$window","Session",function(a,b){var c=a.sessionStorage,d={};return{add:function(a,d){if(!b.user_signed_in){var h=this.get();h[a]=h[a]||[];h[a].push(d);if(c)try{c.setItem("signed_out_created_content",JSON.stringify(h))}catch(g){if("QuotaExceededError"!==g.name)throw g;}}},get:function(){return c?JSON.parse(c.getItem("signed_out_created_content")||"{}"):d},clear:function(){d={};c.removeItem("signed_out_created_content")}}}]);
angular.module("genius").factory("SmartRouting",["$q","$routerRootComponent","$document","$injector","$location","mobile_device",function(a,b,c,d,f,e){var h=function(a){return d.invoke(["$rootRouter",a])},g=function(a){return h(function(b){return b.recognize(a)})},k=function(c){return angular.element(b).empty()?g(c).then(function(b){var d=e?"mobile":"desktop";return(b=_.get(b,"component.routeData.data.clientRoutableOn"))&&-1!==b.indexOf(d)?f.url(c):a.reject(Error("Cannot route with client"))}):a.reject(Error("No root routing component"))};
return{navigate_to_absolute_url:function(a){var b=new URL(a);b.hostname!==c[0].location.hostname?c[0].location.href=a:k(b.pathname+b.search+b.hash).catch(function(b){c[0].location.href=a})}}}]);
angular.module("genius").factory("SongClient",["$q","$http","AppConfig","Session","querystring",function(a,b,c,d,f){var e=function(a){return _(a).pick("id title updated_by_human_at spotify_uuid youtube_url soundcloud_url custom_header_image_url release_date_components albums tags featured_video youtube_start custom_song_art_image_url recording_location custom_performances song_art_primary_color song_art_secondary_color song_art_text_color valid_song_art_contrast".split(" ").concat(_.map(c.external_song_match_purposes,function(a){return"apple_song_for_"+
a}))).merge(["producer_artists","featured_artists","writer_artists"].reduce(function(b,c){a[c]&&(b[c]=_.map(a[c],function(a){return _.pick(a,"name")}));return b},{})).tap(function(b){a.primary_artist&&(b.primary_artist=a.primary_artist.name);a.primary_tag&&(b.primary_tag_id=a.primary_tag.id);a.song_relationships&&(b.song_relationships_by_id=[],_.each(a.song_relationships,function(a){b.song_relationships_by_id.push({type:a.type,song_ids:_.compact(_.map(a.songs,"id"))})}))}).omit(_.isUndefined).value()};
return{autocomplete_api_endpoint:c.api_root_url+"/search",autocomplete_options:{parse:function(a){return _.map(a.response.hits,"result").map(function(a){return{data:[a.title+" | "+a.primary_artist.name,a],value:a,result:a}})},formatItem:function(a){var b=a[1].title+"<br>"+a[1].primary_artist.name;return a[1].new?"Create new: "+b:b}},autocomplete:function(a){return b.get(c.api_root_url+"/search/song",{params:{q:a}}).then(function(a){return _.map(_.get(a,"data.response.sections[0].hits",[]),"result")})},
count_view:function(a){return b.post(c.api_root_url+"/songs/"+a+"/count_view")},load_contributor_data:function(a){return b.get(c.api_root_url+"/songs/"+a+"/contributors").then(function(a){return a.data.response.contributors})},load_iq_earners:function(a,d){var e=f.stringify(d);return b.get(c.api_root_url+"/songs/"+a+"/iq_earners?"+e).then(function(a){return a.data.response.contributors})},load_annotation_open_data:function(a){return b.get(c.api_root_url+"/songs/"+a+"/annotation_open_data").then(function(a){return a.data.response.annotation_open_data})},
load_song:function(a){return b.get(c.api_root_url+"/songs/"+a,{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response.song})},load_lyrics:function(a){return b.get(c.api_root_url+"/songs/"+a+"/lyrics").then(function(a){return a.data.response.song_lyrics})},perform_action:function(e,f,k){return b.put(c.api_root_url+"/songs/"+e+"/"+f,k,{params:{text_format:d.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response.song},function(b){return a.reject(Error(_.get(b,
["data","meta","message"],"Error performing admin action")))})},delete:function(a){return b.delete(c.api_root_url+"/songs/"+a)},update:function(d,f){var k=e(f);return b.put(c.api_root_url+"/songs/"+d,{song:k},{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response.song},function(b){return a.reject(_.set(b.data.response,"message",b.data.meta.message))})},save_lyrics:function(d,e,f){void 0===f&&(f={});return b.put(c.api_root_url+"/songs/"+d.id+"/lyrics",_.merge({lyrics:{body:{html:e}},
client_timestamps:_.pick(d,["updated_by_human_at","lyrics_updated_at"])},f)).then(function(a){return a.data.response.song_lyrics},function(b){return a.reject(b.data)})},line_items:function(a,d){return b.get(c.api_root_url+"/songs/"+a+"/activity_stream/line_items",{params:{text_format:"html",page:d}}).then(function(a){return a.data.response})},for_artist:function(a,d){return b.get(c.api_root_url+"/artists/"+a+"/songs",{params:d}).then(function(a){return a.data.response})},search_with_artist:function(a,
d){return b.get(c.api_root_url+"/artists/"+a+"/songs/search",{params:d||{}}).then(function(a){return a.data.response})},hot:function(a){return b.get(c.api_root_url+"/songs/hot",{params:a||{}}).then(function(a){return a.data.response})},attribution_visualization:function(a){return b.get(c.api_root_url+"/songs/"+a+"/attribution_visualization").then(function(a){return a.data.response.attribution_visualization})},preview_lyrics_for_export:function(a){return b.get(c.api_root_url+"/songs/"+a+"/preview_lyrics_for_export").then(function(a){return a.data.response.preview_lyrics_for_export.lyrics})}}}]);
angular.module("genius").factory("Soundcloud",["$sce","$http","querystring",function(a,b,c){var d={auto_play:!1,buying:!1,liking:!1,download:!1,sharing:!1,show_artwork:!1,show_comments:!1,show_playcount:!1,show_user:!1,hide_related:!0,visual:!1},f=function(a){return b.get("https://soundcloud.com/oembed",{params:{url:a,format:"json"}}).then(function(a){a=(new DOMParser).parseFromString(a.data.html,"text/html").querySelector("iframe").src.split("?")[1];return c.parse(a)})};return{oembed_url_for_src:function(a){return f(a).then(function(a){return a.url})},
player_url_for_src:function(b){return f(b).then(function(b){b=c.stringify(_.assign(b,d));return a.trustAsResourceUrl("https://w.soundcloud.com/player/?"+b)})}}}]);
angular.module("genius").factory("SpotifyAnnotationClient",["$http",function(a){return{save_song:function(b,c,d){return a.post("/spotify_annotations/bulk_update",{song_id:b,spotify_annotations:d,spotify_song:{note:c.note,lock_version:c.lock_version,finalized:c.finalized}}).then(function(a){return a.data})},load_song:function(b){return a.get("/songs/"+b+"/spotify_annotations").then(function(a){return a.data})}}}]);
angular.module("genius").factory("SpotifyClient",["$http",function(a){return{load_artist_metadata:function(b){b="https://api.spotify.com/v1/artists/"+b;var c=$("[data-spotify-access-token]").attr("data-spotify-access-token");c&&(b+="?access_token="+c);return a.get(b).then(function(a){return a.data})}}}]);
angular.module("genius").factory("SpotifyPlayer",["$interval","$q","$timeout","SpotifyPlayerClient","SpotifySocket",function(a,b,c,d,f){var e=function(a){var b,c;return function(d){clearTimeout(b);d.is_playing||!1===c?a(d):b=setTimeout(function(){return a(d)},500);c=d.is_playing}};return function(){function h(b){var c=this;this._callback=b;this._last_player_state_update_at=this._position_offset=0;this._pending_actions=[];this._log_entries=[];this._socket=new f;var d=e(this._on_player_state_changed.bind(this));
this._socket.on("player_state_changed",function(a){c._log({label:"player_state_changed",raw_state:a});d(a)});a(function(){return c._callback(c.state)},50);a(function(){return c._force_update()},3500);this._force_update()}h.prototype.pause=function(){var a=this;this._log({label:"action_start",action_name:"pause"});return this._request_and_expect({action_name:"pause",request:function(){return d.pause()},expect:function(){return!a.is_playing}})};h.prototype.play=function(a){var b=this;this._log({label:"action_start",
action_name:"play",action_arguments:{track_uri:a}});return this._request_and_expect({action_name:"play",request:function(){return d.play(a===b.track_uri?null:a)},expect:function(){return b.is_playing&&(!a||a===b.track_uri)}})};h.prototype.seek=function(a,b){var c=this,e=(void 0===b?{play:!1}:b).play;a=Number(a);this._log({label:"action_start",action_name:"seek",action_arguments:{position:a,play:e}});return this._request_and_expect({action_name:"seek",request:function(){return d.seek(a)},expect:function(){return 1E3>
Math.abs(c._player_state_message.state.progress_ms-a)}}).then(function(){return e?c.play():c.state})};h.prototype.print_log_entries=function(){console.log(this._log_entries)};h.prototype.download_log_entries=function(){var a=new Blob([JSON.stringify(this._log_entries)],{type:"text/csv"}),b=document.createElement("a");b.href=URL.createObjectURL(a);b.download="spotify_player_log_"+Date.now()+".json";b.click()};Object.defineProperty(h.prototype,"is_playing",{get:function(){return _.get(this._player_state_message,
["state","is_playing"],!1)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"position",{get:function(){return this._player_state_message?Math.max(this._position_without_offset-this._position_offset,0):0},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"track",{get:function(){return _.get(this._player_state_message,["state","item"],null)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"track_uri",{get:function(){return _.get(this.track,["linked_from",
"uri"])||_.get(this.track,"uri")||null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"state",{get:function(){return _.pick(this,["is_playing","position","track","track_uri"])},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"playback_type",{get:function(){return"spotify"},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"playback_label",{get:function(){return"Spotify Websocket"},enumerable:!0,configurable:!0});h.prototype._force_update=function(){d.shuffle(!1)};
h.prototype._on_player_state_changed=function(a){var b=this;_.get(this._player_state_message,"event_id",0)>=a.event_id?alert("An irregular event has occurred. Please download the player log and forward it to engineering, along with a description of the network connection of your player device (wifi, ethernet, etc)"):(this._last_player_state_update_at=Date.now(),this._new_state_should_update_position_offset(a)&&(this._position_offset=this._last_player_state_update_at-a.state.timestamp),this._player_state_message=
a,this._pending_actions.forEach(function(a){a.expect()&&a.deferred.resolve(b.state)}))};h.prototype._new_state_should_update_position_offset=function(a){a=a.state;return this._player_state_message?this.is_playing!==a.is_playing||5E3<Math.abs(this._position_without_offset-a.progress_ms)?!0:!1:!1};h.prototype._request_and_expect=function(a){var d=this,e=a.request,f=a.expect,h=a.action_name;if(f())return b.when(this.state);var r={expect:f,deferred:b.defer()},q;this._pending_actions.push(r);r.deferred.promise.finally(function(){c.cancel(q);
_.pull(d._pending_actions,r)});e().then(function(){q=c(function(){d._log({label:"action_timeout",action_name:h});r.deferred.reject(Error("Timeout"))},500)}).catch(function(a){d._log({label:"action_error",action_name:h,error:a});r.deferred.reject(a)});return r.deferred.promise.then(function(a){d._log({label:"action_success",action_name:h,result:a});return a})};h.prototype._log=function(a){this._log_entries=_.takeRight(this._log_entries,5E3).concat([_.extend(a,{state:this.state,timestamp:Date.now(),
pending_action_count:this._pending_actions.length})])};Object.defineProperty(h.prototype,"_position_without_offset",{get:function(){if(!this._player_state_message)return 0;var a=this.is_playing?Date.now()-this._last_player_state_update_at:0;return this._player_state_message.state.progress_ms+a},enumerable:!0,configurable:!0});return h}()}]);
angular.module("genius").factory("SpotifyPlayerClient",["$http","$q","IdentityClient",function(a,b,c){var d=function(){var a;return function(){return _.get(a,"expires_at",0)>Date.now()/1E3?b.when(a.token):c.spotify_credentials().then(function(b){a=b;return a.token})}}(),f=function(b,c,f){f=void 0===f?{}:f;var k=f.params,m=f.data;return d().then(function(d){return a({method:b,params:k,data:m,url:"https://api.spotify.com/v1"+c,headers:{Authorization:"Bearer "+d}})})};return{fresh_token:d,play:function(a){var b=
{};a&&(b.uris=[a]);return f("put","/me/player/play",{data:b})},pause:function(){return f("put","/me/player/pause")},seek:function(a){return f("put","/me/player/seek",{params:{position_ms:a}})},subscribe:function(a){return f("put","/me/notifications/player",{params:{connection_id:a}})},shuffle:function(a){void 0===a&&(a=!0);return f("put","/me/player/shuffle",{params:{state:a}})}}}]);
angular.module("genius").factory("SpotifySocket",["$interval","$rootScope","$timeout","SpotifyPlayerClient",function(a,b,c,d){var f=JSON.stringify({type:"ping"}),e=["message","error","close"];return function(){function h(){var c=this;_.bindAll(this,["_on_message","_on_error","_on_close"]);this._connection_id=null;this._scope=b.$new(!0);this._connect();a(function(){return c._ping()},1E4)}h.prototype.on=function(a,b){this._scope.$on(a,function(a,c){return b(c)})};h.prototype._connect=function(){var a=
this;return d.fresh_token().then(function(b){a._websocket&&a._dispose();a._websocket=new WebSocket("wss://dealer.spotify.com?access_token="+b);e.forEach(function(b){return a._websocket.addEventListener(b,a["_on_"+b])})})};h.prototype._ping=function(){var a=this;this.is_closed?this._connect():this.is_open&&(this._reconnect_timer=c(function(){return a._websocket.close()},1E3),this._websocket.send(f))};h.prototype._on_message=function(a){var b=this;a=JSON.parse(a.data);if("pong"===a.type)c.cancel(this._reconnect_timer);
else{var e=_.get(a,["headers","Spotify-Connection-Id"]);e&&e!==this._connection_id&&d.subscribe(e).then(function(){b._connection_id=e});_(a.payloads||[]).flatMap("events").each(function(a){var c=a.event;b._scope.$emit(a.type.toLowerCase(),c)})}};h.prototype._on_error=function(a){this._scope.$emit("error",a);this._websocket.close()};h.prototype._on_close=function(){this._connection_id=null;this._connect()};h.prototype._dispose=function(){var a=this;e.forEach(function(b){return a._websocket.removeEventListener(b,
a["_on_"+b])});this._websocket.close()};Object.defineProperty(h.prototype,"is_open",{get:function(){return _.get(this._websocket,"readyState")===WebSocket.OPEN},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"is_closed",{get:function(){return _.get(this._websocket,"readyState")===WebSocket.CLOSED},enumerable:!0,configurable:!0});return h}()}]);angular.module("genius").factory("StopWatch",["$window",function(a){return a.StopWatch}]);
angular.module("genius").factory("StoryClient",["ApiClient",function(a){return{index:function(b){return a.get("/stories",b)}}}]);angular.module("genius").factory("string_has_unmatched_parentheses",[function(){return function(a,b){var c=(void 0===b?{}:b).parentheses,c=void 0===c?"[]()":c,d=[],f,e;for(f=0;e=a[f++];){var h=c.indexOf(e);if(!(0>h))if(Boolean(h%2)){if(!d.length||c.indexOf(d.pop())!==h-1)return!0}else d.push(e)}return 0<d.length}}]);
angular.module("genius").factory("string_to_symbol_array",function(){var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\u0000-\uFFFF]/g;return function(b){return b.match(a)||[]}});
angular.module("genius").factory("StructuredText",[function(){var a=String.fromCodePoint(57345),b=String.fromCodePoint(57346),c=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,d=new RegExp(b+"|\\]\\(\\d+\\)|"+c.source,"g"),f=/\]\(\d+\)|<\/[^>]+>/,e=new RegExp(b+"|<\\w+(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>"),h=new RegExp(c.source+"\\s?<\\/[^>]+>|\\[\\]\\(\\d+\\)","gm"),g=/(?:\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^[\]])*)\]\([ \t]*<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/gm,k=function(b){return b.replace(g,
function(b,c,d){return""+a+c+_.pad("",d.length+3,a)}).replace(c,function(b){return _.pad("",b.length,a)})};return function(){function m(c){this._string=c.replace(g,function(a,c,d){return""+b+c+"]("+d+")"});c=k(c).split("");for(var d=0,e=0;e<c.length;e++)c[e]!==a&&d++;this.plain_to_structured_indices=Array(d);for(e=d=0;e<c.length;e++)c[e]!==a&&(this.plain_to_structured_indices[d]=e,d++)}m.prototype.remove_range=function(a,b){var c=this.plain_to_structured_indices[a],e=this.plain_to_structured_indices[b]||
_.last(this.plain_to_structured_indices)+1,f=(this._string.substring(c,e).match(d)||[]).join("");return new this.constructor(this.string.substring(0,c)+f+this.string.substring(e))};m.prototype.insert_at=function(a,b){var c=this.plain_to_structured_indices[a]||_.last(this.plain_to_structured_indices)+1,d=this._string.substring(0,c),g=this._string.substring(c),h=d.match(new RegExp("(?:"+e.source+")$")),d=d.match(new RegExp("(?:"+f.source+")$")),k=g.match(new RegExp("^(?:"+e.source+")")),g=g.match(new RegExp("^(?:"+
f.source+")")),m=/^\n|\n$/.test(b);h&&m?c-=h[0].length:g&&m?c+=g[0].length:!d||k||m?!k||d||m||(c+=k[0].length):c-=d[0].length;return new this.constructor(this.string.substring(0,c)+b+this.string.substring(c))};Object.defineProperty(m.prototype,"string",{get:function(){return this._string.replace(new RegExp(""+b,"g"),"[")},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"plain",{get:function(){return this.string.replace(g,function(a,b){return b}).replace(c,"")},enumerable:!0,configurable:!0});
Object.defineProperty(m.prototype,"structured",{get:function(){return this.string.replace(h,"")},enumerable:!0,configurable:!0});return m}()}]);angular.module("genius").factory("TagClient",["$http","AppConfig",function(a,b){return{autocomplete:function(c){return a.get(b.api_root_url+"/tags/autocomplete",{params:{q:c}}).then(function(a){return a.data.response.tags})},primary:function(){return a.get(b.api_root_url+"/tags/home").then(function(a){return a.data.response.tags})}}}]);
(function(a,b){"function"===typeof define&&define.amd?define(b):"object"===typeof exports?module.exports=b(require,exports,module):a.Tether=b()})(this,function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a){var b=(getComputedStyle(a)||{}).position,c=[];if("fixed"===b)return[a];for(;(a=a.parentNode)&&a&&1===a.nodeType;){var d=void 0;try{d=getComputedStyle(a)}catch(e){}if("undefined"===typeof d||null===d)return c.push(a),c;var f=d;
/(auto|scroll)/.test(f.overflow+f.overflowY+f.overflowX)&&("absolute"!==b||0<=["relative","absolute","fixed"].indexOf(d.position))&&c.push(a)}c.push(document.body);return c}function e(){J&&document.body.removeChild(J);J=null}function h(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,d={};a=a.getBoundingClientRect();for(var e in a)d[e]=a[e];e=I();d.top-=e.top;d.left-=e.left;"undefined"===typeof d.width&&(d.width=document.body.scrollWidth-
d.left-d.right);"undefined"===typeof d.height&&(d.height=document.body.scrollHeight-d.top-d.bottom);d.top-=c.clientTop;d.left-=c.clientLeft;d.right=b.body.clientWidth-d.width-d.left;d.bottom=b.body.clientHeight-d.height-d.top;return d}function g(a){return a.offsetParent||document.documentElement}function k(){var a=document.createElement("div");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");m(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",
width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;c===a&&(a=b.clientWidth);document.body.removeChild(b);b=c-a;return{width:b,height:b}}function m(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],b=[];Array.prototype.push.apply(b,arguments);b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])});return a}function l(a,b){if("undefined"!==
typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),c=q(a).replace(c," ");a.setAttribute("class",c)}}function n(a,b){if("undefined"!==typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{l(a,b);var c=q(a)+(" "+b);a.setAttribute("class",c)}}function r(a,b){if("undefined"!==typeof a.classList)return a.classList.contains(b);var c=q(a);return(new RegExp("(^| )"+b+"( |$)",
"gi")).test(c)}function q(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className}function t(a,b,c){c.forEach(function(c){-1===b.indexOf(c)&&r(a,c)&&l(a,c)});b.forEach(function(b){r(a,b)||n(a,b)})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function u(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function w(a,b){var c=2>=arguments.length||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function A(){return"undefined"!==typeof performance&&"undefined"!==typeof performance.now?performance.now():+new Date}function x(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){var c=b.top;b=b.left;"string"===typeof c&&(c=parseFloat(c,
10));"string"===typeof b&&(b=parseFloat(b,10));a.top+=c;a.left+=b});return a}function E(a,b){"string"===typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width);"string"===typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height);return a}function F(a,b){"scrollParent"===b?b=a.scrollParents[0]:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);b===document&&(b=b.documentElement);"undefined"!==typeof b.nodeType&&
function(){var a=h(b),c=getComputedStyle(b);b=[a.left,a.top,a.width+a.left,a.height+a.top];zb.forEach(function(a,d){a=a[0].toUpperCase()+a.substr(1);b[d]="Top"===a||"Left"===a?b[d]+parseFloat(c["border"+a+"Width"]):b[d]-parseFloat(c["border"+a+"Width"])})}();return b}var y=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,
d);return b}}(),z=void 0;"undefined"===typeof z&&(z={modules:[]});var J=null,H=function(){var a=0;return function(){return++a}}(),T={},I=function(){var a=J;a||(a=document.createElement("div"),a.setAttribute("data-tether-id",H()),m(a.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(a),J=a);var b=a.getAttribute("data-tether-id");if("undefined"===typeof T[b]){T[b]={};var a=a.getBoundingClientRect(),c;for(c in a)T[b][c]=a[c];D(function(){delete T[b]})}return T[b]},Q=[],D=function(a){Q.push(a)},
K=function(){for(var a=void 0;a=Q.pop();)a()};b=function(){function a(){d(this,a)}y(a,[{key:"on",value:function(a,b,c){var d=3>=arguments.length||void 0===arguments[3]?!1:arguments[3];"undefined"===typeof this.bindings&&(this.bindings={});"undefined"===typeof this.bindings[a]&&(this.bindings[a]=[]);this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"===typeof this.bindings||"undefined"===typeof this.bindings[a])if("undefined"===
typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!==typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];for(;b<this.bindings[a].length;){var f=this.bindings[a][b],c=f.handler,e=f.once,f=f.ctx;"undefined"===typeof f&&(f=this);c.apply(f,d);e?this.bindings[a].splice(b,1):++b}}}}]);return a}();
z.Utils={getScrollParents:f,getBounds:h,getOffsetParent:g,extend:m,addClass:n,removeClass:l,hasClass:r,updateClasses:t,defer:D,flush:K,uniqueId:H,Evented:b,getScrollBarSize:k,removeUtilElements:e};"use strict";var aa=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;
}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),y=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),p=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;
d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};if("undefined"===typeof z)throw Error("You must include the utils.js file before tether.js");a=z.Utils;var f=a.getScrollParents,h=a.getBounds,g=a.getOffsetParent,m=a.extend,n=a.addClass,l=a.removeClass,t=a.updateClasses,D=a.defer,K=a.flush,k=a.getScrollBarSize,e=a.removeUtilElements,Y=function(){if("undefined"===typeof document)return"";for(var a=document.createElement("div"),b=["transform","webkitTransform","OTransform",
"MozTransform","msTransform"],c=0;c<b.length;++c){var d=b[c];if(void 0!==a.style[d])return d}}(),ba=[],N=function(){ba.forEach(function(a){a.position(!1)});K()};(function(){var a=null,b=null,c=null,d=function Ca(){"undefined"!==typeof b&&16<b?(b=Math.min(b-16,250),c=setTimeout(Ca,250)):"undefined"!==typeof a&&10>A()-a||(null!=c&&(clearTimeout(c),c=null),a=A(),N(),b=A()-a)};"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,
d)})})();var qa={center:"center",left:"right",right:"left"},Ja={middle:"middle",top:"bottom",bottom:"top"},fa={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},ia=function(a,b){var c=a.left,d=a.top;"auto"===c&&(c=qa[b.left]);"auto"===d&&(d=Ja[b.top]);return{left:c,top:d}},B=function(a){var b=a.left,c=a.top;"undefined"!==typeof fa[a.left]&&(b=fa[a.left]);"undefined"!==typeof fa[a.top]&&(c=fa[a.top]);return{left:b,top:c}},ja=function(a){a=a.split(" ");a=aa(a,2);return{top:a[0],left:a[1]}};
a=function(a){function b(a){var c=this;d(this,b);p(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);this.position=this.position.bind(this);ba.push(this);this.history=[];this.setOptions(a,!1);z.modules.forEach(function(a){"undefined"!==typeof a.initialize&&a.initialize.call(c)});this.position()}u(b,a);y(b,[{key:"getClass",value:function(){var a=0>=arguments.length||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!==typeof b&&b[a]?this.options.classes[a]:
this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=1>=arguments.length||void 0===arguments[1]?!0:arguments[1],d=this.options=m({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},a),e=d.target,g=d.targetModifier;this.element=d.element;this.target=e;this.targetModifier=g;"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,
this.targetModifier="scroll-handle");["element","target"].forEach(function(a){if("undefined"===typeof b[a])throw Error("Tether Error: Both element and target must be defined");"undefined"!==typeof b[a].jquery?b[a]=b[a][0]:"string"===typeof b[a]&&(b[a]=document.querySelector(b[a]))});n(this.element,this.getClass("element"));!1!==this.options.addTargetClasses&&n(this.target,this.getClass("target"));if(!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=
ja(this.options.targetAttachment);this.attachment=ja(this.options.attachment);this.offset=ja(this.options.offset);this.targetOffset=ja(this.options.targetOffset);"undefined"!==typeof this.scrollParents&&this.disable();this.scrollParents="scroll-handle"===this.targetModifier?[this.target]:f(this.target);!1!==this.options.enabled&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"!==typeof this.targetModifier){if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,
left:pageXOffset,height:innerHeight,width:innerWidth};var a=h(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};b.height=Math.min(b.height,a.height-(pageYOffset-a.top));b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));b.height=Math.min(innerHeight,b.height);b.height-=2;b.width=Math.min(b.width,a.width-(pageXOffset-a.left));b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));b.width=Math.min(innerWidth,b.width);b.width-=2;b.top<
pageYOffset&&(b.top=pageYOffset);b.left<pageXOffset&&(b.left=pageXOffset);return b}if("scroll-handle"===this.targetModifier){var c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=h(c);var d=getComputedStyle(c),b=0;if(c.scrollWidth>c.clientWidth||0<=[d.overflow,d.overflowX].indexOf("scroll")||this.target!==document.body)b=15;var e=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-b,b={width:15,
height:e/c.scrollHeight*e*.975,left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},f=0;408>e&&this.target===document.body&&(f=-1.1E-4*Math.pow(e,2)-.00727*e+22.58);this.target!==document.body&&(b.height=Math.max(b.height,24));b.top=this.target.scrollTop/(c.scrollHeight-e)*(e-b.height-f)+a.top+parseFloat(d.borderTopWidth);this.target===document.body&&(b.height=Math.max(b.height,24));return b}}else return h(this.target)}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,
b){"undefined"===typeof this._cache&&(this._cache={});"undefined"===typeof this._cache[a]&&(this._cache[a]=b.call(this));return this._cache[a]}},{key:"enable",value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?!0:arguments[0];!1!==this.options.addTargetClasses&&n(this.target,this.getClass("enabled"));n(this.element,this.getClass("enabled"));this.enabled=!0;this.scrollParents.forEach(function(b){b!==document&&b.addEventListener("scroll",a.position)});b&&this.position()}},{key:"disable",
value:function(){var a=this;l(this.target,this.getClass("enabled"));l(this.element,this.getClass("enabled"));this.enabled=!1;"undefined"!==typeof this.scrollParents&&this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}},{key:"destroy",value:function(){var a=this;this.disable();ba.forEach(function(b,c){b===a&&ba.splice(c,1)});0===ba.length&&e()}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment;b=b||this.targetAttachment;"undefined"!==typeof this._addAttachClasses&&
this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length);"undefined"===typeof this._addAttachClasses&&(this._addAttachClasses=[]);var d=this._addAttachClasses;a.top&&d.push(this.getClass("element-attached")+"-"+a.top);a.left&&d.push(this.getClass("element-attached")+"-"+a.left);b.top&&d.push(this.getClass("target-attached")+"-"+b.top);b.left&&d.push(this.getClass("target-attached")+"-"+b.left);var e=[];"left top bottom right middle center".split(" ").forEach(function(a){e.push(c.getClass("element-attached")+
"-"+a);e.push(c.getClass("target-attached")+"-"+a)});D(function(){"undefined"!==typeof c._addAttachClasses&&(t(c.element,c._addAttachClasses,e),!1!==c.options.addTargetClasses&&t(c.target,c._addAttachClasses,e),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var c=ia(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",
function(){return h(a.element)}),e=d.width,f=d.height;0===e&&0===f&&"undefined"!==typeof this.lastSize?(f=this.lastSize,e=f.width,f=f.height):this.lastSize={width:e,height:f};for(var l=this.cache("target-bounds",function(){return a.getTargetBounds()}),m=E(B(this.attachment),{width:e,height:f}),n=E(B(c),l),q=E(this.offset,{width:e,height:f}),r=E(this.targetOffset,l),m=x(m,q),n=x(n,r),p=l.left+n.left-m.left,t=l.top+n.top-m.top,u=0;u<z.modules.length;++u){var w=z.modules[u].position.call(this,{left:p,
top:t,targetAttachment:c,targetPos:l,elementPos:d,offset:m,targetOffset:n,manualOffset:q,manualTargetOffset:r,scrollbarSize:A,attachment:this.attachment});if(!1===w)return!1;"undefined"!==typeof w&&"object"===typeof w&&(t=w.top,p=w.left)}var y={page:{top:t,left:p},viewport:{top:t-pageYOffset,bottom:pageYOffset-t-f+innerHeight,left:p-pageXOffset,right:pageXOffset-p-e+innerWidth}},A=void 0;document.body.scrollWidth>window.innerWidth&&(A=this.cache("scrollbar-size",k),y.viewport.bottom-=A.height);document.body.scrollHeight>
window.innerHeight&&(A=this.cache("scrollbar-size",k),y.viewport.right-=A.width);if(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))y.page.bottom=document.body.scrollHeight-t-f,y.page.right=document.body.scrollWidth-p-e;"undefined"!==typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&"undefined"===typeof this.targetModifier&&function(){var b=a.cache("target-offsetparent",function(){return g(a.target)}),
c=a.cache("target-offsetparent-bounds",function(){return h(b)}),d=getComputedStyle(b),e={};["Top","Left","Bottom","Right"].forEach(function(a){e[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])});c.right=document.body.scrollWidth-c.left-c.width+e.right;c.bottom=document.body.scrollHeight-c.top-c.height+e.bottom;y.page.top>=c.top+e.top&&y.page.bottom>=c.bottom&&y.page.left>=c.left+e.left&&y.page.right>=c.right&&(y.offset={top:y.page.top-c.top+b.scrollTop-e.top,left:y.page.left-c.left+b.scrollLeft-
e.left})}();this.move(y);this.history.unshift(y);3<this.history.length&&this.history.pop();b&&K();return!0}}},{key:"move",value:function(a){var b=this;if("undefined"!==typeof this.element.parentNode){var c={},d;for(d in a){c[d]={};for(var e in a[d]){for(var f=!1,h=0;h<this.history.length;++h){var k=this.history[h];if("undefined"!==typeof k[d]&&!w(k[d][e],a[d][e])){f=!0;break}}f||(c[d][e]=!0)}}var l={top:"",left:"",right:"",bottom:""},n=function(a,c){if(!1!==("undefined"!==typeof b.options.optimizations?
b.options.optimizations.gpu:null)){var d=void 0,e=void 0;a.top?(l.top=0,d=c.top):(l.bottom=0,d=-c.bottom);a.left?(l.left=0,e=c.left):(l.right=0,e=-c.right);l[Y]="translateX("+Math.round(e)+"px) translateY("+Math.round(d)+"px)";"msTransform"!==Y&&(l[Y]+=" translateZ(0)")}else a.top?l.top=c.top+"px":l.bottom=c.bottom+"px",a.left?l.left=c.left+"px":l.right=c.right+"px"},q=!1;(c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(l.position="absolute",n(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&
(c.viewport.left||c.viewport.right)?(l.position="fixed",n(c.viewport,a.viewport)):"undefined"!==typeof c.offset&&c.offset.top&&c.offset.left?function(){l.position="absolute";var d=b.cache("target-offsetparent",function(){return g(b.target)});g(b.element)!==d&&D(function(){b.element.parentNode.removeChild(b.element);d.appendChild(b.element)});n(c.offset,a.offset);q=!0}():(l.position="absolute",n({top:!0,left:!0},a.page));if(!q){d=!0;for(f=this.element.parentNode;f&&1===f.nodeType&&"BODY"!==f.tagName;){if("static"!==
getComputedStyle(f).position){d=!1;break}f=f.parentNode}d||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var r={};d=!1;for(e in l)f=l[e],this.element.style[e]!==f&&(d=!0,r[e]=f);d&&D(function(){m(b.element.style,r)})}}}]);return b}(b);a.modules=[];z.position=N;b=m(a,z);"use strict";aa=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&
(c.push(h.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();a=z.Utils;var h=a.getBounds,m=a.extend,t=a.updateClasses,D=a.defer,zb=["left","top","right","bottom"];z.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints)return!0;a=this.cache("element-bounds",function(){return h(b.element)});
var f=a.height,g=a.width;0===g&&0===f&&"undefined"!==typeof this.lastSize&&(a=this.lastSize,g=a.width,f=a.height);a=this.cache("target-bounds",function(){return b.getTargetBounds()});var k=a.height,l=a.width,n=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass;a=a.pinnedClass;b&&n.push(b);a&&n.push(a)});n.forEach(function(a){["left","top","right","bottom"].forEach(function(b){n.push(a+"-"+b)})});var q=[],r=m({},e),p=m({},
this.attachment);this.options.constraints.forEach(function(a){var h=a.to,m=a.attachment;a=a.pin;"undefined"===typeof m&&(m="");var n=void 0,t=void 0;0<=m.indexOf(" ")?(t=m.split(" "),m=aa(t,2),t=m[0],n=m[1]):n=t=m;h=F(b,h);if("target"===t||"both"===t)c<h[1]&&"top"===r.top&&(c+=k,r.top="bottom"),c+f>h[3]&&"bottom"===r.top&&(c-=k,r.top="top");"together"===t&&("top"===r.top&&("bottom"===p.top&&c<h[1]?(c+=k,r.top="bottom",c+=f,p.top="top"):"top"===p.top&&c+f>h[3]&&c-(f-k)>=h[1]&&(c-=f-k,r.top="bottom",
p.top="bottom")),"bottom"===r.top&&("top"===p.top&&c+f>h[3]?(c-=k,r.top="top",c-=f,p.top="bottom"):"bottom"===p.top&&c<h[1]&&c+(2*f-k)<=h[3]&&(c+=f-k,r.top="top",p.top="top")),"middle"===r.top&&(c+f>h[3]&&"top"===p.top?(c-=f,p.top="bottom"):c<h[1]&&"bottom"===p.top&&(c+=f,p.top="top")));if("target"===n||"both"===n)d<h[0]&&"left"===r.left&&(d+=l,r.left="right"),d+g>h[2]&&"right"===r.left&&(d-=l,r.left="left");"together"===n&&(d<h[0]&&"left"===r.left?"right"===p.left?(d+=l,r.left="right",d+=g,p.left=
"left"):"left"===p.left&&(d+=l,r.left="right",d-=g,p.left="right"):d+g>h[2]&&"right"===r.left?"left"===p.left?(d-=l,r.left="left",d-=g,p.left="right"):"right"===p.left&&(d-=l,r.left="left",d+=g,p.left="left"):"center"===r.left&&(d+g>h[2]&&"left"===p.left?(d-=g,p.left="right"):d<h[0]&&"right"===p.left&&(d+=g,p.left="left")));if("element"===t||"both"===t)c<h[1]&&"bottom"===p.top&&(c+=f,p.top="top"),c+f>h[3]&&"top"===p.top&&(c-=f,p.top="bottom");if("element"===n||"both"===n)d<h[0]&&("right"===p.left?
(d+=g,p.left="left"):"center"===p.left&&(d+=g/2,p.left="left")),d+g>h[2]&&("left"===p.left?(d-=g,p.left="right"):"center"===p.left&&(d-=g/2,p.left="right"));"string"===typeof a?a=a.split(",").map(function(a){return a.trim()}):!0===a&&(a=["top","left","right","bottom"]);a=a||[];var u=[],w=[];c<h[1]&&(0<=a.indexOf("top")?(c=h[1],u.push("top")):w.push("top"));c+f>h[3]&&(0<=a.indexOf("bottom")?(c=h[3]-f,u.push("bottom")):w.push("bottom"));d<h[0]&&(0<=a.indexOf("left")?(d=h[0],u.push("left")):w.push("left"));
d+g>h[2]&&(0<=a.indexOf("right")?(d=h[2]-g,u.push("right")):w.push("right"));u.length&&function(){var a=void 0,a="undefined"!==typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned");q.push(a);u.forEach(function(b){q.push(a+"-"+b)})}();w.length&&function(){var a=void 0,a="undefined"!==typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds");q.push(a);w.forEach(function(b){q.push(a+"-"+b)})}();if(0<=u.indexOf("left")||0<=u.indexOf("right"))p.left=r.left=
!1;if(0<=u.indexOf("top")||0<=u.indexOf("bottom"))p.top=r.top=!1;if(r.top!==e.top||r.left!==e.left||p.top!==b.attachment.top||p.left!==b.attachment.left)b.updateAttachClasses(p,r),b.trigger("update",{attachment:p,targetAttachment:r})});D(function(){!1!==b.options.addTargetClasses&&t(b.target,q,n);t(b.element,q,n)});return{top:c,left:d}}});"use strict";a=z.Utils;h=a.getBounds;t=a.updateClasses;D=a.defer;z.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",
function(){return h(b.element)});a=e.height;var e=e.width,f=this.getTargetBounds(),g=c+a,k=d+e,l=[];c<=f.bottom&&g>=f.top&&["left","right"].forEach(function(a){var b=f[a];b!==d&&b!==k||l.push(a)});d<=f.right&&k>=f.left&&["top","bottom"].forEach(function(a){var b=f[a];b!==c&&b!==g||l.push(a)});var m=[],n=[];m.push(this.getClass("abutted"));["left","top","right","bottom"].forEach(function(a){m.push(b.getClass("abutted")+"-"+a)});l.length&&n.push(this.getClass("abutted"));l.forEach(function(a){n.push(b.getClass("abutted")+
"-"+a)});D(function(){!1!==b.options.addTargetClasses&&t(b.target,n,m);t(b.element,n,m)});return!0}});"use strict";aa=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}();z.modules.push({position:function(a){var b=a.top;a=a.left;if(this.options.shift){var c=this.options.shift;"function"===typeof this.options.shift&&(c=this.options.shift.call(this,{top:b,left:a}));var d=void 0,e=void 0;"string"===typeof c?(c=c.split(" "),c[1]=c[1]||c[0],c=aa(c,2),d=c[0],e=c[1],d=parseFloat(d,10),e=parseFloat(e,10)):(d=c.top,e=c.left);return{top:b+d,left:a+e}}}});return b});
(function(a,b){"function"===typeof define&&define.amd?define(["tether"],b):"object"===typeof exports?module.exports=b(require("tether")):a.Drop=b(a.Tether)})(this,function(a){function b(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a){a=
a.split(" ");var b=h(a,2);a=b[0];b=b[1];0<=["left","right"].indexOf(a)&&(b=[b,a],a=b[0],b=b[1]);return[a,b].join(" ")}function d(a,b){for(var c=void 0,d=[];-1!==(c=a.indexOf(b));)d.push(a.splice(c,1));return d}function f(){var h=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],k=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new (e.apply(E,[null].concat(b)))};m(k,{createContext:f,drops:[],defaults:{}});var w={classPrefix:"drop",defaults:{position:"bottom left",
openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,loadContentOnDemand:!1,tetherOptions:{}}};m(k,w,h);m(k.defaults,w.defaults,h.defaults);"undefined"===typeof x[k.classPrefix]&&(x[k.classPrefix]=[]);k.updateBodyClasses=function(){for(var a=!1,b=x[k.classPrefix],c=b.length,d=0;d<c;++d)if(b[d].isOpened()){a=!0;break}a?l(document.body,k.classPrefix+"-open"):
n(document.body,k.classPrefix+"-open")};var E=function(e){function f(a){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var b;a:{var c=Object.getPrototypeOf(f.prototype),d="constructor";b=this;var e=!0;for(;e;)if(null===c&&(c=Function.prototype),e=Object.getOwnPropertyDescriptor(c,d),void 0===e){c=Object.getPrototypeOf(c);if(null===c)break;e=!0}else{if("value"in e){b=e.value;break a}d=e.get;b=void 0===d?void 0:d.call(b);break a}b=void 0}b.call(this);this.options=m({},
k.defaults,a);this.target=this.options.target;if("undefined"===typeof this.target)throw Error("Drop Error: You must provide a target.");a="data-"+k.classPrefix;if(b=this.target.getAttribute(a))this.options.content=b;b=["position","openOn"];for(d=0;d<b.length;++d)(c=this.target.getAttribute(a+"-"+b[d]))&&(this.options[b[d]]=c);this.options.classes&&!1!==this.options.addTargetClasses&&l(this.target,this.options.classes);k.drops.push(this);x[k.classPrefix].push(this);this._boundEvents=[];this.bindMethods();
this.setupElements();this.setupEvents();this.setupTether()}b(f,e);g(f,[{key:"_on",value:function(a,b,c){this._boundEvents.push({element:a,event:b,handler:c});a.addEventListener(b,c)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var a=this;this.drop=document.createElement("div");l(this.drop,k.classPrefix);this.options.classes&&l(this.drop,this.options.classes);this.content=document.createElement("div");
l(this.content,k.classPrefix+"-content");if("function"===typeof this.options.content){var b=function(){var b=a.options.content.call(a,a);if("string"===typeof b)a.content.innerHTML=b;else if("object"===typeof b)a.content.innerHTML="",a.content.appendChild(b);else throw Error("Drop Error: Content function should return a string or HTMLElement.");};if(this.options.loadContentOnDemand)this.on("beforeOpen",b.bind(this));else b(),this.on("open",b.bind(this))}else"object"===typeof this.options.content?this.content.appendChild(this.options.content):
this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var b=this.options.position.split(" ");b[0]=A[b[0]];var b=b.join(" "),d=[];this.options.constrainToScrollParent?d.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):d.push({to:"scrollParent"});!1!==this.options.constrainToWindow?d.push({to:"window",attachment:"together"}):d.push({to:"window"});b={element:this.drop,target:this.target,attachment:c(b),targetAttachment:c(this.options.position),
classPrefix:k.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:d,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new a(m({},b,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var a=this;if(this.options.openOn)if("always"===this.options.openOn)setTimeout(this.open.bind(this));else{var b=this.options.openOn.split(" ");if(0<=b.indexOf("click"))for(var c=function(b){a.toggle(b);b.preventDefault()},d=function(b){a.isOpened()&&
(b.target===a.drop||a.drop.contains(b.target)||b.target===a.target||a.target.contains(b.target)||a.close(b))},e=0;e<t.length;++e){var f=t[e];this._on(this.target,f,c);this._on(document,f,d)}var g=null,h=null,c=function(b){null!==h?clearTimeout(h):g=setTimeout(function(){a.open(b);g=null},("focus"===b.type?a.options.focusDelay:a.options.hoverOpenDelay)||a.options.openDelay)},d=function(b){null!==g?clearTimeout(g):h=setTimeout(function(){a.close(b);h=null},("blur"===b.type?a.options.blurDelay:a.options.hoverCloseDelay)||
a.options.closeDelay)};0<=b.indexOf("hover")&&(this._on(this.target,"mouseover",c),this._on(this.drop,"mouseover",c),this._on(this.target,"mouseout",d),this._on(this.drop,"mouseout",d));0<=b.indexOf("focus")&&(this._on(this.target,"focus",c),this._on(this.drop,"focus",c),this._on(this.target,"blur",d),this._on(this.drop,"blur",d))}}},{key:"isOpened",value:function(){if(this.drop)return r(this.drop,k.classPrefix+"-open")}},{key:"toggle",value:function(a){this.isOpened()?this.close(a):this.open(a)}},
{key:"open",value:function(a){var b=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!==typeof this.tether&&this.tether.enable(),l(this.drop,k.classPrefix+"-open"),l(this.drop,k.classPrefix+"-open-transitionend"),setTimeout(function(){b.drop&&l(b.drop,k.classPrefix+"-after-open")}),this.trigger("beforeOpen"),"undefined"!==typeof this.tether&&this.tether.position(),this.trigger("open"),k.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(a){a.target===
a.currentTarget&&(r(this.drop,k.classPrefix+"-open")||n(this.drop,k.classPrefix+"-open-transitionend"),this.drop.removeEventListener(u,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(a){var b=!0;this.isClosing||"function"!==typeof this.options.beforeClose||(this.isClosing=!0,b=!1!==this.options.beforeClose(a,this));this.isClosing=!1;return b}},{key:"close",value:function(a){this.isOpened()&&this.beforeCloseHandler(a)&&(n(this.drop,k.classPrefix+"-open"),n(this.drop,k.classPrefix+
"-after-open"),this.drop.addEventListener(u,this.transitionEndHandler),this.trigger("close"),"undefined"!==typeof this.tether&&this.tether.disable(),k.updateBodyClasses(),this.options.remove&&this.remove(a))}},{key:"remove",value:function(a){this.close(a);this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!==typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove();"undefined"!==typeof this.tether&&
this.tether.destroy();for(var a=0;a<this._boundEvents.length;++a){var b=this._boundEvents[a];b.element.removeEventListener(b.event,b.handler)}this._boundEvents=[];this.target=this.content=this.drop=this.tether=null;d(x[k.classPrefix],this);d(k.drops,this)}}]);return f}(q);return k}var e=Function.prototype.bind,h=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(c.push(h.value),
!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=a.Utils,m=k.extend,l=k.addClass,n=k.removeClass,r=k.hasClass,
q=k.Evented,t=["click"];"ontouchstart"in document.documentElement&&t.push("touchstart");var k={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},u="",w;for(w in k)({}).hasOwnProperty.call(k,w)&&"undefined"!==typeof document.createElement("p").style[w]&&(u=k[w]);var A={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},x={},E=f();document.addEventListener("DOMContentLoaded",function(){E.updateBodyClasses()});
return E});angular.module("genius").factory("TetherDrop",["$window",function(a){return a.Drop}]);
angular.module("genius").factory("TextSelection",["$window","$document","$rootScope","$immediate","XpathRange",function(a,b,c,d,f){var e=c.$new(),h=function(a,b){return a&&b&&a.length===b.length?_.every(_.zip(a,b),function(a){var b=a[0];a=a[1];return b.startOffset===a.startOffset&&b.endOffset===a.endOffset&&b.startContainer.isEqualNode(a.startContainer)&&b.endContainer.isEqualNode(a.endContainer)}):!1},g=function(){var c;c=(a.getSelection||b[0].getSelection||$.noop)();c=void 0===c||!c.rangeCount||
c.isCollapsed?void 0:c;if(!c)return[];for(var d=[],e=0;e<c.rangeCount;e++){var f=c.getRangeAt(e);.1<f.getBoundingClientRect().width&&d.push(f)}return d},k=[],m=function(){var a=g();h(a,k)||(k=a,e.$emit("selection",{ranges:a}))};e.restore_selection_if_clobbered=function(a,b){var c=g(),d;c.length&&(d=f.fromRange(c[0],a));c=b();if(d&&!g().length){d=f.toRange(d.start,d.startOffset,d.end,d.endOffset,a);var e=getSelection();e.removeAllRanges();e.addRange(d);m()}return c};b.on("mouseup keyup",function(a){(!a.keyCode||
37<=a.keyCode&&40>=a.keyCode)&&d(m)});return e}]);
angular.module("genius").factory("TimestampedDataFeed",[function(){return function(){return function(a,b,c,d){void 0===c&&(c={});void 0===d&&(d=Math.floor((new Date).getTime()/1E3));var f=this;this.reset=function(){f.timestamp_for_next_page=d};this.reset();this.params=_.clone(c);this.next=function(){return a(_.assign({timestamp_for_next_page:f.timestamp_for_next_page},f.params)).then(function(a){f.timestamp_for_next_page=a.timestamp_for_next_page;return a[b]})};this.has_next=function(){return f.timestamp_for_next_page}}}()}]);
angular.module("genius").factory("TopBarIndicatorsLoader",["EagerLoader","$http","Session",function(a,b,c){var d=new a;a=function(){c.user_signed_in&&b.get("/top_bar_indicators",{retries:2}).then(function(a){for(var b in a.data)d.loaded(b,a.data[b])})};a();return{listen_for:d.listen_for.bind(d),refresh:a}}]);
angular.module("genius").factory("Tracking",["$window","AbTest","$timeout",function(a,b,c){var d=a.app.tracking,f=b.get_ab_tests().then(function(a){var b={};_.forIn(a,function(a,c){b["AB Test - "+c]=a});d.register(b)}),e=[];_.assign(d,{delayed_track:function(a,b){void 0===b&&(b={});e.push({event:a,properties:b});f.finally(function(){return c(function(){d.track(a,b);_.remove(e,{event:a})},3E3)})},attach_to_delayed_track:function(a,b){_.forEach(e,function(c){_.forEach(b,function(b,d){c.properties[a+
" - "+d]=b})})}});return d}]);angular.module("genius").factory("Twitter",["$window","querystring",function(a,b){return{share:function(c){c="https://twitter.com/intent/tweet?"+b.stringify({url:c.url,text:c.message});a.open(c)}}}]);
angular.module("genius").factory("UserClient",["ApiClient","$http","AppConfig","$q",function(a,b,c,d){var f=function(a){var b=Error(a.data.meta.message);_.assign(b,_.pick(a,"status","statusText"));return d.reject(_.assign(b,a.data.response))},e={autocomplete_api_endpoint:c.api_root_url+"/users/autocomplete",transform_autocomplete_results:function(a){return a.response.users},contribution_opportunity_assignments:function(b){return a.get("/users/:id/contribution_opportunity_assignments",{id:b,text_format:"html,markdown"})},
mark_contribution_opportunity_assignments_read:function(b){return a.post("/users/:id/contribution_opportunity_assignments/mark_read",{id:b})},dismiss_contribution_opportunities_explanation:function(b){return a.delete("/users/:id/contribution_opportunities_explanation",{id:b})},accomplishments:function(a,d){return b.get(c.api_root_url+"/users/"+a+"/accomplishments",{params:d}).then(function(a){return a.data.response})},autocomplete:function(a){var c=this;return b.get(this.autocomplete_api_endpoint,
{params:{q:a}}).then(function(a){return c.transform_autocomplete_results(a.data)})},load:function(a){return b.get(c.api_root_url+"/users/"+a).then(function(a){return a.data.response.user})},impersonate:function(a){return b.post("/users/impersonate",{login:a})},autocomplete_options:{parse:function(a){a=e.transform_autocomplete_results(a);return _.map(a,function(a){return{data:[a.login],value:a.login,result:a.login}})}},load_followers_by_artist:function(a,d){return b.get(c.api_root_url+"/artists/"+
a+"/followers",{params:d}).then(function(a){return a.data.response})},load_followers_by_user:function(a,d){return b.get(c.api_root_url+"/users/"+a+"/followers",{params:d}).then(function(a){return a.data.response})},load_followed_users:function(a,d){return b.get(c.api_root_url+"/users/"+a+"/followed_users",{params:d}).then(function(a){return a.data.response})},load_contributions:function(a,d,e){return b.get(c.api_root_url+"/users/"+a+"/contributions"+(d?"/"+d:""),{params:e}).then(function(a){return a.data.response})},
update:function(a,d){return b.put(c.api_root_url+"/users/"+a,d,{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response}).catch(function(a){return f(a)})},load_recent_signups:function(a,d){d.spam_state=a;return b.get(c.api_root_url+"/users/recent_signups",{params:d}).then(function(a){return a.data.response})},add_role:function(a,d){return b.put(c.api_root_url+"/users/"+a+"/roles/"+d).then(function(a){return a.data.response}).catch(function(a){return f(a)})},remove_role:function(a,
d){return b.delete(c.api_root_url+"/users/"+a+"/roles/"+d).then(function(a){return a.data.response}).catch(function(a){return f(a)})},associate_with_artist:function(a,d){return b.put(c.api_root_url+"/users/"+a+"/artist",d).then(function(a){return a.data.response}).catch(function(a){return f(a)})},dissociate_from_artist:function(a){return b.delete(c.api_root_url+"/users/"+a+"/artist").then(function(a){return a.data.response}).catch(function(a){return f(a)})},penalty_box:function(a){return b.put(c.api_root_url+
"/users/"+a+"/penalty_box").then(function(a){return a.data.response}).catch(function(a){return f(a)})},unpenalty_box:function(a){return b.delete(c.api_root_url+"/users/"+a+"/penalty_box").then(function(a){return a.data.response}).catch(function(a){return f(a)})},update_spam_state:function(a,d){return b.put(c.api_root_url+"/users/"+a+"/spam",d).then(function(a){return a.data.response}).catch(function(a){return f(a)})},mass_delete_unreviewed_activity:function(a){return b.delete(c.api_root_url+"/users/"+
a+"/unreviewed_activity").then(function(a){return a.data.response}).catch(function(a){return f(a)})},delete_votes:function(a,d){return b.delete(c.api_root_url+"/users/"+a+"/"+d).then(function(a){return a.data.response}).catch(function(a){return f(a)})},other_users_with_ip:function(a,d){return b.get(c.api_root_url+"/users/"+a+"/other_users_with_ip",{params:d}).then(function(a){return a.data.response})},get_slug:function(a){return _(this.get_path(a).split("/")).last()},get_path:function(a){return(new URL(a.url)).pathname},
activity_line_items:function(a,d){return b.get(c.api_root_url+"/users/"+a+"/activity_stream/line_items",{params:d}).then(function(a){return a.data.response})},spam_status:function(a){return b.get(c.api_root_url+"/users/"+a+"/spam_status").then(function(a){return a.data.response})},logout:function(){return b.delete("/logout")}};return e}]);angular.module("genius").factory("VideoClient",["ApiClient",function(a){return{index:function(b){return a.get("/videos",b)}}}]);
__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])}return a};
angular.module("genius").factory("VideoListClient",["ApiClient",function(a){return{index:function(b){return a.get("/video_lists",b)},update:function(b,c){return a.returning("video_list").put("/video_lists/:id",{id:b,video_list:c})},videos:function(b,c){return a.get("/video_lists/by_slug/:slug/videos",__assign({slug:b},c))}}}]);
angular.module("genius").factory("VideoPlacement",["Tracking","VideoRegistry","$immediate",function(a,b,c){return function(){function d(a,d,h){void 0===h&&(h=_.noop);var g=this;this.object=a;this.name=d;c(function(){b.videos_for_placement(g.object,g.name).then(function(a){g.videos=a;g.track_loaded();h(g.videos)});g.page_type=b.current_page_type(g.object)})}d.prototype.tracking_data=function(a){return{"Page Type":this.page_type,Placement:this.name,Position:_.indexOf(this.videos,a)+1,"Video ID":a.id,
Relevance:a.relevance,"Object Type":this.object._type,"Object ID":this.object.id}};d.prototype.track_loaded=function(){var b=this,c={};_.forEach(this.videos,function(a){c[a.relevance]=c[a.relevance]||[];c[a.relevance].push(a)});_.forEach(c,function(c,d){a.attach_to_delayed_track("Videos Loaded (placement: "+b.name+", relevance: "+d+")",{IDs:_.map(c,"id")})})};return d}()}]);
angular.module("genius").factory("VideoRegistry",["VideoClient","PagedDataFeed","$q","PromiseQueue","AppConfig","SessionConfig",function(a,b,c,d,f,e){var h=["high","medium","low"],g={},k=function(a){return a._type+":"+a.id},m=function(){return function(a){this.video=a;this.claimed=!1}}(),l=function(){function g(d,e){var h=this;this.name=e;this.placements=_.map(f.video_placements[e],"name");"song"===d._type&&d.song_story&&_.remove(this.placements,function(a){return"sidebar"===a||"sidebar_thumb"===
a});this.placement_deferreds={};_.forEach(this.placements,function(a){h.placement_deferreds[a]=c.defer()});this.videos_with_metadata=[];var k={};k[d._type+"_id"]=d.id;this.paged_data_feed=new b(a.index,"videos",k,1,function(a){h.videos_with_metadata=h.videos_with_metadata.concat(_.map(a,function(a){return new m(a)}))});this.series_videos_with_metadata=[];this.series_paged_data_feed=new b(a.index,"videos",_.merge({series:!0},k),1,function(a){h.series_videos_with_metadata=h.series_videos_with_metadata.concat(_.map(a,
function(a){return new m(a)}))});this.resolve_placements()}g.prototype.next_unclaimed_video=function(a,b){var d=this,e=b?this.series_paged_data_feed:this.paged_data_feed,f=c.defer(),g=_.reject(b?this.series_videos_with_metadata:this.videos_with_metadata,"claimed");_.some(g)?(e=_.head(g),h.indexOf(e.video.relevance)<=h.indexOf(a)?f.resolve(e):f.reject()):e.has_next()?e.next().then(function(){return f.resolve(d.next_unclaimed_video(a,b))}):f.reject();return f.promise};g.prototype.resolve_placements=
function(){var a=this,b=new d;_.forEach(this.placements,function(c){return b.add(function(){return a.resolve_placement(c)})})};g.prototype.resolve_placement=function(a){var b=this,g=_.find(f.video_placements[this.name],{name:a}),h=e.fringe_enabled&&!_.isUndefined(g.fringe_min_relevance)?g.fringe_min_relevance:g.min_relevance,k=[],l=new d({fail_fast:!0}),m=_.times(g.max_videos,function(){return l.add(function(){return b.next_unclaimed_video(h,g.series).then(function(a){a.claimed=!0;k.push(a)})})});
c.all(m).finally(function(){return b.placement_deferreds[a].resolve(_.map(k,"video"))});return this.placement_deferreds[a].promise};g.prototype.videos_for_placement=function(a){return this.placement_deferreds[a].promise};g.prototype.videos=function(){return _.map(this.videos_with_metadata,"video")};return g}();return{current_page_type:function(a){return g[k(a)].name},register_page:function(a,b){g[k(a)]=new l(a,b)},videos_for_placement:function(a,b){return g[k(a)].videos_for_placement(b)},videos_for:function(a){return g[k(a)].videos()},
paged_data_feed_for:function(a){return g[k(a)].paged_data_feed}}}]);angular.module("genius").factory("VideoSourcesClient",["ApiClient",function(a){return{index:function(b){return a.returning("video_sources").get("/videos/:video_id/video_sources",{video_id:b})},create:function(b,c){return a.returning("video_source").post("/videos/:video_id/video_sources",{video_id:b,video_source:c})},destroy:function(b){return a.delete("/video_sources/:video_source_id",{video_source_id:b})}}}]);
angular.module("genius").factory("VoteClient",["AppConfig","querystring","$http",function(a,b,c){return{load_voters:function(d,f){var e=_.set({},d+"_id",f);return c.get(a.api_root_url+"/voters?"+b.stringify(e)).then(function(a){return a.data.response.voters})},submit_vote:function(b,f,e){b=_.set({direction:e||"middle"},b+"_id",f);return c.post(a.api_root_url+"/votes",b)}}}]);
angular.module("genius").factory("wait_for_global",["$q","$window",function(a,b){return function(c,d){if(_.get(b,c))return a.when(_.get(b,c));d=_.defaults(d||{},{timeout:1E3});return a(function(a,e){setTimeout(function(){clearInterval(h);e(Error("timed out waiting for '"+c+"' to load"))},d.timeout);var h=setInterval(function(){var d=_.get(b,c);d&&(clearInterval(h),a(d))},50)})}}]);
angular.module("genius").factory("wait_until",["$q",function(a){return function(b,c){void 0===c&&(c={});return a(function(a,f){var e=setTimeout(function(){clearInterval(h);f(Error("timed out waiting for condition"))},c.timeout||1E4),h=setInterval(function(){b()&&(clearInterval(h),clearTimeout(e),a())},50)})}}]);
!function(){function a(d){if(!d)throw Error("No options passed to Waypoint constructor");if(!d.element)throw Error("No element option passed to Waypoint constructor");if(!d.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+b;this.options=a.Adapter.extend({},a.defaults,d);this.element=this.options.element;this.adapter=new a.Adapter(this.element);this.callback=d.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;
this.triggerPoint=null;this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=a.Context.findOrCreateByElement(this.options.context);a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]);this.group.add(this);this.context.add(this);c[this.key]=this;b+=1}var b=0,c={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)};a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)};a.prototype.destroy=
function(){this.context.remove(this);this.group.remove(this);delete c[this.key]};a.prototype.disable=function(){return this.enabled=!1,this};a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this};a.prototype.next=function(){return this.group.next(this)};a.prototype.previous=function(){return this.group.previous(this)};a.invokeAll=function(a){var b=[],e;for(e in c)b.push(c[e]);e=0;for(var h=b.length;h>e;e++)b[e][a]()};a.destroyAll=function(){a.invokeAll("destroy")};a.disableAll=
function(){a.invokeAll("disable")};a.enableAll=function(){a.invokeAll("enable")};a.refreshAll=function(){a.Context.refreshAll()};a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};a.viewportWidth=function(){return document.documentElement.clientWidth};a.adapters=[];a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0};a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},
"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=a}();
(function(){function a(a){window.setTimeout(a,1E3/60)}function b(a){this.element=a;this.Adapter=f.Adapter;this.adapter=new this.Adapter(a);this.key="waypoint-context-"+c;this.didResize=this.didScroll=!1;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};a.waypointContextKey=this.key;d[a.waypointContextKey]=this;c+=1;this.createThrottledScrollHandler();this.createThrottledResizeHandler()}var c=0,d={},f=window.Waypoint,e=window.onload;
b.prototype.add=function(a){this.waypoints[a.options.horizontal?"horizontal":"vertical"][a.key]=a;this.refresh()};b.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical);a&&b&&(this.adapter.off(".waypoints"),delete d[this.key])};b.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize();b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=
!0,f.requestAnimationFrame(a))})};b.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll();b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){b.didScroll&&!f.isTouch||(b.didScroll=!0,f.requestAnimationFrame(a))})};b.prototype.handleResize=function(){f.Context.refreshAll()};b.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),
oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c;for(c in b){var d=b[c],e=d.newScroll>d.oldScroll?d.forward:d.backward,f;for(f in this.waypoints[c]){var r=this.waypoints[c][f],q=d.oldScroll<r.triggerPoint,t=d.newScroll>=r.triggerPoint,u=!q&&!t;(q&&t||u)&&(r.queueTrigger(e),a[r.group.id]=r.group)}}for(var w in a)a[w].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};b.prototype.innerHeight=function(){return this.element==this.element.window?f.viewportHeight():
this.adapter.innerHeight()};b.prototype.remove=function(a){delete this.waypoints[a.axis][a.key];this.checkEmpty()};b.prototype.innerWidth=function(){return this.element==this.element.window?f.viewportWidth():this.adapter.innerWidth()};b.prototype.destroy=function(){var a=[],b;for(b in this.waypoints)for(var c in this.waypoints[b])a.push(this.waypoints[b][c]);b=0;for(c=a.length;c>b;b++)a[b].destroy()};b.prototype.refresh=function(){var a,b=(a=this.element==this.element.window)?void 0:this.adapter.offset(),
c={};this.handleScroll();a={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var d in a){var b=a[d],e;for(e in this.waypoints[d]){var n,r,q,t=this.waypoints[d][e];q=t.options.offset;
n=t.triggerPoint;r=0;var u=null==n;t.element!==t.element.window&&(r=t.adapter.offset()[b.offsetProp]);"function"==typeof q?q=q.apply(t):"string"==typeof q&&(q=parseFloat(q),-1<t.options.offset.indexOf("%")&&(q=Math.ceil(b.contextDimension*q/100)));t.triggerPoint=r+(b.contextScroll-b.contextOffset)-q;n=n<b.oldScroll;r=t.triggerPoint>=b.oldScroll;q=n&&r;n=!n&&!r;!u&&q?(t.queueTrigger(b.backward),c[t.group.id]=t.group):!u&&n?(t.queueTrigger(b.forward),c[t.group.id]=t.group):u&&b.oldScroll>=t.triggerPoint&&
(t.queueTrigger(b.forward),c[t.group.id]=t.group)}}return f.requestAnimationFrame(function(){for(var a in c)c[a].flushTriggers()}),this};b.findOrCreateByElement=function(a){return b.findByElement(a)||new b(a)};b.refreshAll=function(){for(var a in d)d[a].refresh()};b.findByElement=function(a){return d[a.waypointContextKey]};window.onload=function(){e&&e();b.refreshAll()};f.requestAnimationFrame=function(b){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
a).call(window,b)};f.Context=b})();
(function(){function a(a,b){return a.triggerPoint-b.triggerPoint}function b(a,b){return b.triggerPoint-a.triggerPoint}function c(a){this.name=a.name;this.axis=a.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();d[this.axis][this.name]=this}var d={vertical:{},horizontal:{}},f=window.Waypoint;c.prototype.add=function(a){this.waypoints.push(a)};c.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};c.prototype.flushTriggers=function(){for(var c in this.triggerQueues){var d=
this.triggerQueues[c];d.sort("up"===c||"left"===c?b:a);for(var f=0,k=d.length;k>f;f+=1){var m=d[f];(m.options.continuous||f===d.length-1)&&m.trigger([c])}}this.clearTriggerQueues()};c.prototype.next=function(b){this.waypoints.sort(a);b=f.Adapter.inArray(b,this.waypoints);return b===this.waypoints.length-1?null:this.waypoints[b+1]};c.prototype.previous=function(b){this.waypoints.sort(a);return(b=f.Adapter.inArray(b,this.waypoints))?this.waypoints[b-1]:null};c.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)};
c.prototype.remove=function(a){a=f.Adapter.inArray(a,this.waypoints);-1<a&&this.waypoints.splice(a,1)};c.prototype.first=function(){return this.waypoints[0]};c.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};c.findOrCreate=function(a){return d[a.axis][a.name]||new c(a)};f.Group=c})();
(function(){function a(a){this.$element=b(a)}var b=window.jQuery,c=window.Waypoint;b.each("innerHeight innerWidth off offset on outerHeight outerWidth scrollLeft scrollTop".split(" "),function(b,c){a.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return this.$element[c].apply(this.$element,a)}});b.each(["extend","inArray","isEmptyObject"],function(c,f){a[f]=b[f]});c.adapters.push({name:"jquery",Adapter:a});c.Adapter=a})();
(function(){function a(a){return function(d,f){var e=[],h=d;return a.isFunction(d)&&(h=a.extend({},f),h.handler=d),this.each(function(){var d=a.extend({},h,{element:this});"string"==typeof d.context&&(d.context=a(this).closest(d.context)[0]);e.push(new b(d))}),e}}var b=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=a(window.jQuery));window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))})();
!function(){function a(d){this.options=b.extend({},c.defaults,a.defaults,d);this.element=this.options.element;this.$element=b(this.element);this.createWrapper();this.createWaypoint()}var b=window.jQuery,c=window.Waypoint;a.prototype.createWaypoint=function(){var a=this.options.handler;this.waypoint=new c(b.extend({},this.options,{element:this.wrapper,handler:b.proxy(function(b){var c=-1<this.options.direction.indexOf(b),h=c?this.$element.outerHeight(!0):"";this.$wrapper.height(h);this.$element.toggleClass(this.options.stuckClass,
c);a&&a.call(this,b)},this)}))};a.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper);this.$wrapper=this.$element.parent();this.wrapper=this.$wrapper[0]};a.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())};a.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"};c.Sticky=
a}();angular.module("genius").factory("Waypoint",["$window",function(a){return a.Waypoint}]);
angular.module("genius").factory("WebAnnotatorClient",["ApiClient",function(a){return{load_web_page:function(b){return a.returning("web_page").get("/web_pages/:id",{id:b})},protect_web_page:function(b){return a.returning("web_page").post("/web_pages/:id/protect",{id:b})},unprotect_web_page:function(b){return a.returning("web_page").post("/web_pages/:id/unprotect",{id:b})},publish_web_page_drafts:function(b){return a.returning("web_page").post("/web_pages/:id/publish_drafts",{id:b})},load_user_roles:function(b,
c){return a.returning("user_web_page_roles").get("/:type/:id/user_roles",{type:b,id:c})},create_user_role:function(b,c,d){return a.returning("user_web_page_role").post("/:type/:id/user_roles",{type:b,id:c,user_web_page_role:d})},update_user_role:function(b,c){return a.returning("user_web_page_role").put("/user_web_page_roles/:id",{id:b,user_web_page_role:c})},destroy_user_role:function(b){return a.delete("/user_web_page_roles/:id",{id:b})}}}]);
angular.module("genius").factory("WebAudioPlayer",["$document","$interval",function(a,b){return function(){function c(c){var f=this;this._callback=c;this._audio=a[0].createElement("audio");b(function(){return f._callback(f.state)},50)}c.prototype.pause=function(){this._audio.pause();this._callback(this.state)};c.prototype.play=function(a){a&&this._audio.src!==a&&(this._audio.src=a,this._audio.currentTime=0);this._audio.play();this._callback(this.state)};c.prototype.seek=function(a,b){var c=(void 0===
b?{play:!1}:b).play;this._audio.currentTime=a/1E3;c&&this._audio.play();this._callback(this.state)};c.prototype.print_log_entries=function(){};c.prototype.download_log_entries=function(){};Object.defineProperty(c.prototype,"state",{get:function(){return{is_playing:!this._audio.paused,position:1E3*this._audio.currentTime,duration:1E3*this._audio.duration,track_uri:this._audio.src}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"playback_type",{get:function(){return"web_audio"},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"playback_label",{get:function(){return"Web Audio"},enumerable:!0,configurable:!0});return c}()}]);
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).webVitals={})}(this,function(a){var b,c,d,f,e=function(a,b){return{name:a,value:void 0===b?-1:b,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1E12)}},h=function(a,b){try{if(PerformanceObserver.supportedEntryTypes.includes(a)&&("first-input"!==a||"PerformanceEventTiming"in
self)){var c=new PerformanceObserver(function(a){return a.getEntries().map(b)});return c.observe({type:a,buffered:!0}),c}}catch(d){}},g=function(a,b){var c=function Q(c){"pagehide"!==c.type&&"hidden"!==document.visibilityState||(a(c),b&&(removeEventListener("visibilitychange",Q,!0),removeEventListener("pagehide",Q,!0)))};addEventListener("visibilitychange",c,!0);addEventListener("pagehide",c,!0)},k=function(a){addEventListener("pageshow",function(b){b.persisted&&a(b)},!0)},m=function(a,b,c){var d;
return function(e){0<=b.value&&(e||c)&&(b.delta=b.value-(d||0),(b.delta||void 0===d)&&(d=b.value,a(b)))}},l=-1,n=function(){g(function(a){l=a.timeStamp},!0)},r=function(){return 0>l&&(l="hidden"===document.visibilityState?0:1/0,n(),k(function(){setTimeout(function(){l="hidden"===document.visibilityState?0:1/0;n()},0)})),{get firstHiddenTime(){return l}}},q=function(a,b){var c,d=r(),f=e("FCP"),g=function(a){"first-contentful-paint"===a.name&&(n&&n.disconnect(),a.startTime<d.firstHiddenTime&&(f.value=
a.startTime,f.entries.push(a),c(!0)))},l=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],n=l?null:h("paint",g);(l||n)&&(c=m(a,f,b),l&&g(l),k(function(d){f=e("FCP");c=m(a,f,b);requestAnimationFrame(function(){requestAnimationFrame(function(){f.value=performance.now()-d.timeStamp;c(!0)})})}))},t=!1,u=-1,w={passive:!0,capture:!0},A=new Date,x=function(a,e){b||(b=e,c=a,d=new Date,y(removeEventListener),E())},E=function(){if(0<=c&&c<d-A){var a={entryType:"first-input",
name:b.type,target:b.target,cancelable:b.cancelable,startTime:b.timeStamp,processingStart:b.timeStamp+c};f.forEach(function(b){b(a)});f=[]}},F=function(a){if(a.cancelable){var b=(1E12<a.timeStamp?new Date:performance.now())-a.timeStamp;"pointerdown"==a.type?function(a,b){var c=function(){x(a,b);e()},d=function(){e()},e=function(){removeEventListener("pointerup",c,w);removeEventListener("pointercancel",d,w)};addEventListener("pointerup",c,w);addEventListener("pointercancel",d,w)}(b,a):x(b,a)}},y=function(a){["mousedown",
"keydown","touchstart","pointerdown"].forEach(function(b){return a(b,F,w)})},z=new Set;a.getCLS=function(a,b){t||(q(function(a){u=a.value}),t=!0);var c,d=function(b){-1<u&&a(b)},f=e("CLS",0),l=0,n=[],r=function(a){if(!a.hadRecentInput){var b=n[0],d=n[n.length-1];l&&1E3>a.startTime-d.startTime&&5E3>a.startTime-b.startTime?(l+=a.value,n.push(a)):(l=a.value,n=[a]);l>f.value&&(f.value=l,f.entries=n,c())}},p=h("layout-shift",r);p&&(c=m(d,f,b),g(function(){p.takeRecords().map(r);c(!0)}),k(function(){l=
0;u=-1;f=e("CLS",0);c=m(d,f,b)}))};a.getFCP=q;a.getFID=function(a,d){var l,n=r(),q=e("FID"),t=function(a){a.startTime<n.firstHiddenTime&&(q.value=a.processingStart-a.startTime,q.entries.push(a),l(!0))},u=h("first-input",t);l=m(a,q,d);u&&g(function(){u.takeRecords().map(t);u.disconnect()},!0);u&&k(function(){q=e("FID");l=m(a,q,d);f=[];c=-1;b=null;y(addEventListener);f.push(t);E()})};a.getLCP=function(a,b){var c,d=r(),f=e("LCP"),l=function(a){var b=a.startTime;b<d.firstHiddenTime&&(f.value=b,f.entries.push(a));
c()},n=h("largest-contentful-paint",l);if(n){c=m(a,f,b);var q=function(){z.has(f.id)||(n.takeRecords().map(l),n.disconnect(),z.add(f.id),c(!0))};["keydown","click"].forEach(function(a){addEventListener(a,q,{once:!0,capture:!0})});g(q,!0);k(function(d){f=e("LCP");c=m(a,f,b);requestAnimationFrame(function(){requestAnimationFrame(function(){f.value=performance.now()-d.timeStamp;z.add(f.id);c(!0)})})})}};a.getTTFB=function(a){var b,c=e("TTFB");b=function(){try{var b;if(!(b=performance.getEntriesByType("navigation")[0])){var d=
performance.timing,e={entryType:"navigation",startTime:0},f;for(f in d)"navigationStart"!==f&&"toJSON"!==f&&(e[f]=Math.max(d[f]-d.navigationStart,0));b=e}(c.value=c.delta=b.responseStart,0>c.value)||(c.entries=[b],a(c))}catch(g){}};"complete"===document.readyState?setTimeout(b,0):addEventListener("pageshow",b)};Object.defineProperty(a,"__esModule",{value:!0})});angular.module("genius").factory("WebVitals",["$window",function(a){return a.webVitals}]);
angular.module("genius").factory("WindowTitle",["$document",function(a){return{update_count:function(b){a[0].title=a[0].title.replace(/^(\(\d+\) )?/,0<b?"("+b+") ":"")}}}]);
angular.module("genius").factory("Youtube",["$rootScope","$q","$timeout","$window","getScript","wait_for_global",function(a,b,c,d,f,e){var h={controls:0,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0},g=b.defer(),k=g.promise.then(function(){return f("https://www.youtube.com/player_api",{cache:!0})}).then(function(){return e("YT.Player")});return function(){function e(c,d){var f=this;this.state=a.$new(!0);this.deferred_load=b.defer();this.player=this.deferred_load.promise.then(function(){g.resolve();
return k}).then(function(e){return b(function(b){var g=new e(c,{height:"100%",width:"100%",playerVars:_.defaults({controls:d.controls?2:0,fs:d.fullscreen?1:0,playsinline:d.playsinline?1:0},h),events:{onReady:function(){b(g)},onStateChange:function(){a.$apply(f.update_state.bind(f))},onError:function(){a.$apply(function(){f.state.has_errored=!0})}}})})})}e.prototype.load=function(){this.deferred_load.resolve();return this.player};e.prototype.cue_video_by_id=function(a,b){var c=this;this.player.then(function(d){d.cueVideoById(a,
b);c.state.placeholder="https://i.ytimg.com/vi/"+a+"/sddefault.jpg"})};e.prototype.update_state=function(){var a=this;this.player.then(function(b){var e=b.getDuration(),f=b.getCurrentTime(),g=0<e?e-f:e;_.assign(a.state,{is_playing:b.getPlayerState()===d.YT.PlayerState.PLAYING,percentage:f/e,time_elapsed:1E3*f,time_remaining:1E3*g});a.state.is_playing&&(a.state.is_loaded=!0,a.state.is_loading=!1,c(a.update_state.bind(a),500))})};Object.defineProperty(e.prototype,"api",{get:function(){var a=this;return this._api?
this._api:this._api={load_media:function(){a.state.is_loading=!0;return a.load().then(function(){a.state.is_loading=!1;a.state.is_loaded=!0})},seek_to:function(b){return a.player.then(function(a){a.seekTo(b*a.getDuration())})},pause:function(){return a.player.then(function(a){a.pauseVideo()})},playpause:function(){return a.player.then(function(b){b.getPlayerState()!==d.YT.PlayerState.PLAYING?(a.state.has_played=!0,b.playVideo()):b.pauseVideo()})},mute:function(){return a.player.then(function(a){a.mute()})}}},
enumerable:!0,configurable:!0});return e}()}]);angular.module("genius").filter("abbreviateBigNumber",[function(){return function(a){return 1E6<a?Math.round(a/1E5)/10+"M":1E3<a?Math.round(a/100)/10+"K":a}}]);angular.module("genius").filter("andMore",[function(){return function(a){return"(and "+a+" more)"}}]);angular.module("genius").filter("boundedCount",[function(){return function(a,b){if(a)return b?Number(a)>=Number(b)?b+"+":a.toString():a.toString()}}]);
angular.module("genius").filter("capitalize",[function(){return _.capitalize}]);angular.module("genius").filter("cast_to_date",[function(){return function(a){return _.isNumber(a)?new Date(1E3*a):_.isString(a)?new Date(a):_.isDate(a)?a:null}}]);angular.module("genius").filter("descriptionAnnotationName",["I18n","modelHumanNameFilter",function(a,b){return function(c){var d=b(c);c=a.t("description_annotation."+c);return _.lowerCase(d)+" "+c}}]);
angular.module("genius").filter("drop",[function(){return function(a,b){if(a)return 0<=b?_.drop(a,b):_.dropRight(a,-b)}}]);angular.module("genius").filter("genericLineItemMessage",["i18nFilter",function(a){return function(b,c){var d=Object.assign({scope:"activemodel.activity_stream_line_item_message.message",defaultKey:"default"},c);return a(b,d)}}]);
angular.module("genius").filter("highlight_braced",["$sce","$sanitize",function(a,b){var c=/\[(.+?)\]/g;return function(d,f){var e=(void 0===f?{}:f).class_name,h=b(d);return a.trustAsHtml(h.replace(c,'<span class="'+e+'">$1</span>'))}}]);
angular.module("genius").filter("human_readable_datetime",["$filter",function(a){return function(b,c){var d=a("cast_to_date")(b);c=c||{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"};return d.toLocaleTimeString("en-US",c)}}]);
angular.module("genius").filter("i18n",["I18n","AppConfig",function(a,b){return function(c,d){void 0===d&&(d={});d.defaultKey&&(d=Object.assign(d,{defaultValue:a.t(d.defaultKey,d)}));"object"===typeof c&&(c=_.findKey(c));c=c||"__not_found";if(!a.lookup(c,d)){var f="Missing translation for "+c+"!!!";if("development"===b.env)throw alert(f),Error(f);return""}return a.t(c,d)}}]);
angular.module("genius").filter("imprecise_date",["$filter",function(a){var b=["yyyy","MMMM yyyy","MMMM d, yyyy"];return function(c){if(c){c=_(c).at("year","month","day").takeWhile().value();var d=new Date(c[0],(c[1]||1)-1,c[2]||1);return a("date")(d,b[c.length-1])}}}]);angular.module("genius").filter("indefinitize",[function(){return function(a){return/^[aeiou]/i.test(a)?"an "+a:"a "+a}}]);
angular.module("genius").filter("millisToDuration",["moment",function(a){return function(b){return a.utc(b).format(36E5<b?"HH:mm:ss":"mm:ss")}}]);angular.module("genius").filter("millisecondsToSeconds",[function(){return function(a){return 1E3*a}}]);angular.module("genius").filter("min",[function(){return function(a){return Math.min.apply(Math,a)}}]);angular.module("genius").filter("minBy",["$parse",function(a){return function(b,c){var d=a(c);return _.minBy(b,function(a){return d(a)})}}]);
angular.module("genius").filter("minimum_readable_time",["$window",function(a){var b=245;(a=a.location.search.match(/wpm=(\d+)/))&&(b=Number(a[1]));var c=6E4/b;return function(a){return(a?a.split(/\s+/).length:0)*c}}]);angular.module("genius").filter("minusModulo",[function(){return function(a,b){return a-a%b}}]);angular.module("genius").filter("modelHumanName",["I18n",function(a){return function(b){return a.t("activerecord.models."+b.toLowerCase())}}]);
angular.module("genius").filter("richContentPreview",["truncateToBoundaryFilter",function(a){return function(b){if(b)return(b=b.replace(/<[^>]+>/gm,"").trim())?a(b,75,{with_ellipsis:!0}):"[\u2026]"}}]);angular.module("genius").filter("roleHumanName",["I18n",function(a){return function(b){return a.t("role.types."+b+".one")}}]);angular.module("genius").filter("signed_number",[function(){return function(a){return _.isUndefined(a)?0:a&&0<a?"+"+a.toString():a.toString()}}]);
angular.module("genius").filter("snakeCase",[function(){return _.snakeCase}]);angular.module("genius").filter("spotify_artist_metadata",["SpotifyClient",function(a){var b={};return function(c){if(!c)return{};var d=b[c];if(d)return d;b[c]={};a.load_artist_metadata(c).then(function(a){b[c]=a})}}]);angular.module("genius").filter("svg",[function(){return function(a){return a+".svg"}}]);
angular.module("genius").filter("timestamp_for_display",[function(){var a=function(a,c){return"0000".substring(0,c-a.toString().length)+a};return function(b,c){var d=void 0===c?{}:c,f=d.skip_millis,d=d.always_millis;if(!b&&0!==b)return"";var e=b/1E3,e=Math.floor(e/60)+":"+a(Math.floor(e%60),2),h=Math.floor(b%1E3);if(d||h&&!f)e+="."+a(h,3);return e}}]);angular.module("genius").filter("to_utc",["$filter",function(a){return function(b){return a("cast_to_date")(b).toISOString()}}]);
angular.module("genius").filter("truncateToBoundary",[function(){return function(a,b,c){c=(void 0===c?{}:c).with_ellipsis;if(a){b=c?b-1:b;var d=a.substr(0,b);a[b]&&" "!==a[b]&&(b=d.lastIndexOf(" "),-1!==b&&(d=d.substr(0,b)));c&&d.length<a.length&&(d+="\u2026");return d}}}]);angular.module("genius").filter("withIndefiniteArticle",[function(){var a=/^[aeiou]/i;return function(b){return(a.test(b)?"an":"a")+" "+b}}]);
angular.module("genius").filter("withoutZeroWidthSpaces",[function(){return function(a){return a.replace(/\u200B/g,"")}}]);angular.module("genius").value("currentFlashMessages",[]);angular.module("genius").value("PreloadCache",{});
(function e$$0(b,c,d){function f(g,h){if(!c[g]){if(!b[g]){var m="function"==typeof require&&require;if(!h&&m)return m(g,!0);if(e)return e(g,!0);m=Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",m;}m=c[g]={exports:{}};b[g][0].call(m.exports,function(c){var d=b[g][1][c];return f(d?d:c)},m,m.exports,e$$0,b,c,d)}return c[g].exports}for(var e="function"==typeof require&&require,h=0;h<d.length;h++)f(d[h]);return f})({1:[function(a,b,c){function d(a){return!0}b.exports=function(a,b){var c=
[];b=b||d;do c.push(a),a=a.parentNode;while(a&&a.tagName&&b(a));return c.slice(1)}},{}],2:[function(a,b,c){function d(a){return!isNaN(parseInt(a))&&isFinite(a)}function f(a,b){if(a===b)return!1;for(var c=null,d=[a].concat(h["default"](a)).reverse(),e=[b].concat(h["default"](b)).reverse();d[0]===e[0];)c=d.shift(),e.shift();d=d[0];e=e[0];d=g["default"](c.childNodes,d);c=g["default"](c.childNodes,e);return d>c}c.__esModule=!0;c["default"]=function(a,b){if(a.whatToShow!==l)throw Error(k);var c=0,e=a.referenceNode,
g=null;if(d(b))g={forward:function(){return c<b},backward:function(){return c>b}};else if(b.nodeType===n)g={forward:f(e,b)?function(){return!1}:function(){return e!==b},backward:function(){return e!=b||!a.pointerBeforeReferenceNode}};else throw Error(m);for(;g.forward()&&null!==(e=a.nextNode());)c+=e.nodeValue.length;for(;g.backward()&&null!==(e=a.previousNode());)c-=e.nodeValue.length;return c};var e=a("ancestors"),h=e&&e.__esModule?e:{"default":e},g=(a=a("index-of"))&&a.__esModule?a:{"default":a},
k="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.",m="Argument 2 of seek must be a number or a Text Node.",l=4,n=3;b.exports=c["default"]},{ancestors:1,"index-of":4}],3:[function(a,b,c){function d(a){return a&&a.nodeType===e}function f(a){if(d(a))return a;if(d(a.ownerDocument))return a.ownerDocument;if(d(a.document))return a.document;if(a.parentNode)return f(a.parentNode);if(a.commonAncestorContainer)return f(a.commonAncestorContainer);if(a.startContainer)return f(a.startContainer);if(a.anchorNode)return f(a.anchorNode)}
b.exports=f;var e=9},{}],4:[function(a,b,c){b.exports=function(a,b,c){c=c||0;if(null==a)return-1;var h=a.length;c=0>c?h+c:c;if(c>=a.length)return-1;for(;c<h;){if(a[c]===b)return c;c++}return-1}},{}],5:[function(a,b,c){b.exports=a("./lib/xpath")},{"./lib/xpath":7}],6:[function(a,b,c){c.__esModule=!0;a=function f(a,b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.message=a;this.name=b;this.stack=Error().stack};c["default"]=a;a.prototype=Error();a.prototype.toString=
function(){return this.name+": "+this.message};b.exports=c["default"]},{}],7:[function(a,b,c){function d(a){switch(a.nodeName){case "#text":return"text()";case "#comment":return"comment()";case "#cdata-section":return"cdata-section()";default:return a.nodeName.toLowerCase()}}function f(a,b,c){try{var e=a.replace(/\/(?!\.)([^\/:\(]+)(?=\/|$)/g,"/_default_:$1");return document.evaluate(e,b,c,g,null).singleNodeValue}catch(f){for(a=a.split("/");b;){c=a.shift();if(void 0===c)break;if("."!==c)a:{for(e=
c.split(/[\[\]]/),c=e[0],e=e[1],c=c.replace("_default_:",""),e=e?parseInt(e):1,b=b.firstChild;b;b=b.nextSibling)if(d(b)===c&&0===--e)break a;b=null}}return b}}c.__esModule=!0;c.fromNode=function(a){for(var b=1>=arguments.length||void 0===arguments[1]?document:arguments[1],c="/";a!==b;){if(!a)throw new h["default"]("The supplied node is not contained by the root node.","InvalidNodeTypeError");for(var e="/"+d(a)+"[",f=a,g=f.nodeName,k=1;f=f.previousSibling;)f.nodeName===g&&(k+=1);c=e+k+"]"+c;a=a.parentNode}return c.replace(/\/$/,
"")};c.toNode=function(a){var b=1>=arguments.length||void 0===arguments[1]?document:arguments[1],c=2>=arguments.length||void 0===arguments[2]?null:arguments[2];"function"===typeof b&&(c=b,b=document);b!==document&&(a=a.replace(/^\//,"./"));null===c&&document.lookupNamespaceURI&&function(){var a=e["default"](b).documentElement,d=a.lookupNamespaceURI(null)||k;c=function(b){return{_default_:d}[b]||a.lookupNamespaceURI(b)}}();return f(a,b,c)};var e=(b=a("get-document"))&&b.__esModule?b:{"default":b},
h=(a=a("./dom-exception"))&&a.__esModule?a:{"default":a},g=9,k="http://www.w3.org/1999/xhtml"},{"./dom-exception":6,"get-document":3}],8:[function(a,b,c){b.exports=a("./lib/range")},{"./lib/range":9}],9:[function(a,b,c){c.__esModule=!0;c.fromRange=function(a,b){var c=a.startOffset,d=a.endContainer,f=a.endOffset,h=e.fromNode(a.startContainer,b),d=e.fromNode(d,b);return{start:h,end:d,startOffset:c,endOffset:f}};c.toRange=function(a,b,c,l,n){function r(a){a=Error("The "+a+" node was not found.");a.name=
"NotFoundError";return a}function q(a){a=Error("There is no text at the requested "+a+" offset.");a.name="IndexSizeError";return a}var t=d["default"](n);a=e.toNode(a,n);if(null===a)throw r("start");var u=t.createNodeIterator(a,h);b-=f["default"](u,b);a=u.referenceNode;if(!u.pointerBeforeReferenceNode){if(0<b)throw q("start");b+=a.length}c=e.toNode(c,n);if(null===c)throw r("end");n=t.createNodeIterator(c,h);l-=f["default"](n,l);c=n.referenceNode;if(!n.pointerBeforeReferenceNode){if(0<l)throw q("end");
l+=c.length}t=t.createRange();t.setStart(a,b);t.setEnd(c,l);return t};var d=(b=a("get-document"))&&b.__esModule?b:{"default":b},f=(b=a("dom-seek"))&&b.__esModule?b:{"default":b},e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(a("simple-xpath-position")),h=4},{"dom-seek":2,"get-document":3,"simple-xpath-position":5}],10:[function(a,b,c){window.XpathRange=a("xpath-range")},{"xpath-range":8}]},
{},[10]);angular.module("genius").value("XpathRange",window.XpathRange);angular.element(document).ready(function(){angular.bootstrap(document.body,["genius"])});
(function(){window["com.genius.Genius"].require.define({"back_page/annotation_loader":function(a,b,c){var d={},f=function(a){_.each(a,function(a){d[a]||(d[a]=$.Deferred())})},e=function(a){var b=_.reject(a,function(a){return d[a]});if(!b.length)return _.pick(d,Array.prototype.slice.apply(a));f(b);$.ajax({url:"/annotations/bulk_standalone",data:{annotation_ids:b},dataType:"json"}).done(function(a){_.each(a,function(a,b){d[b].resolve($(a))})});return _.pick(d,Array.prototype.slice.apply(a))};c.exports=
{load:function(a){e([a]);return d[a]},add_to_cache:function(a,b){f([a]);d[a].resolve(b).promise()},fetch_annotations:e}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/tracking":function(a,b,c){var d=window.app.tracking,f,e=[],h=$.Deferred();c.exports={is_lyrics:function(){this.is_lyrics=!0},track_page_load:function(a){f=a;f.offsite_lyrics=Boolean(this.is_lyrics);d.start_tracking();d.track("Wrapped Web Page Load",f);h.resolve()},track_annotated_page:function(){h.then(function(){d.track("Annotated Web Page Load",f)})},track_open_annotation:function(a){h.then(function(){var b=a.referent_id;a.from_permalink&&
d.set_annotation_opened_from_permalink(b);d.track("Open Annotation",_.assign({},f,{annotation_id:b}))})},track_engaged_annotation_view:function(a){h.then(function(){var b=a.referent_id;-1===e.indexOf(b)&&(e.push(b),d.track("Engaged Annotation View",_.assign({},f,{annotation_id:b,annotator_login:a.annotator_login,skip_counters:!0})))})},track_filter_change:function(a,b,c){h.then(function(){d.track("Offsite Filter Selection",_.assign({},f,c,{filter_type:a,filter_args:b}))})}}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/referents":function(a,b,c){var d=[],f={},e,h=!1,g=b("back_page/annotation_loader"),k=b("shared/universal/annotation_filter"),m=b("back_page/tracking"),l=k.ALL,n="all";c.exports={initialize:function(a){this.back_page=a;app.parent_channel.bind("close",this.close.bind(this))},open:function(){h||(h=!0,this.update_referent_offsets().then(function(){app.parent_channel.notify({method:"show_back_page"})}))},close:function(){if(!h||!this.back_page.confirm_no_dirty_fields())return!1;
h=!1;this.close_overlay();e=null;this.update_url_state();app.parent_channel.notify({method:"hide_back_page"});return!0},update_url_state:function(){var a={};l.filter_string!==n&&(a.filter=l.filter_string);e&&(a.annotation_id=e.id);app.parent_channel.notify({method:"update_url_state",params:a})},add:function(a){a.forEach(function(a){var b=f[a.id];b?_.assign(b,a):(a.hidden=!l.test(a),f[a.id]=a,d.push(a))});this.update_referent_offsets()},remove:function(a){d=_.reject(d,function(b){return b.id===a});
delete f[a];app.parent_channel.notify({method:"referent_deleted",params:a});this.back_page.remove_referent(a);e&&e.id===a&&(e=null);d.length?this.ensure_active_referent():this.close()},sort:function(){d=d.sort(function(a,b){if(a.anchor_offset&&b.anchor_offset){var c=a.anchor_offset.top-b.anchor_offset.top;0===c&&(c=a.anchor_offset.left-b.anchor_offset.left);return c}return a.anchor_offset?-1:b.anchor_offset?1:a.id-b.id});this.back_page.update(d)},update_referent_offsets:function(){var a=$.Deferred();
app.parent_channel.call({method:"get_referent_offsets",success:function(b){_.each(b,function(a,b){f[b].anchor_offset=a});this.sort();a.resolve()}.bind(this)});return a.promise()},display:function(a,b){this.open();var c=this.set_active_referent(a,b);this.ensure_current_filter_allows_referent(a);return c},activate:function(a,b){if(h)return this.set_active_referent(a,b)},feature:function(a){f[a].featured=!0;this.apply_filter()},unfeature:function(a){f[a].featured=!1;this.apply_filter()},set_default_filter_string:function(a){n=
a},set_active_referent:function(a,b){e=f[a];this.back_page.activate_referent(a,b);app.parent_channel.notify({method:"activate_referent",params:a});this.update_url_state();var c=g.load(a).then(function(b){this.back_page.hydrate_placeholder(a,b);setTimeout(function(){e&&e.id===a&&m.track_engaged_annotation_view({referent_id:a,annotator_login:e.annotator_login})},1E3)}.bind(this));this.back_page.load_nearby_annotations(a);return c},preload_first_page:function(){var a=_.map(d.slice(0,6),function(a){return a.id});
return this.back_page.load_annotations(a)},ensure_active_referent:function(){e||d.length&&this.set_active_referent(this.back_page.referent_id_in_active_zone()||d[0].id)},filter_by_filter_string:function(a,b){l=new k(a);this.back_page.update_selected_filter(a).done(function(){this.update_url_state()}.bind(this));this.apply_filter();b&&m.track_filter_change(l.filter_type,l.filter_args.join(":"),b)},apply_filter:function(){var a=[],b=[];d.forEach(function(c){c.hidden=!l.test(c);c.hidden?(b.push(c.id),
c===e&&(e=null)):a.push(c.id)});this.back_page.update(d);this.ensure_active_referent();app.parent_channel.notify({method:"update_referent_visibility",params:{visible:a,hidden:b}})},ensure_current_filter_allows_referent:function(a){a=f[a];l.test(a)||this.filter_by_filter_string("annotator:"+a.annotator_login,{reason:"Annotation Permalink"})},close_overlay:function(){if(!this.back_page.confirm_no_dirty_fields())return!1;h&&this.ensure_active_referent();this.back_page.close_overlay();return!0},load_drafts:function(a){$.get(a).then(function(a){app.parent_channel.notify({method:"draft_referents_loaded",
params:{referents:a}})})}}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/back_page":function(a,b,c){var d=b("back_page/annotation_loader"),f=$(window).height(),e=.35*f,h=$(window).width()/2,g,k=_.memoize(function(){var a=$(".back_page-filter_menu")[0];return a?a.getBoundingClientRect().bottom:45}),m=$.Deferred(),l={referents:b("back_page/referents"),initialize:function(){this.referents.initialize(this);window.onbeforeunload=function(){if($("textarea:focus, textarea.dirty").length)return n};$(document).on("click",
".back_page-close_button",function(){l.referents.close()});$(document).on("click",".overlay_close_button",function(){(!$(".annotations_for_back_page").contents().length||Modernizr.touch?l.referents.close():l.referents.close_overlay())&&app.parent_channel.notify({method:"reset_referent_in_progress"})});if(!Modernizr.touch)$(document).on("scroll",function(){t();q()});$(document).on("click",".referent_content",function(){l.referents.activate($(this).closest(".annotation_container").attr("data-genius-referent-id"));
return!1});$(".back_page-filter_menu").length?m.resolve():$(function(){$(".back_page-filter_menu_container").on("auto_load_url:loaded",m.resolve.bind(m))});$(document).on("click",".filter_menu-filter",function(){var a=$(this).attr("data-filter");l.referents.filter_by_filter_string(a,{reason:"Menu Selection"})});$(document).on("click",".annotations_for_back_page .annotation_container",function(){l.referents.activate($(this).attr("data-genius-referent-id"))});$(document).on("click","html, .annotations_for_back_page",
function(a){$(a.target).is($(this))&&$(document.body).is(".cont-web_pages.act-back_page")&&l.referents.close()});$(document).on("annotation:deleted",".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));l.referents.remove(a);return!1});$(document).on("annotation:featured",".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));l.referents.feature(a);return!1});$(document).on("annotation:unfeatured",
".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));l.referents.unfeature(a);return!1})},activate_referent:function(a,b){b=b||{};var c=$('[data-genius-referent-id="'+a+'"]');c.length&&(c.addClass("active").siblings().removeClass("active"),void 0===b.align_with_vertical_offset||Modernizr.touch||u(c,b.align_with_vertical_offset))},update_selected_filter:function(a){var b=$.Deferred();m.done(function(){var c=$('.filter_menu-filter[data-filter="'+
a+'"]');b.resolve();c.addClass("filter_menu-filter--selected");$(".filter_menu-filter--selected").not(c).removeClass("filter_menu-filter--selected");$(".filter_menu-selected_filter").html(c.html()).find(".filter_menu-filter-annotation_count").remove();$(".filter_menu-list").removeClass("filter_menu--open")});return b.promise()},hydrate_placeholder:function(a,b){var c=$('.referent_placeholder[data-genius-referent-id="'+a+'"]');c.length&&$(document).retainingScrollPosition($(".annotation_container.active"),
function(){b.toggleClass("anchorless",c.hasClass("anchorless"));b.toggleClass("active",c.hasClass("active"));b.toggleClass("annotation_container--hidden",c.hasClass("annotation_container--hidden"));c.replaceWith(b);app.setup_embedded_annotation(b);!Modernizr.touch&&b.nextAll(".active").length&&0>b[0].getBoundingClientRect().top&&b.addClass("annotation_container--fixed_placeholder_height")})},load_annotations:function(a){$.each(d.fetch_annotations(a),function(a,b){b.done(function(b){l.hydrate_placeholder(a,
b)})})},load_nearby_annotations:_.debounce(function(a){a=$('[data-genius-referent-id="'+a+'"]');var b=[];a.is(".referent_placeholder")&&b.push(a.attr("data-genius-referent-id"));a.prevAll(":visible").slice(0,2).filter(".referent_placeholder").each(function(a,c){b.push($(c).attr("data-genius-referent-id"))});a.nextAll(":visible").slice(0,4).filter(".referent_placeholder").each(function(a,c){b.push($(c).attr("data-genius-referent-id"))});b.length&&this.load_annotations(b)},500),remove_referent:function(a){a=
$('[data-genius-referent-id="'+a+'"]');a.slideUp("fast",a.remove.bind(a))},update:function(a){$(function(){var b=$("#annotations"),c=b.children().filter(".active"),d={};b.children().each(function(){var a=$(this);d[a.attr("data-genius-referent-id")]=a});a.forEach(function(a,c){var e=d[a.id];e||(e=$("<div class='referent_placeholder' data-genius-referent-id='"+a.id+"'><em class='referent_content-loading_text'>Loading:</em> <span class='referent_content-referent'>"+a.fragment+"</span></div>\n").appendTo(b));
e.index()!==c&&(e.find("iframe").cache_iframe_contents(),0===c?b.prepend(e.detach()):b.children().eq(c-1).after(e.detach()));e.toggleClass("anchorless",!a.anchor_offset);e.toggleClass("annotation_container--hidden",a.hidden)});c.is(":visible")&&(u(c),this.load_nearby_annotations(Number(c.attr("data-genius-referent-id"))))}.bind(this))},populate_overlay:function(a){$("#back_page_overlay").addClass("active").find(".contents").html(a)},close_overlay:function(){$("#back_page_overlay").removeClass("active")},
referent_id_in_active_zone:function(){var a=r(h,e);if(a.length)return Number(a.attr("data-genius-referent-id"))},confirm_no_dirty_fields:function(){return $("textarea.dirty").length?confirm(n)?($("textarea.dirty").trigger("dirtyable:changed",!1),!0):!1:!0}},n="Looks like you're in the middle of something. Do you want to leave without finishing?",r=function(a,b){return $(document.elementFromPoint(a,b)).closest(".annotation_container:not(.active), .referent_placeholder:not(.active)")},q=_.throttle(function(){$(document).retainingScrollPosition($(".annotation_container.active, .referent_placeholder.active"),
function(){var a=r(h,k()+1);a.add(a.nextAll(".annotation_container--fixed_placeholder_height")).removeClass("annotation_container--fixed_placeholder_height")})},100),t=_.throttle(function(){if(g)g=!1;else{var a=l.referent_id_in_active_zone();a&&l.referents.activate(a);a=$(document).scrollTop();50>$("body").prop("scrollHeight")-(f+a)&&l.referents.activate($("[data-genius-referent-id]:visible:last").attr("data-genius-referent-id"));50>a&&l.referents.activate($("[data-genius-referent-id]:visible:first").attr("data-genius-referent-id"))}},
100),u=function(a,b){b=b||0;g=!0;var c=k(),d=window.innerHeight-a.outerHeight(),c=Math.max(c,Math.min(d,b-250));$(window).scrollTop(a.offset().top-c)};c.exports=l}})})();(function(){window["com.genius.Genius"].require.define({"back_page/show_signup_prompt":function(a,b,c){var d=b("back_page/back_page");c.exports=function(){app.set_desired_location_cookie({fallback:$(".embedded_annotation").attr("data-path")});$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1});d.populate_overlay($($("#new_user_session").text()))}}})})();
(function(){window.app=window.app||{};var a=require("back_page/show_signup_prompt"),b=require("shared/universal/tweet_composer");$.extend(window.app,{on_ajax_complete:function(){app.set_up_timeago()},on_ajax_error:function(){}});var c=function(){$(".show_credits").on("click",function(){var a=$(this),b=$(a.toggleClass("pressed").attr("data-target"));b.toggle();b.hasClass("loading")&&$.ajax_with_retry({url:"/annotations/full_credits",data:{annotation_id:b.attr("data-id")},success:function(a){b.html(a).removeClass("loading")}})})};
app.setup_embedded_annotation=function(a){a.length&&(app.setup_embedly(a),app.set_up_mentions_autocomplete(),app.set_up_timeago(),app.load_vidyard_players(),app.pusher=app.angular_inject_get__deprecated("Pusher").pusher,CURRENT_USER&&app.pusher().subscribe(a.attr("data-pusher-channel")).bind("referent-image-changed",function(b){a.find(".compose_tweet_wrapper .loading_with_indicator").replaceWith($("<img>",{src:b}))}),window.chrome&&WRAP_GENIUS_HOST===(new URL(document.referrer)).hostname&&$(".extension_link").css("display",
"block"),a.find(".annotation_unit").each(function(){var a=$(this);a.find(".twitter_button.tweet_composer").length&&new b(a)}))};app.set_up_embedded_annotations=function(){c();app.setup_zeroclipboard();app.set_up_disable_annotation_draft_status_button();$(document).on("click","a:not([target])",function(){$(this).attr("target","_blank");return!0});$(document).on("click",".current_user_is_anonymous .requires_user",function(){a();return!1});$(document).on("click",".delete_annotation",function(){if(!confirm("Are you sure?"))return!1;
var a=$(this),b=a.closest(".annotation_unit");app.delete_annotation(a.attr("href"));a=$.Event("annotation:deleted");b.trigger(a);a.isDefaultPrevented()||(b.siblings(".annotation_unit").length?b.remove():b.closest(".annotation_container").slideUp("fast"));return!1})};$(window).on("keydown",function(a){$(a.target).acts_like_input()||app.parent_channel.notify({method:"window_keydown",params:a.which})});$(function(){app.set_up_embedded_annotations();app.process_auto_load_containers()})})();
window.app=window.app||{};
$.extend(window.app,{set_up_mentions_autocomplete:function(){$("textarea[data-mentions-autocomplete]").each(function(){var a=$(this),b=!1;a.atwho({at:"@",data:JSON.parse(a.attr("data-mentions-seed-data")||"[]"),displayTpl:'<li data-value="${value}">${name}</li>',insertTpl:"@${value}",callbacks:{sorter:function(a,d,f){return b?(b=!1,d):$.fn.atwho.default.callbacks.sorter(a,d,f)},remoteFilter:function(){var a=null,d={};return function(f,e){a&&a.abort();f=f||"";if(!(1>f.length||" "===f[0]))if(f in d)b=
!0,e(d[f]);else{var h=this;$.doTimeout("mentions_autocomplete",200,function(){a=$.ajax({url:h.$inputor.attr("data-mentions-autocomplete-url"),dataType:"json",data:{q:f},success:function(a){b=!0;d[f]=a;e(a)}})})}}}()}})})}});
Backbone.View.attach(".voting_links",{events:{"click a.vote":"on_click_vote_button","click .votes_total":"toggle_voters_panel"},initialize:function(){var a=this;a.$vote_total=a.$el.find(".votes_total");a.$vote_total.on("qtip:beforeContentUpdate",function(b,c){var d=$(c).attr("data-votes-total");d&&a.update_vote_total(parseInt(d,10))})},on_click_vote_button:function(a){var b=$(a.target);(CURRENT_USER||"up"===b.attr("data-direction"))&&this.submit_vote(b);a.preventDefault()},toggle_voters_panel:function(a){a=
$(a.target);if(a.closest(".embedded_annotation").length){a=a.attr("tooltip__deprecated");var b=this.$el.attr("data-voteable-id"),c=$(".votes_for_"+b);c.toggle();c.is(":visible")&&(c.text("Loading..."),$.ajax_with_retry({type:"GET",url:a,success:function(a){c.html(a)}}));return!1}},submit_vote:function(a){var b=a.hasClass("toggled")?"middle":a.attr("data-direction"),c=this.$el.clone();this.increment_vote_count_by(this.voting_delta_for(a));a.toggleClass("toggled").siblings(".vote").removeClass("toggled");
$.ajax({type:"POST",url:a.data("href"),data:{direction:b},alert_on_error:!1}).done(function(a){this.$el.replaceWith(a)}.bind(this)).error(function(){this.$el.replaceWith(c)}.bind(this))},voting_delta_for:function(a){var b="up"===a.attr("data-direction")?1:-1;a.hasClass("toggled")?b*=-1:a.siblings(".vote").hasClass("toggled")&&(b*=2);return b},increment_vote_count_by:function(a){var b=parseInt(this.$vote_total.text(),10);this.update_vote_total(b+a)},update_vote_total:function(a){var b,c;0>a?(c="downvote",
b=a.toString()):(b="+"+a,c=0<a?"upvote":"neutral");this.$vote_total.removeClass("downvote upvote no_votes neutral").addClass(c).text(b)}});Backbone.View.attach(".comment_unit",{events:{"click .destroy_comment":function(a){this.destroy_comment($(a.target));return!1}},destroy_comment:function(a){app.ajaxQueue.add({type:"post",url:a.attr("href"),data:{_method:"delete"}});a.parents(".comment_unit").slideUp("fast",this.notify_resize.bind(this))},notify_resize:function(){this.$el.trigger("genius:resized")}});
Backbone.View.attach(".comment_section",{events:{"submit form.comment":function(a){this.submit_comment($(a.target));return!1}},initialize:function(){this.ANIMATION_SPEED=150;this.ANIMATION_END_EVENT="animationend webkitAnimationEnd";this.$comment_container=this.$el.find(".comment_container");app.setup_embedly(this.$comment_container);this.set_up_show_all_comments();this.set_up_show_needs_improvement();this.set_up_animation_handlers()},set_up_animation_handlers:function(){this.$comment_container.on(this.ANIMATION_END_EVENT,
".comment_unit",function(){$(this).removeClass("comment_unit--new")})},set_up_show_all_comments:function(){this.$comment_container.on("click",".show_all_comments",function(){$(this).addClass("pressed").siblings(".comment_unit").show();app.setup_embedly();return!1})},set_up_show_needs_improvement:function(){var a=this.$el.find(".reasons");this.$el.parents(".annotation_unit").on("click","[data-show-needs-improvement]",function(){a.slideDown(this.ANIMATION_SPEED)})},render_new_comment:function(a){var b=
Hogan.compile($("#new_comment_template").html());return a.allows_reason?$(b.render(a)).hide().prependTo(this.$comment_container).slideDown(this.ANIMATION_SPEED):$(b.render(a)).appendTo(this.$comment_container)},render_post_comment_message:function(a,b,c){a.remove();a=$($("#post_comment_message").html());this.$comment_container.append(a);a.find("[name='user[login]']").val(b);a.find("[name='user[email]']").val(c);a.find("#user_password").focus()},submit_comment:function(a){var b=a.validate({rules:{"comment[body]":{maxlength:5E4,
required:{depends:function(){var b=a.find('input[name="comment[reason]"]:checked');return!b.length||"other"===b.val()}}},"comment[name]":{maxlength:255}},messages:{"comment[body]":{maxlength:"Your comment is too long."},"comment[name]":{maxlength:"Your name is too long."}}});if(b.form()){var c="new_comment_"+(new Date).getTime();a.submitWithAjaxQueue({complete:function(a){CURRENT_USER&&$("#"+c).find("a.destroy_comment").attr("href","/comments/"+a.responseText).removeClass("loading");this.notify_resize()}.bind(this)});
var d=a.find("[name='comment[reason]']:checked"),b=a.find("[name='comment[name]']").val(),f=a.find("[name='comment[email]']").val(),e=d.data("is-other")?null:d.val(),h=d.data("inline-reason"),g=a.find("[name='allows_reason']").length,k=d.data("reason-context-url"),d=a.find("[name='comment[body]']").val(),e=this.render_new_comment({identifier:c,name:b,reason:e,inline_reason:h,allows_reason:g,reason_context_url:k,body:"",timestamp:(new Date).toISOString()});app.markdown_to_html(d,e.find(".body"),function(a){$(a).find("a").attr("target",
"_blank")});this.reset_interface(a);this.notify_resize();window.top!==window||CURRENT_USER||this.render_post_comment_message(a,b,f)}else b.showErrors(),this.notify_resize()},reset_interface:function(a){var b=a.find('input[name="comment[reason]"]:checked');a=a.find('textarea[name="comment[body]"]');b.prop("checked",!1);a.val("")},notify_resize:function(){this.$el.trigger("genius:resized")}});"use strict";
(function(){var a=function(){var a={},b=function(b,d,h){b=b.split(".");for(var g=0;g<b.length-1;g++)h[b[g]]||(h[b[g]]={}),h=h[b[g]];h[b[g]]="function"===typeof d?d.isClass?d:function(){return d.apply(a,arguments)}:d};return{extend:function(f,e,h){"function"===typeof f&&(h=e,e=f,f="");f&&(f+=".");e=e.call(a);for(var g in e){var k=f+g,m=e[g],l=h;b(k,m,a);l&&b(k,m,window.filepicker)}},internal:function(b){b.apply(a,arguments)}}}();if(window.filepicker)for(var b in a)window.filepicker[b]=a[b];else window.filepicker=
a})();"use strict";
filepicker.extend("comm",function(){var a=this,b=function(b){if(b.origin===a.urls.BASE||b.origin===a.urls.DIALOG_BASE)b=a.json.parse(b.data),a.handlers.run(b)},c=!1,d=function(){if(!c)if(c=!0,window.addEventListener)window.addEventListener("message",b,!1);else if(window.attachEvent)window.attachEvent("onmessage",b);else throw new a.FilepickerException("Unsupported browser");};return{openChannel:function(){if(void 0===window.frames.filepicker_comm_iframe){d();var b;b=document.createElement("iframe");b.id=
b.name="filepicker_comm_iframe";b.src=a.urls.COMM;b.style.display="none";document.body.appendChild(b)}void 0===window.frames.fpapi_comm_iframe&&(d(),b=document.createElement("iframe"),b.id=b.name="fpapi_comm_iframe",b.src=a.urls.API_COMM,b.style.display="none",document.body.appendChild(b))},closeChannel:function(){if(window.removeEventListener)window.removeEventListener("message",b,!1);else if(window.attachEvent)window.detachEvent("onmessage",b);else throw new a.FilepickerException("Unsupported browser");
if(c){c=!1;for(var d=document.getElementsByName("filepicker_comm_iframe"),e=0;e<d.length;e++)d[e].parentNode.removeChild(d[e]);try{delete window.frames.filepicker_comm_iframe}catch(h){}d=document.getElementsByName("fpapi_comm_iframe");for(e=0;e<d.length;e++)d[e].parentNode.removeChild(d[e]);try{delete window.frames.fpapi_comm_iframe}catch(h){}}}}});"use strict";
filepicker.extend("comm_fallback",function(){var a=this,b="",c=function(){d()},d=function(){if(void 0===window.frames.host_comm_iframe){var c;c=document.createElement("iframe");c.id=c.name="host_comm_iframe";b=c.src=a.urls.constructHostCommFallback();c.style.display="none";var d=function(){b=c.contentWindow.location.href;if(void 0===window.frames.filepicker_comm_iframe){var d;d=document.createElement("iframe");d.id=d.name="filepicker_comm_iframe";d.src=a.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(b);
d.style.display="none";document.body.appendChild(d)}f||(f=!0,e=window.setInterval(g,200))};c.attachEvent?c.attachEvent("onload",d):c.onload=d;document.body.appendChild(c)}},f=!1,e,h="",g=function(){var b=window.frames.filepicker_comm_iframe;if(b&&(b=b.frames.host_comm_iframe)&&((b=b.location.hash)&&"#"===b.charAt(0)&&(b=b.substr(1)),b!==h&&(h=b))){var c;try{c=a.json.parse(b)}catch(d){}c&&a.handlers.run(c)}},k=function(){window.clearInterval(e);if(f){f=!1;for(var a=document.getElementsByName("filepicker_comm_iframe"),
b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.filepicker_comm_iframe}catch(c){}a=document.getElementsByName("host_comm_iframe");for(b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.host_comm_iframe}catch(c){}}},m=!("postMessage"in window);m&&(a.comm={openChannel:c,closeChannel:k});return{openChannel:c,closeChannel:k,isEnabled:m}});"use strict";
filepicker.extend("cookies",function(){var a=this,b=function(b){return function(d){"ThirdPartyCookies"===d.type&&(a.cookies.THIRD_PARTY_COOKIES=!!d.payload,b&&"function"===typeof b&&b(!!d.payload))}};return{checkThirdParty:function(c){c=b(c);a.handlers.attach("cookies",c);a.comm.openChannel()}}});"use strict";
filepicker.extend("handlers",function(){var a={};return{attach:function(b,c){a.hasOwnProperty(b)?a[b].push(c):a[b]=[c];return c},detach:function(b,c){var d=a[b];if(d)if(c){for(var f=0;f<d.length;f++)if(d[f]===c){d.splice(f,1);break}0===d.length&&delete a[b]}else delete a[b]},run:function(b){var c=b.id;if(a.hasOwnProperty(c)){for(var c=a[c],d=0;d<c.length;d++)c[d](b);return!0}return!1}}});"use strict";
filepicker.extend("exporter",function(){var a=this,b=function(b){if(b.mimetype&&b.extension)throw a.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function");b.services&&!a.util.isArray(b.services)?b.services=[b.services]:b.service&&(b.services=[b.service]);if(b.services)for(var c=0;c<b.services.length;c++){var d=(""+b.services[c]).replace(" ",""),g=a.services[d];b.services[c]=void 0===g?d:g}b.openTo&&(b.openTo=a.services[b.openTo]||b.openTo);a.util.setDefault(b,
"container",a.browser.openInModal()?"modal":"window")},c=function(b,c){return function(d){if("filepickerUrl"===d.type){if(d.error)a.util.console.error(d.error),c(a.errors.FPError(132));else{var g={};g.url=d.payload.url;g.filename=d.payload.data.filename;g.mimetype=d.payload.data.type;g.size=d.payload.data.size;g.client=d.payload.data.client;g.isWriteable=!0;b(g)}a.modal.close()}}},d=function(f,e,h,g){b(e);var k={close:function(){a.modal.close()}};if(e.debug)return setTimeout(function(){h({id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",
filename:"test.png",mimetype:"image/png",size:58979,client:"computer"})},1),k;if(void 0===a.cookies.THIRD_PARTY_COOKIES){var m=!1;a.cookies.checkThirdParty(function(){m||(d(f,e,h,g),m=!0)});return k}var l=a.util.getId(),n=!1;a.window.open(e.container,a.urls.constructExportUrl(f,e,l),function(){n||(n=!0,g(a.errors.FPError(131)))});a.handlers.attach(l,c(function(a){n=!0;h(a)},function(a){n=!0;g(a)}));return k};return{createExporter:d}});"use strict";
filepicker.extend("modal",function(){function a(){var a=b();a&&(a.style.overflow=f)}function b(){try{return document.getElementsByTagName("html")[0]}catch(a){return null}}var c=this,d=b();if(d)var f=d.style.overflow;var e=function(a){var b=document.createElement("div");b.className="fp__close";var c=document.createElement("a");c.appendChild(document.createTextNode("X"));b.appendChild(c);c.onclick=h(a);document.onkeydown=function(b){b=b||window.event;27===b.keyCode&&h(a)()};return b},h=function(b,d){d=
!!d;return function(){if(!c.uploading||d||window.confirm('You are currently uploading. If you choose "OK", the window will close and your upload will not finish. Do you want to stop uploading and close the window?')){c.uploading=!1;document.onkeydown=null;a();var e=document.getElementById("filepicker_shade");e&&document.body.removeChild(e);(e=document.getElementById("filepicker_dialog_container"))&&document.body.removeChild(e);try{delete window.frames[c.window.WINDOW_NAME]}catch(f){}b&&b()}}};return{generate:function(a,
d){var f=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css";l.styleSheet?l.styleSheet.cssText=".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}":
l.appendChild(document.createTextNode(".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}"));
f.appendChild(l);l=document.createElement("div");l.id="filepicker_shade";l.className="fp__overlay";l.onclick=h(d);var n=document.createElement("div");n.id="filepicker_dialog_container";n.className="fp__container";var r=e(d),f=document.createElement("iframe");f.name=c.window.WINDOW_NAME;f.id=c.window.WINDOW_NAME;f.style.width="100%";f.style.height="100%";f.style.border="none";f.style.position="relative";f.setAttribute("border",0);f.setAttribute("frameborder",0);f.setAttribute("frameBorder",0);f.setAttribute("marginwidth",
0);f.setAttribute("marginheight",0);f.src=a;n.appendChild(f);l.appendChild(r);l.appendChild(n);document.body.appendChild(l);if(l=b())l.style.overflow="hidden";return f},close:h(function(){}),hide:function(){var b=document.getElementById("filepicker_shade");b&&(b.hidden=!0);if(b=document.getElementById("filepicker_dialog_container"))b.hidden=!0;a()}}});"use strict";
filepicker.extend("picker",function(){function a(a,c){if("filepickerProgress"===a.type)b.uploading=!0,c&&c(a.payload.data);else if("notUploading"===a.type)b.uploading=!1;else if("closeModal"===a.type)b.modal.close();else if("hideModal"===a.type)b.modal.hide();else if("filepickerUrl"===a.type||"serverHttpError"===a.type)return!1;return!0}var b=this,c=function(a){var c=function(c,d,e){a[d]?b.util.isArray(a[d])||(a[d]=[a[d]]):a[c]?a[d]=[a[c]]:e&&(a[d]=e)};c("service","services");c("mimetype","mimetypes");
c("extension","extensions");if(a.services)for(c=0;c<a.services.length;c++){var d=(""+a.services[c]).replace(" ","");void 0!==b.services[d]&&(d=b.services[d]);a.services[c]=d}if(a.mimetypes&&a.extensions)throw b.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function");a.mimetypes||a.extensions||(a.mimetypes=["*/*"]);a.openTo&&(a.openTo=b.services[a.openTo]||a.openTo);b.util.setDefault(a,"container",b.browser.openInModal()?"modal":"window")},d=function(c,
d,e){return function(f){a(f,e)||(b.uploading=!1,f.error?(b.util.console.error(f.error),f.error.code?d(b.errors.FPError(f.error.code)):(d(b.errors.FPError(102)),b.modal.close())):(f=g(f.payload),c(f),b.modal.close()))}},f=function(c,d,e){return function(f){a(f,e)||(b.uploading=!1,f.error?(b.util.console.error(f.error),d(b.errors.FPError(102))):(f.payload.data.url=f.payload.url,c(f.payload.data)),b.modal.close())}},e=function(a){a=a||function(){};return function(c){"uploading"===c.type&&(b.uploading=
!!c.payload,a(b.uploading))}},h=function(a,b,c){a[c]&&(b[c]=a[c])},g=function(a){var b={},c=a.url;c&&c.url&&(c=c.url);b.url=c;a=a.url.data||a.data;b.filename=a.filename;b.mimetype=a.type;b.size=a.size;void 0!==a.cropped&&(b.cropped=a.cropped);void 0!==a.rotated&&(b.rotated=a.rotated);void 0!==a.converted&&(b.converted=a.converted);h(a,b,"id");h(a,b,"key");h(a,b,"container");h(a,b,"path");h(a,b,"client");b.isWriteable=!0;return b},k=function(c,d,e){return function(f){if(!a(f,e)){b.uploading=!1;if(f.error)b.util.console.error(f.error),
d(b.errors.FPError(102));else{var h=[];b.util.isArray(f.payload)||(f.payload=[f.payload]);for(var k=0;k<f.payload.length;k++){var m=g(f.payload[k]);h.push(m)}c(h)}b.modal.close()}}},m=function(a,g,h,q,t,u,w){c(a);var A={close:function(){b.modal.close()}};if(a.debug){var x={id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"},E;E=q||a.storeLocation?[x,x,x]:x;setTimeout(function(){g(E)},1);return A}if(void 0===b.cookies.THIRD_PARTY_COOKIES){var F=
!1;b.cookies.checkThirdParty(function(){F||(m(a,g,h,!!q,t,u),F=!0)});return A}var x=b.util.getId(),y=!1,z=function(b){"window"===a.container&&(window.onbeforeunload=null);y=!0;g(b)},J=function(a){y=!0;h(a)};w?(w=b.urls.constructConvertUrl(a,x),z=d(z,J,u)):q?(w=b.urls.constructPickUrl(a,x,!0),z=k(z,J,u)):t?(w=b.urls.constructPickFolderUrl(a,x),z=f(z,J,u)):(w=b.urls.constructPickUrl(a,x,!1),z=d(z,J,u));b.window.open(a.container,w,function(){y||(y=!0,h(b.errors.FPError(101)))});b.handlers.attach(x,z);
var H=x+"-upload";b.handlers.attach(H,e(function(){b.handlers.detach(H)}));return A};return{createPicker:m}});"use strict";
filepicker.extend("window",function(){var a=this;return{open:function(b,c,d){d=d||function(){};!b&&a.browser.openInModal()?b="modal":b||(b="window");if("window"===b){b="filepicker_dialog"+a.util.getId();window.onbeforeunload=function(){return"Filepicker upload does not complete."};var f=window.open(c,b,"left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes");f||(window.onbeforeunload=null,window.alert("Please disable your popup blocker to upload files."));
var e=window.setInterval(function(){if(!f||f.closed)window.onbeforeunload=null,window.clearInterval(e),d()},100)}else if("modal"===b)a.modal.generate(c,d);else{var h=document.getElementById(b);if(!h)throw new a.FilepickerException('Container "'+b+'" not found. This should either be set to "window","modal", or the ID of an iframe that is currently in the document.');h.src=c}},WINDOW_NAME:"filepicker_dialog"}});"use strict";
filepicker.extend("conversions",function(){var a=this,b={align:"string",blurAmount:"number",crop:"string or array",crop_first:"boolean",compress:"boolean",exif:"string or boolean",filter:"string",fit:"string",format:"string",height:"number",policy:"string",quality:"number",page:"number",rotate:"string or number",secure:"boolean",sharpenAmount:"number",signature:"string",storeAccess:"string",storeContainer:"string",storeRegion:"string",storeLocation:"string",storePath:"string",text:"string",text_align:"string",
text_color:"string",text_font:"string",text_padding:"number",text_size:"number",watermark:"string",watermark_position:"string",watermark_size:"number",width:"number"},c={w:"width",h:"height"},d=function(c){var d,h;for(h in c){d=!1;for(var g in b)if(h===g&&(d=!0,-1===b[g].indexOf(a.util.typeOf(c[h]))))throw new a.FilepickerException("Conversion parameter "+h+" is not the right type: "+c[h]+". Should be a "+b[g]);if(!d)throw new a.FilepickerException("Conversion parameter "+h+" is not a valid parameter.");
}};return{convert:function(b,c,h,g,k){d(c);c.crop&&a.util.isArray(c.crop)&&(c.crop=c.crop.join(","));a.ajax.post(b+"/convert",{data:c,json:!0,success:function(b){h(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?g(new a.errors.FPError(141)):"bad_params"===b?g(new a.errors.FPError(142)):"not_authorized"===b?g(new a.errors.FPError(403)):g(new a.errors.FPError(143))},progress:k})},mapRestParams:function(a){var d={},h;for(h in a)d[c[h]||h]=a[h],"number"===b[c[h]||h]&&(d[c[h]||h]=Number(a[h]));
return d}}});"use strict";
filepicker.extend("errors",function(){var a=this,b=function(a){if(this===window)return new b(a);this.code=a;filepicker.debug?(a=filepicker.error_map[this.code],this.message=a.message,this.moreInfo=a.moreInfo,this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}):this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"};return this};b.isClass=!0;return{FPError:b,handleError:function(b){filepicker.debug&&a.util.console.error(b.toString())}}},
!0);"use strict";
filepicker.extend(function(){var a=this;a.API_VERSION="v2";var b=function(a){this.text=a;this.toString=function(){return"FilepickerException: "+this.text};return this};b.isClass=!0;var c=function(b,c,d,f,m){m(10);a.store(b,function(b){m(50);a.read(b,c,d,f,function(a){m(50+a/2)})},f)},d=function(b,c,d,f){a.util.checkApiKey();"function"===typeof c&&(f=d,d=c,c={});c=c?a.util.clone(c):{};d=d||function(){};f=f||a.errors.handleError;var m;if("string"===typeof b&&a.util.isUrl(b))m=b;else if(b.url)m=b.url,
c.mimetype||c.extension||(c.mimetype=b.mimetype),c.suggestedFilename||(c.suggestedFilename=b.filename);else throw new a.FilepickerException("Invalid file to export: "+b+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export");c.suggestedFilename&&(c.suggestedFilename=encodeURI(c.suggestedFilename));return a.exporter.createExporter(m,c,d,f)},f=function(b,c,d,f){a.util.checkApiKey();"function"===typeof c&&(f=d,d=c,c={});c=c||{};d=d||function(){};f=f||
a.errors.handleError;if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to get metadata for: "+b+". Not a filepicker url or FPFile object.");b=a.util.getFPUrl(b);a.files.stat(a.util.trimConvert(b),c,d,f)};return{setKey:function(b){a.apikey=b},setResponsiveOptions:function(b){return a.responsiveImages.setResponsiveOptions(b)},pick:function(b,c,d,f){a.util.checkApiKey();"function"===typeof b&&(d=c,c=b,b={});b=b||{};d=d||a.errors.handleError;return a.picker.createPicker(b,
c||function(){},d,!1,!1,f)},pickFolder:function(b,c,d,f){a.util.checkApiKey();"function"===typeof b&&(d=c,c=b,b={});b=b||{};d=d||a.errors.handleError;return a.picker.createPicker(b,c||function(){},d,!1,!0,f)},pickMultiple:function(b,c,d,f){a.util.checkApiKey();"function"===typeof b&&(f=d,d=c,c=b,b={});b=b||{};d=d||a.errors.handleError;return a.picker.createPicker(b,c||function(){},d,!0,!1,f)},pickAndStore:function(b,c,d,f,m){a.util.checkApiKey();if(!b||!c||"function"===typeof b||"function"===typeof b)throw new a.FilepickerException("Not all required parameters given, missing picker or store options");
f=f||a.errors.handleError;var l=!!b.multiple;b=b?a.util.clone(b):{};b.storeLocation=c.location||"S3";b.storePath=c.path;b.storeContainer=c.storeContainer||c.container;b.storeRegion=c.storeRegion;b.storeAccess=c.access||"private";if(l&&b.storePath&&"/"!==b.storePath.charAt(b.storePath.length-1))throw new a.FilepickerException(NaN/0);c=d;l||(c=function(a){d([a])});return a.picker.createPicker(b,c,f,l,!1,m)},read:function(b,d,f,k,m){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No input given - nothing to read!");
"function"===typeof d&&(m=k,k=f,f=d,d={});d=d||{};f=f||function(){};k=k||a.errors.handleError;m=m||function(){};if("string"===typeof b)a.util.isFPUrl(b)?a.files.readFromFPUrl(b,d,f,k,m):a.files.readFromUrl(b,d,f,k,m);else if(a.util.isFileInputElement(b))b.files?0===b.files.length?k(new a.errors.FPError(115)):a.files.readFromFile(b.files[0],d,f,k,m):c(b,d,f,k,m);else if(a.util.isFile(b))a.files.readFromFile(b,d,f,k,m);else if(b.url)a.files.readFromFPUrl(b.url,d,f,k,m);else throw new a.FilepickerException("Cannot read given input: "+
b+". Not a url, file input, DOM File, or FPFile object.");},write:function(b,c,d,f,m,l){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No fpfile given - nothing to write to!");if(void 0===c||null===c)throw new a.FilepickerException("No input given - nothing to write!");"function"===typeof d&&(l=m,m=f,f=d,d={});d=d||{};f=f||function(){};m=m||a.errors.handleError;l=l||function(){};if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to write to: "+
b+". Not a filepicker url or FPFile object.");b=a.util.trimConvert(a.util.getFPUrl(b));if("string"===typeof c)a.files.writeDataToFPUrl(b,c,d,f,m,l);else if(a.util.isFileInputElement(c))c.files?0===c.files.length?m(new a.errors.FPError(115)):a.files.writeFileToFPUrl(b,c.files[0],d,f,m,l):a.files.writeFileInputToFPUrl(b,c,d,f,m,l);else if(a.util.isFile(c))a.files.writeFileToFPUrl(b,c,d,f,m,l);else if(c.url)a.files.writeUrlToFPUrl(b,c.url,d,f,m,l);else throw new a.FilepickerException("Cannot read from given input: "+
c+". Not a string, file input, DOM File, or FPFile object.");},writeUrl:function(b,c,d,f,m,l){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No fpfile given - nothing to write to!");if(void 0===c||null===c)throw new a.FilepickerException("No input given - nothing to write!");"function"===typeof d&&(l=m,m=f,f=d,d={});d=d||{};f=f||function(){};m=m||a.errors.handleError;l=l||function(){};if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to write to: "+
b+". Not a filepicker url or FPFile object.");b=a.util.getFPUrl(b);a.files.writeUrlToFPUrl(a.util.trimConvert(b),c,d,f,m,l)},"export":d,exportFile:d,processImage:function(b,c,d,f,m){var l;a.util.checkApiKey();"function"===typeof c&&(f=d,d=c,c={});c=c||{};d=d||function(){};f=f||a.errors.handleError;if("string"===typeof b)l=b;else if(b.url)l=b.url,c.filename||(c.filename=b.filename);else throw new a.FilepickerException("Invalid file to convert: "+b+". Not a valid url or FPFile object or not filepicker url. You can convert only filepicker url images.");
c.convertUrl=l;c.multiple=!1;c.services=["CONVERT","COMPUTER"];c.backgroundUpload=!0;c.hide=!1;return a.picker.createPicker(c,d,f,!1,!1,m,!0)},store:function(b,c,d,f,m){a.util.checkApiKey();"function"===typeof c&&(m=f,f=d,d=c,c={});c=c?a.util.clone(c):{};d=d||function(){};f=f||a.errors.handleError;m=m||function(){};if("string"===typeof b)a.files.storeData(b,c,d,f,m);else if(a.util.isFileInputElement(b))b.files?0===b.files.length?f(new a.errors.FPError(115)):a.files.storeFile(b.files[0],c,d,f,m):a.files.storeFileInput(b,
c,d,f,m);else if(a.util.isFile(b))a.files.storeFile(b,c,d,f,m);else if(b.url)c.filename||(c.filename=b.filename),a.files.storeUrl(b.url,c,d,f,m);else throw new a.FilepickerException("Cannot store given input: "+b+". Not a string, file input, DOM File, or FPFile object.");},storeUrl:function(b,c,d,f,m){a.util.checkApiKey();"function"===typeof c&&(m=f,f=d,d=c,c={});c=c||{};f=f||a.errors.handleError;a.files.storeUrl(b,c,d||function(){},f,m||function(){})},stat:f,metadata:f,remove:function(b,c,d,f){a.util.checkApiKey();
"function"===typeof c&&(f=d,d=c,c={});c=c||{};d=d||function(){};f=f||a.errors.handleError;if(!a.util.isFPUrl(a.util.getFPUrl(b)))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to remove: "+b+". Not a filepicker url or FPFile object.");b=a.util.getFPUrl(b);a.files.remove(a.util.trimConvert(b),c,d,f)},convert:function(b,c,d,f,m,l){a.util.checkApiKey();if(!b)throw new a.FilepickerException("No fpfile given - nothing to convert!");"function"===typeof d&&(l=m,m=f,f=d,d={});c=c?a.util.clone(c):
{};d=d||{};f=f||function(){};m=m||a.errors.handleError;l=l||function(){};d.location&&(c.storeLocation=d.location);d.path&&(c.storePath=d.path);d.container&&(c.storeContainer=d.container);c.storeAccess=d.access||"private";if(a.util.isFPUrl(a.util.getFPUrl(b)))d=b;else if(b.url){if(d=b.url,!a.mimetypes.matchesMimetype(b.mimetype,"image/*")&&!a.mimetypes.matchesMimetype(b.mimetype,"application/pdf")){m(new a.errors.FPError(142));return}}else throw new a.FilepickerException("Invalid file to convert: "+
b+". Not a filepicker url or FPFile object.");d=a.util.getFPUrl(d);if(-1<d.indexOf("/convert")){b=a.util.parseUrl(d).params;b=a.conversions.mapRestParams(b);b.crop&&a.util.setDefault(b,"crop_first",!0);for(var n in b)a.util.setDefault(c,n,b[n])}a.conversions.convert(a.util.trimConvert(d),c,f,m,l)},constructWidget:function(b){return a.widgets.constructWidget(b)},makeDropPane:function(b,c){return a.dragdrop.makeDropPane(b,c)},FilepickerException:b,responsive:function(){a.responsiveImages.update.apply(null,
arguments)},version:"2.4.11"}},!0);"use strict";
filepicker.extend("mimetypes",function(){var a=this,b={".stl":"application/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist",".vob":"video/dvd"},c="application/octet-stream application/download application/force-download octet/stream application/unknown application/x-download application/x-msdownload application/x-secure-download".split(" ");return{getMimetype:function(a){if(a.type){for(var f=a.type,f=
f.toLowerCase(),e=!1,h=0;h<c.length;h++)e=e||f===c[h];if(!e)return a.type}return(f=(a.name||a.fileName).match(/\.\w*$/))?b[f[0].toLowerCase()]||"":a.type?a.type:""},matchesMimetype:function(b,f){if(!b)return"*/*"===f;b=a.util.trim(b).toLowerCase();f=a.util.trim(f).toLowerCase();for(var e=0;e<c.length;e++)if(b===c[e])return!0;var e=b.split("/"),h=f.split("/");return"*"===h[0]?!0:h[0]!==e[0]?!1:"*"===h[1]?!0:h[1]===e[1]}}});"use strict";
filepicker.extend("services",function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23,GENERIC:24,CONVERT:25,AUDIO:26}},!0);"use strict";
filepicker.extend("urls",function(){function a(a,d){return"?key="+f.apikey+"&id="+d+"&referrer="+window.location.hostname+"&iframe="+("window"!==a.container)+"&version="+f.API_VERSION+(a.services?"&s="+a.services.join(","):"")+(void 0!==a.container?"&container="+a.container:"modal")+(a.openTo?"&loc="+a.openTo:"")+"&language="+(a.language||f.browser.getLanguage())+(void 0!==a.mobile?"&mobile="+a.mobile:"")+(void 0!==a.backgroundUpload?"&bu="+a.backgroundUpload:"")+(a.cropRatio?"&cratio="+a.cropRatio:
"")+(a.cropDim?"&cdim="+a.cropDim.join(","):"")+(a.cropMax?"&cmax="+a.cropMax.join(","):"")+(a.cropMin?"&cmin="+a.cropMin.join(","):"")+(void 0!==a.cropForce?"&cforce="+a.cropForce:"")+(void 0!==a.hide?"&hide="+a.hide:"")+(a.customCss?"&css="+encodeURIComponent(a.customCss):"")+(a.customText?"&text="+encodeURIComponent(a.customText):"")+(a.imageMin?"&imin="+a.imageMin.join(","):"")+(a.imageMax?"&imax="+a.imageMax.join(","):"")+(a.imageDim?"&idim="+a.imageDim.join(","):"")+(a.imageQuality?"&iq="+a.imageQuality:
"")+(a.noFileReader?"&nfl="+a.noFileReader:"")+(f.util.isCanvasSupported()?"":"&canvas=false")+(a.redirectUrl?"&redirect_url="+a.redirectUrl:"")+(a.showClose&&"modal"!==a.container?"&showClose="+a.showClose:"")+b(a)+"&plugin="+c()}function b(a){return(a.signature?"&signature="+a.signature:"")+(a.policy?"&policy="+a.policy:"")}function c(){return filepicker.plugin||"js_lib"}function d(a){a=a||[];var b=[],c,d;for(c in a)for(d in r)a[c]===r[d]&&a.hasOwnProperty(c)&&b.push(a[c]);b.length||b.push("crop");
return"&co="+b.join(",")}var f=this,e="https://www.filepicker.io";window.filepicker.hostname&&(e=window.filepicker.hostname);var h=e.replace("www","dialog"),g=h+"/dialog/open/",k=h+"/dialog/save/",m=h+"/dialog/process/",l=h+"/dialog/folder/",n=e+"/api/store/",r=["crop","rotate","filter"];return{BASE:e,DIALOG_BASE:h,API_COMM:e+"/dialog/comm_iframe/",COMM:h+"/dialog/comm_iframe/",FP_COMM_FALLBACK:h+"/dialog/comm_hash_iframe/",STORE:n,PICK:g,EXPORT:k,constructPickUrl:function(b,c,e){return g+a(b,c)+
(e?"&multi="+!!e:"")+(void 0!==b.mimetypes?"&m="+b.mimetypes.join(","):"")+(void 0!==b.extensions?"&ext="+b.extensions.join(","):"")+(b.maxSize?"&maxSize="+b.maxSize:"")+(b.customSourceContainer?"&customSourceContainer="+b.customSourceContainer:"")+(b.customSourcePath?"&customSourcePath="+b.customSourcePath:"")+(b.maxFiles?"&maxFiles="+b.maxFiles:"")+(void 0!==b.folders?"&folders="+b.folders:"")+(b.storeLocation?"&storeLocation="+b.storeLocation:"")+(b.storePath?"&storePath="+b.storePath:"")+(b.storeContainer?
"&storeContainer="+b.storeContainer:"")+(b.storeRegion?"&storeRegion="+b.storeRegion:"")+(b.storeAccess?"&storeAccess="+b.storeAccess:"")+(b.webcam&&b.webcam.webcamDim?"&wdim="+b.webcam.webcamDim.join(","):"")+(b.webcamDim?"&wdim="+b.webcamDim.join(","):"")+(b.webcam&&b.webcam.videoRes?"&videoRes="+b.webcam.videoRes:"")+(b.webcam&&b.webcam.videoLen?"&videoLen="+b.webcam.videoLen:"")+(b.webcam&&b.webcam.audioLen?"&audioLen="+b.webcam.audioLen:"")+d(b.conversions)},constructConvertUrl:function(b,c){var e=
b.convertUrl;if(0<=e.indexOf("&")||0<=e.indexOf("?"))e=encodeURIComponent(e);return m+a(b,c)+"&curl="+e+d(b.conversions)},constructPickFolderUrl:function(b,c){return l+a(b,c)},constructExportUrl:function(b,c,d){if(0<=b.indexOf("&")||0<=b.indexOf("?"))b=encodeURIComponent(b);return k+a(c,d)+"&url="+b+(void 0!==c.mimetype?"&m="+c.mimetype:"")+(void 0!==c.extension?"&ext="+c.extension:"")+(c.suggestedFilename?"&defaultSaveasName="+c.suggestedFilename:"")},constructWriteUrl:function(a,d){return a+"?nonce=fp"+
(d.base64decode?"&base64decode=true":"")+(d.mimetype?"&mimetype="+d.mimetype:"")+b(d)+"&plugin="+c()},constructStoreUrl:function(a){return n+a.location+"?key="+f.apikey+(a.base64decode?"&base64decode=true":"")+(a.mimetype?"&mimetype="+a.mimetype:"")+(a.filename?"&filename="+encodeURIComponent(a.filename):"")+(a.path?"&path="+a.path:"")+(a.container?"&container="+a.container:"")+(a.access?"&access="+a.access:"")+b(a)+"&plugin="+c()},constructHostCommFallback:function(){return f.util.parseUrl(window.location.href).origin+
"/404"},getPlugin:c}});"use strict";
filepicker.extend("ajax",function(){var a=this,b=function(c,d){var f=[],k;for(k in c){var m=c[k];d&&(k=d+". + key + ");var l;switch(a.util.typeOf(m)){case "object":l=b(m,k);break;case "array":l={};for(var n=0;n<m.length;n++)l[n]=m[n];l=b(l,k);break;default:l=k+"="+encodeURIComponent(m)}null!==m&&f.push(l)}return f.join("&")},c=function(){try{return new window.XMLHttpRequest}catch(a){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(c){return null}}}},d=
function(d,h){d=d||"";var g=h.method?h.method.toUpperCase():"POST",k=h.success||function(){},m=h.error||function(){},l=void 0===h.async?!0:h.async,n=h.data||null,r=void 0===h.processData?!0:h.processData,q=h.headers||{},t=a.util.parseUrl(d),u=window.location.protocol+"//"+window.location.host!==t.origin,w=!1;d+=(0<=d.indexOf("?")?"&":"?")+"plugin="+a.urls.getPlugin();n&&r&&(n=b(h.data));var A;if(h.xhr)A=h.xhr;else if(A=c(),!A)return h.error("Ajax not allowed"),A;if(u&&window.XDomainRequest&&!("withCredentials"in
A))return new f(d,h);h.progress&&A.upload&&A.upload.addEventListener("progress",function(a){a.lengthComputable&&h.progress(Math.round(95*a.loaded/a.total))},!1);A.onreadystatechange=function(){if(4==A.readyState&&!w){h.progress&&h.progress(100);if(200<=A.status&&300>A.status){var b=A.responseText;if(h.json)try{b=a.json.decode(b)}catch(c){x.call(A,"Invalid json: "+b);return}k(b,A.status,A)}else x.call(A,A.responseText);w=!0}};var x=function(a){w||(h.progress&&h.progress(100),w=!0,400==this.status?
m("bad_params",this.status,this):403==this.status?m("not_authorized",this.status,this):404==this.status?m("not_found",this.status,this):u?4==this.readyState&&0===this.status?m("CORS_not_allowed",this.status,this):m("CORS_error",this.status,this):m(a,this.status,this))};A.onerror=x;n&&"GET"==g&&(d+=(-1!==d.indexOf("?")?"&":"?")+n,n=null);A.open(g,d,l);h.json?A.setRequestHeader("Accept","application/json, text/javascript"):A.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*");
l=q["Content-Type"]||q["content-type"];n&&r&&("POST"==g||"PUT"==g)&&void 0===l&&A.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(q)for(var E in q)A.setRequestHeader(E,q[E]);A.send(n);return A},f=function(c,d){if(!window.XDomainRequest)return null;var f=d.method?d.method.toUpperCase():"POST",k=d.success||function(){},m=d.error||function(){},l=d.data||{};"http:"==window.location.protocol?c=c.replace("https:","http:"):"https:"==window.location.protocol&&(c=c.replace("http:",
"https:"));if(d.async)throw new a.FilepickerException("Asyncronous Cross-domain requests are not supported");"GET"!==f&&"POST"!==f&&(l._method=f,f="POST");!1!==d.processData&&(l=l?b(l):null);l&&"GET"==f&&(c+=(0<=c.indexOf("?")?"&":"?")+l,l=null);c+=(0<=c.indexOf("?")?"&":"?")+"_xdr=true&_cacheBust="+a.util.getId();var n=new window.XDomainRequest;n.onload=function(){var b=n.responseText;d.progress&&d.progress(100);if(d.json)try{b=a.json.decode(b)}catch(c){m("Invalid json: "+b,200,n);return}k(b,200,
n)};n.onerror=function(){d.progress&&d.progress(100);m(n.responseText||"CORS_error",this.status||500,this)};n.onprogress=function(){};n.ontimeout=function(){};n.timeout=3E4;n.open(f,c,!0);n.send(l);return n};return{get:function(a,b){b.method="GET";d(a,b)},post:function(b,c){c.method="POST";b+=(0<=b.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();d(b,c)},request:d}});"use strict";
filepicker.extend("files",function(){var a=this,b=function(b,c,d,g,k){!0!==c.cache&&(c._cacheBust=a.util.getId());a.ajax.get(b,{data:c,headers:{"X-NO-STREAM":!0},success:d,error:function(b,c,d){"CORS_not_allowed"===b?g(new a.errors.FPError(113)):"CORS_error"===b?g(new a.errors.FPError(114)):"not_found"===b?g(new a.errors.FPError(115)):"bad_params"===b?g(new a.errors.FPError(400)):"not_authorized"===b?g(new a.errors.FPError(403)):g(new a.errors.FPError(118))},progress:k})},c=function(b,c,h,g,k){a.util.setDefault(c,
"location","S3");c.filename||(c.filename=b.name||b.fileName);d(b,a.urls.constructStoreUrl(c),function(b){h(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"===b?g(new a.errors.FPError(121)):"bad_params"===b?g(new a.errors.FPError(122)):"not_authorized"===b?g(new a.errors.FPError(403)):(a.util.console.error(b),g(new a.errors.FPError(123)))},k)},d=function(b,c,d,g,k){b.files&&(b=b.files[0]);if(window.FormData&&window.XMLHttpRequest){var m=new window.FormData;m.append("fileUpload",b);a.ajax.post(c,
{json:!0,processData:!1,data:m,success:d,error:g,progress:k})}else a.iframeAjax.post(c,{data:b,json:!0,success:d,error:g})};return{readFromUrl:b,readFromFile:function(b,c,d,g,k){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var m=!!c.base64encode,l=!!c.asText,n=new FileReader;n.onprogress=function(a){a.lengthComputable&&k(Math.round(a.loaded/a.total*100))};n.onload=function(b){k(100);m?d(a.base64.encode(b.target.result,l)):d(b.target.result)};n.onerror=function(b){switch(b.target.error.code){case b.target.error.NOT_FOUND_ERR:g(new a.errors.FPError(115));
break;case b.target.error.NOT_READABLE_ERR:g(new a.errors.FPError(116));break;case b.target.error.ABORT_ERR:g(new a.errors.FPError(117));break;default:g(new a.errors.FPError(118))}};l||!n.readAsBinaryString?n.readAsText(b):n.readAsBinaryString(b)}else k(10),a.files.storeFile(b,{},function(b){k(50);a.files.readFromFPUrl(b.url,c,d,g,function(a){k(50+a/2)})},g,function(a){k(a/2)})},readFromFPUrl:function(c,d,h,g,k){var m=void 0===d.base64encode;m&&(d.base64encode=!0);d.base64encode=!1!==d.base64encode;
b.call(this,c,d,function(b){m&&(b=a.base64.decode(b,!!d.asText));h(b)},g,k)},writeDataToFPUrl:function(b,c,d,g,k,m){var l=d.mimetype||"text/plain";a.ajax.post(a.urls.constructWriteUrl(b,d),{headers:{"Content-Type":l},data:c,processData:!1,json:!0,success:function(b){g(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},progress:m})},
writeFileToFPUrl:function(b,c,h,g,k,m){h.mimetype=c.type;d(c,a.urls.constructWriteUrl(b,h),function(b){g(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},m)},writeFileInputToFPUrl:function(b,c,h,g,k,m){d(c,a.urls.constructWriteUrl(b,h),function(b){g(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):
"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},m)},writeUrlToFPUrl:function(b,c,d,g,k,m){a.ajax.post(a.urls.constructWriteUrl(b,d),{data:{url:c},json:!0,success:function(b){g(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?k(new a.errors.FPError(121)):"bad_params"===b?k(new a.errors.FPError(122)):"not_authorized"===b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},progress:m})},storeFileInput:function(b,
d,h,g,k){if(b.files)0===b.files.length?g(new a.errors.FPError(115)):c(b.files[0],d,h,g,k);else{a.util.setDefault(d,"location","S3");d.filename||(d.filename=b.value.replace("C:\\fakepath\\","")||b.name);var m=b.name;b.name="fileUpload";a.iframeAjax.post(a.urls.constructStoreUrl(d),{data:b,processData:!1,json:!0,success:function(c){b.name=m;h(a.util.standardizeFPFile(c))},error:function(b,c,d){"not_found"===b?g(new a.errors.FPError(121)):"bad_params"===b?g(new a.errors.FPError(122)):"not_authorized"===
b?g(new a.errors.FPError(403)):g(new a.errors.FPError(123))}})}},storeFile:c,storeUrl:function(b,c,d,g,k){a.util.setDefault(c,"location","S3");a.ajax.post(a.urls.constructStoreUrl(c),{data:{url:a.util.getFPUrl(b)},json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?g(new a.errors.FPError(151)):"bad_params"===b?g(new a.errors.FPError(152)):"not_authorized"===b?g(new a.errors.FPError(403)):g(new a.errors.FPError(153))},progress:k})},storeData:function(b,
c,d,g,k){a.util.setDefault(c,"location","S3");a.util.setDefault(c,"mimetype","text/plain");a.ajax.post(a.urls.constructStoreUrl(c),{headers:{"Content-Type":c.mimetype},data:b,processData:!1,json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"===b?g(new a.errors.FPError(121)):"bad_params"===b?g(new a.errors.FPError(122)):"not_authorized"===b?g(new a.errors.FPError(403)):g(new a.errors.FPError(123))},progress:k})},stat:function(b,c,d,g){var k=["uploaded","modified",
"created"];!0!==c.cache&&(c._cacheBust=a.util.getId());a.ajax.get(b+"/metadata",{json:!0,data:c,success:function(a){for(var b=0;b<k.length;b++)a[k[b]]&&(a[k[b]]=new Date(a[k[b]]));d(a)},error:function(b,c,d){"not_found"===b?g(new a.errors.FPError(161)):"bad_params"===b?g(new a.errors.FPError(400)):"not_authorized"===b?g(new a.errors.FPError(403)):g(new a.errors.FPError(162))}})},remove:function(b,c,d,g){c.key=a.apikey;a.ajax.post(b+"/remove",{data:c,success:function(a){d()},error:function(b,c,d){"not_found"===
b?g(new a.errors.FPError(171)):"bad_params"===b?g(new a.errors.FPError(400)):"not_authorized"===b?g(new a.errors.FPError(403)):g(new a.errors.FPError(172))}})}}});"use strict";
filepicker.extend("iframeAjax",function(){var a=this,b=[],c=!1,d=function(d,g){if(c)b.push({url:d,options:g});else{d+=(0<=d.indexOf("?")?"&":"?")+"plugin="+a.urls.getPlugin()+"&_cacheBust="+a.util.getId();d+="&Content-Type=text%2Fhtml";a.comm.openChannel();var k;try{k=document.createElement('<iframe name="ajax_iframe">')}catch(t){k=document.createElement("iframe")}k.id=k.name="ajax_iframe";k.style.display="none";var m=function(){c=!1};k.attachEvent?(k.attachEvent("onload",m),k.attachEvent("onerror",
m)):k.onerror=k.onload=m;k.id="ajax_iframe";k.name="ajax_iframe";k.style.display="none";k.onerror=k.onload=function(){c=!1};document.body.appendChild(k);a.handlers.attach("upload",f(g));var l=document.createElement("form");l.method=g.method||"GET";l.action=d;l.target="ajax_iframe";k=g.data;if(a.util.isFileInputElement(k)||a.util.isFile(k))l.encoding=l.enctype="multipart/form-data";document.body.appendChild(l);if(a.util.isFile(k)){k=e(k);if(!k)throw a.FilepickerException("Couldn't find corresponding file input.");
k={fileUpload:k}}else a.util.isFileInputElement(k)?(m=k,k={},k.fileUpload=m):k&&a.util.isElement(k)&&"INPUT"===k.tagName?(m=k,k={},k[m.name]=m):!1!==g.processData&&(k={data:k});k.format="iframe";var n={},r;for(r in k)if(m=k[r],a.util.isElement(m)&&"INPUT"===m.tagName)n[r]={par:m.parentNode,sib:m.nextSibling,name:m.name,input:m,focused:m===document.activeElement},m.name=r,l.appendChild(m);else{var q=document.createElement("input");q.name=r;q.value=m;l.appendChild(q)}c=!0;window.setTimeout(function(){l.submit();
for(var a in n){var b=n[a];b.par.insertBefore(b.input,b.sib);b.input.name=b.name;b.focused&&b.input.focus()}l.parentNode.removeChild(l)},1)}},f=function(e){var f=e.success||function(){},k=e.error||function(){};return function(e){"Upload"===e.type&&(c=!1,e=e.payload,e.error?k(e.error):f(e),a.handlers.detach("upload"),0<b.length&&(e=b.shift(),d(e.url,e.options)))}},e=function(a){for(var b=document.getElementsByTagName("input"),c=0;c<b.length;c++){var d=b[0];if("file"===d.type&&d.files&&d.files.length)for(var e=
0;e<d.files.length;e++)if(d.files[e]===a)return d}return null};return{get:function(a,b){b.method="GET";d(a,b)},post:function(b,c){c.method="POST";b+=(0<=b.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();d(b,c)},request:d}});"use strict";
filepicker.extend("base64",function(){return{encode:function(a,b){var c="",d,f,e,h,g,k,m=0;if(b||void 0===b){f=a.replace(/\r\n/g,"\n");e="";for(h=0;h<f.length;h++)d=f.charCodeAt(h),128>d?e+=String.fromCharCode(d):(127<d&&2048>d?e+=String.fromCharCode(d>>6|192):(e+=String.fromCharCode(d>>12|224),e+=String.fromCharCode(d>>6&63|128)),e+=String.fromCharCode(d&63|128));a=e}for(;m<a.length;)d=a.charCodeAt(m),f=a.charCodeAt(m+1),e=a.charCodeAt(m+2),m+=3,h=d>>2,d=(d&3)<<4|f>>4,g=(f&15)<<2|e>>6,k=e&63,isNaN(f)?
g=k=64:isNaN(e)&&(k=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);return c},decode:function(a,b){b=b||void 0===b;var c="",d,f,e,h,g,k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k)),
f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k+1)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k+2)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k+3)),k+=4,d=d<<2|f>>4,f=(f&15)<<4|h>>2,e=(h&3)<<6|g,c+=String.fromCharCode(d),64!=h&&(c+=String.fromCharCode(f)),64!=g&&(c+=String.fromCharCode(e));if(b){h="";for(d=k=g=0;g<c.length;)k=c.charCodeAt(g),128>k?(h+=String.fromCharCode(k),
g++):191<k&&224>k?(d=c.charCodeAt(g+1),h+=String.fromCharCode((k&31)<<6|d&63),g+=2):(d=c.charCodeAt(g+1),c3=c.charCodeAt(g+2),h+=String.fromCharCode((k&15)<<12|(d&63)<<6|c3&63),g+=3);c=h}return c}}},!0);"use strict";
filepicker.extend("browser",function(){var a=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))};return{getLanguage:function(){var a=window.navigator.userLanguage||window.navigator.language;void 0===a&&(a="en");return a=a.replace("-","_").toLowerCase()},openInModal:function(){return!(a()||navigator.userAgent.match(/Android/i))||!!window.navigator.standalone},isMobile:function(){return a()||!!navigator.userAgent.match(/Android/i)}}});
"use strict";
filepicker.extend("conversionsUtil",function(){var a=this,b=a.urls.BASE.replace("www","process")+"/";return{CONVERSION_DOMAIN:b,parseUrl:function(a){if(!a)return{url:null,optionsDict:{}};a=a.replace(b,"");var d=a.substring(a.indexOf("/http")+1);a=a.replace("/"+d,"");var f=a.substring(0,a.indexOf("/"));a=a.replace(f+"/","");a=a.split("/");var e={},h,g,k,m,l;for(m in a)if(h=a[m].split("="),1<h.length)for(l in e[h[0]]={},g=h[1].split(","),g)k=g[l].split(":"),1<k.length&&(e[h[0]][k[0]]=k[1]);else a[m]&&
(e[a[m]]=null);return{url:d,apikey:f,optionsDict:e}},buildUrl:function(c,d,f){f=b+f;var e,h,g;d=d||{};for(e in d)for(h in f+="/"+e,(g=a.util.objectKeys(d[e]||{}).length)&&(f+="="),d[e])f+=h+":"+d[e][h],0!==--g&&(f+=",");return f+("/"+c)}}});"use strict";
filepicker.extend("json",function(){var a=this,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c=function(a){return b[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},d=function(a){a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},f=function(b){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(b);
b&&b.toJSON&&(b=b.toJSON());var d=[];switch(a.util.typeOf(b)){case "string":return'"'+b.replace(/[\x00-\x1f\\"]/g,c)+'"';case "array":for(var e=0;e<b.length;e++)d.push(f(b[e]));return"["+d+"]";case "object":case "hash":for(var m in b)(e=f(b[m]))&&d.push(f(m)+":"+e);return"{"+d+"}";case "number":case "boolean":return""+b;case "null":return"null";default:return"null"}},e=function(b,c){if(!b||"string"!==a.util.typeOf(b))return null;if(window.JSON&&window.JSON.parse)return window.JSON.parse(b);if(c&&
!d(b))throw Error("JSON could not decode the input; security is enabled and the value is not secure.");return eval("("+b+")")};return{validate:d,encode:f,stringify:f,decode:e,parse:e}});"use strict";
filepicker.extend("util",function(){var a=/^(http|https)\:.*\/\//i;return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},trimConvert:function(a){return a.replace(/\/convert\b.*/,"")},parseUrl:function(a){a&&"/"!==a.charAt(0)||(a=window.location.protocol+"//"+window.location.host+a);var c=document.createElement("a");c.href=a;for(var d=-1===c.hostname.indexOf(":")?c.hostname:c.host,f=c.protocol.replace(":",""),e=c.port,h=c.search,g={},k=c.search.replace(/^\?/,"").split("&"),m=k.length,l=0,n;l<
m;l++)k[l]&&(n=k[l].split("="),g[n[0]]=n[1]);c={source:a,protocol:f,host:d,port:e,query:h,params:g,file:(c.pathname.match(/\/([^\/?#]+)$/i)||[void 0,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||[void 0,""])[1],segments:c.pathname.replace(/^\//,"").split("/")};c.origin=c.protocol+"://"+c.host+(c.port?":"+c.port:"");c.rawUrl=(c.origin+c.path).replace("/convert","");return c},isUrl:function(b){return!!b.match(a)},endsWith:function(a,
c){return-1!==a.indexOf(c,a.length-c.length)},appendQueryToUrl:function(a,c,d){return a+(0<=a.indexOf("?")?"&":"?")+c+"="+d}}});"use strict";
filepicker.extend("util",function(){var a=this,b=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},c=function(a){return a&&"[object File]"===Object.prototype.toString.call(a)},d=function(a){return"object"===typeof window.HTMLElement?a instanceof window.HTMLElement:a&&"object"===typeof a&&1===a.nodeType&&"string"===typeof a.nodeName},f=function(a){return function(){if(window.console&&"function"===typeof window.console[a])try{window.console[a].apply(window.console,arguments)}catch(b){window.alert(Array.prototype.join.call(arguments,
","))}}},e={};e.log=f("log");e.error=f("error");return{isArray:b,isFile:c,isElement:d,isFileInputElement:function(a){return d(a)&&"INPUT"===a.tagName&&"file"===a.type},getId:function(){return(new Date).getTime().toString()},setDefault:function(a,b,c){void 0===a[b]&&(a[b]=c)},typeOf:function(a){return null===a?"null":b(a)?"array":c(a)?"file":typeof a},addOnLoad:function(a){if(window.jQuery)window.jQuery(function(){a()});else if(window.addEventListener)window.addEventListener("load",a,!1);else if(window.attachEvent)window.attachEvent("onload",
a);else if(window.onload){var b=window.onload;window.onload=function(){b();a()}}else window.onload=a},isFPUrl:function(b){return"string"===typeof b&&b.match(a.urls.BASE+"/api/file/")},getFPUrl:function(b){if("string"===typeof b){var c=b.match(/(?:cdn.filestackcontent.com|cdn.filepicker.io)[\S]*\/([\S]{20,})/);if(c&&1<c.length)return a.urls.BASE+"/api/file/"+c[1]}return b},isFPUrlCdn:function(a){return"string"===typeof a&&a.match("/api/file/")},console:e,clone:function(a){var b={},c;for(c in a)b[c]=
a[c];return b},standardizeFPFile:function(a){var b={};b.url=a.url;b.filename=a.filename||a.name;b.mimetype=a.mimetype||a.type;b.size=a.size;b.key=a.key||a.s3_key;b.isWriteable=!(!a.isWriteable&&!a.writeable);return b},isCanvasSupported:function(){try{var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}catch(b){return!1}},extend:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},checkApiKey:function(){if(!a.apikey)throw new a.FilepickerException("API Key not found");
},objectKeys:function(a){return"function"!==typeof Object.keys?function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}:Object.keys(a)}}});"use strict";filepicker.extend("windowUtils",function(){return{getWidth:function(){return document.documentElement.clientWidth||document.body&&document.body.clientWidth||1024},getHeight:function(){return document.documentElement.clientHeight||document.body&&document.body.clientHeight||768}}});"use strict";
filepicker.extend("dragdrop",function(){var a=this,b=function(){return(!!window.FileReader||0<=navigator.userAgent.indexOf("Safari"))&&"draggable"in document.createElement("span")};return{enabled:b,makeDropPane:function(c,d){function f(b){var c=E(0,1),d=a.util.clone(b);d.name=d.filename;J([d])?c(b):a.files.remove(b.url,t,function(){},function(){})}if(!c)throw new a.FilepickerException("No DOM element found to create drop pane");if(c.jquery){if(0===c.length)throw new a.FilepickerException("No DOM element found to create drop pane");
c=c[0]}if(!b())return a.util.console.error("Your browser doesn't support drag-drop functionality"),!1;d=d||{};var e=d.dragEnter||function(){},h=d.dragLeave||function(){},g=d.onStart||function(){},k=d.onSuccess||function(){},m=d.onError||function(){},l=d.onProgress||function(){},n=d.mimetypes;n||(n=d.mimetype?[d.mimetype]:["*/*"]);"string"===a.util.typeOf(n)&&(n=n.split(","));var r=d.extensions;r||d.extension&&(r=[d.extension]);"string"===a.util.typeOf(r)&&(r=r.replace(/ /g,"").split(","));if(r)for(var q=
0;q<r.length;q++)r[q]=r[q].toLowerCase();var t={location:d.location,path:d.path,container:d.container,access:d.access,policy:d.policy,signature:d.signature},u=function(){return c&&"disabled"!==(c.getAttribute("disabled")||"enabled")};c.addEventListener("dragenter",function(a){u()&&e();a.stopPropagation();a.preventDefault();return!1},!1);c.addEventListener("dragleave",function(a){u()&&h();a.stopPropagation();a.preventDefault();return!1},!1);c.addEventListener("dragover",function(a){a.dataTransfer.dropEffect=
"copy";a.preventDefault();return!1},!1);c.addEventListener("drop",function(b){b.stopPropagation();b.preventDefault();if(!u())return!1;var d;a:{var e,h;if(b.dataTransfer.items)for(e=b.dataTransfer.items,h=0;h<e.length;h++)if((d=e[h]&&e[h].webkitGetAsEntry?e[h].webkitGetAsEntry():void 0)&&d.isDirectory){m("WrongType","Uploading a folder is not allowed");d=!0;break a}d=!1}if(d)return!1;d=b.dataTransfer.files;var k;if((b=b.dataTransfer)&&"function"===typeof b.getData){k=b.getData("text");try{k=k||b.getData("text/html")}catch(l){a.util.console.error(l)}k&&
!a.util.isUrl(k)&&(k=(k=k.match(/<img.*?src="(.*?)"/i))&&1<k.length?k[1]:null)}if(d.length){if(k=d.length,J(d))for(g(d),c.setAttribute("disabled","disabled"),b=0;b<d.length;b++)a.store(d[b],t,E(b,k),F,y(b,k))}else k?(d=y(0,1),a.storeUrl(k,f,F,d)):m("NoFilesFound","No files uploaded");return!1});var w=function(){c.setAttribute("disabled","enabled");window.$&&window.$(c).prop("disabled",!1)},A={},x=[],E=function(a,b){return function(c){d.multiple?(x.push(c),x.length===b?(k(x),x=[],A={}):(A[a]=100,z(b))):
k([c]);w()}},F=function(a){m("UploadError",a.toString());w()},y=function(a,b){return function(c){A[a]=c;z(b)}},z=function(a){var b=0,c;for(c in A)b+=A[c];l(b/a)},J=function(b){if(0<b.length){if(1<b.length&&!d.multiple)return m("TooManyFiles","Only one file at a time"),!1;if(0<d.maxFiles&&b.length>d.maxFiles)return m("TooManyFiles","Only "+d.maxFiles+" files at a time"),!1;for(var c,e,f,g=0;g<b.length;g++){c=!1;e=b[g];f=e.name||e.fileName||"Unknown file";for(var h=0;h<n.length;h++){var k=a.mimetypes.getMimetype(e);
c=c||a.mimetypes.matchesMimetype(k,n[h])}if(!c)return m("WrongType",f+" isn't the right type of file"),!1;if(r){c=!1;for(h=0;h<r.length;h++)c=c||a.util.endsWith(f,r[h]);if(!c)return m("WrongType",f+" isn't the right type of file"),!1}if(e.size&&d.maxSize&&e.size>d.maxSize)return m("WrongSize",f+" is too large ("+e.size+" Bytes)"),!1}return!0}m("NoFilesFound","No files uploaded");return!1};return!0}}});"use strict";
filepicker.extend("responsiveImages",function(){function a(a){var c=document.querySelectorAll("img[data-fp-src]"),d,f;for(f=0;f<c.length;f++)d=c[f],(b(d)||!0===a)&&e(d)}function b(a){var b=a.getAttribute("src"),d=a.getAttribute("data-fp-on-resize")||m().onResize||"all";return b&&"all"!==d?"none"===d?!1:(a=f(b).width<c(a).width)&&"up"===d||!a&&"down"===d?!0:!1:!0}function c(a){var b={};if(null===a.parentNode)return b.width=n.windowUtils.getWidth(),b.height=n.windowUtils.getWidth(),b;if(a.alt&&!a.fpAltCheck)return a.parentNode.fpAltCheck=
!0,c(a.parentNode);b.width=a.offsetWidth;b.height=a.offsetHeight;return b.width?b:c(a.parentNode)}function d(a,b){var c=a.getAttribute("src")||a.getAttribute("data-fp-src");c!==b&&(a.src=b,c&&(a.onerror=function(){a.src=c;a.onerror=null}))}function f(a){return n.conversionsUtil.parseUrl(a).optionsDict.resize||{}}function e(a){var b=a.getAttribute("data-fp-src")||a.getAttribute("src"),c=a.getAttribute("data-fp-apikey")||n.apikey,e=m();n.apikey||(n.setKey(c),n.util.checkApiKey());d(a,n.conversionsUtil.buildUrl(b,
h(a,e),c))}function h(a,b){b=b||{};var d=c(a),e=a.getAttribute("data-fp-pixel-round")||b.pixelRound||10,d={resize:{width:l(d.width,e)}};if(e=b.signature||a.getAttribute("data-fp-signature"))d.security={signature:e,policy:b.policy||a.getAttribute("data-fp-policy")};return d}function g(a){window.addEventListener?window.addEventListener("resize",a,!1):window.attachEvent&&window.attachEvent("onresize",a)}function k(a){window.removeEventListener?window.removeEventListener("resize",a,!1):window.detachEvent&&
window.detachEvent("onresize",a)}function m(){return n.responsiveOptions||{}}function l(a,b){var c=0===b?1:b;return Math.ceil(a/c)*c}var n=this,r=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,e)},b)}}(function(){a()},200);return{activate:function(){a();g(r)},deactivate:function(){k(r)},update:function(b){if(void 0!==b)if("IMG"===b.nodeName)e(b);else throw new n.FilepickerException("Passed object is not an image");else a(!0)},
setResponsiveOptions:function(a){a=a||{};if("object"!==typeof a)throw new n.FilepickerException("Responsive options must be an object.");n.responsiveOptions=a},getResponsiveOptions:m,getElementDims:c,replaceSrc:d,getCurrentResizeParams:f,construct:e,constructParams:h,shouldConstruct:b,roundWithStep:l,addWindowResizeEvent:g,removeWindowResizeEvent:k}});"use strict";
filepicker.extend("widgets",function(){var a=this,b=function(a,b){var c;if(document.createEvent)c=document.createEvent("Event"),c.initEvent("change",!0,!1),c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.dispatchEvent(c);else if(document.createEventObject)c=document.createEventObject("Event"),c.eventPhase=2,c.currentTarget=c.srcElement=c.target=a,c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.fireEvent("onchange",c);else if(a.onchange)a.onchange(b)},c=function(a,b,c){for(var d in c){var e=c[d],f=a,g=b.getAttribute(d);
g&&(f[e]=g)}},d=function(b,d){d=d||"pick";var e={},f={"data-fp-mimetypes":"mimetypes","data-fp-extensions":"extensions","data-fp-maxSize":"maxSize","data-fp-maxFiles":"maxFiles","data-fp-store-location":"storeLocation","data-fp-store-path":"storePath","data-fp-store-container":"storeContainer","data-fp-store-region":"storeRegion","data-fp-store-access":"storeAccess","data-fp-image-quality":"imageQuality","data-fp-image-dim":"imageDim","data-fp-image-max":"imageMax","data-fp-image-min":"imageMin"},
g={"data-fp-video-recording-resolution":"videoRes","data-fp-webcam-dim":"webcamDim","data-fp-video-length":"videoLen","data-fp-audio-length":"audioLen"};c(e,b,{"data-fp-container":"container","data-fp-mimetype":"mimetype","data-fp-extension":"extension","data-fp-openTo":"openTo","data-fp-debug":"debug","data-fp-signature":"signature","data-fp-policy":"policy","data-fp-language":"language","data-fp-background-upload":"backgroundUpload","data-fp-hide":"hide","data-fp-custom-css":"customCss","data-fp-crop-force":"cropForce",
"data-fp-crop-ratio":"cropRatio","data-fp-crop-dim":"cropDim","data-fp-crop-max":"cropMax","data-fp-crop-min":"cropMin","data-fp-show-close":"showClose","data-fp-conversions":"conversions","data-fp-custom-text":"customText","data-fp-custom-source-container":"customSourceContainer","data-fp-custom-source-path":"customSourcePath"});"export"===d?(f=b.getAttribute("data-fp-suggestedFilename"))&&(e.suggestedFilename=f):"pick"===d&&(c(e,b,f),e.webcam={},c(e.webcam,b,g));if(f=b.getAttribute("data-fp-services")){f=
f.split(",");for(g=0;g<f.length;g++)f[g]=a.services[f[g].replace(" ","")]||f[g];e.services=f}if(f=b.getAttribute("data-fp-service"))e.service=a.services[f.replace(" ","")]||f;var f="extensions mimetypes imageDim imageMin imageMax cropDim cropMax cropMin webcamDim conversions".split(" "),h;for(h in f)g=f[h],e[g]&&(e[g]=e[g].split(","));(h=b.getAttribute("data-fp-apikey"))&&a.setKey(h);e.folders="true"===b.getAttribute("data-fp-folders");return e},f=function(c){var e=document.createElement("button");
e.setAttribute("type","button");e.innerHTML=c.getAttribute("data-fp-button-text")||"Pick File";e.className=c.getAttribute("data-fp-button-class")||c.className||"fp__btn";c.style.display="none";var f=d(c);"true"===c.getAttribute("data-fp-multiple")?e.onclick=function(){e.blur();a.pickMultiple(f,function(a){for(var d=[],e=0;e<a.length;e++)d.push(a[e].url);c.value=d.join();b(c,a)});return!1}:e.onclick=function(){e.blur();a.pick(f,function(a){c.value=a.url;b(c,[a])});return!1};c.parentNode.insertBefore(e,
c.nextSibling)},e=function(c){var e=c.getAttribute("data-fp-url");if(!e)return!0;var f=document.createElement("button");f.setAttribute("type","button");f.innerHTML=c.getAttribute("data-fp-button-text")||"Convert File";f.className=c.getAttribute("data-fp-button-class")||c.className||"fp__btn";c.style.display="none";var g=d(c,"convert");f.onclick=function(){f.blur();a.processImage(e,g,function(a){c.value=a.url;b(c,[a])});return!1};c.parentNode.insertBefore(f,c.nextSibling)},h=function(c){var e=document.createElement("div");
e.className=c.getAttribute("data-fp-class")||c.className;e.style.padding="1px";c.style.display="none";c.parentNode.insertBefore(e,c.nextSibling);var f=document.createElement("button");f.setAttribute("type","button");f.innerHTML=c.getAttribute("data-fp-button-text")||"Pick File";f.className=c.getAttribute("data-fp-button-class")||"fp__btn";e.appendChild(f);var h=document.createElement("div");k(h);h.innerHTML=c.getAttribute("data-fp-drag-text")||"Or drop files here";h.className=c.getAttribute("data-fp-drag-class")||
"";e.appendChild(h);var l=d(c),e="true"===c.getAttribute("data-fp-multiple");a.dragdrop.enabled()?m(h,e,l,c):h.innerHTML="&nbsp;";h.onclick=e?f.onclick=function(){f.blur();a.pickMultiple(l,function(a){for(var d=[],e=[],f=0;f<a.length;f++)d.push(a[f].url),e.push(a[f].filename);c.value=d.join();g(c,h,e.join(", "));b(c,a)});return!1}:f.onclick=function(){f.blur();a.pick(l,function(a){c.value=a.url;g(c,h,a.filename);b(c,[a])});return!1}},g=function(c,d,e){d.innerHTML=e;d.style.padding="2px 4px";d.style.cursor=
"default";d.style.width="";e=document.createElement("span");e.innerHTML="X";e.style.borderRadius="8px";e.style.fontSize="14px";e.style.cssFloat="right";e.style.padding="0 3px";e.style.color="#600";e.style.cursor="pointer";var f=function(e){e||(e=window.event);e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation();k(d);d.innerHTML=a.dragdrop.enabled?c.getAttribute("data-fp-drag-text")||"Or drop files here":"&nbsp;";c.value="";b(c);return!1};e.addEventListener?e.addEventListener("click",f,!1):e.attachEvent&&
e.attachEvent("onclick",f);d.appendChild(e)},k=function(a){a.style.border="1px dashed #AAA";a.style.display="inline-block";a.style.margin="0 0 0 4px";a.style.borderRadius="3px";a.style.backgroundColor="#F3F3F3";a.style.color="#333";a.style.fontSize="14px";a.style.lineHeight="22px";a.style.padding="2px 4px";a.style.verticalAlign="middle";a.style.cursor="pointer";a.style.overflow="hidden"},m=function(c,d,e,f){var h=c.innerHTML,k;a.dragdrop.makeDropPane(c,{multiple:d,maxSize:e.maxSize,mimetypes:e.mimetypes,
mimetype:e.mimetype,extensions:e.extensions,extension:e.extension,location:e.storeLocation,path:e.storePath,container:e.storeContainer,region:e.storeRegion,access:e.storeAccess,policy:e.policy,signature:e.signature,dragEnter:function(){c.innerHTML="Drop to upload";c.style.backgroundColor="#E0E0E0";c.style.border="1px solid #000"},dragLeave:function(){c.innerHTML=h;c.style.backgroundColor="#F3F3F3";c.style.border="1px dashed #AAA"},onError:function(a,b){"TooManyFiles"===a?c.innerHTML=b:"WrongType"===
a?c.innerHTML=b:"NoFilesFound"===a?c.innerHTML=b:"UploadError"===a&&(c.innerHTML="Oops! Had trouble uploading.")},onStart:function(a){a=document.createElement("div");a.style.height=c.offsetHeight-2+"px";a.style.backgroundColor="#0E90D2";a.style.width="2%";a.style.borderRadius="3px";c.style.width=c.offsetWidth+"px";c.style.padding="0";c.style.border="1px solid #AAA";c.style.backgroundColor="#F3F3F3";c.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)";c.innerHTML="";c.appendChild(a);k=a},onProgress:function(a){k&&
(k.style.width=a+"%")},onSuccess:function(a){for(var d=[],e=[],h=0;h<a.length;h++)d.push(a[h].url),e.push(a[h].filename);f.value=d.join();g(f,c,e.join(", "));b(f,a)}})},l=function(b){b.onclick=function(){var c=b.getAttribute("data-fp-url");if(!c)return!0;var e=d(b,"export");a.exportFile(c,e);return!1}},n=function(b){var c=b.getAttribute("data-fp-url"),d=b.getAttribute("data-fp-custom-css");if((c=a.util.getFPUrl(c))&&a.util.isFPUrl(c))c=c.replace("api/file/","api/preview/");else return!0;var e=document.createElement("iframe");
d&&(c=a.util.appendQueryToUrl(c,"css",d));e.src=c;e.width="100%";e.height="100%";b.appendChild(e)};return{constructPickWidget:f,constructDragWidget:h,constructExportWidget:l,buildWidgets:function(){if(document.querySelectorAll){var a,b=document.querySelectorAll('input[type="filepicker"]');for(a=0;a<b.length;a++)f(b[a]);b=document.querySelectorAll('input[type="filepicker-dragdrop"]');for(a=0;a<b.length;a++)h(b[a]);b=document.querySelectorAll('input[type="filepicker-convert"]');for(a=0;a<b.length;a++)e(b[a]);
var b=[],c=document.querySelectorAll("button[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll("a[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll('input[type="button"][data-fp-url]');for(a=0;a<c.length;a++)b.push(c[a]);for(a=0;a<b.length;a++)l(b[a]);b=document.querySelectorAll('[type="filepicker-preview"][data-fp-url]');for(a=0;a<b.length;a++)n(b[a]);try{var d=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");
g.type="text/css";g.styleSheet?g.styleSheet.cssText='.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}':
g.appendChild(document.createTextNode('.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}'));
d.appendChild(g)}catch(k){}}},constructWidget:function(b){b.jquery&&(b=b[0]);var c=b.getAttribute("type");"filepicker"===c?f(b):"filepicker-dragdrop"===c?h(b):"filepicker-preview"===c?n(b):b.getAttribute("data-fp-src")?a.responsiveImages.construct(b):l(b)}}});"use strict";
(function(){filepicker.internal(function(){this.util.addOnLoad(this.cookies.checkThirdParty);this.util.addOnLoad(this.widgets.buildWidgets);this.util.addOnLoad(this.responsiveImages.activate)});delete filepicker.internal;delete filepicker.extend;var a=filepicker._queue||[],b,c=a.length;if(c)for(var d=0;d<c;d++)b=a[d],filepicker[b[0]].apply(filepicker,b[1]);filepicker._queue&&delete filepicker._queue})();
(function(){window.app=window.app||{};var a=require("back_page/annotation_loader"),b=require("back_page/back_page");app.setup_annotation_form=function(c,d){d=d||{};var f=!!d.autofocus;$("#container").addClass("active");var e=c.referent.fragment_as_text.match(/[^\s]+/g).length<MAX_REFERENT_LENGTH;$("form#new_annotation").data("payload",c).toggle(e);var h=$(".new-embedded-annotation-container");if(e){h.find(".referent_content-referent").text($.html_to_text(c.referent.fragment));var g=c.referent.context_for_display;
h.find(".referent_content-context_before").text($.html_to_text(g.before_html));h.find(".referent_content-context_after").text($.html_to_text(g.after_html))}h.find(".validation_message").toggle(!e);h.find("a:not([target])").attr("target","_blank");h.on("submit","#new_annotation",function(c){var d=$(this),e=d.data("payload");$.post(d.attr("action"),d.serialize()+"&"+$.param(e),function(c){c=$(c);var d=$.extend(e.referent,{id:Number(c.attr("data-genius-referent-id")),path:c.attr("data-path"),api_path:c.attr("data-api-path"),
annotator_id:Number(c.attr("data-annotator-id")),featured:!0});a.add_to_cache(d.id,c);app.parent_channel.call({method:"finalize_new_annotation",params:d,success:function(a){d.anchor_offset=a.anchor_offset;b.referents.add([d]);b.referents.close_overlay();b.referents.activate(d.id,{align_with_vertical_offset:a.scroll_offset})},error:function(a,b){throw a+" "+b;}})});c.stopImmediatePropagation();return!1});$("#annotation_body").on("focus",function(){$(this).closest(".new-embedded-annotation-container").addClass("active")});
if(f)$(window).one("frame_visible",function(){$("#annotation_body").focus()});$(".web_annotator_signup, .web_annotator_login, .new-embedded-annotation-container .embedded_signup a").on("click",function(){var a=c.referent.range,b=new Date((new Date).getTime()+6E5);$.cookie("new_annotation_referent_range",JSON.stringify(a),{expires:b});app.set_desired_location_cookie()})}})();
(function(){window["com.genius.Genius"].require.define({"back_page/performance_report":function(a,b,c){var d=function(a,b,c){return"mark"===a.entryType&&0===a.name.indexOf("genius.")?(c=c||0,[{event:a.name.slice(7),timestamp:parseInt(a.startTime)+c,window:b}]):"resource"===a.entryType&&-1!==a.name.indexOf(document.location.host)&&-1!==a.name.indexOf(".js")?(c=c||0,[{event:"start "+a.name,timestamp:parseInt(a.startTime+c),window:b},{event:"finish "+a.name,timestamp:parseInt(a.responseEnd+c),window:b}]):
[]};a=function(a){var b=$.Deferred(),c=$.Deferred();this.back_page_data=b.promise();this.host_page_data=c.promise();b.resolve({timing:window.performance.timing,entries:window.performance.getEntries()});a.call({method:"performance_timing",success:function(a){c.resolve({timing:a[0],entries:a[1]})}})};_.assign(a.prototype,{observations:function(){return $.when(this.host_page_data,this.back_page_data).pipe(function(a,b){var c=[],g=-a.timing.navigationStart,k=b.timing.navigationStart-a.timing.navigationStart,
m;for(m in a.timing)c.push({event:m,timestamp:a.timing[m]+g,window:"host"}),c.push({event:m,timestamp:b.timing[m]+g,window:"back"});a.entries.forEach(function(a){c.push.apply(c,d(a,"host"))});b.entries.forEach(function(a){c.push.apply(c,d(a,"back",k))});return c.sort(function(a,b){return a.timestamp-b.timestamp}).filter(function(a){return 0<=a.timestamp})})},print_observations:function(){this.observations().then(function(a){a.forEach(function(a){console.debug(a.window,a.event,a.timestamp)})})}});
c.exports=a}})})();
(function(){var a=require("jschannel"),b=require("back_page/annotation_loader"),c=require("back_page/back_page"),d=require("back_page/tracking"),f;app.parent_channel=a.build({window:window.parent,origin:"*",scope:"com.genius.Genius",onReady:function(){window.performance.mark("genius.omniframeChannelReady")}});app.parent_channel.bind("track_page_load",function(a,b){d.track_page_load(b)});app.parent_channel.bind("track_annotated_page",function(){d.track_annotated_page()});app.parent_channel.bind("add_referents",function(a,
b){c.referents.add(b)});app.parent_channel.bind("all_referents_added",function(){c.referents.preload_first_page()});app.parent_channel.bind("display_annotation",function(a,b){c.referents.display(b.referent_id,{align_with_vertical_offset:b.referent_offset}).done(function(){if(f){var b=f,c=$(".annotation_container[data-id="+b.annotation_id+"]"),d=c.find(".annotation_explainer_message"),h=Hogan.compile($("#underlying_link_content").html());d.html(h.render(b));c.addClass("display_underlying_link");f=
null}a.complete()}).fail(function(b){404===b.status&&a.error(Error())});d.track_open_annotation(b);a.delayReturn(!0)});app.parent_channel.bind("fetch_annotation",function(a,c){b.load(c)});app.parent_channel.bind("new_annotation",function(a,b){b=b||{};var d=b.payload||{},f=!!b.autofocus;c.populate_overlay($($("#new_embedded_annotation").text()));app.setup_annotation_form(d,{autofocus:f});c.referents.open()});app.parent_channel.bind("frame_visible",function(){$(window).trigger("frame_visible")});app.parent_channel.bind("display_underlying_link",
function(a,b){f=b});app.set_up_autogrow();app.set_up_dirtyable_inputs();c.initialize();$(document).on("click","[data-return-to-referring-page]",function(){$.cookie("desired_location",document.referrer,{path:"/"});return!0});$(function(){var a=$.cookie("new_annotation_referent_range");a&&app.parent_channel.notify({method:"resume_new_annotation",params:JSON.parse(a)});$.removeCookie("new_annotation_referent_range")})})();
$(function(){filepicker.setKey(FILEPICKER_API_KEY);var a=function(a){return"http://s3.amazonaws.com/"+S3_IMAGE_BUCKET+"/"+encodeURIComponent(a)};$(".upload_photo").live("click",function(){filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:"COMPUTER URL FACEBOOK INSTAGRAM IMAGE_SEARCH WEBCAM".split(" "),policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(b){var c=$(".user_avatar_"+CURRENT_USER.id);c.wrap('<div class="loading_with_indicator">');var d=
a(b[0].key);$.ajax_with_retry({url:"/account",type:"POST",data:{_method:"put",user:{photo_url:d}},success:function(){c.attr("src",d).unwrap();$("#avatar_solicitation").remove()}})});return!1});$(document).on("click",".image_adder",function(){var b=$(this);filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:["IMAGE_SEARCH","COMPUTER"],openTo:"IMAGE_SEARCH",policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(c){c=a(c[0].key);b.closest("[data-filepicker-form]").find("[data-filepicker-target]").insertAtCursor(c)});
return!1})});window.performance.mark("genius.finishScriptEvaluation");
